(function() {
    var __webpack_modules__ = {
        81442: function(e, t, r) {
            var n = {
                "./lang.en.json": [73526, 73526],
                "./lang.ka.json": [90861, 90861],
                "./lang.kk.json": [20939, 20939],
                "./lang.ky.json": [87445, 87445],
                "./lang.ru.json": [17728, 17728],
                "./lang.uz.json": [68890, 68890]
            };
            function s(e) {
                if (!r.o(n, e))
                    return Promise.resolve().then((function() {
                        var t = new Error("Cannot find module '" + e + "'");
                        throw t.code = "MODULE_NOT_FOUND",
                        t
                    }
                    ));
                var t = n[e]
                  , s = t[0];
                return r.e(t[1]).then((function() {
                    return r.t(s, 19)
                }
                ))
            }
            s.keys = function() {
                return Object.keys(n)
            }
            ,
            s.id = 81442,
            e.exports = s
        },
        43185: function(e, t, r) {
            "use strict";
            var n = Object.defineProperty
              , s = Object.getOwnPropertySymbols
              , i = Object.prototype.hasOwnProperty
              , a = Object.prototype.propertyIsEnumerable
              , o = (e, t, r) => t in e ? n(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r;
            const l = "wb__lang";
            t.A = new class {
                constructor() {
                    this.currLang = wb.currentLanguage,
                    this.isDebug = "true" === localStorage.getItem("i18n_debug"),
                    this.initOptions = {
                        lng: this.currLang,
                        fallbackLng: "ru",
                        debug: this.isDebug,
                        saveMissing: !0,
                        missingKeyHandler: (e, t, r, n, s, i) => (i && i.ignoreMissingKey || console.warn("i18next missingKey: " + r),
                        r),
                        resources: {
                            ru: {
                                translation: window.__ru__
                            }
                        }
                    },
                    this.reactInstance = null
                }
                async init() {
                    const e = i18next.createInstance();
                    if (await e.init(this.initOptions),
                    this.isDebug) {
                        const t = e.t;
                        e.t = (...e) => `[[${t(...e)}]]`
                    }
                    await this.loadTranslationsModule(e),
                    wb.i18n = {
                        t: e.t,
                        plural: (t, r) => {
                            var n = r
                              , {count: l, displayCount: c} = n
                              , u = ( (e, t) => {
                                var r = {};
                                for (var n in e)
                                    i.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                                if (null != e && s)
                                    for (var n of s(e))
                                        t.indexOf(n) < 0 && a.call(e, n) && (r[n] = e[n]);
                                return r
                            }
                            )(n, ["count", "displayCount"]);
                            return e.t(`${t}.plural`, ( (e, t) => {
                                for (var r in t || (t = {}))
                                    i.call(t, r) && o(e, r, t[r]);
                                if (s)
                                    for (var r of s(t))
                                        a.call(t, r) && o(e, r, t[r]);
                                return e
                            }
                            )({
                                count: l || 0,
                                displayCount: c || l || 0,
                                interpolation: {
                                    escapeValue: !c
                                }
                            }, u))
                        }
                        ,
                        language: e.language
                    },
                    wb.i18n.changeLang = e => {
                        localStorage.setItem(l, e),
                        wb.currentLanguage = e,
                        location.reload()
                    }
                    ,
                    document.documentElement.lang = this.currLang,
                    localStorage.setItem(l, this.currLang),
                    $.views.helpers({
                        t: wb.i18n.t,
                        plural: wb.i18n.plural
                    })
                }
                async initReact() {
                    if (this.reactInstance)
                        return this.reactInstance;
                    {
                        const {initReactI18next: e} = await r.e(43685).then(r.t.bind(r, 43685, 23));
                        return this.reactInstance = i18next.createInstance(),
                        await this.reactInstance.use(e).init(this.initOptions),
                        await this.loadTranslationsModule(this.reactInstance),
                        this.reactInstance
                    }
                }
                async loadTranslationsModule(e) {
                    try {
                        if ("ru" !== this.currLang) {
                            const t = new Promise(( (e, t) => setTimeout(( () => t(new Error("загрузка перевода превысила 15 секунд"))), 15e3)))
                              , n = r(81442)(`./lang.${this.currLang}.json`)
                              , s = await Promise.race([n, t]);
                            s && e.addResourceBundle(this.currLang, "translation", s.default)
                        }
                    } catch (e) {
                        console.log("Translation loading error:", e)
                    }
                }
            }
        },
        85483: function() {
            "use strict";
            const e = {}
              , t = e => e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2;
            let r = t;
            const n = (e, ...t) => e.replace(/{(\d+)}/g, ( (e, r) => void 0 !== t[r] ? String(t[r]) : e))
              , s = t => {
                const r = e[t];
                return {
                    value: r || t,
                    notfound: !r
                }
            }
              , i = e => "string" == typeof e && e.includes("{0}");
            $.localize = (t, ...a) => {
                if (!a.length && (e => Boolean(e))(t))
                    return "object" == typeof (l = t) && null !== l && "pluralRule"in l ? ("function" == typeof (o = t.pluralRule) && 1 === o.length && (r = o),
                    "") : s(t).value;
                var o, l;
                const c = a[0];
                if (1 === a.length && (e => "object" == typeof e)(c))
                    return Object.assign(e, c),
                    "";
                if (a.length > 1 && i(t) && (u = a,
                Array.isArray(u))) {
                    const e = s(t);
                    return n(e.value, ...a)
                }
                var u;
                return ""
            }
            ,
            $.pluralize = (e, ...a) => {
                if ("number" != typeof e)
                    return "";
                if (0 === a.length)
                    return String(e);
                const o = s(a.join(","))
                  , l = o.value.split(",")
                  , c = o.notfound ? t(e) : r(e)
                  , u = l[c < l.length ? c : l.length - 1];
                return i(u) ? n(u, e) : u
            }
        },
        67496: function(e, t, r) {
            "use strict";
            var n = r(59067)
              , s = Object.defineProperty
              , i = (e, t, r) => ( (e, t, r) => t in e ? s(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var a = class {
                constructor() {
                    i(this, "el", null),
                    i(this, "imgs", null),
                    i(this, "pic", null),
                    i(this, "data", null),
                    i(this, "timer", null),
                    i(this, "currentImg", null),
                    i(this, "currentImgIdx", -1),
                    this.pic = null,
                    this.data = null,
                    this._bindEvents()
                }
                start(e) {
                    return this.timer && (this.timer.stop(),
                    this.timer = null),
                    this.imgs = Array.from(e.querySelectorAll(".j-banners-carousel-item")),
                    this.imgs.length > 1 && (this.timer = new n.A({
                        func: this.updateImage.bind(this),
                        interval: 4e3
                    }),
                    this.el = e,
                    this.currentImg = e.querySelector(".j-banners-carousel-item.active"),
                    null == this.currentImg ? (this.currentImgIdx = 0,
                    this.imgs[this.currentImgIdx].classList.add("active")) : this.currentImgIdx = this.imgs.indexOf(this.currentImg),
                    this.timer.start()),
                    this
                }
                pause() {
                    var e;
                    null == (e = this.timer) || e.stop()
                }
                resume() {
                    var e;
                    null == (e = this.timer) || e.start()
                }
                stop() {
                    var e;
                    null == (e = this.timer) || e.stop(),
                    this.timer = null
                }
                updateImage() {
                    if (!this.imgs || !this.currentImg)
                        return;
                    let e = this.currentImgIdx + 1;
                    e >= this.imgs.length && (e = 0);
                    const t = this.imgs[e];
                    if (this.currentImg.classList.remove("active"),
                    t.classList.add("active"),
                    this.currentImg = t,
                    this.currentImgIdx = e,
                    "d" === wb.settings.displayMode) {
                        const e = document.querySelector(".j-tooltip-advertising");
                        e && e.elemTarget.closest(".j-slider-banners") && e.close()
                    }
                }
                _bindEvents() {
                    window.addEventListener("spaTransition", ( () => this.stop()))
                }
            }
              , o = r(8379)
              , l = Object.defineProperty
              , c = Object.getOwnPropertySymbols
              , u = Object.prototype.hasOwnProperty
              , d = Object.prototype.propertyIsEnumerable
              , h = (e, t, r) => t in e ? l(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , p = (e, t) => {
                for (var r in t || (t = {}))
                    u.call(t, r) && h(e, r, t[r]);
                if (c)
                    for (var r of c(t))
                        d.call(t, r) && h(e, r, t[r]);
                return e
            }
              , m = (e, t, r) => h(e, "symbol" != typeof t ? t + "" : t, r);
            class b {
                constructor(e) {
                    m(this, "bannersData"),
                    m(this, "unobserveVI"),
                    this.bannersData = this._getBannersData(e.iframeBanners),
                    this.unobserveVI = e.unobserveVI
                }
                send1pxShowedEvent(e) {
                    const t = this._getMainBanner(e);
                    if (!t)
                        return;
                    const r = this.bannersData.get(t);
                    if (!r)
                        return;
                    if (r.iframeShowing1pxEventSended)
                        return;
                    r.iframeShowing1pxEventSended = !0;
                    const n = this._getEventData("Banner_N", t);
                    WbSpaModel.prototype.$analitic.sendBannersWbaEventByData(n)
                }
                sendIframeReadyEvent(e) {
                    if (e.isDuplicate)
                        return;
                    const t = this._getEventData("Banner_SI", e);
                    WbSpaModel.prototype.$analitic.sendBannersWbaEventByData(t)
                }
                sendIframeEvent(e, t) {
                    if (e.isDuplicate || !t)
                        return;
                    const r = t.name
                      , n = t.params
                      , s = this._getEventData(r, e)
                      , i = p(p({}, s), n);
                    WbSpaModel.prototype.$analitic.sendBannersWbaEventByData(i)
                }
                iframeShowing(e, t) {
                    const r = this._getMainBanner(e);
                    if (!r)
                        return;
                    const n = this.bannersData.get(r);
                    if (!n)
                        return;
                    if (n.iframeShowingEventSended)
                        return;
                    !0 === t && (n.visibleVI = !0);
                    if (!(r.isHTML5 ? r.isReady() : r.isVideoPlaying()) || !n.visibleVI)
                        return;
                    const s = r.isHTML5 ? 1e3 : 2e3;
                    n.iframeShowingTimerId = setTimeout(( () => {
                        this._trySendIframeShowingEvent(n),
                        this._removeShowingTimer(n)
                    }
                    ), s)
                }
                iframeStopped(e) {
                    if (e.isDuplicate)
                        return;
                    const t = this.bannersData.get(e);
                    t && (t.visibleVI = !1,
                    this._removeShowingTimer(t))
                }
                _getMainBanner(e) {
                    return e.isDuplicate ? e.mainIframeBanner : e
                }
                _getBannersData(e) {
                    const t = new Map;
                    return null == e || e.forEach((e => {
                        const r = {
                            iframeBanner: e,
                            iframeShowingTimerId: null,
                            iframeShowingEventSended: !1,
                            iframeShowing1pxEventSended: !1,
                            visibleVI: !1
                        };
                        t.set(e, r)
                    }
                    )),
                    t
                }
                _getEventData(e, t) {
                    var r;
                    const n = t.banner
                      , s = this._getHTMLBanner(t);
                    return n && s ? {
                        eventName: e,
                        bannerName: n.alt,
                        location: s.dataset.analiticsCode,
                        link: n.href,
                        ind: s.dataset.bannerIndex,
                        bid: n.id,
                        withPromoMark: Boolean(n.ordBannerMark),
                        pixelSrc: n.pixelSrc,
                        adv_params: (null == (r = n.htmlData) ? void 0 : r.data) || "",
                        banner_load_time: n.loadTime
                    } : null
                }
                _getHTMLBanner(e) {
                    return e.bannerHTML.querySelector(".j-banner")
                }
                _removeShowingTimer(e) {
                    null !== e.iframeShowingTimerId && (clearTimeout(e.iframeShowingTimerId),
                    e.iframeShowingTimerId = null)
                }
                _trySendIframeShowingEvent(e) {
                    (e.iframeBanner.isHTML5 || e.iframeBanner.isVideoPlaying()) && (e.iframeShowingEventSended || (e.iframeShowingEventSended = !0,
                    this._sendBannerShowingStatEvent(e.iframeBanner),
                    this.unobserveVI(e.iframeBanner)))
                }
                _sendBannerShowingStatEvent(e) {
                    const t = this._getEventData("Banner_VI", e);
                    WbSpaModel.prototype.$analitic.sendBannersWbaEventByData(t)
                }
            }
            var g = Object.defineProperty
              , y = (e, t, r) => ( (e, t, r) => t in e ? g(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class f {
                constructor(e) {
                    y(this, "observer1px"),
                    y(this, "observer50VI"),
                    y(this, "handlers", new Map);
                    const t = [];
                    e.bannersData.forEach((e => {
                        this.handlers.set(e.banner.bannerHTML, e),
                        t.push(e.banner.bannerHTML)
                    }
                    )),
                    this.observer1px = this._getObserverOn1px(t),
                    this.observer50VI = this._getObserver50VI(t)
                }
                unobserveVI(e) {
                    var t, r;
                    null == (r = (t = this.observer50VI).unobserveItem) || r.call(t, e)
                }
                destroy() {
                    var e, t;
                    null == (e = this.observer1px) || e.destroy(),
                    null == (t = this.observer50VI) || t.destroy()
                }
                _getObserver50VI(e) {
                    if (navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0)
                        return {
                            destroy: () => {}
                        };
                    const t = WbSpaModel.prototype.$observerHelper.getSimpleObserver(( (e, t, r) => {
                        const n = this.handlers.get(e);
                        n && n.callback(n.banner, !1, r)
                    }
                    ), {
                        threshold: .5
                    }, {
                        keepObserve: !0,
                        sendOutEvent: !0
                    });
                    return t.observe(e),
                    {
                        destroy: t.destroy,
                        unobserveItem: t.unobserveItem
                    }
                }
                _getObserverOn1px(e) {
                    if (navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0)
                        return {
                            destroy: () => {}
                        };
                    const t = WbSpaModel.prototype.$observerHelper.getSimpleObserver((e => {
                        const t = this.handlers.get(e);
                        t && t.callback(t.banner, !0)
                    }
                    ), {
                        threshold: 0
                    });
                    return t.observe(e),
                    {
                        destroy: t.destroy
                    }
                }
            }
            const v = "served"
              , w = "ready"
              , _ = "started"
              , S = "paused"
              , C = "resumed"
              , I = "completed"
              , k = "error"
              , P = "trackAnalytics"
              , M = "init"
              , T = "visible"
              , E = "invisible"
              , D = "VISIBLE"
              , A = "INVISIBLE"
              , O = "ACTIVE"
              , B = "NOT_ACTIVE";
            var L = Object.defineProperty
              , x = (e, t, r) => ( (e, t, r) => t in e ? L(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const R = "CREATED"
              , F = "SERVICE_READY"
              , j = "IFRAME_READY"
              , N = "CONTENT_READY"
              , U = "VIDEO_INIT_START_EVENT"
              , W = "VIDEO_STARTED"
              , H = "VIDEO_PAUSED"
              , q = "VIDEO_RESUMED"
              , V = "VIDEO_COMPLETED"
              , z = "ERROR"
              , G = {
                CREATED: 1,
                SERVICE_READY: 2,
                IFRAME_READY: 3,
                CONTENT_READY: 4,
                VIDEO_INIT_START_EVENT: 5,
                VIDEO_STARTED: 6,
                VIDEO_PAUSED: 7,
                VIDEO_RESUMED: 8,
                VIDEO_COMPLETED: 9,
                ERROR: 100
            };
            class K {
                constructor(e) {
                    x(this, "_actions"),
                    x(this, "_isHTML5"),
                    x(this, "currentState", R),
                    this._actions = e.actions,
                    this._isHTML5 = e.isHTML5
                }
                _doOnState(e) {
                    const t = this._actions[e];
                    null == t || t()
                }
                isServiceReady() {
                    return G[this.currentState] >= G.SERVICE_READY
                }
                isReady() {
                    return G[this.currentState] >= G.CONTENT_READY
                }
                isVideoPlaying() {
                    return this.currentState === W || this.currentState === q
                }
                goToState(e) {
                    if (e === z)
                        return this.currentState = e,
                        void this._doOnState(this.currentState);
                    e !== this.currentState && this._canGoToState(e) && (this.currentState = e,
                    this._doOnState(this.currentState))
                }
                _canGoToState(e) {
                    return this.currentState !== z && (e === z || (G[e] > G[this.currentState] || !this._isHTML5 && (this.currentState === q && e === H || this.currentState === V && e === N)))
                }
            }
            var Q = Object.defineProperty
              , J = (e, t, r) => ( (e, t, r) => t in e ? Q(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class Y {
                constructor(e) {
                    J(this, "started", !1),
                    J(this, "waitingTimeForStartVideo", 2e3),
                    J(this, "slideDuration"),
                    J(this, "actions"),
                    J(this, "slideHoldTimerId", null),
                    J(this, "videoUploadTimerId", null),
                    J(this, "videoEnded", !1),
                    J(this, "isError", !1),
                    this.slideDuration = e.slideDuration,
                    this.actions = e.actions
                }
                start(e) {
                    this.started = !0,
                    e && this._setTimerOnUploadVideo(),
                    this.slideHoldTimerId = setTimeout(( () => {
                        this._onBaseHoldTimeEnded()
                    }
                    ), this.slideDuration)
                }
                stop() {
                    this.started = !1,
                    this._removeVideoUploadTimer(),
                    this._removeSlideHoldTimerId(),
                    this.videoEnded = !1,
                    this.isError = !1
                }
                onVideoStarted() {
                    this.isError || (this._removeVideoUploadTimer(),
                    this.actions.stopSlide(),
                    this._showVideoContent(!0))
                }
                onVideoEnded() {
                    this.videoEnded = !0,
                    this._tryChangeSlide()
                }
                onSlideInactive() {
                    this.isError || this.videoEnded && this.started && this.stop()
                }
                setError() {
                    this.isError = !0,
                    this._removeVideoUploadTimer(),
                    this._tryChangeSlide()
                }
                _onBaseHoldTimeEnded() {
                    this._removeSlideHoldTimerId(),
                    this._tryChangeSlide()
                }
                _tryChangeSlide() {
                    if (this.isError)
                        return this._showVideoContent(!1),
                        void (null === this.slideHoldTimerId && this._changeSlide());
                    this.videoEnded && this._changeSlide()
                }
                _showVideoContent(e) {
                    this.actions.showVideoContent(e)
                }
                _changeSlide() {
                    this.actions.changeSlide()
                }
                _setTimerOnUploadVideo() {
                    this.videoUploadTimerId = setTimeout(( () => {
                        this._setTimerError()
                    }
                    ), this.waitingTimeForStartVideo)
                }
                _setTimerError() {
                    this.isError = !0,
                    this.actions.setError()
                }
                _removeVideoUploadTimer() {
                    null !== this.videoUploadTimerId && (clearTimeout(this.videoUploadTimerId),
                    this.videoUploadTimerId = null)
                }
                _removeSlideHoldTimerId() {
                    null !== this.slideHoldTimerId && (clearTimeout(this.slideHoldTimerId),
                    this.slideHoldTimerId = null)
                }
            }
            var X = Object.defineProperty
              , Z = (e, t, r) => ( (e, t, r) => t in e ? X(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class ee {
                constructor(e) {
                    Z(this, "banner"),
                    Z(this, "iframe"),
                    Z(this, "bannerHTML"),
                    Z(this, "bannerSlideIndex"),
                    Z(this, "isHTML5"),
                    Z(this, "isDuplicate"),
                    Z(this, "mainIframeBanner"),
                    Z(this, "duplicates", null),
                    Z(this, "carouselHandlers"),
                    Z(this, "incomingIframeEvents"),
                    Z(this, "statEvents"),
                    Z(this, "needInitBanner", !1),
                    Z(this, "isVisible", !1),
                    Z(this, "isActive", !1),
                    Z(this, "stateMachine"),
                    Z(this, "slideHolder"),
                    e.banner.isIframeBanner = !0,
                    this.banner = e.banner,
                    this.iframe = e.iframe,
                    this.bannerHTML = e.bannerHTML,
                    this.isHTML5 = e.banner.isHtml5,
                    this.bannerSlideIndex = e.bannerSlideIndex,
                    this.isDuplicate = e.isDuplicate,
                    this.mainIframeBanner = e.mainIframeBanner || null,
                    this.carouselHandlers = e.carouselHandlers,
                    this.incomingIframeEvents = e.incomingIframeEvents,
                    this.statEvents = e.statEvents,
                    this.stateMachine = this._getStateMachine(),
                    this.slideHolder = this._getSlideHolder(e.slideDuration)
                }
                setDuplicates(e) {
                    e.length && (this.duplicates = e)
                }
                isVideoPlaying() {
                    return this.stateMachine.isVideoPlaying()
                }
                initIframeBanner() {
                    if (this.stateMachine.currentState === z)
                        return;
                    (this.stateMachine.currentState === R || this.stateMachine.currentState === F) && (this.incomingIframeEvents.sendInitEvent(this),
                    this.stateMachine.isServiceReady() || (this.needInitBanner = !0))
                }
                handleIframeResponseEvent(e) {
                    switch (e.event) {
                    case v:
                        this.stateMachine.goToState(F);
                        break;
                    case w:
                        this.stateMachine.goToState(j);
                        break;
                    case _:
                        this.stateMachine.goToState(W);
                        break;
                    case S:
                        this.stateMachine.goToState(H);
                        break;
                    case C:
                        this.stateMachine.goToState(q);
                        break;
                    case I:
                        this.stateMachine.goToState(V);
                        break;
                    case k:
                        this.stateMachine.goToState(z)
                    }
                }
                handleObserverEvent(e) {
                    var t;
                    if (this.stateMachine.currentState !== z)
                        switch (null == (t = this.duplicates) || t.forEach((t => {
                            t.handleObserverEvent(e)
                        }
                        )),
                        e) {
                        case D:
                            this.isVisible = !0,
                            this._initShowVideo();
                            break;
                        case A:
                            this.isVisible = !1,
                            this._stopShowingIframe()
                        }
                }
                handleCarouselEvent(e) {
                    var t, r;
                    if (this.stateMachine.currentState !== z)
                        switch (null == (t = this.duplicates) || t.forEach((t => {
                            t.handleCarouselEvent(e)
                        }
                        )),
                        e) {
                        case O:
                            this.isActive = !0,
                            this._initShowVideo();
                            break;
                        case B:
                            this.isActive = !1,
                            this._stopShowingIframe(),
                            this.stateMachine.currentState === V && (null == (r = this.slideHolder) || r.onSlideInactive())
                        }
                }
                isReady() {
                    return this.stateMachine.isReady()
                }
                _getSlideHolder(e) {
                    if (this.isHTML5)
                        return null;
                    const t = {
                        setError: this._doOnError.bind(this),
                        stopSlide: () => {
                            this.isDuplicate || this.carouselHandlers.stopSlide(this.bannerSlideIndex)
                        }
                        ,
                        changeSlide: () => {
                            this.isDuplicate || (this._doOnSlideChange(),
                            this.carouselHandlers.changeSlide(this.bannerSlideIndex))
                        }
                        ,
                        showVideoContent: this._changeActiveContainer.bind(this)
                    };
                    return new Y({
                        slideDuration: e,
                        actions: t
                    })
                }
                _getStateMachine() {
                    const e = {
                        actions: {
                            CREATED: () => {}
                            ,
                            SERVICE_READY: this._doOnServiceReady.bind(this),
                            IFRAME_READY: this._doOnIframeReady.bind(this),
                            CONTENT_READY: this._doOnContentReady.bind(this),
                            VIDEO_INIT_START_EVENT: this._doOnInitStartVideo.bind(this),
                            VIDEO_STARTED: this._doOnVideoStarted.bind(this),
                            VIDEO_PAUSED: this._doOnVideoPaused.bind(this),
                            VIDEO_RESUMED: this._doOnVideoResumed.bind(this),
                            VIDEO_COMPLETED: this._doOnVideoCompleted.bind(this),
                            ERROR: this._doOnError.bind(this)
                        },
                        isHTML5: this.isHTML5
                    };
                    return new K(e)
                }
                _doOnError() {
                    var e;
                    this.isHTML5 && this._changeActiveContainer(!1),
                    null == (e = this.slideHolder) || e.setError()
                }
                _doOnServiceReady() {
                    this.needInitBanner && this.incomingIframeEvents.sendInitEvent(this)
                }
                _doOnIframeReady() {
                    this.stateMachine.goToState(N)
                }
                _doOnContentReady() {
                    var e, t;
                    if (this.stateMachine.currentState === z)
                        return;
                    if (this.isHTML5)
                        return this._changeActiveContainer(!0),
                        void this.statEvents.iframeShowing(this);
                    (null == (e = this.slideHolder) ? void 0 : e.started) ? null == (t = this.slideHolder) || t.stop() : this._canPlayVideo() && this.stateMachine.goToState(U)
                }
                _doOnInitStartVideo() {
                    var e;
                    this.stateMachine.currentState !== z && (this.incomingIframeEvents.sendVisibleEvent(this),
                    null == (e = this.slideHolder) || e.start(!0))
                }
                _doOnVideoStarted() {
                    var e;
                    this.stateMachine.currentState !== z && (null == (e = this.slideHolder) || e.onVideoStarted(),
                    this._canPlayVideo() ? this.statEvents.iframeShowing(this) : this.stateMachine.goToState(H))
                }
                _doOnVideoPaused() {
                    var e;
                    null == (e = this.slideHolder) || e.stop(),
                    this.statEvents.iframeStopped(this)
                }
                _doOnVideoResumed() {
                    var e, t;
                    this.stateMachine.currentState !== z && (null == (e = this.slideHolder) || e.start(!1),
                    null == (t = this.slideHolder) || t.onVideoStarted(),
                    this.statEvents.iframeShowing(this))
                }
                _doOnVideoCompleted() {
                    var e;
                    null == (e = this.slideHolder) || e.onVideoEnded()
                }
                _doOnSlideChange() {
                    this.stateMachine.currentState !== z && this.stateMachine.goToState(N)
                }
                _canPlayVideo() {
                    return this.stateMachine.isReady() && this.isVisible && this.isActive
                }
                _initShowVideo() {
                    this._canPlayVideo() && (this.stateMachine.currentState !== V ? this.stateMachine.currentState !== N ? this.incomingIframeEvents.sendVisibleEvent(this) : this.stateMachine.goToState(U) : this.stateMachine.goToState(N))
                }
                _stopShowingIframe() {
                    this.statEvents.iframeStopped(this),
                    this.incomingIframeEvents.sendInvisibleEvent(this)
                }
                _changeActiveContainer(e) {
                    this.stateMachine.currentState === z && (e = !1),
                    this.bannerHTML.classList.toggle("iframe-show", e)
                }
            }
            var te = Object.defineProperty
              , re = (e, t, r) => ( (e, t, r) => t in e ? te(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class ne {
                constructor() {
                    re(this, "_handlers", new Map),
                    re(this, "_handleMessageFunc", (e => this._handleMessage(e))),
                    this._init()
                }
                registerIframe(e) {
                    var t;
                    (null == (t = e.target.iframe) ? void 0 : t.contentWindow) && this._handlers.set(e.target.iframe.contentWindow, e)
                }
                sendMessage(e, t) {
                    e && e.contentWindow && e.contentWindow.postMessage(t, "*")
                }
                destroy() {
                    window.removeEventListener("message", this._handleMessageFunc)
                }
                _init() {
                    window.addEventListener("message", this._handleMessageFunc)
                }
                _handleMessage(e) {
                    var t;
                    if ((null == (t = null == e ? void 0 : e.data) ? void 0 : t.type) && -1 !== e.data.type.indexOf("webpack"))
                        return;
                    const {source: r, data: n} = e;
                    if (!r || !this._handlers.has(r))
                        return;
                    const s = n ? JSON.parse(n) : null
                      , i = this._handlers.get(r);
                    if (!i || null === s)
                        return;
                    const a = {
                        target: i.target,
                        response: s
                    };
                    i.callback(a)
                }
            }
            var se = Object.defineProperty
              , ie = (e, t, r) => ( (e, t, r) => t in e ? se(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class ae {
                constructor(e) {
                    ie(this, "bannersCountForLazy", 2),
                    ie(this, "duplicateClass", "swiper-slide-duplicate"),
                    ie(this, "container"),
                    ie(this, "slideDuration"),
                    ie(this, "carouselHandlers"),
                    ie(this, "iframeHandler", null),
                    ie(this, "bannersObserver", null),
                    ie(this, "bannersAnalyticsHelper", null),
                    ie(this, "allBanners", []),
                    ie(this, "iframeBanners", []),
                    ie(this, "currentActiveBanner", null),
                    this.container = e.container,
                    this.slideDuration = e.slideDuration,
                    this.carouselHandlers = e.handlers
                }
                setCarouselVisible(e) {
                    const t = e ? D : A;
                    this.iframeBanners.forEach((e => {
                        e.handleObserverEvent(t)
                    }
                    ))
                }
                setBannerAsActiveByIndex(e) {
                    if (!this.allBanners.length)
                        return;
                    if (this.currentActiveBanner && this._isIframeBanner(this.currentActiveBanner)) {
                        if (this.currentActiveBanner.bannerSlideIndex === e)
                            return;
                        this.currentActiveBanner.handleCarouselEvent(B)
                    }
                    this._initIframeBanners(e);
                    const t = this.allBanners[e];
                    this._isIframeBanner(t) ? (this.currentActiveBanner = t,
                    t.handleCarouselEvent(O)) : this.currentActiveBanner = null
                }
                destroy() {
                    var e, t;
                    null == (e = this.bannersObserver) || e.destroy(),
                    null == (t = this.iframeHandler) || t.destroy()
                }
                init(e) {
                    if (!e)
                        return;
                    const t = this._getBanners(e);
                    !!(null == t ? void 0 : t.iframeBanners.length) && (this.allBanners = t.allBanners,
                    this.iframeBanners = t.iframeBanners,
                    this.iframeHandler = new ne,
                    this._registerIframeBanners(this.iframeBanners),
                    this.bannersAnalyticsHelper = this._getBannersAnalyticsHelper(this.iframeBanners),
                    this.bannersObserver = this._getObserver(this.iframeBanners))
                }
                bannerIsShowingOn50perc(e) {
                    const t = this.iframeBanners.find((t => t.bannerSlideIndex === e));
                    t && this._iframeShowing(t)
                }
                _getBanners(e) {
                    if (!(null == e ? void 0 : e.length))
                        return null;
                    const t = []
                      , r = [];
                    return null == e || e.forEach(( (e, n) => {
                        const s = this._tryGetIframeBanner(e, n);
                        s ? (r.push(s),
                        t.push(s)) : t.push(e)
                    }
                    )),
                    {
                        allBanners: t,
                        iframeBanners: r
                    }
                }
                _getIframeWithDuplicates(e) {
                    const t = this.container.querySelectorAll(`#${e.iframeId}`)
                      , r = {
                        main: null,
                        duplicates: []
                    };
                    return null == t || t.forEach((e => {
                        if (!(0,
                        o.tH)(e, HTMLIFrameElement))
                            return;
                        const t = e.closest(".j-iframe-banner");
                        if (!(0,
                        o.tH)(t, HTMLElement))
                            return;
                        const n = {
                            iframe: e,
                            bannerHTML: t
                        };
                        t.classList.contains(this.duplicateClass) ? r.duplicates.push(n) : r.main = n
                    }
                    )),
                    r
                }
                _tryGetIframeBanner(e, t) {
                    if (!e.iframeId)
                        return null;
                    const r = this._getIframeWithDuplicates(e);
                    return null === r.main ? null : this._createIframeBannerWithDuplicates(e, r, t)
                }
                _createIframeBannerWithDuplicates(e, t, r) {
                    if (!t.main)
                        return null;
                    const n = this._createIframeBanner(e, t.main, r)
                      , s = t.duplicates.map((t => this._createIframeBanner(e, t, r, n)));
                    return n.setDuplicates(s),
                    n
                }
                _createIframeBanner(e, t, r, n) {
                    const s = {
                        banner: e,
                        iframe: t.iframe,
                        bannerHTML: t.bannerHTML,
                        incomingIframeEvents: {
                            sendInitEvent: this._sendInitEvent.bind(this),
                            sendVisibleEvent: this._sendVisibleEvent.bind(this),
                            sendInvisibleEvent: this._sendInvisibleEvent.bind(this)
                        },
                        carouselHandlers: this.carouselHandlers,
                        bannerSlideIndex: r,
                        slideDuration: this.slideDuration,
                        statEvents: {
                            iframeShowing: this._iframeShowing.bind(this),
                            iframeStopped: this._iframeStopped.bind(this)
                        },
                        isDuplicate: !!n,
                        mainIframeBanner: n
                    };
                    return new ee(s)
                }
                _iframeShowing(e, t) {
                    var r;
                    null == (r = this.bannersAnalyticsHelper) || r.iframeShowing(e, t)
                }
                _iframeStopped(e) {
                    var t;
                    null == (t = this.bannersAnalyticsHelper) || t.iframeStopped(e)
                }
                _sendInitEvent(e) {
                    const t = this._getMessageForSendIframeEvent(e, M);
                    this._sendMessage(e.iframe, t)
                }
                _sendVisibleEvent(e) {
                    const t = this._getMessageForSendIframeEvent(e, T);
                    this._sendMessage(e.iframe, t)
                }
                _sendInvisibleEvent(e) {
                    const t = this._getMessageForSendIframeEvent(e, E);
                    this._sendMessage(e.iframe, t)
                }
                _getMessageForSendIframeEvent(e, t) {
                    var r, n;
                    if (t === T || t === E)
                        return {
                            event: t,
                            payload: {}
                        };
                    const s = {
                        xml: null == (r = e.banner.htmlData) ? void 0 : r.xml,
                        data: null == (n = e.banner.htmlData) ? void 0 : n.data
                    };
                    return {
                        event: M,
                        payload: s
                    }
                }
                _getBannersAnalyticsHelper(e) {
                    const t = {
                        iframeBanners: e,
                        unobserveVI: this._unobserveVI.bind(this)
                    };
                    return new b(t)
                }
                _unobserveVI(e) {
                    var t;
                    e.bannerHTML && (null == (t = this.bannersObserver) || t.unobserveVI(e.bannerHTML))
                }
                _getObserver(e) {
                    const t = [];
                    return e.forEach((e => {
                        var r;
                        const n = this._getBannerDataForObserver(e);
                        t.push(n),
                        null == (r = e.duplicates) || r.forEach((e => {
                            const r = this._getBannerDataForObserver(e);
                            t.push(r)
                        }
                        ))
                    }
                    )),
                    new f({
                        bannersData: t
                    })
                }
                _getBannerDataForObserver(e) {
                    return {
                        banner: e,
                        callback: this._handleObserverEvent.bind(this)
                    }
                }
                _registerIframeBanners(e) {
                    e.forEach((e => {
                        var t;
                        this._registerIframe(e),
                        null == (t = e.duplicates) || t.forEach((e => {
                            this._registerIframe(e)
                        }
                        ))
                    }
                    ))
                }
                _registerIframe(e) {
                    var t;
                    const r = {
                        target: e,
                        callback: e => {
                            this._handleMessage(e)
                        }
                    };
                    null == (t = this.iframeHandler) || t.registerIframe(r)
                }
                _sendMessage(e, t) {
                    var r;
                    null == (r = this.iframeHandler) || r.sendMessage(e, t)
                }
                _handleMessage(e) {
                    var t, r, n;
                    const s = e.response
                      , i = e.target
                      , a = s.event;
                    a !== P ? (a === w && (null == (n = this.bannersAnalyticsHelper) || n.sendIframeReadyEvent(i)),
                    i.handleIframeResponseEvent(s)) : null == (r = this.bannersAnalyticsHelper) || r.sendIframeEvent(i, null == (t = e.response) ? void 0 : t.payload)
                }
                _handleObserverEvent(e, t, r) {
                    var n;
                    t ? null == (n = this.bannersAnalyticsHelper) || n.send1pxShowedEvent(e) : r ? this._iframeStopped(e) : this._iframeShowing(e, !0)
                }
                _isIframeBanner(e) {
                    return e && "iframe"in e && "banner"in e
                }
                _initIframeBanners(e) {
                    this._getCircularSlice(this.allBanners, e).forEach((e => {
                        var t;
                        e && this._isIframeBanner(e) && (e.initIframeBanner(),
                        null == (t = e.duplicates) || t.forEach((e => {
                            e.initIframeBanner()
                        }
                        )))
                    }
                    ))
                }
                _getCircularSlice(e, t) {
                    const r = 2 * this.bannersCountForLazy + 1
                      , n = e.length;
                    return n < r ? e : Array.from({
                        length: r
                    }, ( (r, s) => e[(t - this.bannersCountForLazy + s + n) % n]))
                }
            }
            var oe = r(51799)
              , le = r(22882)
              , ce = r(59054)
              , ue = r(91341)
              , de = r(82746)
              , he = Object.defineProperty
              , pe = Object.defineProperties
              , me = Object.getOwnPropertyDescriptors
              , be = Object.getOwnPropertySymbols
              , ge = Object.prototype.hasOwnProperty
              , ye = Object.prototype.propertyIsEnumerable
              , fe = (e, t, r) => t in e ? he(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r;
            $.views.tags({
                baseBannersTag: {
                    initBase() {
                        this.saveState = this.saveState.bind(this)
                    },
                    saveState(e) {
                        const t = (0,
                        oe.a)();
                        if (!t.trySaveStateV2(e)) {
                            const {data: r} = $.view(e);
                            t.saveState({
                                l: this.tagCtx.props.analiticsCode,
                                t: (null == r ? void 0 : r.id) || "",
                                t2: parseInt(e.dataset.bannerIndex) + 1
                            })
                        }
                    }
                },
                bigBanners: {
                    baseTag: "baseBannersTag",
                    hasEars: !1,
                    hasPagination: !1,
                    isBannersWithIframe: !1,
                    template: '{^{if ~tag.bannersList.length > 0}}\n                <div class="swiper-container j-main-banners{{if !~tagCtx.props.isAdaptive}} big-banner-inner{{/if}}">\n                    <div class="swiper-wrapper{{if !~tagCtx.props.isAdaptive}} big-banner{{/if}}">\n                        {^{for ~tag.bannersList}}\n                            {{singleBanner banner=#data itemClass=\'swiper-slide\' imgClass="swiper-lazy" isLazy=(#getIndex() > 0)\n                                swiperLazyLoad=true  protectAdult=~tagCtx.props.protectAdult \n                                imgContClass=~tagCtx.props.imgContClass bannersZoneClass=~tagCtx.props.bannersZoneClass\n                                bannersZonesContainer=~tagCtx.props.bannersZonesContainer\n                                bannerIndex=#getIndex() analiticsCode=~tagCtx.props.analiticsCode\n                                qty_block_delivery_before=~tagCtx.props.qty_block_delivery_before\n                                width=~tag.width height=~tag.height\n                            /}}\n                        {{/for}}\n                    </div>\n\n                    <button class="swiper-button-prev{{if ~tag.bannersList.length <= 1}} hide{{/if}} j-not-close-pop-up-on-click" type="button">{{:~t(\'common.goBack\')}}</button>\n                    <button class="swiper-button-next{{if ~tag.bannersList.length <= 1}} hide{{/if}} j-not-close-pop-up-on-click" type="button">{{:~t(\'common.goForward\')}}</button>\n\n                    {{if ~tag.hasPagination}}\n                        <div class="swiper-pagination{{if ~tag.bannersList.length <= 1}} hide{{/if}}"></div>\n                    {{/if}}\n                </div>\n            {{/if}}',
                    init() {
                        this.initBase(),
                        this.bannersList = [],
                        this.swiper = null,
                        this.width = this.tagCtx.props.width || !1,
                        this.height = this.tagCtx.props.height || !1,
                        this.hasPagination = this.tagCtx.props.hasPagination,
                        this.hasEars = this.tagCtx.props.hasEars,
                        this.isBannersWithIframe = this.tagCtx.props.isBannersWithIframe,
                        this.doOnIntersect = this.doOnIntersect.bind(this),
                        this.doOnOutOfViewport = this.doOnOutOfViewport.bind(this),
                        this.sendShownStat = this.sendShownStat.bind(this),
                        this.checkPlayVideo = this.checkPlayVideo.bind(this),
                        this.checkPlayVideo = this.checkPlayVideo.bind(this),
                        this.toggleIsCarouselVisible = this.toggleIsCarouselVisible.bind(this)
                    },
                    onUpdate: !1,
                    async onAfterLink() {
                        var e, t;
                        const r = this;
                        null == (e = this.swiper) || e.destroy(),
                        null == (t = this.observer) || t.destroy(),
                        this._prepareBannersList();
                        const n = this.linkCtx.elem.querySelector(".j-main-banners");
                        if (null == n)
                            return void (this.swiper = null);
                        await WbSpaModel.prototype.$helper.nextTick();
                        function s(e) {
                            var t;
                            null == (t = r.iframeHelper) || t.setBannerAsActiveByIndex(e)
                        }
                        const i = {
                            container: n,
                            handlers: {
                                stopSlide: function(e) {
                                    var t;
                                    const n = r.swiper;
                                    if (!n)
                                        return !1;
                                    n.realIndex === e && (null == (t = n.autoplay) || t.stop())
                                },
                                changeSlide: function(e) {
                                    var t, n;
                                    const s = r.swiper;
                                    if (!s)
                                        return !1;
                                    s.realIndex === e && (s.slideNext(),
                                    !(null == (t = s.autoplay) ? void 0 : t.running) && (null == (n = s.autoplay) || n.start()))
                                }
                            },
                            slideDuration: 1e4
                        };
                        this.iframeHelper = this.isBannersWithIframe ? new ae(i) : null;
                        const a = this.hasEars ? {
                            slidesPerView: "auto",
                            centeredSlides: !0,
                            loopedSlides: 3
                        } : {};
                        var o;
                        this.swiper = new Swiper(n,(o = ( (e, t) => {
                            for (var r in t || (t = {}))
                                ge.call(t, r) && fe(e, r, t[r]);
                            if (be)
                                for (var r of be(t))
                                    ye.call(t, r) && fe(e, r, t[r]);
                            return e
                        }
                        )({
                            speed: 500,
                            loop: this.bannersList.length > 1,
                            preloadImages: !1,
                            threshold: 5,
                            spaceBetween: this.hasEars ? null : 8,
                            breakpoints: {
                                1024: {
                                    threshold: 10
                                }
                            },
                            lazy: {
                                loadOnTransitionStart: !0,
                                loadPrevNext: !0,
                                loadPrevNextAmount: this.hasEars ? 2 : 1
                            },
                            autoplay: {
                                disableOnInteraction: !1,
                                enabled: !0,
                                delay: 1e4
                            }
                        }, a),
                        pe(o, me({
                            pagination: {
                                el: ".swiper-pagination",
                                renderBullet: (e, t) => `<div role="button" type="button" aria-label="Dot slide" class="${t}"></div>`,
                                clickable: !1
                            },
                            navigation: {
                                nextEl: ".swiper-button-next",
                                prevEl: ".swiper-button-prev",
                                disabledClass: "hide"
                            },
                            on: {
                                init: () => {
                                    var e, t, r;
                                    null == (t = null == (e = this.tagCtx.props.bigBannersCallbacks) ? void 0 : e.onInit) || t.call(e),
                                    null == (r = this.iframeHelper) || r.init(this.bannersList),
                                    s(0)
                                }
                                ,
                                click: e => {
                                    var t, s;
                                    null == (s = null == (t = this.tagCtx.props.bigBannersCallbacks) ? void 0 : t.onClick) || s.call(t, e);
                                    const i = r.isBannersWithIframe ? function(e) {
                                        var t;
                                        if (!r.swiper)
                                            return e;
                                        const s = e.closest(`.${r.swiper.params.slideDuplicateClass}`);
                                        if (!s) {
                                            const t = null == e ? void 0 : e.closest(".j-banner-click-stat");
                                            return t || e
                                        }
                                        const i = `.${r.swiper.params.slideClass}[data-swiper-slide-index="${s.dataset.swiperSlideIndex}"]:not(.${r.swiper.params.slideDuplicateClass})`
                                          , a = null == (t = n.querySelectorAll(i)) ? void 0 : t[0]
                                          , o = null == a ? void 0 : a.querySelector(".j-banner-click-stat");
                                        return o || e
                                    }(e.target) : e.target.closest(".j-banner-click-stat");
                                    null != i && (WbSpaModel.prototype.$stat.banners.sendClickStatistic($(i)),
                                    this.saveState(i))
                                }
                                ,
                                crutch: (e, t) => {
                                    this.isBannersWithIframe && (t.updateActiveIndex(e),
                                    t.updateSlidesClasses(),
                                    t.updateSlides())
                                }
                            }
                        })))),
                        this.swiper.on("transitionEnd", ( () => {
                            this.isBannersWithIframe ? this.swiper.loopFix() : this.swiper.slideToLoop(this.swiper.realIndex, 0, !1)
                        }
                        )),
                        this.swiper.on("slideChange", ( () => {
                            !function() {
                                const e = r.swiper;
                                if (!e)
                                    return !1;
                                s(e.realIndex)
                            }(),
                            this.sendShownStat()
                        }
                        )),
                        this.swiper.on("transitionStart", ( () => {
                            if (!this.isBannersWithIframe) {
                                let e = this.swiper.$wrapperEl
                                  , t = this.swiper.params;
                                e.children("." + t.slideClass + "." + t.slideDuplicateClass).each((function() {
                                    let r = this.getAttribute("data-swiper-slide-index");
                                    this.innerHTML = e.children("." + t.slideClass + '[data-swiper-slide-index="' + r + '"]:not(.' + t.slideDuplicateClass + ")").html()
                                }
                                ))
                            }
                            if ("d" === wb.settings.displayMode) {
                                const e = document.querySelector(".j-tooltip-advertising");
                                e && e.elemTarget.closest(".j-main-banners") && e.close()
                            }
                            if (!r.swiper)
                                return !1;
                            !function() {
                                var e, t, n;
                                if (!r.isBannersWithIframe)
                                    return;
                                const s = r.swiper;
                                s && r.iframeHelper && s.realIndex !== (null == (e = r.iframeHelper.currentActiveBanner) ? void 0 : e.bannerSlideIndex) && !(null == (t = s.autoplay) ? void 0 : t.running) && (null == (n = s.autoplay) || n.start())
                            }()
                        }
                        )),
                        this.isBannersWithIframe && (0,
                        ce.J)().addEventListener("needStopVideo", this.checkPlayVideo);
                        this.observer = ( () => {
                            const e = navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0;
                            let t;
                            e ? this.doOnIntersect() : (t = (0,
                            le.Z)().getCarouselBannersObserver(n, {
                                threshold: .5
                            }),
                            n.addEventListener(t.elementInViewportEventName, this.doOnIntersect),
                            n.addEventListener(t.elementOutOfViewportEventName, this.doOnOutOfViewport),
                            t.observe());
                            return {
                                destroy: () => {
                                    !e && t && (t.destroy(),
                                    n.removeEventListener(t.elementInViewportEventName, this.doOnIntersect),
                                    n.removeEventListener(t.elementOutOfViewportEventName, this.doOnOutOfViewport))
                                }
                            }
                        }
                        )(),
                        this.bannersObserver = function() {
                            if (!r.isBannersWithIframe)
                                return;
                            const e = Array.from(n.querySelectorAll(".swiper-slide") || []);
                            if (!(null == e ? void 0 : e.length))
                                return;
                            const t = (0,
                            le.Z)().getSimpleObserver((e => {
                                var t;
                                const n = function(e) {
                                    const t = $.view(e);
                                    let n = null == t ? void 0 : t.data;
                                    if (!n || !n.id || !n.placementOptions) {
                                        const t = Number(e.getAttribute("data-swiper-slide-index"));
                                        t >= 0 && (n = r.bannersList[t])
                                    }
                                    return n
                                }(e);
                                if (!n || n.wbaShownStatSent)
                                    return;
                                n.wbaShownStatSent = !0;
                                const s = e.querySelector(".j-banner");
                                WbSpaModel.prototype.$stat.banners.sendShownStatistic(s);
                                const i = !!n.ordBannerMark
                                  , a = n.isVideo || n.isHtml5
                                  , o = {
                                    eventName: "Banner_S",
                                    bannerName: s.title,
                                    location: s.dataset.analiticsCode,
                                    link: s.href,
                                    ind: s.dataset.bannerIndex,
                                    bid: s.dataset.bannerId,
                                    withPromoMark: i,
                                    pixelSrc: n.pixelSrc,
                                    adv_params: a ? (null == (t = n.htmlData) ? void 0 : t.data) || "" : void 0,
                                    banner_load_time: a ? n.loadTime : void 0
                                };
                                (0,
                                oe.a)().sendBannersWbaEventByData(o)
                            }
                            ), {
                                threshold: .5
                            });
                            return null == t || t.observe(e),
                            t
                        }()
                    },
                    checkPlayVideo({detail: e}) {
                        "phone" !== wb.settings.displayType && (e.needStopVideo ? this.doOnOutOfViewport() : this.doOnIntersect())
                    },
                    sendShownStat() {
                        var e;
                        if (this.isBannersWithIframe)
                            return;
                        if (!this.isCarouselVisible)
                            return;
                        const t = null == (e = this.swiper.slides) ? void 0 : e[this.swiper.activeIndex];
                        if (!t || t.classList.contains("swiper-slide-duplicate"))
                            return;
                        const r = t.querySelector(".j-banner");
                        if (r.dataset.wbaShownStatSent)
                            return;
                        const {data: n} = $.view(r)
                          , s = !!n.ordBannerMark;
                        r.dataset.wbaShownStatSent = !0,
                        WbSpaModel.prototype.$stat.banners.sendShownStatistic(r),
                        (0,
                        oe.a)().sendBannersWbaEvent("Banner_S", r.title, r.dataset.analiticsCode, r.href, r.dataset.bannerIndex, r.dataset.bannerId, s, n.pixelSrc)
                    },
                    doOnIntersect() {
                        this.toggleIsCarouselVisible(!0),
                        this.sendShownStat(),
                        this.swiper.autoplay.start()
                    },
                    doOnOutOfViewport() {
                        this.toggleIsCarouselVisible(!1),
                        this.swiper.autoplay.stop()
                    },
                    toggleIsCarouselVisible(e) {
                        var t;
                        this.isCarouselVisible = e,
                        null == (t = this.iframeHelper) || t.setCarouselVisible(e)
                    },
                    onDispose() {
                        var e, t, r, n;
                        null == (e = this.swiper) || e.destroy(),
                        null == (t = this.observer) || t.destroy(),
                        null == (r = this.iframeHelper) || r.destroy(),
                        null == (n = this.bannersObserver) || n.destroy(),
                        (0,
                        ce.J)().removeEventListener("needStopVideo", this.checkPlayVideo)
                    },
                    _prepareBannersList() {
                        var e;
                        const t = null != (e = this.tagCtx.props.bannersList) ? e : [];
                        $.observable(this.bannersList).refresh(t)
                    }
                },
                bannersCarousel: {
                    baseTag: "baseBannersTag",
                    template: '<div class="swiper-container j-single-banner">\n                <div class="swiper-wrapper">\n                    {{for ~tag.banners}}\n                    <div class="swiper-slide">\n                        {{singleBanner banner=#data bannerIndex=#getIndex() analiticsCode=~tag.analiticsCode itemClass=\'swiper-img\' width=~tag.width height=~tag.height /}}\n                    </div>\n                    {{/for}}\n                </div>\n            </div>\n            <button class="swiper-button-prev" type="button" aria-label="{{:~t(\'common.goBack\')}}"></button>\n            <button class="swiper-button-next" type="button" aria-label="{{:~t(\'common.goForward\')}}"></button>',
                    init() {
                        var e;
                        this.initBase(),
                        this.banners = null != (e = this.tagCtx.props.banners) ? e : [],
                        this.analiticsCode = this.tagCtx.props.analiticsCode,
                        this.width = this.tagCtx.props.width || !1,
                        this.height = this.tagCtx.props.height || !1,
                        this.swiper = null,
                        this.container = null,
                        this.displayMode = this.setDisplayMode(),
                        this.createSlider = this.createSlider.bind(this),
                        this.setDisplayMode = this.setDisplayMode.bind(this),
                        this.updateSlider = this.updateSlider.bind(this)
                    },
                    async onAfterLink() {
                        var e, t;
                        const r = this;
                        function n() {
                            var e, t;
                            null == (t = null == (e = r.swiper) ? void 0 : e.autoplay) || t.start()
                        }
                        function s() {
                            var e, t;
                            null == (t = null == (e = r.swiper) ? void 0 : e.autoplay) || t.stop()
                        }
                        null == (e = this.swiper) || e.destroy(),
                        null == (t = this.observer) || t.destroy(),
                        this.container = this.linkCtx.elem.querySelector(".swiper-container"),
                        null != this.container ? (await WbSpaModel.prototype.$helper.nextTick(),
                        this.swiper = this.createSlider(),
                        window.addEventListener("resize", this.updateSlider),
                        this.swiper.on("transitionStart", ( () => {
                            if ("d" === wb.settings.displayMode) {
                                const e = document.querySelector(".j-tooltip-advertising");
                                e && e.elemTarget.closest(".j-single-banner") && e.close()
                            }
                        }
                        )),
                        this.observer = function() {
                            var e, t;
                            const i = navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0;
                            let a;
                            i ? n() : (a = (0,
                            le.Z)().getCarouselBannersObserver(r.container, {
                                threshold: .5
                            }),
                            null == (e = r.container) || e.addEventListener(a.elementInViewportEventName, n),
                            null == (t = r.container) || t.addEventListener(a.elementOutOfViewportEventName, s),
                            a.observe());
                            return {
                                destroy: function() {
                                    var e, t;
                                    !i && a && (a.destroy(),
                                    null == (e = r.container) || e.removeEventListener(a.elementInViewportEventName, n),
                                    null == (t = r.container) || t.removeEventListener(a.elementOutOfViewportEventName, s))
                                }
                            }
                        }()) : this.swiper = null
                    },
                    onDispose() {
                        var e;
                        null == (e = this.swiper) || e.destroy(),
                        window.removeEventListener("resize", this.updateSlider)
                    },
                    createSlider() {
                        return new Swiper(this.container,{
                            preloadImages: !1,
                            loop: !0,
                            lazy: {
                                loadOnTransitionStart: !0,
                                loadPrevNext: !0
                            },
                            autoplay: {
                                delay: 5e3,
                                disableOnInteraction: !1
                            },
                            slidesPerView: "auto",
                            navigation: {
                                nextEl: ".j-slider-banners-mini .swiper-button-next",
                                prevEl: ".j-slider-banners-mini .swiper-button-prev",
                                disabledClass: "hide"
                            },
                            breakpoints: {
                                1024: {
                                    loop: !1
                                }
                            },
                            on: {
                                click: e => {
                                    const t = e.target.closest(".j-banner-click-stat");
                                    null != t && (WbSpaModel.prototype.$stat.banners.sendClickStatistic($(t)),
                                    this.saveState(t))
                                }
                            }
                        })
                    },
                    setDisplayMode() {
                        let e = 1280 - (window.innerWidth - document.documentElement.clientWidth);
                        return document.documentElement.clientWidth >= e ? "displayMode1" : "displayMode2"
                    },
                    updateSlider() {
                        var e;
                        let t = this.setDisplayMode();
                        this.displayMode !== t && (this.displayMode = t,
                        null == (e = this.swiper) || e.destroy(),
                        this.swiper = this.createSlider())
                    }
                },
                bannersCarouselNew: {
                    baseTag: "baseBannersTag",
                    template: '<div class="slider-main__list j-banners-wrapper-new">\n                {{for item}}\n                    {{singleBanner banner=#data bannerIndex=#getIndex() analiticsCode=~tag.analiticsCode itemClass=~tag.getItemClass(#getIndex()) width=~tag.width height=~tag.height /}}\n                {{/for}}\n            </div>',
                    init() {
                        var e;
                        this.initBase(),
                        this.banners = null != (e = this.tagCtx.props.banners) ? e : [],
                        this.analiticsCode = this.tagCtx.props.analiticsCode,
                        this.width = this.tagCtx.props.width || !1,
                        this.height = this.tagCtx.props.height || !1,
                        this.carousel = new a,
                        this.getItemClass = e => "j-banners-carousel-item slider-main__slide" + (0 === e ? " active" : ""),
                        this._startCarousel = this._startCarousel.bind(this)
                    },
                    async onAfterLink() {
                        var e;
                        this.container = null == (e = this.linkCtx) ? void 0 : e.elem.querySelector(".j-banners-wrapper-new"),
                        null != this.container && (this._startCarousel(),
                        $.observe(wb.settings, "displayType", this._startCarousel))
                    },
                    onDispose() {
                        var e;
                        null == (e = this.observer) || e.destroy(),
                        this.carousel.stop(),
                        $.unobserve(wb.settings, "displayType", this._startCarousel)
                    },
                    _setObserver() {
                        const e = this;
                        function t(t) {
                            t.target.classList.contains("j-banners-wrapper-new") && e.carousel.start(t.target)
                        }
                        function r(t) {
                            t.target.classList.contains("j-banners-wrapper-new") && e.carousel.stop()
                        }
                        this._stopSliding(),
                        this.observer = function() {
                            const n = navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0;
                            if (n)
                                return;
                            const s = (0,
                            le.Z)().getCarouselBannersObserver(e.container, {
                                threshold: .9
                            });
                            return e.container.addEventListener(s.elementInViewportEventName, t),
                            e.container.addEventListener(s.elementOutOfViewportEventName, r),
                            s.observe(),
                            {
                                destroy: function() {
                                    if (n || !s)
                                        return;
                                    s.destroy(),
                                    e.container.removeEventListener(s.elementInViewportEventName, t),
                                    e.container.removeEventListener(s.elementOutOfViewportEventName, r)
                                }
                            }
                        }()
                    },
                    _stopSliding() {
                        var e, t;
                        null == (e = this.carousel) || e.stop(),
                        null == (t = this.observer) || t.destroy(),
                        this.observer = null
                    },
                    _startCarousel() {
                        "phone" === wb.settings.displayType ? this._stopSliding() : this._setObserver()
                    }
                },
                singleBanner: {
                    template: '<div class="img-plug {{:~tag.banner.bannerClass}} {{:~tagCtx.props.bannersZonesContainer || \'banners-zones-container\'}}{{if ~tagCtx.props.itemClass}}{{: \' \' + ~tagCtx.props.itemClass }}{{/if}}" data-plug-text="{{:~imgLoadError}}">\n                <div class="{{:~tagCtx.props.bannersZoneClass || \'banners-zones\'}}" data-link="{on ~tagCtx.props.protectAdult && ~tag.protectAdultGoods}">\n                    <a class="banner-href j-analitics-item j-banner-shown-stat j-banner-click-stat j-banner-wba j-banner{{if ~tag.banner.target === \'_blank\'}} j-not-close-pop-up-on-click{{/if}}"\n                        data-link="{on ~tag.analytic.proceedAndSave ~tag.bannerSettings.analyticsCode null null ~tag.banner.id null #getIndex()+1 }"\n                        href="{{: ~tag.banner.link}}" title="{{attr: ~tag.banner.alt}}" target="{{: ~tag.banner.target || \'_blank\'}}"\n                        data-banner-id="{{: ~tag.banner.id}}" data-statistic-fields=\'{{:~toJson(~tag.banner.statisticFields)}}\'\n                        data-banner-index=\'{{:~tag.banner.bannerIndex}}\' data-analitics-code=\'{{:~tag.bannerSettings.analyticsCode}}\'>\n                            {{if ~tag.banner.isHtml5 || ~tag.banner.isVideo}}\n                                {{iframeBanner banner=~tag.banner bannerSettings=~tag.bannerSettings /}}\n                            {{else}}\n                                {{bannerImg banner=~tag.banner bannerSettings=~tag.bannerSettings /}}\n                            {{/if}}\n                    </a>\n\n                    {{btnAdvertising banner=~tag.banner /}}\n                </div>\n            </div>',
                    init() {
                        this.banner = this.tagCtx.props.banner,
                        this.banner.imgLoadError = wb.i18n.t("common.photoIsMissing"),
                        this.banner.width = this.tagCtx.props.width || !1,
                        this.banner.height = this.tagCtx.props.height || !1,
                        this.banner.bannerIndex = this.tagCtx.props.bannerIndex,
                        this.analytic = (0,
                        oe.a)(),
                        this.bannerSettings = {
                            imgContClass: this.tagCtx.props.imgContClass,
                            imgClass: this.tagCtx.props.imgClass,
                            analyticsCode: this.tagCtx.props.analiticsCode,
                            carousel: this.tagCtx.props.carousel,
                            showPromoText: this.tagCtx.props.showPromoText,
                            isLazy: this.tagCtx.props.isLazy,
                            swiperLazyLoad: this.tagCtx.props.swiperLazyLoad
                        },
                        (this.banner.isVideo || this.banner.isHtml5) && (this.tagCtx.props.itemClass = `${this.tagCtx.props.itemClass || ""} j-iframe-banner`),
                        this.banner.getFullEcomInfo = function(e) {
                            var t;
                            const {data: r} = $.view(e)
                              , n = parseInt(e.dataset.bannerIndex) + 1
                              , s = (null == (t = null == r ? void 0 : r.banner) ? void 0 : t.id) || (null == r ? void 0 : r.id) || e.dataset.bannerId
                              , i = this.tagCtx.props.analiticsCode
                              , a = this.tagCtx.props.qty_block_delivery_before || null
                              , o = {
                                analiticsCode: i,
                                index: n,
                                termsForListName: {
                                    t: s,
                                    t2: n
                                },
                                tailObjectTerms: {
                                    bid: s,
                                    bid_index: n
                                }
                            };
                            return ["DLB", "DLA"].includes(i) && a && (o.tailObjectTerms.qty_block_delivery_before = a),
                            ["TBB", "TAB"].includes(i) && (o.tailObjectTerms.name = this.banner.alt),
                            o
                        }
                        .bind(this)
                    },
                    update() {},
                    protectAdultGoods(e) {
                        const t = this.ctx.root;
                        (0,
                        de.z)().isConfirmed || (e.preventDefault(),
                        (0,
                        de.z)().proceedIfAdultConfirmed(!0, ( () => {
                            var t;
                            const r = null == (t = e.target.closest("a")) ? void 0 : t.href;
                            null != r && (0,
                            ue.c)().moveTo(r)
                        }
                        ), t))
                    },
                    onAfterLink() {
                        var e;
                        this.showBannerObserver = (0,
                        le.Z)().getSimpleObserver(( () => {
                            const e = this.parentElem.querySelector(".j-banner");
                            this.analytic.sendBannersWbaEvent("Banner_S", "", e.dataset.analiticsCode, e.href, e.dataset.bannerIndex, e.dataset.bannerId, "", null, !0)
                        }
                        ), {
                            threshold: .5
                        }),
                        null == (e = this.showBannerObserver) || e.observe([this.parentElem])
                    },
                    onDispose() {
                        var e;
                        null == (e = this.showBannerObserver) || e.destroy()
                    }
                },
                bannerImg: {
                    template: '<div class="{{: ~tag.bannerSettings.imgContClass || \'img-wrap\'}}">\n                {{if ~tag.bannerSettings.isLazy}}\n                    <img src="{{urlSiteStatic: \'i/blank.gif\'}}" class="{{: ~tag.bannerSettings.imgClass || ""}}" name="{{: \'banner_\' + ~tag.banner.id}}"\n                    data-{{if ~tag.bannerSettings.swiperLazyLoad}}src{{else}}original{{/if}}="{{> ~tag.banner.absoluteUrl}}"\n                    data-src-pb="{{url: ~tag.banner.absoluteUrlPb}}" alt="{{attr: ~tag.banner.alt}}"\n                    {{if !!~tag.banner.width && !!~tag.banner.height}}width="{{: ~tag.banner.width}}" height="{{: ~tag.banner.height}}"{{/if}}\n                    {{if ~tag.isBannersWithIframe}}style="opacity: 0" onload="this.style.opacity=\'1\'"{{/if}} />\n                {{else}}\n                    <img src="{{url: ~tag.banner.absoluteUrl}}" data-src-pb="{{url: ~tag.banner.absoluteUrlPb}}"\n                    {{if ~tag.bannerSettings.isLazy === undefined}}loading="lazy"{{/if}} class="{{: ~tag.bannerSettings.imgClass || ""}}"\n                    name="{{: \'banner_\' + ~tag.banner.id}}" alt="{{attr: ~tag.banner.alt}}"\n                    {{if !!~tag.banner.width && !!~tag.banner.height}}width="{{: ~tag.banner.width}}" height="{{: ~tag.banner.height}}"{{/if}}\n                    {{if ~tag.isBannersWithIframe}}style="opacity: 0" onload="this.style.opacity=\'1\'"{{/if}} />\n                {{/if}}\n            </div>\n            {{if ~tag.bannerSettings.showPromoText && ~tag.bannerSettings.carousel}}\n                {{for ~tag.banner.promoTextLines}}\n                        <span class="item-info">{{>}}</span>\n                {{/for}}\n            {{/if}}',
                    init() {
                        this.banner = this.tagCtx.props.banner,
                        this.bannerSettings = this.tagCtx.props.bannerSettings,
                        this.isBannersWithIframe = this.tagCtx.props.isBannersWithIframe
                    }
                },
                iframeBanner: {
                    template: '\n            {{bannerImg banner=~tag.banner bannerSettings=~tag.bannerSettings isBannersWithIframe=true /}}\n\n            <iframe class="banner-iframe"\n                id="{{:~tag.banner.iframeId}}"\n                src="{{:~tag.banner.htmlSrc}}"\n                title="{{:~tag.banner.alt}}"\n                frameborder="0" scrolling="no" allow="autoplay">\n             </iframe>\n            ',
                    init() {
                        this.banner = this.tagCtx.props.banner,
                        this.bannerSettings = this.tagCtx.props.bannerSettings;
                        const e = this.bannerSettings.imgContClass || "img-wrap";
                        this.bannerSettings.imgContClass = `${e} j-iframe-banner-img-cont`;
                        const t = this.banner.isHtml5 ? "html5" : "video";
                        this.banner.iframeId = `${t}-${this.banner.id}`
                    }
                }
            })
        },
        22351: function() {
            "use strict";
            var e = Object.defineProperty
              , t = Object.defineProperties
              , r = Object.getOwnPropertyDescriptors
              , n = Object.getOwnPropertySymbols
              , s = Object.prototype.hasOwnProperty
              , i = Object.prototype.propertyIsEnumerable
              , a = (t, r, n) => r in t ? e(t, r, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: n
            }) : t[r] = n
              , o = (e, t) => {
                for (var r in t || (t = {}))
                    s.call(t, r) && a(e, r, t[r]);
                if (n)
                    for (var r of n(t))
                        i.call(t, r) && a(e, r, t[r]);
                return e
            }
              , l = (e, n) => t(e, r(n));
            null == $ || $.views.tags({
                tooltip: {
                    dataBoundOnly: !0,
                    boundProps: ["text"],
                    tooltipClass: "tooltip",
                    init: function() {
                        var e;
                        this.settings = {
                            delay: 0,
                            dist: 10,
                            distAlignBy: 0,
                            responsive: !0,
                            blockedBodyScroll: !1,
                            popupMode: !1
                        },
                        this.text = this.tagCtx.props.text,
                        this.tmplName = this.tagCtx.props.tmplName,
                        this.tmplData = this.tagCtx.props.tmplData,
                        this.tmplType = this.tagCtx.props.tmplType,
                        this.contentSlr = this.tagCtx.props.contentSlr,
                        this.classList = (null == (e = this.tagCtx.props.classes) ? void 0 : e.split(" ")) || [],
                        this.useBinding = this.tagCtx.props.useBinding,
                        this.overlay = this.tagCtx.props.overlay,
                        this.tagCtx.props.hasOwnProperty("distance") && (this.settings.dist = this.tagCtx.props.distance),
                        this.tagCtx.props.hasOwnProperty("distanceAlignBy") && (this.settings.distAlignBy = this.tagCtx.props.distanceAlignBy),
                        this.tagCtx.props.hasOwnProperty("delay") && (this.settings.delay = this.tagCtx.props.delay),
                        this.tagCtx.props.hasOwnProperty("blockedBodyScroll") && (this.settings.blockedBodyScroll = this.tagCtx.props.blockedBodyScroll),
                        this.tagCtx.props.hasOwnProperty("popupMode") && (this.settings.popupMode = this.tagCtx.props.popupMode),
                        this.responsive = this.settings.responsive,
                        this.tagCtx.props.hasOwnProperty("responsive") && (this.responsive = this.tagCtx.props.responsive);
                        let t = this.tagCtx.props.pos || "center top";
                        this.posHorizontal = t.split(" ")[0],
                        this.posVertical = t.split(" ")[1],
                        this.linkedElMarkup = this.linkCtx.elem.innerHTML,
                        this.rightCollision = this.tagCtx.props.rightCollision,
                        this.disabled = this.tagCtx.props.disabled,
                        this.preventDefault = this.tagCtx.props.preventDefault,
                        this.stopPropagation = this.tagCtx.props.stopPropagation,
                        this.popupMode = this.responsive && "m" === wb.settings.displayMode || this.responsive && this.settings.popupMode,
                        this.showTooltip = !1,
                        this.closeOnDisable = this.tagCtx.props.closeOnDisable
                    },
                    onUpdate: function() {
                        if (!this.closeOnDisable)
                            return !1;
                        this.disabled && this._destroy()
                    },
                    onAfterChange: function() {
                        this.text = this.tagCtx.props.text
                    },
                    onBind: function() {
                        if (this.disabled)
                            return !1;
                        this._bindEvents()
                    },
                    onUnbind: function() {
                        this._destroy()
                    },
                    _bindEvents: function() {
                        "always" == this.tagCtx.props.trigger ? this._positionAt.call(this) : "click" == this.tagCtx.props.trigger || this.popupMode ? this.linkCtx.elem.addEventListener("click", this._positionAt.bind(this)) : "Shown" == this.tagCtx.props.trigger ? (this.linkCtx.elem.addEventListener("Shown", this._positionAt.bind(this)),
                        this.linkCtx.elem.addEventListener("Unshown", this._destroy.bind(this))) : (this.linkCtx.elem.addEventListener("mouseover", this._positionAt.bind(this)),
                        this.linkCtx.elem.addEventListener("mousemove", this._positionAt.bind(this)),
                        this.linkCtx.elem.addEventListener("mouseout", (e => {
                            this.linkCtx.elem.contains(e.relatedTarget) || setTimeout(( () => {
                                this.insideTip || this._destroy()
                            }
                            ), this.settings.delay)
                        }
                        )))
                    },
                    _destroy: function() {
                        var e, t, r;
                        document.removeEventListener("click", this),
                        !this.popupMode && this.tooltip && document.body.removeChild(this.tooltip),
                        this.tooltip = null,
                        this.insideTip = !1,
                        null == (e = this.overlayEl) || e.remove(),
                        this.showTooltip = !1,
                        null == (r = (t = this.tagCtx.props).onClose) || r.call(t)
                    },
                    async _getMarkup() {
                        if (this.contentSlr)
                            return {
                                html: document.querySelector(this.contentSlr).innerHTML
                            };
                        if (this.tmplName && !$.templates[this.tmplName] && await $.views.loadTemplateAsync(this.tmplName),
                        this.tagCtx.props.useBind && this.tmplName) {
                            return {
                                bound: !0,
                                link: $.link[this.tmplName]
                            }
                        }
                        return this.text ? {
                            html: `<div class="tooltip__content">${this.text}</div>`
                        } : this.tmplName ? {
                            html: $.templates[this.tmplName].render(this._getTmplData(), this.tagCtx.props.tmplHelper)
                        } : null
                    },
                    handleEvent: function(e) {
                        if ("click" == e.type) {
                            this.linkCtx.elem.contains(e.target) || this.tooltip.contains(e.target) || this._destroy()
                        }
                    },
                    _getTmplData: function() {
                        return "function" == typeof this.tmplData ? this.tmplType ? l(o({}, this.tmplData()), {
                            tmplType: this.tmplType
                        }) : this.tmplData() : this.tmplType ? l(o({}, this.tmplData), {
                            tmplType: this.tmplType
                        }) : this.tmplData
                    },
                    async _positionAt(e) {
                        var t, r;
                        if ("click" == this.tagCtx.props.trigger && this.stopPropagation && e.stopImmediatePropagation(),
                        this.showTooltip && "click" == this.tagCtx.props.trigger)
                            return this._destroy();
                        if (this.tooltip)
                            return;
                        this.showTooltip = !0;
                        const n = await this._getMarkup();
                        if (!n)
                            return;
                        if (!this.showTooltip)
                            return;
                        if (this.popupMode) {
                            this.preventDefault && e.preventDefault(),
                            this.stopPropagation && e.stopPropagation();
                            let t = {
                                lockScroll: !1,
                                modal: !1,
                                showCloseBtn: "always" != this.tagCtx.props.trigger,
                                useHtml: !0,
                                contentClasses: ["content"],
                                popupClassesList: ["shown", "tooltip", "tooltip--mobile", ...this.classList],
                                useCenteredFunction: !1,
                                onShow: e => e.classList.remove("popup")
                            };
                            t.onHide = () => {
                                var e, t;
                                null == (t = null == (e = this.tagCtx.props.tmplHelper) ? void 0 : e.onPopupHide) || t.call(e),
                                this._destroy()
                            }
                            ,
                            n.bound ? t.onShow = e => {
                                e.classList.remove("popup"),
                                n.link(e.querySelector(".content"), this._getTmplData(), l(o({}, this.tagCtx.props.tmplHelper), {
                                    close: () => this.tooltip.close()
                                }))
                            }
                            : t.msg = n.html,
                            this.tooltip = await wb.popup.showCustomPopup(t);
                            return void ( () => {
                                const e = window.getComputedStyle(document.body).getPropertyValue("inset")
                                  , t = this.tooltip.popup;
                                let r = 0;
                                (e || "auto" === !e) && (r = parseFloat(e.split(" ")[0])),
                                isNaN(r) && (r = 0),
                                t.style.top = Math.max(document.documentElement.clientHeight / 2 + (window.scrollY - r) - t.clientHeight / 2, window.scrollY - r) + "px",
                                t.style.left = Math.max(document.documentElement.clientWidth / 2 - t.clientWidth / 2, 0) + "px"
                            }
                            )()
                        }
                        if (document.querySelectorAll("." + this.tooltipClass).forEach((e => {
                            var t;
                            return null == (t = e.close) ? void 0 : t.call(e)
                        }
                        )),
                        this.tooltip = document.createElement("div"),
                        this.tooltip.style.display = "inline-block",
                        this.tooltip.style.position = "absolute",
                        this.tooltip.style.zIndex = "11111",
                        this.tooltip.style.width = this.tagCtx.props.width,
                        this.tagCtx.props.maxWidth && (this.tooltip.style.maxWidth = this.tagCtx.props.maxWidth),
                        n.bound) {
                            const e = this.tagCtx.view;
                            n.link(this.tooltip, this._getTmplData(), l(o({
                                parentView: e
                            }, this.tagCtx.props.tmplHelper), {
                                close: this._destroy.bind(this)
                            }))
                        } else
                            this.tooltip.innerHTML = n.html;
                        if (this.tooltip.classList.add(this.tooltipClass),
                        this.tooltip.classList.addMany(this.classList),
                        this.tooltip.close = () => this._destroy(),
                        this.tooltip.elemTarget = e.target,
                        "click" != this.tagCtx.props.trigger && (this.tooltip.addEventListener("mouseenter", ( () => this.insideTip = !0)),
                        this.tooltip.addEventListener("mouseleave", ( () => {
                            this.insideTip = !1,
                            setTimeout(( () => {
                                this.insideTip || this._destroy()
                            }
                            ), this.settings.delay)
                        }
                        ))),
                        "click" == this.tagCtx.props.trigger) {
                            document.addEventListener("click", this);
                            const e = this.tooltip.querySelector(".j-close");
                            null == e || e.addEventListener("click", ( () => this._destroy()))
                        }
                        this.overlay && (this.overlayEl = document.createElement("div"),
                        this.overlayEl.classList.addMany(["overlay", "j-custom-overlay"]),
                        document.body.appendChild(this.overlayEl)),
                        document.body.appendChild(this.tooltip);
                        let s, i, a = this.linkCtx.elem.getBoundingClientRect(), c = (e, t) => {
                            if (this.tagCtx.props.alignBy) {
                                const e = this.linkCtx.elem.closest(this.tagCtx.props.alignBy);
                                if (e)
                                    return parseInt(e.getBoundingClientRect()[t]) + this.settings.distAlignBy
                            }
                            return parseInt(e)
                        }
                        ;
                        switch (this.posHorizontal) {
                        case "left":
                            s = parseInt(a.left) - this.settings.dist - this.tooltip.offsetWidth,
                            parseInt(a.left) - this.tooltip.offsetWidth < 0 && (s = this.settings.dist);
                            break;
                        case "right":
                            s = a.right + this.settings.dist,
                            parseInt(a.right) + this.tooltip.offsetWidth > document.documentElement.clientWidth && (s = document.documentElement.clientWidth - this.tooltip.offsetWidth - this.settings.dist);
                            break;
                        case "alignleft":
                            s = c(a.left, "left");
                            const e = document.documentElement.clientWidth - (s + this.tooltip.offsetWidth);
                            e < 0 && (s += e);
                            break;
                        case "alignright":
                            s = c(a.right, "right") - this.tooltip.offsetWidth;
                            break;
                        case "aligncenter":
                            s = (c(a.left, "left") + c(a.left, "right")) / 2 - this.tooltip.offsetWidth / 2;
                            break;
                        default:
                            s = parseInt(a.left) + ((null != (t = this.linkCtx.elem.offsetWidth) ? t : a.width) - this.tooltip.offsetWidth) / 2;
                            parseInt(a.right) - (null != (r = this.linkCtx.elem.offsetWidth) ? r : a.width) / 2 + this.tooltip.offsetWidth / 2 - document.documentElement.clientWidth > 0 && (s = parseInt(a.right) - this.tooltip.offsetWidth)
                        }
                        switch (this.posVertical) {
                        case "center":
                            i = (parseInt(a.top) + parseInt(a.bottom)) / 2 - this.tooltip.offsetHeight / 2;
                            break;
                        case "bottom":
                            if (i = parseInt(a.bottom) + this.settings.dist,
                            parseInt(a.bottom) + this.tooltip.offsetHeight > document.documentElement.clientHeight)
                                i = parseInt(a.top) - this.tooltip.offsetHeight - this.settings.dist;
                            else if (this.tagCtx.props.checkCollision) {
                                const e = ( () => {
                                    const e = this.linkCtx.elem.closest(this.tagCtx.props.alignBy);
                                    return e ? e.getBoundingClientRect() : a
                                }
                                )()
                                  , t = document.querySelector(this.tagCtx.props.checkCollision);
                                if (t) {
                                    const r = t.getBoundingClientRect()
                                      , n = parseInt(window.getComputedStyle(this.tooltip).marginTop);
                                    parseInt(e.bottom) + this.tooltip.offsetHeight + this.settings.dist + n > r.top && (i = parseInt(e.top) - this.tooltip.offsetHeight - this.settings.dist)
                                }
                            }
                            break;
                        default:
                            i = parseInt(a.top) - this.tooltip.offsetHeight - this.settings.dist,
                            this.settings.blockedBodyScroll & !WbSpaModel.prototype.$isDesktop && (i += -1 * document.body.getBoundingClientRect().y)
                        }
                        s = s < 0 ? parseInt(a.left) : s,
                        i = i < 0 ? parseInt(a.bottom) + this.settings.dist : i,
                        e.clientY > i ? this.tooltip.classList.add("tooltip--top") : this.tooltip.classList.add("tooltip--bottom"),
                        this.tooltip.style.left = s + "px",
                        this.tooltip.style.top = i + pageYOffset + "px"
                    }
                }
            })
        },
        71607: function() {
            "use strict";
            DOMTokenList.prototype.addMany = function(e) {
                if (null == e || !Array.isArray(e))
                    throw new Error("DOMTokenList.prototype.addMany accepts only array");
                e.forEach((e => this.add(e)))
            }
            ,
            DOMTokenList.prototype.removeMany = function(e) {
                if (null == e || !Array.isArray(e))
                    throw new Error("DOMTokenList.prototype.removeMany accepts only array");
                e.forEach((e => this.remove(e)))
            }
        },
        90623: function() {
            "use strict";
            HTMLElement.prototype.hide = function() {
                this.style.display = "none"
            }
            ,
            HTMLElement.prototype.show = function() {
                this.style.display = "block"
            }
            ,
            HTMLElement.prototype.width = function() {
                return 0 == this.clientWidth ? getComputedStyle(this).width.replace("px", "") : this.clientWidth
            }
            ,
            HTMLElement.prototype.wrap = function(e) {
                var t;
                let r = (new DOMParser).parseFromString(e, "text/html").body.firstElementChild;
                if (null != r) {
                    for (null == (t = this.parentNode) || t.insertBefore(r, this); null != r.firstElementChild; )
                        r = r.firstElementChild;
                    r.appendChild(this)
                }
            }
            ,
            HTMLElement.prototype.parents = function(e) {
                const t = [];
                let r = this;
                const n = void 0 !== e;
                for (; null !== (r = r.parentElement); )
                    r.nodeType === Node.ELEMENT_NODE && (n && !r.matches(e) || t.push(r));
                return t
            }
            ,
            HTMLElement.prototype.isHidden = function() {
                return 0 === this.offsetWidth && 0 === this.offsetHeight || "none" === window.getComputedStyle(this).display
            }
            ,
            HTMLElement.prototype.isVisible = function() {
                return !this.isHidden()
            }
        },
        35707: function() {
            "use strict";
            URLSearchParams.prototype.toDictionary = function() {
                const e = {};
                return this.forEach(( (t, r) => e[r] = t)),
                e
            }
            ,
            URLSearchParams.prototype.hasOwnProperty("size") || Object.defineProperty(URLSearchParams.prototype, "size", {
                get: function() {
                    let e = 0;
                    for (let t of this.keys())
                        e++;
                    return e
                }
            })
        },
        585: function() {
            "use strict";
            Array.prototype.getIntesection = function(e) {
                return Array.isArray(e) ? this.filter((t => e.includes(t))) : (console.error("Argument must be an array"),
                [])
            }
            ,
            Array.prototype.last || (Array.prototype.last = function() {
                return this[this.length - 1]
            }
            ),
            Array.prototype.first || (Array.prototype.first = function() {
                return this[0]
            }
            ),
            Array.prototype.max = function() {
                return Math.max.apply(null, this)
            }
            ,
            Array.prototype.min = function() {
                return Math.min.apply(null, this)
            }
            ,
            Array.prototype.findWhere = function(e) {
                return this.find((t => Object.keys(e).every((r => t[r] === e[r]))))
            }
            ,
            Array.prototype.distinct = function() {
                return this.filter((function(e, t, r) {
                    return r.indexOf(e) === t
                }
                ))
            }
            ,
            Array.prototype.toHashSet = function(e) {
                if (null != e && "function" != typeof e)
                    throw new TypeError("toHashSet method require callback function or null");
                return this.reduce(( (t, r) => {
                    var n;
                    return t.add(null != (n = null == e ? void 0 : e(r)) ? n : r),
                    t
                }
                ), new Set)
            }
            ,
            Array.prototype.toMap = function(e, t) {
                if (null != e && "function" != typeof e)
                    throw new TypeError("toMap method require callback function or null");
                if (null != t && "function" != typeof t)
                    throw new TypeError("toMap method require callback function or null");
                return this.reduce(( (r, n) => (r.set(null == e ? n : e(n), null == t ? n : t(n)),
                r)), new Map)
            }
            ,
            Array.prototype.sum = function(e) {
                let t = 0;
                for (let r = 0, n = this.length; r < n; r++)
                    t += e ? this[r][e] : this[r];
                return t
            }
            ,
            Array.prototype.sumBy = function(e) {
                let t = 0;
                for (let r = 0, n = this.length; r < n; r++)
                    t += e(this[r]);
                return t
            }
            ,
            Array.prototype.groupBy = function(e) {
                const t = new Map;
                return this.forEach((r => {
                    const n = e(r)
                      , s = t.get(n);
                    s ? s.push(r) : t.set(n, [r])
                }
                )),
                t
            }
            ,
            Array.prototype.selectMany = function(e) {
                return this.length ? this.map((t => e(t))).reduce(( (e, t) => e.concat(t)), []) : []
            }
            ,
            Array.prototype.toChunk = function(e) {
                const t = Math.ceil(this.length / e)
                  , r = new Array(t);
                for (let n = 0; n < t; n++) {
                    const t = e * n;
                    r[n] = this.slice(t, t + e)
                }
                return r
            }
            ,
            Array.prototype.merge = function(e, {lookup: t=e => e, hasConflict: r= (e, t) => !1}={}) {
                if (!e || 0 == e.length)
                    return !1;
                const n = new Map;
                for (const e of this || []) {
                    const r = JSON.stringify(t(e));
                    n.set(r, e)
                }
                let s = !1;
                for (const i of e) {
                    const e = JSON.stringify(t(i));
                    if (n.has(e)) {
                        const t = n.get(e);
                        null != t && r(i, t) && (Object.assign(t, i),
                        s = !0)
                    } else
                        this.push(i),
                        s = !0
                }
                return s
            }
            ,
            Array.prototype.diff = function(e, {lookup: t=e => e, hasConflict: r= (e, t) => !1}={}) {
                const n = [];
                if (!e || 0 == e.length)
                    return n;
                const s = new Map;
                for (const e of this || []) {
                    const r = JSON.stringify(t(e));
                    s.set(r, e)
                }
                for (const i of e) {
                    const e = JSON.stringify(t(i));
                    if (s.has(e)) {
                        const t = s.get(e);
                        null != t && r(i, t) && n.push(i)
                    } else
                        n.push(i)
                }
                return n
            }
            ,
            Array.prototype.remove = function(e) {
                let t = this.indexOf(e);
                t > -1 && this.splice(t, 1)
            }
        },
        70746: function() {
            "use strict";
            Date.prototype.format = function(e, t) {
                const r = function() {
                    const e = /d{1,4}|M{1,5}|yy(?:yy)?|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g
                      , t = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g
                      , n = /[^-+\dA-Z]/g
                      , s = function(e, t) {
                        for (e = String(e),
                        t = t || 2; e.length < t; )
                            e = "0" + e;
                        return e
                    }
                      , i = e => {
                        var r;
                        return null == (r = (String(e).match(t) || [""]).pop()) ? void 0 : r.replace(n, "")
                    }
                    ;
                    return function(t, n, a) {
                        var o, l, c, u, d;
                        const h = r;
                        if (1 != arguments.length || "[object String]" != Object.prototype.toString.call(t) || "string" != typeof t || /\d/.test(t) || (n = t,
                        t = void 0),
                        t = t ? new Date(t) : new Date,
                        isNaN(Number(t)))
                            throw SyntaxError("invalid date");
                        "UTC:" == (n = String(function(e) {
                            const t = wb.currentLanguage;
                            if ("ru" !== t && r.masksOverrides && (null == r ? void 0 : r.masksOverrides[t]) && r.masksOverrides[t][e])
                                return r.masksOverrides[t][e];
                            return e
                        }(n) || h.defaultMask)).slice(0, 4) && (n = n.slice(4),
                        a = !0);
                        const p = a ? "getUTC" : "get"
                          , m = (e, t, r) => t[`${e}${r}`]()
                          , b = m(p, t, "Date")
                          , g = m(p, t, "Day")
                          , y = m(p, t, "Month")
                          , f = m(p, t, "FullYear")
                          , v = m(p, t, "Hours")
                          , w = m(p, t, "Minutes")
                          , _ = m(p, t, "Seconds")
                          , S = m(p, t, "Milliseconds")
                          , C = a ? 0 : t.getTimezoneOffset();
                        const I = {
                            d: b,
                            dd: s(b),
                            ddd: null == (o = h.i18n) ? void 0 : o.shortDaysTranslations[g],
                            dddd: null == (l = h.i18n) ? void 0 : l.longDaysTranslations[g],
                            M: y + 1,
                            MM: s(y + 1),
                            MMM: null == (c = h.i18n) ? void 0 : c.shortMonthsTranslations[y],
                            MMMM: null == (u = h.i18n) ? void 0 : u.monthGenitiveTranslations[y],
                            MMMMM: null == (d = h.i18n) ? void 0 : d.longMonthsTranslations[y],
                            yy: String(f).slice(2),
                            yyyy: f,
                            h: v % 12 || 12,
                            hh: s(v % 12 || 12),
                            H: v,
                            HH: s(v),
                            m: w,
                            mm: s(w),
                            s: _,
                            ss: s(_),
                            l: s(S, 3),
                            L: s(S > 99 ? Math.round(S / 10) : S),
                            t: v < 12 ? "a" : "p",
                            tt: v < 12 ? "am" : "pm",
                            T: v < 12 ? "A" : "P",
                            TT: v < 12 ? "AM" : "PM",
                            Z: a ? "UTC" : i(t),
                            o: (C > 0 ? "-" : "+") + s(100 * Math.floor(Math.abs(C) / 60) + Math.abs(C) % 60, 4),
                            S: function(e) {
                                const t = e % 10;
                                let r;
                                return r = t > 3 || 11 === e % 100 ? 0 : t,
                                ["th", "st", "nd", "rd"][r]
                            }(b)
                        };
                        return n.replace(e, (e => e in I ? String(I[e]) : e.slice(1, e.length - 1)))
                    }
                }();
                r.defaultMask = "ddd dd MMM yyyy",
                r.masksOverrides = {
                    en: {
                        "d MMMM": "MMMM d",
                        "d MMM": "MMM d",
                        "dd MMMM yyyy, HH:mm": "MMMM dd yyyy, HH:mm",
                        "dd MMMM yyyy": "MMMM dd yyyy"
                    }
                };
                const n = wb.i18n.t
                  , s = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"]
                  , i = s.map((e => n(`common.dates.dayNamesShort.${e}`)))
                  , a = s.map((e => n(`common.dates.dayNamesLong.${e}`)))
                  , o = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"]
                  , l = o.map((e => n(`common.dates.monthNamesLong.${e}`)))
                  , c = o.map((e => n(`common.dates.monthNamesShort.${e}`)))
                  , u = o.map((e => n(`common.dates.monthNamesGenitive.${e}`)));
                return r.i18n = {
                    shortDaysTranslations: i,
                    longDaysTranslations: a,
                    longMonthsTranslations: l,
                    shortMonthsTranslations: c,
                    monthGenitiveTranslations: u
                },
                r(this, e, t)
            }
            ,
            Date.prototype.daysBetween = function(e) {
                const t = new Date(this.getFullYear(),this.getMonth(),this.getDate())
                  , r = (new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime() - t.getTime()) / 864e5;
                return Math.floor(r)
            }
            ,
            Date.prototype.minutesBetween = function(e) {
                return Math.floor((this.getTime() - e.getTime()) / 6e4)
            }
            ,
            Date.prototype.dateEqual = function(e) {
                return this.getDate() === e.getDate() && this.getMonth() === e.getMonth() && this.getFullYear() === e.getFullYear()
            }
            ,
            Date.prototype.is1stJan = function() {
                return 1 === this.getDate() && 0 === this.getMonth()
            }
            ,
            Date.prototype.getUtcTime = function() {
                return this.getTime() - 6e4 * this.getTimezoneOffset()
            }
            ,
            Date.utcNow = function() {
                return (new Date).getUtcTime()
            }
            ,
            Date.prototype.addDays = function(e) {
                let t = new Date(this.valueOf());
                return t.setDate(t.getDate() + e),
                t
            }
            ,
            Date.prototype.addMinutes = function(e) {
                let t = new Date(this.valueOf());
                return t.setMinutes(t.getMinutes() + e),
                t
            }
            ,
            Date.prototype.addHours = function(e) {
                const t = new Date(this.valueOf());
                return isNaN(e) || t.setHours(t.getHours() + +e),
                t
            }
            ,
            Date.prototype.resetHours = function(e) {
                const t = new Date(this.valueOf());
                return isNaN(e) || t.setHours(e, 0, 0, 0),
                t
            }
        },
        56228: function() {
            "use strict";
            Event.prototype.stopPropagation = function(e) {
                return function() {
                    this.isPropagationStopped = !0,
                    e.call(this)
                }
            }(Event.prototype.stopPropagation)
        },
        70988: function() {
            "use strict";
            var e = Object.defineProperty
              , t = Object.defineProperties
              , r = Object.getOwnPropertyDescriptors
              , n = Object.getOwnPropertySymbols
              , s = Object.prototype.hasOwnProperty
              , i = Object.prototype.propertyIsEnumerable
              , a = (t, r, n) => r in t ? e(t, r, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: n
            }) : t[r] = n;
            const o = e => {
                const o = history[e]
                  , l = Object.getOwnPropertyDescriptor(history, e);
                var c;
                Object.defineProperty(history, e, (c = ( (e, t) => {
                    for (var r in t || (t = {}))
                        s.call(t, r) && a(e, r, t[r]);
                    if (n)
                        for (var r of n(t))
                            i.call(t, r) && a(e, r, t[r]);
                    return e
                }
                )({}, l),
                t(c, r({
                    value: function(...t) {
                        const r = o.apply(this, t)
                          , [n] = t
                          , s = new CustomEvent(e,{
                            detail: {
                                state: n
                            }
                        });
                        return window.dispatchEvent(s),
                        r
                    }
                }))))
            }
            ;
            o("pushState"),
            o("replaceState")
        },
        14074: function() {
            "use strict";
            var e = (e, t) => (t = Symbol[e]) ? t : Symbol.for("Symbol." + e)
              , t = function(e, t) {
                this[0] = e,
                this[1] = t
            }
              , r = r => {
                var n, s = r[e("asyncIterator")], i = !1, a = {};
                return null == s ? (s = r[e("iterator")](),
                n = e => a[e] = t => s[e](t)) : (s = s.call(r),
                n = e => a[e] = r => {
                    if (i) {
                        if (i = !1,
                        "throw" === e)
                            throw r;
                        return r
                    }
                    return i = !0,
                    {
                        done: !1,
                        value: new t(new Promise((t => {
                            var n = s[e](r);
                            n instanceof Object || (e => {
                                throw TypeError(e)
                            }
                            )("Object expected"),
                            t(n)
                        }
                        )),1)
                    }
                }
                ),
                a[e("iterator")] = () => a,
                n("next"),
                "throw"in s ? n("throw") : a.throw = e => {
                    throw e
                }
                ,
                "return"in s && n("return"),
                a
            }
            ;
            Map.prototype.every = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback is not a function");
                let t = !0;
                return this.forEach(( (r, n, s) => {
                    t = t && e(r, n, s)
                }
                )),
                t
            }
            ,
            Map.prototype.some = function(e) {
                if (!(e instanceof Function))
                    throw new TypeError("Callback is not a function");
                let t = !1;
                return this.forEach(( (r, n, s) => {
                    t || (t = e(r, n, s))
                }
                )),
                t
            }
            ,
            Map.prototype.reduce = function(e, t) {
                if ("function" != typeof e)
                    throw new TypeError("Map reduce argument 1 must be a function");
                let r = t
                  , n = 0;
                return this.forEach(( (s, i, a) => {
                    n++,
                    r = 1 != n || null != t ? e(r, s, i, a) : s
                }
                )),
                r
            }
            ,
            Map.prototype.map = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback is not a function");
                const t = new Map;
                return this.forEach(( (r, n, s) => {
                    t.set(n, e(r, n, s))
                }
                )),
                t
            }
            ,
            Map.prototype.toArray = function(e) {
                if ("function" != typeof e && null != e)
                    throw new TypeError("Callback if not a function");
                const t = [];
                let r = 0;
                return this.forEach(( (n, s) => {
                    t.push(null == e ? n : e(n, s, r)),
                    r++
                }
                )),
                t
            }
            ,
            Map.prototype.find = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback is not a function");
                let t = null;
                return this.forEach(( (r, n, s) => {
                    t || e(r, n, s) && (t = r)
                }
                )),
                t
            }
            ,
            Map.prototype.sort = function(e) {
                const t = new Map;
                this[Symbol.iterator] = function*() {
                    yield*r([...this.entries()].sort(e))
                }
                ;
                for (let[e,r] of this)
                    t.set(e, r);
                return t
            }
        },
        77906: function() {
            "use strict";
            NodeList.prototype.toArray = function() {
                return Array.prototype.slice.call(this)
            }
            ,
            HTMLCollection.prototype.forEach = function(e) {
                Array.prototype.slice.call(this).forEach(( (t, r, n) => e(t, r, n)))
            }
        },
        12031: function() {
            "use strict";
            Number.prototype.countDecimals = function() {
                return Math.floor(this.valueOf()) === this.valueOf() ? 0 : this.toString().split(".")[1].length || 0
            }
            ,
            Number.prototype.toFixedNumber = function(e, t=10) {
                const r = Math.pow(t, e);
                return Math.round(Number(this) * r) / r
            }
            ,
            Number.prototype.parseIntOrDefault = function(e=null) {
                return Number.isInteger(this) ? ~~this : e
            }
            ,
            Number.prototype.floatToFixed = function(e) {
                return Number.isInteger(this) ? this.toString() : this.toFixed(e)
            }
        },
        88144: function() {
            "use strict";
            Set.prototype.toArray = function(e) {
                if (null != e && "function" != typeof e)
                    throw new TypeError("Callback at Set.prototype.toArray must be null or function");
                const t = [];
                return this.forEach((r => t.push(null == e ? r : e(r)))),
                t
            }
            ,
            Set.prototype.map = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback at Set.prototype.map must be function");
                const t = new Set;
                return this.forEach((r => t.add(e(r)))),
                t
            }
            ,
            Set.prototype.filter = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback at Set.prototype.map must be function");
                const t = new Set;
                return this.forEach((r => {
                    e(r) && t.add(r)
                }
                )),
                t
            }
        },
        4659: function() {
            "use strict";
            if ("localStorage"in window || null !== window.localStorage) {
                const e = Storage.prototype.setItem;
                Storage.prototype.setItem = function(t, r) {
                    try {
                        e.apply(this, arguments)
                    } catch (t) {
                        if (-1 === t.message.indexOf("quota"))
                            throw wb.spa.logError(t),
                            t;
                        let r, n, s = {
                            len: 0
                        }, i = 0;
                        for (n in localStorage)
                            localStorage.hasOwnProperty(n) && (r = 2 * (localStorage[n].length + n.length),
                            i += r,
                            s.len < r && (s = {
                                len: r,
                                key: n
                            }));
                        if (s.key)
                            if (s.len > 307200) {
                                this.removeItem(s.key);
                                const r = `localstorage delkey:${s.key}, len:${s.len / 1024} KB, key:${arguments[0]}, exp:${t.message}`;
                                console.log(r),
                                wb.spa.logError(new Error(r)),
                                e.apply(this, arguments)
                            } else {
                                const e = `localstorage exception key:${arguments[0]}, exp:${t.message}, storageKeys:${localStorage.length}, storageLen:${i / 1024} KB`;
                                console.log(e),
                                wb.spa.logError(new Error(e))
                            }
                    }
                }
                ,
                Storage.prototype.trySetItem = function(e, t) {
                    try {
                        this.setItem(e, t)
                    } catch (e) {}
                }
                ,
                Storage.prototype.clearStartsWith = function(e, t) {
                    if (e)
                        try {
                            Object.entries(this).filter((r => 0 === r[0].indexOf(e) && r[0] !== t)).forEach((e => {
                                this.removeItem(e[0])
                            }
                            ))
                        } catch (e) {}
                }
                ,
                Storage.prototype.putObject = function(e, t, {tryCatch: r}={}) {
                    if (r)
                        try {
                            this.setItem(e, JSON.stringify(t))
                        } catch (e) {}
                    else
                        this.setItem(e, JSON.stringify(t))
                }
                ,
                Storage.prototype.getObject = function(e) {
                    var t = this.getItem(e);
                    try {
                        return t && JSON.parse(t)
                    } catch (t) {
                        this.removeItem(e)
                    }
                    return null
                }
                ,
                Storage.prototype.hasItem = function(e) {
                    return null != this.getItem(e)
                }
            }
        },
        9135: function() {
            "use strict";
            String.prototype.format = function() {
                let e = String(this);
                for (let t = 0; t < arguments.length; t++) {
                    const r = new RegExp("\\{" + t + "\\}","gm");
                    e = e.replace(r, arguments[t])
                }
                return e
            }
            ,
            String.prototype.formatPhone = function(e) {
                let t = this.split("")
                  , r = "";
                for (let n = 0; n < e.length; n++)
                    r += "#" === e[n] ? t.splice(0, 1) : e[n];
                return r
            }
            ,
            String.prototype.capitalize = function() {
                return this.charAt(0).toUpperCase() + this.slice(1)
            }
            ,
            String.prototype.toSafeString = function() {
                return encodeURIComponent(this.replace(/<\/?[^>]+>/gi, "").trim())
            }
            ,
            String.prototype.hashCode = function() {
                let e, t, r = 0;
                if (0 === this.length)
                    return r;
                for (e = 0; e < this.length; e++)
                    t = this.charCodeAt(e),
                    r = (r << 5) - r + t,
                    r |= 0;
                return r
            }
            ,
            String.prototype.parseIntOrDefault = function(e=null) {
                const t = parseInt(String(this));
                return isNaN(t) ? e : t
            }
        },
        30174: function() {
            "use strict";
            window.requestIdleCallback || (window.requestIdleCallback = function(e, t) {
                return setTimeout(e, 1)
            }
            )
        },
        76737: function(e, t, r) {
            "use strict";
            r(9135),
            r(585),
            r(14074),
            r(88144),
            r(90623),
            r(71607),
            r(70746),
            r(12031),
            r(4659),
            r(56228),
            r(35707),
            r(77906),
            r(30174);
            var n = r(91341);
            const s = document.referrer;
            window.originReferer = s,
            Object.defineProperty(document, "referrer", {
                get: () => {
                    try {
                        return (0,
                        n.c)().referrer
                    } catch (e) {
                        return s
                    }
                }
            });
            r(70988),
            r(31226);
            var i = r(90532)
              , a = r.n(i)
              , o = r(27473)
              , l = r(28288)
              , c = r(86291);
            const {PROXY_HTTPS: u, ENV: d, HIGHLIGHT_URL: h} = o.A
              , p = navigator.connection || navigator.mozConnection || navigator.webkitConnection
              , m = Object.freeze({
                tm: "tm",
                c246x328: "c246x328",
                c516x688: "c246x328",
                big: "c516x688",
                hq: "c516x688"
            })
              , b = {
                volHostV2: (e, t=!1) => {
                    if (b.volHostV2Cdn) {
                        const r = b.volHostV2Cdn(e, t);
                        if (r)
                            return r
                    }
                    let r;
                    const n = ~~(e / 1e5);
                    switch (!0) {
                    case n >= 0 && n <= 143:
                        r = "01";
                        break;
                    case n <= 287:
                        r = "02";
                        break;
                    case n <= 431:
                        r = "03";
                        break;
                    case n <= 719:
                        r = "04";
                        break;
                    case n <= 1007:
                        r = "05";
                        break;
                    case n <= 1061:
                        r = "06";
                        break;
                    case n <= 1115:
                        r = "07";
                        break;
                    case n <= 1169:
                        r = "08";
                        break;
                    case n <= 1313:
                        r = "09";
                        break;
                    case n <= 1601:
                        r = "10";
                        break;
                    case n <= 1655:
                        r = "11";
                        break;
                    case n <= 1919:
                        r = "12";
                        break;
                    case n <= 2045:
                        r = "13";
                        break;
                    case n <= 2189:
                        r = "14";
                        break;
                    case n <= 2405:
                        r = "15";
                        break;
                    case n <= 2621:
                        r = "16";
                        break;
                    case n <= 2837:
                        r = "17";
                        break;
                    case n <= 3053:
                        r = "18";
                        break;
                    case n <= 3269:
                        r = "19";
                        break;
                    case n <= 3485:
                        r = "20";
                        break;
                    case n <= 3701:
                        r = "21";
                        break;
                    case n <= 3917:
                        r = "22";
                        break;
                    case n <= 4133:
                        r = "23";
                        break;
                    case n <= 4349:
                        r = "24";
                        break;
                    case n <= 4565:
                        r = "25";
                        break;
                    case n <= 4877:
                        r = "26";
                        break;
                    case n <= 5189:
                        r = "27";
                        break;
                    case n <= 5501:
                        r = "28";
                        break;
                    default:
                        r = "29"
                    }
                    return wb.settings.secondHost ? `${wb.settings.secondHost}/basket-${r}.wbbasket/vol${n}` : `basket-${r}.wbbasket.ru/vol${n}`
                }
                ,
                volFeedbackPhotoHost: (e, t=!1) => {
                    if (b.volFeedbackPhotoHostCdn) {
                        const r = b.volFeedbackPhotoHostCdn(e, t);
                        if (r)
                            return r
                    }
                    let r;
                    const n = ~~(e / 1e5);
                    switch (!0) {
                    case n >= 0 && n <= 431:
                        r = "01";
                        break;
                    case n <= 863:
                        r = "02";
                        break;
                    case n <= 1199:
                        r = "03";
                        break;
                    case n <= 1535:
                        r = "04";
                        break;
                    case n <= 1919:
                        r = "05";
                        break;
                    case n <= 2303:
                        r = "06";
                        break;
                    case n <= 2687:
                        r = "07";
                        break;
                    case n <= 3071:
                        r = "08";
                        break;
                    case n <= 3455:
                        r = "09";
                        break;
                    default:
                        r = "10"
                    }
                    return wb.settings.secondHost ? `${wb.settings.secondHost}/feedback${r}.wbbasket/vol${n}` : `feedback${r}.wbbasket.ru/vol${n}`
                }
                ,
                volVideoHost: (e, t=!1) => {
                    if (b.volVideoHostCdn) {
                        const r = b.volVideoHostCdn(e, t);
                        if (r)
                            return r
                    }
                    let r;
                    const n = e % 144;
                    switch (!0) {
                    case n >= 0 && n <= 11:
                        r = "01";
                        break;
                    case n <= 23:
                        r = "02";
                        break;
                    case n <= 35:
                        r = "03";
                        break;
                    case n <= 47:
                        r = "04";
                        break;
                    case n <= 59:
                        r = "05";
                        break;
                    case n <= 71:
                        r = "06";
                        break;
                    case n <= 83:
                        r = "07";
                        break;
                    case n <= 95:
                        r = "08";
                        break;
                    case n <= 107:
                        r = "09";
                        break;
                    case n <= 119:
                        r = "10";
                        break;
                    case n <= 131:
                        r = "11";
                        break;
                    case n <= 143:
                        r = "12";
                        break;
                    default:
                        r = "13"
                    }
                    return wb.settings.secondHost ? `${wb.settings.secondHost}/videonme-basket-${r}.wbbasket/vol${n}` : `videonme-basket-${r}.wbbasket.ru/vol${n}`
                }
                ,
                volFeedbackVideoHost: (e, t=!1) => {
                    const r = `00${e}`.slice(-2);
                    return wb.settings.secondHost ? `${wb.settings.secondHost}/videofeedback${r}.wbbasket` : `videofeedback${r}.wbbasket.ru`
                }
                ,
                volContentHost: (e, t=!1) => {
                    if (b.volContentHostCdn) {
                        const r = b.volContentHostCdn(e, t);
                        if (r)
                            return r
                    }
                    const r = `00${e}`.slice(-2);
                    return wb.settings.secondHost ? `${wb.settings.secondHost}/content-${r}.wbbasket` : `content-${r}.wbbasket.ru`
                }
                ,
                constructHostV2: (e, t="nm", r=!1) => {
                    const n = parseInt(String(e), 10)
                      , s = "video" === t ? ~~(n / 1e4) : ~~(n / 1e3);
                    let i = "";
                    return "nm" === t ? i = b.volHostV2(n, r) : "feedbackPhoto" === t ? i = b.volFeedbackPhotoHost(n, r) : "content" === t ? i = b.volContentHost(n, r) : "video" === t && (i = b.volVideoHost(n, r)),
                    `https://${i}/part${s}/${n}`
                }
            }
              , g = {
                deepClone: e => JSON.parse(JSON.stringify(e)),
                getHashCode: e => {
                    let t, r, n = 0;
                    if (0 === e.length)
                        return n;
                    for (t = 0; t < e.length; t++)
                        r = e.charCodeAt(t),
                        n = (n << 5) - n + r,
                        n |= 0;
                    return n
                }
                ,
                generateGuid: e => {
                    const t = URL.createObjectURL(new Blob).split("/").pop();
                    return e ? t : null == t ? void 0 : t.replace(/-/g, "")
                }
                ,
                hasBit(e, t) {
                    return 0 !== (t & 1 << e)
                },
                toMap(e, t, r) {
                    if (!t && "function" != typeof t)
                        throw new TypeError("toMap method require callback function or null");
                    if (!r && "function" != typeof r)
                        throw new TypeError("toMap method require callback function or null");
                    return e.reduce(( (e, n) => (e.set(t ? t(n) : n, r ? r(n) : n),
                    e)), new Map)
                },
                dateToFormat(e, t) {
                    return e.format(t)
                },
                roundUpToNextMultipleOfNumber(e, t) {
                    const r = Math.ceil(e / t) * t;
                    return r !== e ? r : r + t
                },
                toTimeFormat: function(e, t) {
                    if (null == t)
                        return "";
                    const r = wb.helpers.timeExtraction(t, !0);
                    return e.format(`${Number(r.hours) > 0 ? r.hours + ":" : ""}${r.minutes}:${r.seconds}`)
                },
                timeExtraction: function(e, t=!1) {
                    return Object.entries({
                        hours: 36e5,
                        minutes: 6e4,
                        seconds: 1e3
                    }).reduce(( (r, n) => {
                        const s = Math.floor(e / n[1]);
                        return r[n[0]] = t ? `0${s}`.slice(-2) : s,
                        e -= s * n[1],
                        r
                    }
                    ), {})
                },
                getInstPeriod(e) {
                    if (!e)
                        return 0;
                    switch ((240 & e) >> 4) {
                    case 4:
                        return 3;
                    case 5:
                        return 6;
                    case 9:
                        return 12;
                    default:
                        return 0
                    }
                },
                date: {
                    leftBefore: e => {
                        const t = wb.helpers.date.serverDate ? new Date(wb.helpers.date.serverDate) : new Date
                          , r = e.getTime() - t.getTime()
                          , n = Math.floor(r / 1e3 % 60)
                          , s = Math.floor(r / 6e4 % 60)
                          , i = Math.floor(r / 36e5);
                        return "{0}:{1}:{2}".format($.views.converters.leadZero(i, 2), $.views.converters.leadZero(s, 2), $.views.converters.leadZero(n, 2))
                    }
                    ,
                    diff: (e, t=new Date) => {
                        const r = {
                            days: 0,
                            months: 0,
                            years: 0
                        };
                        if (e == t)
                            return r;
                        if (e > t)
                            return wb.helpers.date.diff(t, e);
                        if (r.years = t.getFullYear() - e.getFullYear(),
                        r.months = t.getMonth() - e.getMonth(),
                        r.days = t.getDate() - e.getDate(),
                        r.days < 0) {
                            const t = new Date(e.getFullYear(),e.getMonth() + 1,0);
                            r.months--,
                            r.days += t.getDate()
                        }
                        return r.months < 0 && (r.years--,
                        r.months += 12),
                        r
                    }
                    ,
                    formatEstimated: (e, t, r) => {
                        const {timeFrom: n, timeTo: s} = r || {}
                          , i = new Date;
                        i.setHours(0, 0, 0, 0);
                        const a = new Date(e);
                        t || (t = new Date(e)),
                        t.setDate(t.getDate());
                        if (t.valueOf() - i.valueOf() < 0)
                            return wb.i18n.t("delivery.status.delayed");
                        if (!n || !s)
                            return a.getMonth() !== t.getMonth() ? `${a.format("d MMMM")}-${t.format("d MMMM")}` : a.getDate() !== t.getDate() ? `${a.getDate()}-${t.format("d MMMM")}` : `${a.format("d MMMM")}`;
                        const o = $.views.converters.formatTimeStr(n);
                        return wb.i18n.t("delivery.dayNameWithTimeFromTimeTo", {
                            dayName: $.views.converters.dayNameFromDate(a, !0),
                            newTimeFrom: o,
                            timeTo: s
                        })
                    }
                    ,
                    paymentFeedbackTimerStr: e => {
                        const t = Date.now()
                          , r = Number(e) - Number(t)
                          , n = Math.floor(r / 1e3 % 60)
                          , s = Math.floor(r / 6e4 % 60)
                          , i = Math.floor(r / 36e5)
                          , a = Math.floor(r / 864e5);
                        if (r < 0)
                            return "";
                        if (i >= 24) {
                            const e = i % 24 >= 12 ? a + 1 : a;
                            return `${wb.i18n.plural("common.time.days", {
                                count: e
                            })}`
                        }
                        return "{0}:{1}:{2}".format($.views.converters.leadZero(i, 2), $.views.converters.leadZero(s, 2), $.views.converters.leadZero(n, 2))
                    }
                },
                getParamsFromUrlQuery: e => {
                    if (!e)
                        return {};
                    0 === e.indexOf("?") && (e = e.substring(1));
                    const t = e.split("&")
                      , r = {};
                    for (let e = 0, n = t.length; e < n; e++) {
                        const n = t[e].split("=");
                        r[n[0]] = n[1]
                    }
                    return r
                }
                ,
                appendToParamsFromQuery: (e, t) => {
                    if (!t)
                        return;
                    0 === t.indexOf("?") && (t = t.substring(1));
                    const r = t.split("&");
                    for (let t = 0, n = r.length; t < n; t++) {
                        const n = r[t].split("=");
                        e.set(n[0], n[1])
                    }
                }
                ,
                getCardImgName: e => {
                    if (1 === e.idx && e.viewFlags) {
                        const t = ( (e, t) => {
                            const r = parseInt((2048 & t ? "1" : "0") + (1024 & t ? "1" : "0"), 2);
                            if (0 === r)
                                return;
                            const n = wb.cookieHelper.getCookie("_wbauid");
                            if (!n)
                                return;
                            const s = e + n + "ABTest=Be$t"
                              , i = a()(s)
                              , o = JSBI.BigInt("0x" + i.slice(-16))
                              , l = JSBI.remainder(o, JSBI.BigInt(r + 1))
                              , c = JSBI.toNumber(l);
                            return 0 != c ? `ab_${c}` : void 0
                        }
                        )(e.nmId, e.viewFlags);
                        return null != t ? t : e.idx
                    }
                    return e.idx
                }
                ,
                url: {
                    imageUrl: (e, t, r=1, n, s, i=!1) => {
                        var a, o;
                        if (n && !WbSpaModel.prototype.$isDesktop && (t = n),
                        (null == p ? void 0 : p.effectiveType) && "4g" !== (null == p ? void 0 : p.effectiveType) && "3g" !== (null == p ? void 0 : p.effectiveType) && (e => e in m)(t) && (null == (o = null == (a = wb.global.settings) ? void 0 : a.switches) ? void 0 : o.enableProductImageDowngrade) && (t = m[t]),
                        0 === e)
                            return (0,
                            l.urlSiteStatic)(`i/product/notfound/${t}.jpg`, i);
                        return `${b.constructHostV2(e, "nm", i)}/images/${t}/${wb.helpers.getCardImgName({
                            nmId: e,
                            viewFlags: s,
                            idx: r
                        })}.webp`
                    }
                    ,
                    urlForJsTmpl: (e, t=!1) => (0,
                    l.urlSiteStatic)(`t/jst/${e}`, t),
                    urlProductStatic: (e, t=!1, r="ru", n=!1) => `${b.constructHostV2(e, "nm", n)}/info/${r}/card.json`,
                    urlPriceHistoryStatic: (e, t=!1) => `${b.constructHostV2(e, "nm", t)}/info/price-history.json`,
                    urlSellerStatic: (e, t=!1) => `${b.constructHostV2(e, "nm", t)}/info/sellers.json`,
                    urlCertificateStatic: e => `${b.constructHostV2(e, "nm", !1)}/info/certificate.json`,
                    urlStaticData: (e, t=!1) => (0,
                    l.urlStaticBasket)(`data/${e}`, 0, t),
                    urlFeedbackPhoto: (e, t="ms", r=!1) => {
                        const n = parseInt(String(e), 10);
                        return `${b.constructHostV2(n, "feedbackPhoto", r)}/photos/${t}.${$.views.converters.toWebp("jpg")}`
                    }
                    ,
                    urlVideoProduct: (e, t="mp4", r="360p", n=!1) => {
                        const s = parseInt(e, 10);
                        return `${b.constructHostV2(s, "video", n)}/${t}/${r}/${"mp4" === t ? "1.mp4" : "index.m3u8"}`
                    }
                    ,
                    urlRichContent: (e, t=!1) => `${b.constructHostV2(e, "nm", t)}/info/ru/rich_v1.json`,
                    urlImageTags: function(e, t, r=!1) {
                        const n = b.constructHostV2(e, "nm", r);
                        return t ? `${n}/info/tags/${t}.json` : `${n}/info/tags/picMap.json`
                    },
                    urlFeedbackVideo: (e, t="preview.webp", r=!1) => {
                        var n;
                        const s = e.id
                          , [i,a] = null == (n = String(s)) ? void 0 : n.split("/");
                        return `https://${b.volFeedbackVideoHost(i, r)}/${a}/${t}`
                    }
                    ,
                    urlPdfInstruction: (e, t=!1) => `https://${b.volContentHost(e.shard, t)}/${e.uuid}/${e.type_id}.pdf`,
                    urlUserMark(e) {
                        const t = "/w/users/mark"
                          , r = "release" === d ? "https://" : u;
                        if (wb.global.settings.switches.switchVersionOnHighlight) {
                            if ("feedbacks" === e && wb.global.settings.variables.highlightForFeedbacks)
                                return r + wb.global.settings.variables.highlightForFeedbacks + t;
                            if ("questions" === e && wb.global.settings.variables.highlightForQuestions)
                                return r + wb.global.settings.variables.highlightForQuestions + t
                        }
                        return `${h}/highlight-api/api/v1/w/users/mark`
                    }
                },
                replaceDeliveryFilterVal: e => e.replace(/&fdlvr=(\d+)/, ( (e, t) => {
                    const r = 23 - new Date(Date.now()).getHours() - 1;
                    let n = null;
                    switch (parseInt(t)) {
                    case 4:
                        n = r > 4 ? 4 : r;
                        break;
                    case 12:
                        n = r;
                        break;
                    case 24:
                        n = 24 + r;
                        break;
                    case 48:
                        n = 48 + r;
                        break;
                    case 72:
                        n = 72 + r;
                        break;
                    case 120:
                        n = 120 + r
                    }
                    return null != n ? `&fdlvr=${n}` : ""
                }
                )),
                path: {
                    fileName: e => (null == e ? void 0 : e.substring(e.lastIndexOf("/") + 1)) || "",
                    extension: e => (null == e ? void 0 : e.slice(1 + (Math.max(e.lastIndexOf("."), 0) || e.length))) || ""
                },
                iOS: function() {
                    return ["iPad Simulator", "iPhone Simulator", "iPod Simulator", "iPad", "iPhone", "iPod"].includes(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend"in document
                },
                huawei: () => {
                    const e = navigator.userAgent || navigator.vendor || window.opera;
                    return /huawei/i.test(e)
                }
                ,
                formatVideoDuration: e => {
                    const t = Math.floor(e / 60)
                      , r = e % 60;
                    return `${t < 10 ? `0${t}` : t}:${r < 10 ? `0${r}` : r}`
                }
                ,
                setImgFunc: (e, t) => {
                    if ("function" == typeof t)
                        switch (e) {
                        case "mediabasket_route_map":
                            b.volHostV2Cdn = t;
                            break;
                        case "feedback_route_map":
                            b.volFeedbackPhotoHostCdn = t;
                            break;
                        case "videonme_route_map":
                            b.volVideoHostCdn = t;
                            break;
                        case "staticbasket_route_map":
                            (0,
                            c.V)().setImgFunc(e, t)
                        }
                }
                ,
                downloadFile: (e, t) => {
                    const r = URL.createObjectURL(e)
                      , n = document.createElement("a");
                    n.setAttribute("target", "_blank"),
                    n.href = r,
                    t && (n.download = t),
                    document.body.appendChild(n),
                    n.click(),
                    document.body.removeChild(n)
                }
                ,
                downloadOrShareFile: async (e, t, r, n, s) => {
                    const i = new File([e],t,{
                        type: r
                    })
                      , a = [i];
                    try {
                        if ("m" === wb.settings.displayMode && navigator.canShare({
                            files: a
                        }))
                            return await navigator.share({
                                files: a
                            }),
                            void (null == s || s())
                    } catch (e) {
                        wb.spa.logError(e, n)
                    }
                    wb.helpers.downloadFile(i)
                }
                ,
                clearText: e => {
                    const t = document.createElement("div");
                    t.innerHTML = e.replace(/<br\s*\/?>/gi, " ");
                    return (t.textContent || t.innerText || "").replace(/\u00A0/g, " ").trim()
                }
            };
            wb.helpers = g;
            var y = r(76904)
              , f = r(2363)
              , v = r(85556)
              , w = Object.defineProperty
              , _ = (e, t, r) => ( (e, t, r) => t in e ? w(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            let S = "wbx__tokenData";
            const C = "v2"
              , I = `/${C}/auth/slide-v3`
              , k = `/${C}/auth/slide-v3-confirm`
              , P = `/${C}/auth/logoff`
              , {AUTH_URL: M} = o.A;
            var T = r(51799)
              , E = r(90568);
            const D = "geoLocation";
            var A = r(89687)
              , O = r(82746)
              , B = r(18091)
              , L = r(47363)
              , x = r(59054)
              , R = r(22882)
              , F = r(7518)
              , j = r(31332)
              , N = r(64852);
            var U = r(31753)
              , W = Object.defineProperty
              , H = (e, t, r) => ( (e, t, r) => t in e ? W(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class q {
                constructor(e) {
                    H(this, "router"),
                    H(this, "moveTo", ( ({targetLink: e, replaceState: t, forceTransition: r, forceUpdate: n}) => {
                        var s, i, a;
                        let o;
                        const l = (0,
                        T.a)();
                        try {
                            o = new URL(e,window.location.origin)
                        } catch (e) {
                            return !1
                        }
                        if ("javascript:" === o.protocol)
                            return !1;
                        if (U.tR.includes(o.host))
                            return window.location.href = o.toString(),
                            !1;
                        const c = this.router.findRoute(o.pathname);
                        if (null == c || null == this.router.routesDictionary[c.name] || o.hostname !== window.location.hostname)
                            return this.router.isLeaving = !0,
                            t ? window.location.replace(String(e)) : window.location.href = String(e);
                        if (this.router.isLeaving = !1,
                        (null == (s = this.router.currentRoute) ? void 0 : s.name) === c.name && window.dispatchEvent(new CustomEvent("spaTransition",{
                            detail: {
                                isFinished: !0,
                                dest: c
                            }
                        })),
                        o.pathname === window.location.pathname && window.location.search === o.search && !r)
                            return null == (a = null == (i = this.router.viewModel) ? void 0 : i.onSamePageNavigation) || a.call(i, e),
                            void window.dispatchEvent(new CustomEvent("samePageNavigation",{
                                detail: {
                                    targetLink: e
                                }
                            }));
                        this.router.targetRoute = c.name,
                        this.router.referrer = window.location.href;
                        const u = {
                            name: c.name
                        }
                          , d = l.getTempAnalyticForState();
                        d && (u.analyticData = d),
                        t ? this.router.replaceState(u, document.title, o.href) : this.router.pushState(u, document.title, o.href),
                        this.router.goToRoute(c, o, n).then((e => {
                            e && this.router.replaceState(u, document.title, o.href)
                        }
                        )).catch(( () => {}
                        ))
                    }
                    )),
                    this.router = e,
                    this.move = this.move.bind(this),
                    this.moveTo = this.moveTo.bind(this),
                    this.moveToSignIn = this.moveToSignIn.bind(this),
                    this.moveTo404 = this.moveTo404.bind(this),
                    this.moveTo500 = this.moveTo500.bind(this),
                    this.refresh = this.refresh.bind(this)
                }
                move({steps: e, event: t}) {
                    var r;
                    const n = null == t ? void 0 : t.currentTarget;
                    null == (null == n ? void 0 : n.href) ? window.history.go(e) : (null == (r = this.router.customHistory) ? void 0 : r.canMove(e)) && (null == t || t.preventDefault(),
                    window.history.go(e))
                }
                moveToSignIn({p: e, replaceState: t}) {
                    let r = (e => {
                        let t = "/security/login";
                        return e ? `${t}?returnUrl=${encodeURIComponent(e)}` : window.location.pathname === t ? -1 === window.location.search.indexOf("returnUrl=") ? t : window.location.href : `${t}?returnUrl=${encodeURIComponent(window.location.href)}`
                    }
                    )(e && e.query && e.query.returnUrl);
                    this.router.moveTo(new URL(r,window.location.href).href, t)
                }
                async moveTo404() {
                    try {
                        this.router.currentRoute = {
                            name: U.Cv,
                            useReact: !0,
                            reactPageName: U.Cv
                        };
                        const e = this.router.abortController.signal
                          , {renderReactPage: t} = await (0,
                        N.V)()
                          , r = await t({
                            reactPageName: U.Cv,
                            viewData: null,
                            routerState: this.router.state,
                            abortSignal: e
                        });
                        if (this.router.viewModelReact = r,
                        window.dispatchEvent(new CustomEvent("spaTransition",{
                            detail: {
                                isFinished: !0
                            }
                        })),
                        !r)
                            return;
                        const n = document.getElementById("app");
                        if (!n)
                            return;
                        n.style.display = "none"
                    } catch (e) {
                        console.error(e),
                        $.link.criticalError("#app")
                    }
                }
                async moveTo500({error: e, payload: t}) {
                    var r;
                    try {
                        (null == (r = this.router.currentRoute) ? void 0 : r.useReact) && this.router.unmountReact(),
                        await this.router.updateRouteData("criticalError")
                    } catch (e) {
                        console.error(e),
                        this.router.updateRouteData("absoluteCriticalError")
                    } finally {
                        wb.spa.logError(e, t, !0)
                    }
                }
                refresh() {
                    const e = this.router.currentRoute;
                    this.router.clearNotActiveContainer(),
                    this.router.goToRoute(e, window.location, !0)
                }
                static factory(e) {
                    return new q(e)
                }
            }
            var V = r(52988)
              , z = r(74929)
              , G = r(31413)
              , K = r(55757)
              , Q = r(2427)
              , J = r(29595)
              , Y = Object.defineProperty
              , X = (e, t, r) => ( (e, t, r) => t in e ? Y(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class Z {
                static get() {
                    const {nm: e, query: t, url: r} = localStorage.getObject(Z.storageKey()) || {
                        url: [],
                        query: [],
                        nm: []
                    };
                    return {
                        nm: e.map((e => e.nmId)),
                        query: t,
                        url: r
                    }
                }
                static getRecentWithTimestamp() {
                    return localStorage.getObject(Z.storageKey()) || {
                        url: [],
                        query: [],
                        nm: []
                    }
                }
                static addProduct(e) {
                    ("number" == typeof e || "string" == typeof e && !isNaN(Number(e))) && Z.putInStorage("nm", Number(e), 100)
                }
                static putInStorage(e, t, r) {
                    let n = Z.getRecentWithTimestamp()
                      , s = {
                        time: parseInt("" + Date.now() / 1e3),
                        nmId: t
                    }
                      , i = n[e];
                    const a = i.findIndex((e => e.nmId === s.nmId));
                    0 !== a && (a > 0 && i.splice(a, 1),
                    i.unshift(s),
                    i.length > r && (i.length = r),
                    n[e] = i,
                    Z.clearPrevStorage(),
                    localStorage.putObject(Z.storageKey(), n))
                }
                static storageKey() {
                    return `recentViewsV2-${WbSpaModel.prototype.$user.getUid()}`
                }
                static clearPrevStorage() {
                    const e = `recentViews-${WbSpaModel.prototype.$user.getUid()}`;
                    localStorage.removeItem(e)
                }
            }
            var ee = Z;
            const te = "promotion-creatives";
            let re, ne, se, ie;
            const ae = class e {
                static getById(e) {
                    return re && re[e]
                }
                static isThermometerNeeded(e) {
                    return ne && ne.has(e)
                }
                static isRedPriceNeeded(e) {
                    return ie && ie.has(e)
                }
                static getFilter() {
                    return se
                }
                static getMainActionId() {
                    return 188852
                }
                static getHomeCarouselData() {
                    return {
                        caruselUrl: "/promotions/uhtydazha",
                        carouselName: wb.i18n.t("promo.forBrightPrices"),
                        carouselBg: "#ED1AD8"
                    }
                }
                static async _startUpdate() {
                    try {
                        await navigator.locks.request(`lock-${te}`, (async e => {
                            var t;
                            const r = await WbSpaModel.prototype.$httpClient.fetchStatic(`${te}.json.hash`, {
                                noCache: !0,
                                fetchType: "text"
                            }, wb.helpers.url.urlStaticData);
                            if (r && r !== (null == (t = localStorage.getObject(te)) ? void 0 : t.hash)) {
                                const e = await WbSpaModel.prototype.$httpClient.fetchStatic(`${te}.json`, {
                                    noCache: !0
                                }, wb.helpers.url.urlStaticData);
                                e.hash = r,
                                this.initPromoCreatives(e),
                                localStorage.putObject(te, e),
                                localStorage.removeItem("promotions"),
                                localStorage.removeItem("promotions-hash")
                            }
                        }
                        ))
                    } catch (e) {}
                }
                static initPromoCreatives(e) {
                    var t, r, n;
                    e && (re = {},
                    null == (t = e.panels) || t.forEach((e => re[e.id] = e)),
                    ne = new Set(null != (r = e.thermometer) ? r : []),
                    ie = new Set(null != (n = e.redPrices) ? n : []),
                    e.filter && (null == se ? void 0 : se.id) !== e.filter.id && (document.documentElement.style.setProperty("--custom-promo-filter-color", e.filter.color),
                    document.documentElement.style.setProperty("--custom-promo-filter-background", e.filter.background),
                    document.documentElement.style.setProperty("--custom-promo-filter-switch-color", e.filter.switch),
                    document.documentElement.style.setProperty("--custom-promo-filter-switch-background", e.filter.switchBackground),
                    document.documentElement.style.setProperty("--custom-promo-filter-switch-active-color", e.filter.switchActive),
                    document.documentElement.style.setProperty("--custom-promo-filter-switch-active-background", e.filter.switchActiveBackground)),
                    se = e.filter)
                }
                static richPrototype({prototype: t}) {
                    Object.setPrototypeOf(e.prototype, t)
                }
            }
            ;
            ae.initPromoCreatives(localStorage.getObject(te)),
            ae._startUpdate(),
            setInterval(ae._startUpdate.bind(ae), 18e4);
            var oe = ae
              , le = Object.defineProperty
              , ce = (e, t, r) => ( (e, t, r) => t in e ? le(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class ue {
                constructor(e) {
                    ce(this, "isGeLocale", !1),
                    ce(this, "isTmLocale", !1),
                    ce(this, "isTjLocale", !1),
                    ce(this, "stylesLink", ""),
                    ce(this, "moneyBalanceGEL", 0),
                    ce(this, "moneyBalanceTJS", 0),
                    ce(this, "loadTemplateTask"),
                    ce(this, "isResaleEnabledFlag", !1),
                    ce(this, "isResaleSupplierLKQuestionsEnabled", !1),
                    ce(this, "resaleObserver", null),
                    ce(this, "dictionary", {}),
                    ce(this, "alternateRoutes"),
                    ce(this, "walletEl"),
                    ce(this, "walletWrapperEl", null),
                    ce(this, "menuDictionary", {}),
                    ce(this, "menuDictionaryKeys", []),
                    ce(this, "root", null),
                    ce(this, "roots", []),
                    ce(this, "isHidden"),
                    ce(this, "hideTooltipInfoCert"),
                    this._setStatic(e),
                    this.alternateRoutes = new Map,
                    this.hideTooltipInfoCert = wb.global.userSettings.closed.includes("hide_tooltip_info_cert"),
                    this.isHidden = !1
                }
                async init() {
                    var e, t, r;
                    const n = this.dictionary
                      , s = document.querySelector(".j-lk-menu-top");
                    if (!s)
                        return;
                    const i = [{
                        type: "top",
                        selector: document.querySelector(".j-lk-menu-top")
                    }];
                    this.loadTemplateTask = $.views.loadTemplateAsync("menuLk"),
                    await this.loadTemplateTask,
                    this.moneyBalanceGEL = WbSpaModel.prototype.$auth.isAuth && (null == (e = WbSpaModel.prototype.$user.balance) ? void 0 : e.moneyBalanceGEL) || 0,
                    this.moneyBalanceTJS = WbSpaModel.prototype.$auth.isAuth && (null == (t = WbSpaModel.prototype.$user.balance) ? void 0 : t.moneyBalanceTJS) || 0,
                    this.isGeLocale = "ge" === wb.settings.currentLocale,
                    this.isTmLocale = "tm" === wb.settings.currentLocale,
                    this.isTjLocale = "tj" === wb.settings.currentLocale,
                    await WbSpaModel.prototype.$services.userData.getUserDataAsync(),
                    this.isResaleEnabledFlag = WbSpaModel.prototype.isResaleEnabled({
                        isSeller: !0
                    }),
                    this.isResaleSupplierLKQuestionsEnabled = WbSpaModel.prototype.isResaleSupplierLKQuestionsEnabled(),
                    this.sendResaleShownStat = this.sendResaleShownStat.bind(this),
                    this.resaleObserver = WbSpaModel.prototype.$observerHelper.getSimpleObserver(this.sendResaleShownStat, {
                        threshold: .5
                    }),
                    this._checkShowWalletMenu(),
                    WbSpaModel.prototype.$eventBus.addEventListener("BalanceUpdated", this._checkShowWalletMenu.bind(this)),
                    $.templates.menuLk.link(s, this),
                    $.link(!0, s, this),
                    i.forEach((e => {
                        var t;
                        return null == (t = e.selector) ? void 0 : t.querySelectorAll("a").forEach((e => {
                            var t, r;
                            let s;
                            try {
                                s = new URL(e.href).pathname
                            } catch (e) {
                                return
                            }
                            const i = "true" == e.dataset.main
                              , a = "true" == e.dataset.sub
                              , o = e.parentElement;
                            n.hasOwnProperty(s) || (n[s] = {
                                links: [],
                                elements: []
                            });
                            const l = e.closest(i ? "li" : "ul");
                            n[s].elements.push(l),
                            n[s].links.push({
                                el: o,
                                isMainMenu: i,
                                isSubMenu: a,
                                path: s,
                                switch: null == o ? void 0 : o.dataset.switch,
                                funcSwitch: null == o ? void 0 : o.dataset.funcSwitch
                            }),
                            null == (t = e.dataset.altRoutes) || t.split(",").forEach((e => {
                                e && this.alternateRoutes.set(e.trim(), s)
                            }
                            )),
                            "6" === (null == l ? void 0 : l.dataset.attr) && (this.walletWrapperEl = l,
                            this.walletEl = e,
                            null == (r = this.walletWrapperEl) || r.classList.add(wb.settings.walletTypeCode > 0 ? "lk-menu-main__item--wallet" : "lk-menu-main__item--balance"))
                        }
                        ))
                    }
                    )),
                    this.menuDictionary = n,
                    this.menuDictionaryKeys = Object.keys(this.menuDictionary),
                    this.root = s,
                    this.roots = i.map((e => e.selector)),
                    this._initDropDownMenu(),
                    this.toggleVisibilityNodes(),
                    wb.global.subscribe(this.toggleVisibilityNodes.bind(this)),
                    $.observe(wb.settings, "balanceSectionTitle", ( () => {
                        var e, t;
                        null == (e = this.walletWrapperEl) || e.classList.add(wb.settings.walletTypeCode > 0 ? "lk-menu-main__item--wallet" : "lk-menu-main__item--balance"),
                        null == (t = this.walletEl) || t.setAttribute("data-lk-header-st-name", wb.settings.walletTypeCode < 0 ? "Balance" : "Wallet")
                    }
                    ));
                    const a = s.querySelector(".j-lk-resale");
                    return a && (null == (r = this.resaleObserver) || r.observe([a])),
                    this
                }
                _setStatic(e) {
                    this.stylesLink = e.stylesLink
                }
                _checkShowWalletMenu() {
                    const e = WbSpaModel.prototype.$user.getCurrency()
                      , t = this.isTjLocale && 0 !== this.moneyBalanceTJS || this.isGeLocale && 0 !== this.moneyBalanceGEL || !this.isGeLocale && "USD" !== e;
                    $.observable(this).setProperty({
                        balanceCurrency: e,
                        showWalletMenu: t
                    })
                }
                async updateMenu(e, t, r) {
                    var n;
                    if (await this.loadTemplateTask,
                    this.toggleVisibility(t, r),
                    "/" != e[0] && (e = "/" + e),
                    null == this.root)
                        return;
                    const s = this.alternateRoutes.get(e);
                    s && (e = s);
                    const i = this.menuDictionary[e];
                    if (null == i)
                        return;
                    const a = i.elements.length > 0 ? null == (n = i.elements[0]) ? void 0 : n.dataset.attr : "";
                    this.menuDictionaryKeys.forEach((t => {
                        const r = this.menuDictionary[t].elements;
                        r.length > 0 && r.forEach((e => {
                            const t = (null == e ? void 0 : e.dataset.attr) == a;
                            null == e || e.classList.toggle("active", t)
                        }
                        )),
                        this.menuDictionary[t].links.forEach((t => {
                            var r;
                            !t.isMainMenu && (null == (r = t.el) || r.classList.toggle("active", t.path == e))
                        }
                        ))
                    }
                    )),
                    $.observable(this).setProperty({
                        isResaleEnabledFlag: WbSpaModel.prototype.isResaleEnabled({
                            isSeller: !0
                        }),
                        isResaleSupplierLKQuestionsEnabled: WbSpaModel.prototype.isResaleSupplierLKQuestionsEnabled()
                    })
                }
                toggleVisibility(e, t) {
                    const r = WbSpaModel.prototype.$user.getCurrency()
                      , n = "SpaWalletPurchaseEntrypoint" === WbSpaModel.prototype.$router.currentRoute.name && (!r || "USD" === r);
                    if (!e || !e.visible || e.authOnly && void 0 !== t && !t || n)
                        return this.hide();
                    this.show()
                }
                toggleVisibilityNodes() {
                    this.menuDictionaryKeys.forEach((e => {
                        this.menuDictionary[e].links.forEach((e => {
                            var t, r, n;
                            if (e.switch || e.funcSwitch) {
                                let s = wb.global.settings.switches[e.switch] || (null == (t = this[e.funcSwitch]) ? void 0 : t.call(this));
                                if (s)
                                    for (const [t,n] of this.alternateRoutes)
                                        if (n == e.path) {
                                            const n = null == (r = e.el) ? void 0 : r.querySelector("a");
                                            if (n) {
                                                n.href = t;
                                                break
                                            }
                                        }
                                null == (n = e.el) || n.classList.toggle("hide", !s)
                            }
                        }
                        ))
                    }
                    ))
                }
                async show() {
                    this.isHidden = !1,
                    await WbSpaModel.prototype.$helper.loadCssAsync(this.stylesLink),
                    this.isHidden || (this.roots.forEach((e => null == e ? void 0 : e.classList.remove("hide"))),
                    "ru" == wb.settings.currentLocale || wb.global.userSettings.closed.includes("new_fin_oper_loc") || (wb.global.userSettings.closed.push("new_fin_oper_loc"),
                    wb.global.saveUserSettings(),
                    this._showFinOperationsTooltip()))
                }
                hide() {
                    this.isHidden = !0,
                    this.roots.forEach((e => null == e ? void 0 : e.classList.add("hide")))
                }
                _initDropDownMenu() {
                    const e = ["mouseleave", "click"];
                    this.menuDictionaryKeys.forEach((t => {
                        this.menuDictionary[t].links.forEach((t => {
                            var r;
                            t.isMainMenu && (null == (r = t.el) || r.addEventListener("mouseover", ( () => {
                                var e;
                                t.isMainMenu && (null == (e = t.el) || e.classList.add("open"))
                            }
                            ))),
                            e.forEach((function(e) {
                                var r;
                                t.isMainMenu && (null == (r = t.el) || r.addEventListener(e, (function() {
                                    var e;
                                    t.isMainMenu && (null == (e = t.el) || e.classList.remove("open"))
                                }
                                )))
                            }
                            ))
                        }
                        ))
                    }
                    )),
                    this._addClickStat()
                }
                _addClickStat() {
                    this.roots.forEach((e => {
                        null == e || e.addEventListener("click", (e => {
                            var t, r;
                            const n = e.target
                              , s = null == n ? void 0 : n.closest("a")
                              , i = null == (t = null == s ? void 0 : s.dataset) ? void 0 : t.lkHeaderWba
                              , a = null == (r = null == s ? void 0 : s.dataset) ? void 0 : r.lkHeaderStName;
                            void 0 !== i && this.handleWbaName(i),
                            void 0 !== a && this.handleWbaNameSt(a)
                        }
                        ))
                    }
                    ))
                }
                handleWbaName(e) {
                    e && (["LK_Purchases", "LK_Favorites", "LK_DLV", "LK_eCheck", "Favourite_Brand"].includes(e) ? this.sendClickStat(e) : ["LK_RefundRegistration"].includes(e) ? this.sendClickStat("LK_Refunds") : "LK_Header_Purchases" !== e ? "LK_Header_Favorites" !== e ? WbSpaModel.prototype.$analitic.sendEvent(`${e}_T`) : WbSpaModel.prototype.$analitic.sendEvent("LK_Favorites_T", {
                        location: "LK_Block"
                    }) : WbSpaModel.prototype.$analitic.sendEvent("LK_Purchases_T", {
                        location: "LK_Block"
                    }))
                }
                sendResaleShownStat() {
                    WbSpaModel.prototype.$analitic.sendEvent("LK_Resale_S")
                }
                handleWbaNameSt(e) {
                    e && WbSpaModel.prototype.$analitic.sendEvent("LK_Header_T", {
                        name: e
                    })
                }
                sendClickStat(e) {
                    WbSpaModel.prototype.$analitic.sendEvent(`${e}_T`, {
                        location: "Sub_Header"
                    })
                }
                _showFinOperationsTooltip() {
                    const e = "lk-menu-main__item--tooltip-active"
                      , t = document.getElementById("menuTooltipTarget");
                    if (!t)
                        return;
                    const r = t.querySelector(".j-tooltip-close")
                      , n = () => t.classList.remove(e);
                    null == r || r.addEventListener("click", n),
                    setTimeout(n, 6e3),
                    t.classList.add(e)
                }
                closeTooltipInfoCert() {
                    WbSpaModel.prototype.$observable.setProperty({
                        hideTooltipInfoCert: !0
                    }),
                    wb.global.userSettings.closed.push("hide_tooltip_info_cert"),
                    wb.global.saveUserSettings(),
                    $.observable(this).setProperty({
                        hideTooltipInfoCert: !0
                    })
                }
                scrollToEl(e) {
                    var t;
                    const r = e.currentTarget
                      , n = null == (t = e.currentTarget) ? void 0 : t.closest("li")
                      , s = n.closest(".lk-menu-sub__list")
                      , i = s.querySelectorAll("li")
                      , a = Array.from(i).indexOf(n);
                    1 === a || 2 === a ? s.scrollLeft = (null == r ? void 0 : r.offsetLeft) + (null == r ? void 0 : r.offsetWidth) - s.offsetWidth : 3 !== a && 4 !== a || (s.scrollLeft = r.offsetLeft)
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(ue.prototype, e)
                }
                static factory(e) {
                    return new ue(e)
                }
            }
            var de = ue;
            const he = Object.freeze({
                mobile: "m",
                desktop: "d"
            });
            let pe = null;
            var me = r(17746)
              , be = Object.defineProperty
              , ge = (e, t, r) => ( (e, t, r) => t in e ? be(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class ye {
                constructor() {
                    ge(this, "error", null)
                }
                async get() {
                    if (this.error)
                        return this.error;
                    try {
                        const e = (0,
                        f.s)()
                          , t = await e.loadModuleAsync("loadingError");
                        return this.error = new t,
                        this.error
                    } catch (e) {
                        return null
                    }
                }
                static factory() {
                    return new ye
                }
            }
            var fe = Object.defineProperty
              , ve = (e, t, r) => ( (e, t, r) => t in e ? fe(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            let we = null;
            const _e = class e {
                constructor() {
                    ve(this, "processing"),
                    ve(this, "currentData"),
                    ve(this, "targetData"),
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null,
                    this.onPopupShow = this.onPopupShow.bind(this)
                }
                async showSlider(e, t, r) {
                    const s = (0,
                    n.c)();
                    if (!(0,
                    K.M)().isDesktop())
                        return void s.moveTo($.views.converters.urlForGood(e.cod1S, !0, e.newTargetUrl, null, !1, e.chrtId));
                    const {observeDisplayMode: i, removeObserver: a} = this.createObservable();
                    wb.displayModeSettings.addObserver(i),
                    e.onHideCallback = a;
                    if (await this.processingPopup(e.cod1S, e.chrtId, e.newTargetUrl, r))
                        try {
                            await we.showSlider(e, t, r)
                        } catch (e) {
                            this.onShowError(a)
                        } finally {
                            this.onPopupShow()
                        }
                }
                async show(e, t, r, s, i={}) {
                    const a = (0,
                    T.a)()
                      , o = (0,
                    n.c)();
                    if (!(0,
                    K.M)().isDesktop())
                        return s && a.updateState(s),
                        void o.moveTo($.views.converters.urlForGood(e, !0, r, null, !1, t));
                    const {observeDisplayMode: l, removeObserver: c} = this.createObservable();
                    wb.displayModeSettings.addObserver(l);
                    if (await this.processingPopup(e, t, r, null))
                        try {
                            await we.show(e, t, s, c, i)
                        } catch (e) {
                            this.onShowError(c)
                        } finally {
                            this.onPopupShow()
                        }
                }
                async onPopupShow() {
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null
                }
                async processingPopup(e, t, r, n) {
                    var s;
                    return this.processing ? (e != (null == (s = this.currentData) ? void 0 : s.cod1S) && (this.targetData = {
                        cod1S: e,
                        chrtId: t,
                        newTargetUrl: r,
                        cardIndex: n
                    }),
                    !1) : (this.processing = !0,
                    this.currentData = {
                        cod1S: e,
                        chrtId: t,
                        newTargetUrl: r,
                        cardIndex: n
                    },
                    await this.loadProductCardPopup(),
                    !0)
                }
                async loadProductCardPopup() {
                    const e = (0,
                    f.s)()
                      , t = await e.loadModuleAsync("productCardPopup");
                    we = t;
                    window.addEventListener("spaTransition", ( () => {
                        this.processing = !1,
                        this.currentData = null,
                        this.targetData = null
                    }
                    ).bind(this))
                }
                createObservable() {
                    const e = () => wb.displayModeSettings.removeObserver(t)
                      , t = () => {
                        e()
                    }
                    ;
                    return {
                        observeDisplayMode: t,
                        removeObserver: e
                    }
                }
                onShowError(e) {
                    navigator.onLine || wb.popup.renderModalError("Internet connection is lost"),
                    null == e || e(),
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null
                }
                static richPrototype({prototype: t}) {
                    Object.setPrototypeOf(e.prototype, t)
                }
                static factory(t) {
                    return t && e.richPrototype(t),
                    new e
                }
                static getSingltone() {
                    return e.instance || (e.instance = e.factory()),
                    e.instance
                }
            }
            ;
            ve(_e, "instance", null);
            let Se = _e;
            var Ce = JSON.parse('{"switches":{"addUserVector":true,"addUserVectorCatalog":true,"addUserVectorRecommend":true,"antiDDoSFeedbackComplain":false,"apiShowEvents":true,"bannerWebp":true,"brandLogoV3":true,"catalogActionFilter":true,"catalogShowDeliveryDate":true,"catalogVideoPreview":true,"clubCancelNewSteps":true,"customerReceipt":true,"disableCountryFlags":true,"disableQuestionForm":false,"dontIncludeSoldItemsInOrder":false,"enable2faForEmployee":true,"enableAddQuantityCounter":false,"enableAstroReceipts":true,"enableB2bInn":true,"enableBalanceRefill":false,"enableCargoDeliveryUpdate":false,"enableCargoDeliveryUpdateV2":false,"enableCashback":false,"enableCashbackWidgetHide":false,"enableCatalogCaptcha":true,"enableCdnConfig":true,"enableChatBot":true,"enableChatsHistory":true,"enableChatUploadV2":false,"enableChooseColor":true,"enableClaims":true,"enableClaimsInKT":true,"enableClubInBelarus":false,"enableCommentContentCheck":false,"enableContentErrorApi":false,"enableCourierDelivery":true,"enableCourierDeliveryClub":true,"enableCryptoChange":false,"enableCryptoChangeBalance":false,"enableCustomsDuty":true,"enableCWBReceiptsPage":true,"enableDoubleChanceActionClub":true,"enableEaptekaCustomSellerpage":false,"enableEaptekaKt":false,"enableErrorImagePlug":false,"enableExcludedFromRating":true,"enableFeedbackFirstLock":true,"enableFeedbackPhoto":true,"enableFeedbacksBables":true,"enableFeedbacksForPoints":true,"enableFeedbacksSortRelevance":false,"enableGenerativeFeedback":false,"enableGiftCerts":true,"enableHomeSaleCarousel":false,"enableHomeSaleTabs":false,"enableImageTags":true,"enableInfiniteScroll":false,"enableInstWBBankPreapprov":true,"enableInternalBasketApiUrl":true,"enableLazyProductSwiper":false,"enableLocalization":false,"enableLogoSbpQr":true,"enableManualGluingOnProduct":true,"enableMe2MeReplenish":true,"enableMyRefunds":true,"enableNewCentralBlock":true,"enableNewDesignPDL":true,"enableNewHostOnlineChatGE":false,"enableNewOfferOnFeedback":true,"enableNewShopWindow":true,"enableNewSimilarInPostponed":true,"enableNewSizeBannerDelivery":false,"enableNewSizeBannerLK":false,"enableNewSizeBannerMain":true,"enableNewSizeBannerSalePage":false,"enableNewSizeBannerSearch":false,"enableNewSizeBannerThxForOrder":false,"enableNewVisualSimilar":true,"enableNewWalletHistory":true,"enableOnlineChat":true,"enableOpenNewTab":false,"enableOrderQRWalletRefill":false,"enableOverLimitOnPaidInst":false,"enablePartnerWbDigital":true,"enablePartnerWbTravel":false,"enablePCc2cFeedbacks":true,"enablePCc2cQuestions":true,"enablePDLCoFinancing":false,"enablePdlDiscount":true,"enablePdlWithoutCardAndSbp":true,"enablePopupAcceptOffer":true,"enablePremiumSellerAccent":true,"enablePremiumSellerAnswer":true,"enablePrescriptionLever":true,"enablePriceHistoryChart":true,"enableProductCounter":false,"enableProductImageDowngrade":true,"enableProductQuestions":true,"enablePromoCodeOnLanding":true,"enablePromoExtraCatalogSliders":true,"enablePromoExtraHeaderSlider":true,"enablePromoFilterRedesign":false,"enablePublicSellerPercent":true,"enableReactProductPage":false,"enableRecIdentical":false,"enableRecInLk":true,"enableRefund":true,"enableRefusalInBasket":false,"enableReturnSubjectsWithDays":true,"enableRichVideoAutoplay":true,"enableRoundingPayment":true,"enableSaleMode":false,"enableSearchInSeller":false,"enableSellerPercent":true,"enableSellerRecommendation":true,"enableSellersChat":true,"enableSellersChatGE":false,"enableSendPersonalDataGe":true,"enableShowFeedbacksBables":false,"enableSignatureInPhotoSearch":true,"enableSizeStockOnSnippet":false,"enableSomeProductInSellers":false,"enableStaticFeedbacks":true,"enableSubscriptionPopup":false,"enableSupportBooking":true,"enableSyncLocationsDbs":true,"enableTalesKT":false,"enableTaskBlock":true,"enableTextVectorInRecInKt":false,"enableTimerFromPromoPages":false,"enableTinkoffIdentification":false,"enableTrialTwoHundredForClub":true,"enableTrustFactorsPinned":false,"enableUnauthOnlineChat":true,"enableUnauthOnlineChatGE":false,"enableUnreturnSubjects":false,"enableUpdatedReview":true,"enableWalletDiscountForPaidIns":true,"enableWalletForCerts":true,"enableWalletRedesign":true,"enableWbClubCancelAb":true,"enableWbClubLevels":false,"enableWbClubRedesign":true,"enableWbInstallment":false,"enableWbxOrder":true,"enableWebpImages":true,"feedbacksByNm":true,"generativeFeedbackForEmp":false,"hideFeedbacksForC2C":true,"hideMultipleSellersLever":true,"hidePremiumSellerBadge":true,"hidePriceIncreasePremiumKt":true,"hlsVideoCard":true,"isVisibleRedReturnLabel":true,"isWbGeocoder":true,"localCurrency":false,"mergeSellerAndBrandMobile":true,"metaCharacteristicEnable":true,"multicardEnable":false,"multicardV2Enable":true,"oferta0425Logoff":true,"priceWithLogistics":false,"priceWithLogisticsOnSplitter":true,"rafflePromo0529":true,"recommendedCardLikeCatalog":true,"relatedGoodsInBasket":false,"removeReviewBlockMobile":true,"showAnswerToCommentBtn":true,"showArticlesPreviewInCard":false,"showBirthdayWbBadge":false,"showFeedbackMessengers":false,"showLogisticsInPrice":true,"showNextPayment":true,"showPremiumSeller":true,"showPrizeDrawBadge":true,"showQuickViewOnWaitingFeedback":false,"showTopSimilar":false,"showTravelOffers":false,"showTrustFactorsFeedbacks":true,"showWallet":true,"showWbKidsLooks":false,"switchVersionOnHighlight":true,"tecDocEnable":true,"useCatalogReturnCost":false,"useFeedbacksNewForClaims":true,"useFreeYandexMapsSite":false,"useNewPublicFeedbacks":true,"useSearchForHomeRec":true,"useSearchForHomeRecAb":false,"useSearchInKT":true,"useSearchInKTWithAB":true,"useStageBannersForLanding":false,"wbClubPaymentWallet":true,"wbTilesMap":true,"enableSupplierLKc2cFeedbacks":false,"enableDetailsForPaidDeliveryOn2SHK":false,"enableNewFeedbacksPhotoShards":false,"enableNewConditionsForCallingPD":false,"enableNewAnswerDesignForPremium":true,"disableLogisticOn2SHKInDeliveryBlock":false,"enableC2CNotificationsOnMain":false,"enableSmartPVZ":true,"enableDetailingForLogisticVer3":false,"enableLimitationOrderAmountSmartPVZ":false,"enableGenSessionToken":false,"enableGenSessionTokenSuccessLogs":false,"enableDBSPInBasket":false,"enableCartShare1SHK":false,"enableNewDutyCalculation":false,"enableNewRangingDeferred":false,"enableOnboardingTooltipPaidInstallments":false,"enableCreditForKT":true,"enableInformerDrawDeliveries":true,"enableC2CResaleProfile":true,"enableNotificationOfNonReturnOfLogistics":true,"enableC2CinClaims":true,"enableC2CSales":true,"enableC2CSalesForEmp":true,"enableWbLimitInCartOn1ShK":true,"disableC2CChat":true,"disableC2CChatEmp":true,"enableDetailingForLogisticPurchases":false,"enableReturnsForDbsSellers":false,"enableNewCalculationOfLogistic":true,"enablePdlBacklightingKt":false,"enableRenameDeliveriesInOrders":false,"enableEgroceryCatalog":false,"enableProductRedirectSearch":false,"enableLeaveAtTheDoor":true,"enableFreeCourierWBClub":true,"enablePreselectionDateForDelivery":false,"enablePreselectionDateForKGT":false,"enableCourierDeliveryFromOPPComment":false,"enableUnitedWBCourierDelivery":false,"enableC2CFeedbacksOnPA":true,"enableC2CQuestionsOnPA":true,"enableSupplierLKc2cQuestions":true,"enableViewFeedbackCountWithPhoto":true,"enableRecommendationPoint":false,"enableServiceFee":false,"enableChatsV3":false,"enableChatsV3Emp":false,"enableWalletDiscountRounder":false,"enableCourierDeliveryFromOPPPart":true,"enableDidntFitReason":true,"enableBannerInDetailsInClaims":false,"enableC2CResaleHowToSend":true,"enableInfoMessageInSellerChat":false,"enableHelpBasketReturnDisableInClaims":false,"enableC2CVideos":false,"enableEgroceryCategory":false,"enableSalaryCard":false,"enableC2CCatalogEntryPoint":true,"enablePDLSMSNotificationLK":false,"enableSmartCalendar":false,"newAndOldSellerLogo":false,"newSellerLogo":false,"enableC2CSalesForAllEmp":true,"enablePaidCargoDeliveryKt":true,"enableNewDiscountLimitForAllWalletLevel":false,"enableWBTrackProfile":false,"enableWBTrackProfileEmployee":false,"enableRemoveRefused":true,"enableOnePurchasePromo":false},"variables":{"minCreditSum":4999,"destToShowLogistics":[],"catalogReturnCostLocales":["am","kz","kg","uz","by","ru","ge","tj"],"expirationCost":{"RUB":200,"BYN":7,"AMD":860,"KZT":1080,"KGS":186,"UZS":27600,"GEL":6,"TJS":24,"TMT":8,"AZN":3.8,"USD":2},"resourseStatSettings":{"img":"2-6;10"},"publicBasketApiUrl":"//ru-basket-api.wildberries.ru","pricesDeltaToShowSale":5,"wbxOrdersSyncRange":"0;14000000000","usersRangeForPremiumSubs":"0;200000000","usersRangeForVideoFirstInProductCard":"0;199000000","usersRangeCdnConfigV2":"","newVisualSimilarRange":"0;10000000","newSimilarInPostponedRange":"0;0","enableSubscriptionPopupRange":"0;2000000000","cardMirSbpSaleToShow":0,"failedPaymentsDisplayMinutes":150,"minutesForOrderCancel":60,"usersRangeForTravel":"0;14000000000","highlightForFeedbacks":"highlight.wildberries.ru/highlight-api/api/v2","highlightForQuestions":"highlight.wildberries.ru/highlight-api/api/v1","wbxOrderUsersRange":"0;300000000","wbxOrderCancelUsersRange":"0;2000000000","siteMinVersion":"12.2.0","walletDiscountPercent":0,"walletDiscountDisplayMaxPrice":0,"wlt1DiscountPercent":0,"wlt2DiscountPercent":5,"wlt1DiscountDisplayMaxPrice":15000,"wlt2DiscountDisplayMaxPrice":100000,"bellPercentage":"100","clientActionsInQuery":"5|1|5|8","promoWithTimers":{"202348":1744577999,"202422":1745355599,"203226":1746046799,"203418":1745182799,"203668":1747169999,"203810":1746997199,"1001365":1748465999,"1001424":1750280399,"1001867":1748897999,"1002155":1748897999,"1002680":1749589199,"1002728":1750021199,"1003173":1750280399},"enableLanguageSwitcher":["ge"],"travelClubDate":"16 января","withLogisticsCountries":["ru","kz","am","ge","uz","tj"],"discountRounding":{"lowerRoundingThreshold":100000,"multiplicity":5,"expiresAt":1751328000,"discountRoundingSign":"888098d840425fe0b7a810a654199e9d5e74203eb1281d1ed52189a654118c4b"}},"currencies":{"BYN":{"rubRate":26.3797},"KZT":{"rubRate":0.150109},"AMD":{"rubRate":0.202788},"KGS":{"rubRate":0.895654},"UZS":{"rubRate":0.00626492},"AZN":{"rubRate":46.0543},"GEL":{"rubRate":28.7122},"TJS":{"rubRate":7.90831},"TMT":{"rubRate":22.3692},"USD":{"rubRate":78.2923},"RUB":{"rubRate":1}},"mobileAppVariables":{"objects":{"digitalLottery":{"catalogMenu":{"imageUrl":"https://static-basket-01.wbbasket.ru/vol1/apps_main_menu_pics/lottery/mechtallion.png","title":"Лотерея"},"legalInfoUrl":"https://www.wildberries.ru/services/oferta-loterei-mechtalion","lotterySellerId":999,"luckyCnt":4,"luckyMaxRange":40,"mainHeader":"https://static-basket-01.wbbasket.ru/vol1/mobile_creative/lottery/mechtallion/header.png","paymentInfo":"Организатор: Министерство финансов Российской Федерации\\nОператор: ООО \\"Спортивные лотереи\\"\\nИНН: 5003133760\\nСлужба поддержки: 8(495)241-30-81\\nИнформация о результатах тиража: https://nloto.ru\\nАгент: ООО \\"РВБ\\"\\nИНН: 9714053621\\n142181, Московская Область, г. Подольск, деревня Коледино, Территория Индустриальный парк Коледино, д. 6 стр. 1","productCard":"https://static-basket-01.wbbasket.ru/vol1/mobile_creative/lottery/mechtallion/productCard.png","productCode":102191,"productEngName":"mechtallion","rulesUrl":"https://digital.wildberries.ru/lottery/102191?rules"},"informerDrawLkV2":{"astroUrl":"","broadcastButtonText":"Смотреть","chanceText":"Заберите товары — повысьте шансы на победу","deliveryButtonText":"К доставкам","drawUrl":"https://napi.wildberries.ru/api/promo/otpuskaem-rozygrysh","imgUrl":"https://static-basket-01.wbbasket.ru/vol1/mobile_content/bg-progressbar-state3.png","panelPromoId":1001424,"promoFinishText":"Розыгрыш завершён, 10 июля объявим победителей","promoResultsText":"Итоги подведены — победители известны!","promoTitle":"Выиграйте квартиру","purchasesText":"За покупками","resultButtonText":"К результатам"},"newConditionsForCallingPDObject":[{"from":["ge"],"to":"ge"},{"from":["uz"],"to":"uz"}],"detailingForLogisticVer3Range":[{"fromId":4159922,"toId":4159922},{"fromId":12064232,"toId":12064232},{"fromId":22665472,"toId":22665472},{"fromId":26506292,"toId":26506292},{"fromId":13899950,"toId":13899950},{"fromId":54477843,"toId":54477843},{"fromId":66193132,"toId":66193132},{"fromId":252529129,"toId":252529129}],"smartPVZRange":[{"fromId":11253735,"toId":11253735},{"fromId":125591935,"toId":125591935},{"fromId":13899950,"toId":13899950},{"fromId":22292451,"toId":22292451}],"genSessionTokenPercentage":{"blackList":[],"percentage":0,"salt":77,"type":"deviceId","whiteList":[]},"newRestrictionsOnImportedGoodsObjects":[{"count":3,"from":"cn","textGroup":"group1","to":"ru"},{"count":3,"from":"tr","textGroup":"group1","to":"ru"},{"count":2,"from":"ru","textGroup":"group1","to":"uz"},{"count":2,"from":"ru","textGroup":"group2","to":"ge"},{"count":3,"from":"ae","textGroup":"group1","to":"ru"}],"enableNewRangingDeferredRange":[{"fromId":1,"toId":1}],"directPosCreditParameters":{"maxAmount":30000000,"maxPeriod":36,"medianCommission":20,"minAmount":100000,"minPeriod":6,"noneSubjectIds":[8241],"range":[{"fromId":1,"toId":1}],"summForShowWidget":1000000},"subjIdForWbCard":[8605],"C2CSalesRange":[{"fromId":1,"toId":999999999}],"c2cAdvPriceRules":{"maxPrice":25000,"minPrice":50},"disableC2CChatRange":[{"fromId":1,"toId":1}],"chatC2CConditions":{"statusDeliveryScreen":[13,504],"statusPurchasesScreen":[14,16],"statusSiteDeliveryScreen":[0,10,12,60,100,300,501,503]},"variantsCardRange":[{"fromId":15579994,"toId":15579994},{"fromId":149984920,"toId":149984920},{"fromId":27301289,"toId":27301289},{"fromId":157608991,"toId":157608991},{"fromId":155299819,"toId":155299819},{"fromId":152720382,"toId":152720382},{"fromId":7984164,"toId":7984164},{"fromId":151691047,"toId":151691047},{"fromId":4072187,"toId":4072187},{"fromId":24058136,"toId":24058136},{"fromId":52971100,"toId":52971100},{"fromId":17741752,"toId":17741752},{"fromId":15808763,"toId":15808763},{"fromId":25825836,"toId":25825836},{"fromId":130379612,"toId":130379612},{"fromId":40519114,"toId":40519114},{"fromId":11719700,"toId":11719700},{"fromId":15333781,"toId":15333781},{"fromId":31846264,"toId":31846264},{"fromId":8728020,"toId":8728020},{"fromId":13536432,"toId":13536432},{"fromId":33688088,"toId":33688088},{"fromId":16600122,"toId":16600122},{"fromId":43641549,"toId":43641549},{"fromId":148824957,"toId":148824957},{"fromId":66193132,"toId":66193132},{"fromId":22990492,"toId":22990492},{"fromId":31340321,"toId":31340321},{"fromId":40550312,"toId":40550312},{"fromId":40492607,"toId":40492607},{"fromId":27106811,"toId":27106811},{"fromId":8232650,"toId":8232650},{"fromId":8829784,"toId":8829784}],"egroceryCatalogRange":[{"fromId":1,"toId":1}],"2FARange":[{"fromId":1,"toId":999999999}],"walletLimitDescription":{"account":{"kindName":"Максимальный","monthlyLimit":500000000,"monthlyLimitDiscount":100000000,"oneTimeLimit":100000000},"anonymous":{"kindName":"Минимальный","monthlyLimit":4000000,"oneTimeLimit":1500000},"verified":{"kindName":"Стандартный","monthlyLimit":20000000,"oneTimeLimit":10000000}},"courierTrackerMapStatuses":{"kgt":[600],"wb":[803]},"freeCourierWBClubRange":[{"fromId":1,"toId":1}],"controlRepudiationAllShKRange":[{"fromId":1,"toId":999999999},{"fromId":4159922,"toId":4159922},{"fromId":12064232,"toId":12064232},{"fromId":22665472,"toId":22665472},{"fromId":26506292,"toId":26506292}],"preselectionDateForDelivery":[2,7,17,18,20,23],"unitedWBCourierDeliveryRange":[{"fromId":0,"toId":0}],"UnclaimedPrice":{"AMD":860,"AZN":3.8,"BYN":7,"GEL":6,"KGS":186,"KZT":1080,"RUB":200,"TJS":24,"USD":2,"UZS":27600},"serviceFeeSwitcherParameters":{"preselected":false,"subtitle":"Особое внимание вашему заказу за %d ₽","title":"Приоритетный заказ","tooltipText":"В системах Wildberries ваш заказ будет обработан в приоритетном порядке"},"eaptekaIds":[4360105],"volStaticFeedbackForNewSharding":[{"host":"https://feedback-01.wbbasket.ru/","number":1},{"host":"https://feedback-02.wbbasket.ru/","number":2},{"host":"https://feedback-03.wbbasket.ru/","number":3},{"host":"https://feedback-04.wbbasket.ru/","number":4},{"host":"https://feedback-05.wbbasket.ru/","number":5},{"host":"https://feedback-06.wbbasket.ru/","number":6},{"host":"https://feedback-07.wbbasket.ru/","number":7},{"host":"https://feedback-08.wbbasket.ru/","number":8},{"host":"https://feedback-09.wbbasket.ru/","number":9}],"volStaticFeedback":[{"from":0,"host":"https://feedback01.wbbasket.ru/","number":1,"to":431},{"from":432,"host":"https://feedback02.wbbasket.ru/","number":2,"to":863},{"from":864,"host":"https://feedback03.wbbasket.ru/","number":3,"to":1199},{"from":1200,"host":"https://feedback04.wbbasket.ru/","number":4,"to":1535},{"from":1536,"host":"https://feedback05.wbbasket.ru/","number":5,"to":1919},{"from":1920,"host":"https://feedback06.wbbasket.ru/","number":6,"to":2303},{"from":2304,"host":"https://feedback07.wbbasket.ru/","number":7,"to":2687},{"from":2688,"host":"https://feedback08.wbbasket.ru/","number":8,"to":3071},{"from":3072,"host":"https://feedback09.wbbasket.ru/","number":9,"to":3455}],"enableChatsV3Range":[{"fromId":1,"toId":1}],"availableReasonsForGroceryClaim":[10,11,12,13,14,15,16],"availableReasonsForClaim":[10,11,12,13,14,15,16],"reasonDidntFitRange":[{"fromId":40000000,"toId":160000000}],"freeCourierWBClub":{"AmountFreeDeliveries":150000,"CountFreeDeliveries":2},"egroceryCategory":[{"id":128891,"name":"Алкоголь"},{"id":128327,"name":"Фрукты и ягоды"},{"id":128328,"name":"Овощи"},{"id":10305,"name":"Молочные продукты"},{"id":62466,"name":"Мясо и птица"},{"id":10558,"name":"Сладости и хлеб"},{"id":10297,"name":"Снеки"},{"id":128326,"name":"Заморозка"},{"id":10557,"name":"Напитки"},{"id":10411,"name":"Бакалея"},{"id":9510,"name":"Чай и кофе"},{"id":9511,"name":"Детское питание"},{"id":10299,"name":"Здоровое питание"},{"id":58757,"name":"Вкусные подарки"},{"id":15816,"name":"Наборы продуктов"}],"smartCalendarAvailableFor":[3,19],"textVectorInRecInKtRange":[{"fromId":1,"toId":1}],"C2CSalesRangeExternal":[{"fromId":10000000,"toId":21000000}],"egrocerySellersIds":[250000099,250000659],"enableWBTrackProfileRange":[{"fromId":1,"toId":1}],"onePurchasePromo":{"dateFromUTC":1748594991,"dateToUTC":1748594991,"promoId":21314}},"numbers":{"sessionTokenComplexity":8,"enableShowPromoForOPPOn2SHK":0,"limitOPP":1500,"minCostForOPPOn1SHK":49,"enableEvaluationOnQuestionAnswers":1,"limitationOrderAmountSmartPVZ":5000000,"sessionTokenGenerationTimeLimit":1500,"sessionTokenTimeToLive":300,"multiplicity":5,"basketStockAmount":9,"enableReverseTestOffersOnWeb":0,"paidInstallmentsOnboardingTooltipCounter":3,"enableMotivationInCartOn1ShK":0,"expirationPvzDays":12,"c2cFeeAmount":5,"basketMaxQt":255,"enableControlRepudiationAllShK":4,"limitPriceLeaveAtTheDoor":10000,"CountFreeDeliveries":2,"AmountFreeDeliveries":150000,"oppCommentSize":300,"favoritesLimitDefault":2000,"favoritesLimitWbClub":4000,"minC2CPhotos":3,"lowerRoundingThreshold":100000,"enablePDLSMSNotification":0,"statusDisplayPeriodRefused":7},"services":{"manualSendingC2CHost":"https://www.wildberries.ru/services/resale","c2cTermsHost":"https://legal.wildberries.ru/oferta-o-predostavlenii-prava-ispolzovaniya-torgovoy-ploschadki-v-tselyakh-razmescheniya-obyavleniy-o-prodazhe-tovarov-i-priobreteniya-takikh-tovarov/country/ru/lang/ru/","resaleSubjectHost":"https://static-basket-01.wbbasket.ru/vol2/c2c-items/subjects.json"}}}');
            class Ie {
                static createPagerModel(e, t, r=100, n=window.location.href, s=!1) {
                    let i = Math.ceil(e / r);
                    s && (i = i <= t ? t : t + 1);
                    let a = [];
                    if (i <= 8)
                        a.push(...Ie.createRange(i, 1));
                    else {
                        let e = 5;
                        if (t < 7)
                            a.push(...Ie.createRange(7, 1)),
                            a.push("");
                        else if (t >= i - e)
                            a.push(1),
                            a.push(""),
                            a.push(...Ie.createRange(7, i - 7 + 1));
                        else {
                            a.push(1),
                            a.push("");
                            let e = t
                              , r = t
                              , n = !1
                              , s = 1;
                            for (; s < 7; )
                                r < i && n && (r++,
                                s++),
                                e > 1 && !1 === n && (e--,
                                s++),
                                n = !n;
                            e = 1 === e ? 2 : e,
                            a.push(...Ie.createRange(r - e + 1, e)),
                            r < i - 1 && a.push("")
                        }
                    }
                    const o = new URL(n,window.location.origin);
                    return {
                        pageUrls: a.map((e => (o.searchParams.set("page", e),
                        {
                            value: e,
                            href: "" !== e ? o.toString() : null
                        }))),
                        pagingInfo: {
                            currentPage: t,
                            totalPages: i,
                            totalItems: e,
                            hideTotal: s
                        }
                    }
                }
                static createRange(e, t) {
                    return Array.from({
                        length: e
                    }).map(( (e, r) => r + t))
                }
            }
            var ke = Ie
              , Pe = r(87037)
              , Me = r(58602);
            const Te = "user-info-{0}";
            class Ee {
                constructor() {
                    this.timer = null,
                    this.lastUpdate = -1 / 0,
                    this.userData = (0,
                    Me.observify)({}),
                    this.balanceInfo = {},
                    this.loadRequesterPromise = null
                }
                setKey(e, t) {
                    e && (this.USER_INFO_CACHE_KEY_FORMATTED = Te.format(t))
                }
                getMaskedInfo() {
                    return this._getLocalUserInfo()
                }
                _getLocalUserInfo() {
                    var e;
                    return null != (e = this._masketInfo) ? e : localStorage.getObject(this.USER_INFO_CACHE_KEY_FORMATTED)
                }
                clear() {
                    this.lastUpdate = -1 / 0
                }
                clearLocalUserInfo() {
                    this.USER_INFO_CACHE_KEY_FORMATTED && localStorage.removeItem(this.USER_INFO_CACHE_KEY_FORMATTED)
                }
                async getUserDataAsync(e=!1) {
                    var t;
                    this.basicDataTask = null != (t = this.basicDataTask) ? t : this._loadBasicDataInternal(e);
                    const r = this.basicDataTask
                      , [n] = await Promise.all([r]);
                    if (this.basicDataTask = null,
                    n.maskedInfo) {
                        n.maskedInfo.isEmp = n.isEmployeeSynced,
                        this._masketInfo = n.maskedInfo;
                        try {
                            localStorage.putObject(this.USER_INFO_CACHE_KEY_FORMATTED, n.maskedInfo)
                        } catch (e) {}
                    }
                    return {
                        userInfo: n
                    }
                }
                async checkAccountsBinding(e, t) {
                    var r, n, s, i, a, o, l, c;
                    if (!this.$auth.isAuth)
                        return !1;
                    const u = await this.$services.userData.getUserDataAsync(t);
                    let d = !1
                      , h = !1
                      , p = !1
                      , m = !1;
                    for (let t of (null == (r = null == u ? void 0 : u.userInfo) ? void 0 : r.contacts) || [])
                        "esiaID" == (null == t ? void 0 : t.contact_type) && e.esiaSignIn && (d = !0),
                        "sberID" == (null == t ? void 0 : t.contact_type) && e.sberIdSignIn && (h = !0),
                        "oneID" == (null == t ? void 0 : t.contact_type) && (p = !0),
                        "dcbankID" == (null == t ? void 0 : t.contact_type) && (m = !0);
                    const b = null == (i = null == (s = null == (n = null == u ? void 0 : u.userInfo) ? void 0 : n.phone) ? void 0 : s.toString()) ? void 0 : i.startsWith("79")
                      , g = null == (l = null == (o = null == (a = null == u ? void 0 : u.userInfo) ? void 0 : a.phone) ? void 0 : o.toString()) ? void 0 : l.startsWith("998")
                      , y = WbSpaModel.prototype.$user.getLocale()
                      , f = wb.settings.currentLocale;
                    let v = !1
                      , w = !1
                      , _ = !1
                      , S = !1;
                    return (b && (null == e ? void 0 : e.esiaSignIn) || d) && (v = !0),
                    (b && (null == e ? void 0 : e.sberIdSignIn) || h) && (w = !0),
                    ((g || "uz" == y || "uz" == f) && ((null == e ? void 0 : e.oneIdSignIn) || (null == e ? void 0 : e.enableOneidForEmployees) && (null == (c = null == u ? void 0 : u.userInfo) ? void 0 : c.isActiveEmployee)) || p) && (_ = !0),
                    "tj" != y && "tj" != f && !m || "kg" == f || (S = !0),
                    {
                        showBoundAccountsBlock: !!(v || w || _ || S),
                        avaliableBindings: {
                            showEsia: v,
                            showSberId: w,
                            showOneid: _,
                            showDcb: S
                        },
                        activeBindings: {
                            isEsiaBound: d,
                            isSberidBound: h,
                            isOneidBound: p,
                            isDcbBound: m
                        }
                    }
                }
                async updateFioAsync(e, t, r, n="") {
                    return (await this._loadRequetser()).updateFioAsync(e, t, r, n, this.userData)
                }
                async updateSexAsync(e) {
                    return (await this._loadRequetser()).updateSexAsync(e, this.userData)
                }
                async updateImageAsync(e) {
                    return (await this._loadRequetser()).updateImageAsync(e, this.userData)
                }
                async updateSettingsAsync(e, t) {
                    return (await this._loadRequetser()).updateUserSettingsAsync(e, t, this.userData)
                }
                async _loadBasicDataInternal(e) {
                    if (Date.now() - this.lastUpdate < 6e5 && !e)
                        return this.userData;
                    const t = await this._loadRequetser();
                    return this.lastUpdate = Date.now(),
                    t.loadBasicInfo(this.userData, this._getLocalUserInfo())
                }
                async _loadRequetser() {
                    return this.loadRequesterPromise || (this.loadRequesterPromise = this.$moduleLoader.loadModuleAsync("userInfoRequester")),
                    this.loadRequesterPromise
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(Ee.prototype, e)
                }
                static factory(e) {
                    return e && Ee.richPrototype(e),
                    new Ee
                }
            }
            var De = Ee
              , Ae = Object.defineProperty
              , Oe = Object.defineProperties
              , Be = Object.getOwnPropertyDescriptors
              , Le = Object.getOwnPropertySymbols
              , $e = Object.prototype.hasOwnProperty
              , xe = Object.prototype.propertyIsEnumerable
              , Re = (e, t, r) => t in e ? Ae(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , Fe = (e, t, r) => Re(e, "symbol" != typeof t ? t + "" : t, r);
            const {WBX_BELL_URL: je} = o.A
              , Ne = "_hasUnreadEvents"
              , Ue = "/webapi/newsfeed/events"
              , We = "wb_notification_cash"
              , He = "cash_store_object";
            class qe extends Me.Observable {
                constructor() {
                    super(),
                    Fe(this, "eventsCount", 0),
                    Fe(this, "loading", !0)
                }
            }
            class Ve {
                constructor() {
                    this.getMoreUrl = "/webapi/lk/newsfeed/events/spa/loadmore",
                    this.eventsModel = new qe,
                    window.addEventListener("storage", (e => {
                        e.key === Ne && this._fireHasEvent(Number(e.newValue))
                    }
                    ))
                }
                init() {
                    WbSpaModel.prototype.$user.getId() ? this._delOldCashBell() : this._delAllCashBellDb()
                }
                get baseUrl() {
                    return je
                }
                canSendToBell() {
                    var e, t, r;
                    const n = Number(null == (r = null == (t = null == (e = wb.global) ? void 0 : e.settings) ? void 0 : t.variables) ? void 0 : r.bellPercentage);
                    return n > 0 && this.$auth.jwtData.user % 100 < n
                }
                getBellNotifications() {
                    return this.bellFetch("api/v3/notice/get?app_type=web", {
                        method: "POST"
                    }).then((e => {
                        var t;
                        return (null == (t = e.payload) ? void 0 : t.length) && this._syncCashBellAsync(e.payload),
                        e
                    }
                    )).catch(( () => this._getCashBellAsync()))
                }
                getNotifications(e=0) {
                    return this.$httpClient.fetchJSON(this.getMoreUrl, {
                        method: "POST",
                        body: new URLSearchParams({
                            page: e
                        })
                    }, {
                        useProccessResponse: !0
                    })
                }
                delete(e) {
                    if (null == e ? void 0 : e.length)
                        return this._delByUuidsCashBell(e),
                        this.bellFetch("api/notice/delete", {
                            method: "POST",
                            body: JSON.stringify({
                                notice_ids: e
                            })
                        })
                }
                preview() {
                    return this.fetch("api/v3/notice/preview", {
                        method: "GET"
                    })
                }
                read(e) {
                    if (null == e ? void 0 : e.length)
                        return this.fetch("api/notice/read", {
                            method: "POST",
                            body: JSON.stringify({
                                notice_ids: e
                            })
                        })
                }
                _fireHasEvent(e) {
                    e && this.$eventBus.dispatchEvent(new CustomEvent("HasUnreadEvents",{
                        detail: {
                            count: e
                        }
                    }))
                }
                async checkNotificationCountAsync() {
                    var e, t;
                    if (this._clearTimer(),
                    !this.$auth.isAuth)
                        return this.eventsModel;
                    let r, n = !1;
                    try {
                        if (this.canSendToBell())
                            r = await this.bellFetch("api/v3/notice/unread?app_type=web", {
                                method: "GET"
                            }),
                            $.observable(this.eventsModel).setProperty({
                                eventsCount: (null == (e = null == r ? void 0 : r.payload) ? void 0 : e.count) || 0
                            }),
                            this.eventsModel.eventsCount = (null == (t = null == r ? void 0 : r.payload) ? void 0 : t.count) || 0;
                        else {
                            const e = await this.$httpClient.fetchJSON(`${Ue}/count`, {
                                method: "POST"
                            }, {
                                useProccessResponse: !0
                            });
                            $.observable(this.eventsModel).setProperty({
                                eventsCount: e
                            }),
                            this.eventsModel.eventsCount = e
                        }
                        if (this.eventsModel.eventsCount > 0) {
                            this._fireHasEvent(this.eventsModel.eventsCount);
                            try {
                                localStorage.setItem(Ne, this.eventsModel.eventsCount)
                            } catch (e) {}
                        }
                        n = !0
                    } catch (e) {
                        console.error(e),
                        $.observable(this.eventsModel).setProperty({
                            isNetworkError: !0
                        }),
                        this.eventsModel.isNetworkError = !0
                    } finally {
                        return $.observable(this.eventsModel).setProperty({
                            loading: !1
                        }),
                        this.eventsModel.loading = !1,
                        this._startTimer(n),
                        this.eventsModel
                    }
                }
                async markNotificationRead(e) {
                    if (!(null == e ? void 0 : e.length))
                        return;
                    this._clearTimer();
                    let t, r = !1;
                    try {
                        this.canSendToBell() ? await this.bellFetch("api/notice/read", {
                            method: "POST",
                            body: JSON.stringify({
                                notice_ids: e
                            })
                        }) : await this.$httpClient.fetchJSON(`${Ue}/mark`, {
                            method: "POST",
                            body: new URLSearchParams({
                                readIds: e.join(";")
                            })
                        }, {
                            useProccessResponse: !0
                        }),
                        $.observable(this.eventsModel).setProperty({
                            eventsCount: Math.max(this.eventsModel.eventsCount - e.length, 0)
                        }),
                        r = !0
                    } catch (e) {
                        t = e,
                        $.observable(this.eventsModel).setProperty({
                            isNetworkError: !0
                        })
                    } finally {
                        this._startTimer(r)
                    }
                    return {
                        isSuccess: r,
                        error: t
                    }
                }
                _clearTimer() {
                    clearTimeout(this.timer)
                }
                _startTimer(e) {
                    this.timer = setTimeout(( () => this.checkNotificationCountAsync()), 9e4)
                }
                bellFetch(e, t={}) {
                    const r = t
                      , {headers: n={}} = r
                      , s = ( (e, t) => {
                        var r = {};
                        for (var n in e)
                            $e.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                        if (null != e && Le)
                            for (var n of Le(e))
                                t.indexOf(n) < 0 && xe.call(e, n) && (r[n] = e[n]);
                        return r
                    }
                    )(r, ["headers"])
                      , i = new Headers(n);
                    return i.set("X-Request-ID", wb.helpers.generateGuid()),
                    this.$httpClient.fetch(`${je}/shard-proxy/${e}`, (a = ( (e, t) => {
                        for (var r in t || (t = {}))
                            $e.call(t, r) && Re(e, r, t[r]);
                        if (Le)
                            for (var r of Le(t))
                                xe.call(t, r) && Re(e, r, t[r]);
                        return e
                    }
                    )({
                        headers: i
                    }, s),
                    o = {
                        withJwtToken: !0,
                        withAuthz: !0
                    },
                    Oe(a, Be(o)))).then((async e => 204 === e.status ? Promise.resolve(null) : e.ok ? e.json() : void 0));
                    var a, o
                }
                _openCashBellDb() {
                    return this.$storageHelper.openDb(We, {
                        onupgradeneeded: e => e.createObjectStore(He, {
                            keyPath: "uuid"
                        }),
                        version: 1
                    })
                }
                _getCashBellAsync() {
                    return this._openCashBellDb().then((e => this.$storageHelper.getAll(e, He))).then((e => ({
                        payload: e.filter((e => !this._isOldMessage(e) && e.user_id === WbSpaModel.prototype.$user.getId()))
                    })))
                }
                _delAllCashBellDb() {
                    indexedDB.deleteDatabase(We)
                }
                _delOldCashBell() {
                    this._openCashBellDb().then((e => {
                        const t = e.transaction([He], "readwrite").objectStore(He)
                          , r = t.getAll()
                          , n = WbSpaModel.prototype.$user.getId();
                        r.onsuccess = () => {
                            (r.result || []).forEach((e => {
                                (this._isOldMessage(e.dt) || e.user_id !== n) && t.delete(e.uuid)
                            }
                            ))
                        }
                    }
                    ))
                }
                _delByUuidsCashBell(e) {
                    this._openCashBellDb().then((t => {
                        const r = t.transaction([He], "readwrite").objectStore(He);
                        e.forEach((e => r.delete(e)))
                    }
                    ))
                }
                _isOldMessage(e) {
                    return e.dt / 1e6 + 1728e5 < Date.utcNow()
                }
                _syncCashBellAsync(e) {
                    this._openCashBellDb().then((t => {
                        const r = t.transaction([He], "readwrite").objectStore(He);
                        e.forEach((e => {
                            r.put(e)
                        }
                        ))
                    }
                    ))
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(Ve.prototype, e)
                }
                static factory(e) {
                    return e && Ve.richPrototype(e),
                    new Ve
                }
            }
            var ze = Ve
              , Ge = Object.defineProperty
              , Ke = Object.getOwnPropertySymbols
              , Qe = Object.prototype.hasOwnProperty
              , Je = Object.prototype.propertyIsEnumerable
              , Ye = (e, t, r) => t in e ? Ge(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r;
            class Xe {
                constructor() {
                    this.maxQuantity = 10,
                    this.canBeOrdered = !0,
                    this.includeInOrder = !0,
                    this.id = 0,
                    this.characteristicId = 0,
                    this.cod1S = 0,
                    this.timestamp = Date.now() / 1e3 | 0,
                    this.quantity = 1
                }
                static fromWbBasketProduct(e) {
                    var t;
                    const r = new Xe
                      , n = +e.quantity;
                    r.characteristicId = r.id = +e.chrt_id,
                    r.quantity = n > 0 ? n : 1,
                    r.cod1S = e.cod_1s;
                    try {
                        r.meta = e.meta_json ? JSON.parse(e.meta_json) : null
                    } catch (e) {}
                    return r.targetUrl = null == (t = e.target_url) ? void 0 : t.replace(/\x00/g, ""),
                    r.isDeleted = e.is_deleted,
                    r.timestamp = e.client_ts,
                    r._fromSync = !0,
                    r.viewFlags = e.viewFlags,
                    r
                }
                static fromCardModel(e, t, r) {
                    var n, s, i, a, o, l, c;
                    const u = new Xe
                      , d = +e.quantity
                      , h = WbSpaModel.prototype.$analitic.analiticsInfoToListName(( (e, t) => {
                        for (var r in t || (t = {}))
                            Qe.call(t, r) && Ye(e, r, t[r]);
                        if (Ke)
                            for (var r of Ke(t))
                                Je.call(t, r) && Ye(e, r, t[r]);
                        return e
                    }
                    )({
                        l: "AAA",
                        lw: "IT"
                    }, e));
                    e.meta || (e.meta = {});
                    const p = e.meta.analitic
                      , m = (null == p ? void 0 : p.logs) || e.logs || (null == (s = null == (n = e.targetInfo) ? void 0 : n.analiticsInfo) ? void 0 : s.logs) || "";
                    p && m && (p.logs = m),
                    e.meta.analitic = p;
                    const b = WbSpaModel.prototype.$user.getUserGradeFromCache();
                    if (u.characteristicId = u.id = +e.characteristicId,
                    u.quantity = d > 0 ? d : 1,
                    u.maxQuantity = (null == t ? void 0 : t.totalQuantity) || 10,
                    u.cod1S = e.cod1S,
                    u.targetUrl = `EX|${e.iid || "1"}|${h}|${m}`,
                    u.priceWithCoupon = u.priceWithCouponAndDiscount = u.priceWithCouponAndSpp = u.priceWithSale = u.price = e.priceWithCouponAndDiscount,
                    u.subjectId = e.subjectId,
                    u.subjectParentId = e.subjectParentId,
                    u.supplierId = e.supplierId,
                    u.supplierName = e.supplier,
                    u.reviewRating = e.reviewRating,
                    u.feedbacks = e.feedbacks || e.commentsCount,
                    u.meta = e.meta,
                    u.timestamp = Date.now() / 1e3 | 0,
                    u.viewFlags = (null == t ? void 0 : t.viewFlags) || e.viewFlags,
                    t) {
                        if (u.brandName = t.brand,
                        u.goodsName = t.name,
                        u.colorName = t.colorName || t.color,
                        u.promos = t.promotions,
                        u.isUnrefusable = t.isUnrefusable,
                        u.isPrepaid = t.isPrepaid,
                        u.isUnreturnable = t.isUnreturnable,
                        u.isVerificationReturn = t.isVerificationReturn,
                        u.logisticsCost = t.logisticsCost,
                        u.payloadV2 = t.payloadV2,
                        u.whDtype = null != (i = t.whDtype) ? i : t.dtype,
                        u.catalogReturnCost = null != (o = t.returnCost) ? o : null == (a = t.catalogPrice) ? void 0 : a.return,
                        u.saleConditions = t.saleConditions,
                        t.panelPromoId && (u.panelPromoId = t.panelPromoId),
                        t.feedbacks && (u.feedbacks = t.feedbacks),
                        t.reviewRating && (u.reviewRating = t.reviewRating),
                        t.deliveryHours && (u.deliveryHours = t.deliveryHours),
                        t.catalogPrice ? (u.price = u.priceWithCoupon = t.catalogPrice.basic / 100,
                        u.salePrice = u.priceWithSale = u.priceWithCouponAndDiscount = u.priceWithCouponAndSpp = t.catalogPrice.total / 100,
                        u.sale = t.catalogPrice.sale) : (u.priceWithSale = t.salePrice,
                        u.sale = t.sale),
                        WbSpaModel.prototype.$useCatalogReturnCost() && (u.returnCost = Math.round(u.catalogReturnCost / 100),
                        4 == (null == b ? void 0 : b.version))) {
                            const e = 16 & u.whDtype || 32 & u.whDtype ? 1 : b.return_fee;
                            u.returnCost = Math.min(u.priceWithCouponAndDiscount, u.returnCost * e)
                        }
                        const e = null == (l = t.sizes) ? void 0 : l.find((e => e.ch === u.id));
                        if (e && (u.sizeName = e.nm,
                        u.stocks = e.stocks,
                        e.deliveryHours && (u.deliveryHours = e.deliveryHours),
                        u.payloadV2 = e.payloadV2,
                        u.whDtype = null != (c = e.whDtype) ? c : e.dtype,
                        e.returnCost && (u.catalogReturnCost = e.returnCost),
                        e.logisticsCost && (u.logisticsCost = e.logisticsCost),
                        e.saleConditions && (u.saleConditions = e.saleConditions),
                        e.catalogPrice ? (u.price = u.priceWithCoupon = e.catalogPrice.basic / 100,
                        u.salePrice = u.priceWithSale = u.priceWithCouponAndDiscount = e.catalogPrice.total / 100,
                        u.sale = e.catalogPrice.sale) : e.salePrice && e.salePrice != u.priceWithCouponAndDiscount && (u.priceWithCoupon = u.priceWithCouponAndDiscount = u.priceWithCouponAndSpp = u.priceWithSale = u.price = e.salePrice),
                        e.saleConditions && wb.xnm.expandSaleConditions(u, e),
                        WbSpaModel.prototype.$useCatalogReturnCost() && e.returnCost && (u.returnCost = Math.round(u.catalogReturnCost / 100),
                        4 == (null == b ? void 0 : b.version)))) {
                            const e = 16 & u.whDtype || 32 & u.whDtype ? 1 : b.return_fee;
                            u.returnCost = Math.min(u.priceWithCouponAndDiscount, u.returnCost * e)
                        }
                    }
                    return r && (u.stocks = r),
                    u.stocks && (u.maxQuantity = u.stocks.sumBy((e => e.qty))),
                    u.canBeOrdered = u.maxQuantity > 0,
                    u
                }
                static fromBasketInputExtended(e) {
                    const t = Xe.fromCardModel(e, null, e.stocks);
                    return t.price = e.price,
                    t.colorName = e.colorName,
                    t.goodsName = e.goodsName,
                    t.sizeName = e.sizeName,
                    t.viewFlags = e.viewFlags,
                    t
                }
                static enrichCatalogGood(e, t={}) {
                    var r, n, s, i, a, o, l;
                    if (!e)
                        return;
                    const c = null == (r = t.sizes) ? void 0 : r.find((t => t.optionId === e.characteristicId))
                      , u = null != (s = null == (n = null == c ? void 0 : c.stocks) ? void 0 : n.some((e => e.qty > 0))) && s
                      , d = null != (i = null == c ? void 0 : c.price) ? i : t.price;
                    if (e.brandName = t.brand,
                    e.goodsName = t.name,
                    e.colorName = null == (o = null == (a = t.colors) ? void 0 : a[0]) ? void 0 : o.name,
                    e.canBeOrdered = u,
                    e.price = u ? d.basic / 100 : 0,
                    e.priceWithSale = u ? d.total / 100 : 0,
                    e.priceWithCoupon = u ? d.basic / 100 : 0,
                    e.priceWithCouponAndDiscount = d.total / 100,
                    e.sale = u ? d.sale : 0,
                    e.totalSale = u ? d.sale : 0,
                    e.salePrice = u ? d.total / 100 : 0,
                    e.sizeName = null != (l = null == c ? void 0 : c.origName) ? l : "",
                    e.stocks = null == c ? void 0 : c.stocks,
                    e.stocks && (e.maxQuantity = e.stocks.sumBy((e => e.qty))),
                    e.subjectId = t.subjectId,
                    e.subjectParentId = t.subjectParentId,
                    e.supplierId = t.supplierId,
                    e.supplierName = t.supplier,
                    e.volume = t.volume,
                    e.reviewRating = t.reviewRating,
                    e.feedbacks = t.feedbacks || t.commentsCount,
                    e.promos = t.promotions,
                    e.isUnrefusable = t.isUnrefusable,
                    e.isPrepaid = t.isPrepaid,
                    e.isUnreturnable = t.isUnreturnable,
                    e.isVerificationReturn = t.isVerificationReturn,
                    e.priceWithCouponAndSpp = e.priceWithCouponAndDiscount,
                    e.catalogReturnCost = d.return,
                    WbSpaModel.prototype.$useCatalogReturnCost()) {
                        e.returnCost = Math.round(d.return / 100);
                        const t = WbSpaModel.prototype.$user.getUserGradeFromCache();
                        if (4 == (null == t ? void 0 : t.version)) {
                            const r = 16 & e.whDtype || 32 & e.whDtype ? 1 : t.return_fee;
                            e.returnCost = Math.min(e.priceWithCouponAndDiscount, e.returnCost * r)
                        }
                    }
                    return e.logisticsCost = d.logistics || 0,
                    e.priceBasic = d.basic,
                    e.priceTotal = d.total,
                    e.whDtype = null == c ? void 0 : c.dtype,
                    e.payloadV2 = null == c ? void 0 : c.payload,
                    e.saleConditions = null == c ? void 0 : c.saleConditions,
                    e.viewFlags = t.viewFlags,
                    t.panelPromoId && (e.panelPromoId = t.panelPromoId),
                    e
                }
                static enrichStaticGood(e, t={}) {
                    if (e)
                        return e.goodsName = t.n || e.goodsName || wb.i18n.t("basket.goodsInfo.untitled"),
                        e.colorName = t.c || e.colorName,
                        e.specs = t.specs || e.specs,
                        e
                }
            }
            var Ze = Xe;
            var et = class {
                constructor(e, t) {
                    this.settings = {},
                    this.paymentTypes = [e ? {
                        userGrade: 0,
                        bankCards: [{
                            id: "_newcardid",
                            name: wb.i18n.t("basket.payment.linkCard"),
                            createNew: !0,
                            system: "bindnew"
                        }],
                        isOnline: !0,
                        isCreditCard: !0,
                        codeLower: "crd",
                        name: wb.i18n.t("basket.payment.paymentCard"),
                        id: "63",
                        available: !0
                    } : {
                        isOnline: !0,
                        isCreditCard: !0,
                        codeLower: "crd",
                        name: wb.i18n.t("basket.payment.paymentCard"),
                        id: "63",
                        available: !0
                    }],
                    this.deliveryWay = "self",
                    this.basketItems = null != t ? t : []
                }
                static calc(e) {
                    e.basketItems.forEach((e => {
                        e.stocks && (e.maxQuantity = e.stocks.sumBy((e => e.qty))),
                        e.maxQuantity > 0 && e.maxQuantity < e.quantity ? e.partQuantity = e.maxQuantity : e.partQuantity = null,
                        e._qnt = e.partQuantity || e.quantity,
                        wb.global.settings.switches.dontIncludeSoldItemsInOrder && !e.maxQuantity && (e.includeInOrder = !1)
                    }
                    ));
                    const t = e.basketItems.filter((e => e.maxQuantity > 0));
                    return 1 === t.length && (t[0].includeInOrder = !0),
                    e.totalQuantity = e.basketItems.sumBy((e => e._qnt)),
                    e
                }
            }
            ;
            class tt {
                get maxItems() {
                    var e;
                    return "subscribed" === (null == (e = WbSpaModel.prototype.$user.getUserGradeFromCache()) ? void 0 : e.wbClub) && "ru" === wb.settings.currentLocale && wb.global.settings.switches.enableWbLimitInCartOn1ShK ? 510 : 255
                }
            }
            class rt {
                constructor(e, t, r, n, s) {
                    this.chrt_id = +t;
                    const i = +r;
                    this.quantity = i > 0 ? i : 1,
                    this.cod_1s = n,
                    this.client_ts = s || Date.now() / 1e3 | 0,
                    this.op_type = e || 1
                }
                static fromLocalBasket(e, t) {
                    var r;
                    const n = new rt(t,e.characteristicId,e.quantity,e.cod1S,e.timestamp);
                    n.client_ts > 1e12 && (n.client_ts = n.client_ts / 1e3 | 0),
                    n.target_url = e.targetUrl,
                    e.meta && (n.meta_json = JSON.stringify(e.meta)),
                    e.priceWithCouponAndSpp && (n.price = parseInt(100 * e.priceWithCouponAndSpp) - (null != (r = e.logisticsCost) ? r : 0)),
                    e.subjectId && (n.subject_id = e.subjectId);
                    const s = wb.user.getCurrency();
                    s && (n.currency = s);
                    const i = -(new Date).getTimezoneOffset();
                    return i >= -720 && i <= 840 && (n.timezonemin = i),
                    n
                }
                static toUpdate(e) {
                    return rt.fromLocalBasket(e, 2)
                }
                static toDelete(e) {
                    return new rt(3,e)
                }
            }
            var nt = rt;
            const st = "wb___basketStorage"
              , it = {
                ts: 0,
                c_ts: 0,
                operations: new Map
            };
            var at = class {
                constructor(e) {
                    window.addEventListener("storage", (e => {
                        e.key === this._basketKey && this._pull()
                    }
                    )),
                    WbSpaModel.prototype.$eventBus.addEventListener("onUserAuth", this._pull.bind(this)),
                    this.getLocalItems = e,
                    this._data = it
                }
                checkBug() {
                    this._data.ts > 10 && WbSpaModel.prototype.$auth.um.userUid && !localStorage.hasItem(`wb_basket_${WbSpaModel.prototype.$auth.um.userUid}`) && (wb.spa.logError(new Error(`[WB_BASKET_STORAGE]: key wb_basket_${WbSpaModel.prototype.$auth.um.userUid} notfound`), {
                        ts: this.ts,
                        opLen: this._data.operations.size,
                        hasKey: localStorage.hasItem(this._basketKey)
                    }),
                    this._data.ts = 10)
                }
                get _basketKey() {
                    return `${st}_${WbSpaModel.prototype.$auth.um.userUid}`
                }
                get clientTs() {
                    return this._data.c_ts
                }
                get ts() {
                    return this._data.ts
                }
                hasOperations() {
                    return !!this._data.operations.size
                }
                getOperations() {
                    return this.ts || (this._data.operations.clear(),
                    this.getLocalItems().forEach((e => {
                        this._data.operations.set(e.chrt_id, e)
                    }
                    ))),
                    this._data.operations.toArray()
                }
                setTs(e) {
                    e && (this._data.ts = e,
                    this._push())
                }
                setClientTs(e) {
                    this._data.c_ts = e,
                    this._push()
                }
                _mergeOp(e, t) {
                    return (null == e ? void 0 : e.chrt_id) === t.chrt_id && (1 === e.op_type && 2 === t.op_type && (t.op_type = 1),
                    2 === e.op_type && 2 === t.op_type && (t.meta = t.meta || e.meta,
                    t.quantity = t.quantity || e.quantity)),
                    t
                }
                normalize(e, t) {
                    e.forEach((e => {
                        const t = this._data.operations.get(e.chrt_id);
                        t.quantity === e.quantity && t.client_ts === e.client_ts && t.op_type === e.op_type && this._data.operations.delete(e.chrt_id)
                    }
                    ));
                    let r = [];
                    return (null == t ? void 0 : t.length) > 0 && (t.forEach((e => {
                        const t = this._data.operations.get(e.chrt_id);
                        if (t) {
                            if (!e.is_deleted)
                                return;
                            if (1 === t.op_type)
                                return;
                            this._data.operations.delete(e.chrt_id)
                        }
                        r.push(e)
                    }
                    )),
                    this._push()),
                    r
                }
                update(e) {
                    if ((null == e ? void 0 : e.length) > 0) {
                        for (let t = 0; t < e.length; t++) {
                            const r = e[t].chrt_id;
                            this._data.operations.set(r, this._mergeOp(this._data.operations.get(r), e[t]))
                        }
                        this._push()
                    }
                }
                clear() {
                    localStorage.removeItem(st)
                }
                _pull() {
                    const e = localStorage.getObject(this._basketKey) || localStorage.getObject(st);
                    e && (e.operations = Array.isArray(e.operations) ? new Map(e.operations.map((e => [e.chrt_id, e]))) : it.operations),
                    this._data = null != e ? e : it
                }
                _push() {
                    try {
                        const e = this._data.operations.toArray();
                        localStorage.putObject(this._basketKey, {
                            ts: this._data.ts,
                            c_ts: this._data.c_ts,
                            operations: e
                        }),
                        localStorage.hasItem(st) && localStorage.putObject(st, {
                            ts: this._data.ts,
                            c_ts: this._data.c_ts,
                            operations: e
                        })
                    } catch (e) {}
                }
            }
            ;
            const {CART_STORAGE_URL: ot} = o.A
              , lt = ot;
            var ct = class {
                constructor(e) {
                    this.localBasket = e,
                    this.storage = new at(( () => this.localBasket.getItems().map((e => nt.fromLocalBasket(e))))),
                    this.debounceSync = this.$helper.debounce(this._sync.bind(this), 3e3),
                    this.debounceShortSync = this.$helper.debounce(this._sync.bind(this), 1e3),
                    setTimeout(( () => this._backupBasketAsync()), 11e3)
                }
                unAuth() {
                    this.storage.clear()
                }
                onBeforeSignOut() {
                    this.storage.hasOperations() && this._sync(),
                    Object.keys(localStorage).filter((e => e.startsWith("user_subscription_offers"))).forEach((e => localStorage.removeItem(e)))
                }
                addItem(e) {
                    e && (this.storage.update([nt.fromLocalBasket(e)]),
                    this.debounceShortSync())
                }
                addManyItems(e) {
                    e.length && (this.storage.update(e.map((e => nt.fromLocalBasket(e)))),
                    this.debounceShortSync())
                }
                clearItems(e) {
                    e.length && (this.storage.update(e.map((e => nt.toDelete(e)))),
                    this.debounceShortSync())
                }
                updateItem(e) {
                    if (!e)
                        return;
                    const t = this.localBasket.getItems().find((t => t.characteristicId === e));
                    t && this.storage.update([nt.toUpdate(t)]),
                    this.debounceSync()
                }
                refresh(e, t) {
                    var r, n, s, i;
                    if ("remove" === t) {
                        const t = null != (i = null != (s = null == (r = e.chrtIds) ? void 0 : r[0]) ? s : null == (n = e.items) ? void 0 : n[0].chrtId) ? i : e.chrtId;
                        t > 0 && this.storage.update([nt.toDelete(t)])
                    } else
                        "recalc" === t && this.updateItem(e.chrtId);
                    this.debounceSync()
                }
                async sync(e, t) {
                    return await this._sync(e, t)
                }
                async _sync(e, t) {
                    return await navigator.locks.request("lock-basket-sync", (async r => {
                        this.storage.checkBug();
                        const n = this.storage.getOperations();
                        if (t && !n.length && this.storage.clientTs > (Date.now() / 1e3 | 0))
                            return !1;
                        const s = this.$services.sessionService.getSession();
                        try {
                            const t = await this._doSync({
                                sessionId: s,
                                operations: n,
                                signal: e
                            });
                            if (this._sendMetrics(t.state),
                            0 === t.state && t.change_ts > 0)
                                return this._updateProducts(t, n);
                            if (1 === t.state) {
                                const e = this.localBasket.getItems().map((e => nt.fromLocalBasket(e)))
                                  , t = await this._doSync({
                                    sessionId: s,
                                    operations: e,
                                    rememberMe: !0
                                });
                                if (0 === t.state && t.change_ts > 0)
                                    return this._updateProducts(t, n)
                            } else
                                t && wb.spa.logError(new Error(`[WB_BASKET_SYNC]: sync state:${t.state}`), {
                                    result: t,
                                    ts: this.storage.ts,
                                    deviceId: s,
                                    opLen: n.length,
                                    hasJwt: this.$auth.isAuth
                                })
                        } catch (e) {
                            const t = !e.isCustomError && e instanceof TypeError && ("Failed to fetch" === e.message || "NetworkError when attempting to fetch resource." === e.message || "Cancelled" === e.message);
                            this._sendMetrics(t ? "network" : "error"),
                            wb.spa.logError(new Error(`[WB_BASKET_SYNC]: ${e.message}`), {
                                ts: this.storage.ts,
                                deviceId: s,
                                opLen: n.length,
                                hasJwt: this.$auth.isAuth
                            })
                        }
                        return !1
                    }
                    ))
                }
                _updateProducts(e, t) {
                    const r = this.storage.normalize(t, e.result_set);
                    return this.localBasket.updateWbProducts(r),
                    this.storage.setTs(e.change_ts),
                    this.storage.setClientTs(235 + (Date.now() / 1e3 | 0)),
                    e.change_ts > 0
                }
                _doSync({sessionId: e, operations: t, rememberMe: r=!1, signal: n=null}) {
                    return this.$httpClient.fetch(`${lt}/sync?ts=${this.storage.ts}&device_id=${e}${r ? "&remember_me=true" : ""}`, {
                        method: "POST",
                        body: JSON.stringify(t),
                        headers: {
                            "Content-Type": "application/json",
                            "Wb-AppType": "site"
                        },
                        signal: n,
                        withJwtToken: !0,
                        withAuthz: !0
                    }).then((async e => e.ok ? e.json() : {})).then((e => (e.result_set && (e.result_set = e.result_set[0] || []),
                    e)))
                }
                _sendMetrics(e) {
                    if (!window._debug)
                        try {
                            this.$httpClient.fetch(`/webapi/logging/wbbasket/metrics?status=${e}`, {
                                method: "POST"
                            })
                        } catch (e) {}
                }
                _backupBasketAsync() {
                    if (this.storage.ts <= 0)
                        return;
                    const e = this.localBasket.getItems().map((e => {
                        let t = nt.fromLocalBasket(e);
                        return delete t.op_type,
                        t
                    }
                    ))
                      , t = [{
                        path: "/cart/wb_backup",
                        file: this.$helper.base64.encode(JSON.stringify(e))
                    }];
                    this.$services.apiUserStorage.setData(t)
                }
            }
            ;
            var ut = class {
                constructor(e) {
                    var t, r, n, s;
                    this.characteristicId = +e.characteristicId;
                    const i = +e.quantity;
                    this.quantity = i > 0 ? i : 1,
                    this.cod1S = e.cod1S,
                    this.customsFeeAmount = e.customCharges,
                    this.targetUrl = null == (t = e.targetUrl) ? void 0 : t.replace(/\x00/g, ""),
                    this.includeInOrder = e.includeInOrder,
                    this.dstOffice = e.dstOffice,
                    this.storeName = e.storeName,
                    this.isLargeItem = e.isLargeItem,
                    this.couponSale = e.couponSale,
                    this.goodsName = e.goodsName,
                    this.colorName = e.colorName,
                    this.sizeName = e.sizeName,
                    this.brandName = e.brandName,
                    this.sale = e.sale,
                    this.salePrice = e.salePrice,
                    this.totalSale = e.totalSale,
                    this.personalDiscount = e.personalDiscount,
                    this.returnCost = e.returnCost,
                    this.premiumSaleAmount = e.premiumSaleAmount ? e.premiumSaleAmount : 0,
                    this.priceAdjustmentAmount = e.priceAdjustmentAmount ? e.priceAdjustmentAmount : 0,
                    this.price = e.price,
                    this.priceWithSale = e.priceWithSale,
                    this.priceWithCoupon = e.priceWithCoupon,
                    this.priceWithCouponAndSpp = e.priceWithCouponAndSpp + this.premiumSaleAmount + this.priceAdjustmentAmount,
                    this.priceWithCouponAndDiscount = e.priceWithCouponAndDiscount + this.premiumSaleAmount + this.priceAdjustmentAmount,
                    this.paymentSaleAmount = e.paymentSaleAmount,
                    this.subjectId = e.subjectId,
                    this.subjectRoot = e.subjectParentId,
                    this.reviewRating = e.reviewRating,
                    this.commentsCount = e.commentsCount || e.feedbacks,
                    this.payloadV2 = e.payloadV2,
                    this.logisticsCost = isNaN(e.logisticsCostAdjustmentAmount) ? e.logisticsCost : e.logisticsCost - e.logisticsCostAdjustmentAmount,
                    this.whDtype = e.whDtype,
                    this.supplierId = e.supplierId,
                    this.supplierName = e.supplierName,
                    this.saleConditions = e.saleConditions,
                    this.catalogReturnCost = e.catalogReturnCost,
                    this.maxQuantity = e.maxQuantity,
                    this.volume = e.volume,
                    this.storeIds = (null == (n = null == (r = e.stocks) ? void 0 : r.filter((e => e.qty > 0))) ? void 0 : n.map((e => e.wh))) || [],
                    this.stocks = null == (s = e.stocks) ? void 0 : s.reduce(( (e, t) => (e[t.wh] = {
                        storeId: t.wh,
                        quantity: t.qty || 0,
                        time1: t.time1,
                        time2: t.time2,
                        priority: t.priority
                    },
                    e)), {}),
                    this.timestamp = e.timestamp,
                    this.shadeModel = e.shadeModel,
                    this.actualStimulusList = e.actualStimulusList,
                    this.actualStimulusListFirstTwo = e.actualStimulusListFirstTwo
                }
            }
              , dt = r(39436)
              , ht = Object.defineProperty
              , pt = (e, t, r) => ( (e, t, r) => t in e ? ht(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const mt = "wb_promo_basket"
              , bt = `${mt}_{0}`
              , gt = "items";
            class yt extends tt {
                constructor() {
                    super(),
                    pt(this, "innerStorage"),
                    this.innerStorage = {}
                }
                _lastTs(e) {
                    var t, r;
                    return null == (r = null == (t = this.innerStorage[e]) ? void 0 : t[0]) ? void 0 : r.timestamp
                }
                clearItems(e, t) {
                    if ((null == t ? void 0 : t.length) > 0) {
                        let r = this._syncFrom(e);
                        r = r.filter((function(e) {
                            return -1 === t.indexOf(e.characteristicId)
                        }
                        )),
                        this._syncTo(e, r)
                    }
                }
                add(e, t) {
                    const r = this._syncFrom(e);
                    if (r.length + 1 > this.maxItems)
                        return {
                            isSuccess: !1,
                            error: wb.i18n.t("basket.errors.limitInBasketWithCount", {
                                count: this.maxItems
                            })
                        };
                    const n = r.find((e => e.characteristicId === t.characteristicId));
                    if (n)
                        n.timestamp > 0 && (t.timestamp = n.timestamp,
                        t.quantity = n.quantity);
                    else {
                        const n = this._lastTs(e);
                        t.timestamp <= n && (t.timestamp = n + 1),
                        t.includeInOrder = r.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder)),
                        r.unshift(t)
                    }
                    this._syncTo(e, r);
                    return {
                        isExist: !!n,
                        isSuccess: !0,
                        xnmDictTask: this._enrichProducts(e, r.map((e => e.cod1S)))
                    }
                }
                refresh(e, t, r) {
                    var n;
                    let s = this._syncFrom(e);
                    if ("remove" === r) {
                        const e = (null == (n = t.chrtIds) ? void 0 : n.length) > 0 ? t.chrtIds[0] : t.chrtId;
                        s = s.filter((function(t) {
                            return t.characteristicId !== e
                        }
                        ))
                    } else if ("recalc" === r && t.quantity > 0) {
                        const e = s.find((e => e.characteristicId === t.chrtId));
                        e && (e.quantity = t.quantity)
                    }
                    t.includeInOrderMap && s.forEach((e => {
                        t.includeInOrderMap.has(e.id) && (e.includeInOrder = t.includeInOrderMap.get(e.id))
                    }
                    )),
                    this._syncTo(e, s)
                }
                updateIncludeInOrder(e, t) {
                    if (!t)
                        return;
                    const r = this._syncFrom(e);
                    r.forEach((e => {
                        t.has(e.id) && (e.includeInOrder = t.get(e.id))
                    }
                    )),
                    this._syncTo(e, r)
                }
                getItems(e) {
                    return this._syncFrom(e)
                }
                async sync(e) {
                    try {
                        const t = await this._openIDb(e);
                        this.innerStorage[e] = await dt.A.getAll(t, gt)
                    } catch (e) {
                        console.log(`[PROMO_BASKET]: fetching from idb failed, reason=${e.message}`)
                    }
                }
                async onBeforeSignOut() {
                    this.innerStorage = {};
                    const e = await this._getAllDatabase();
                    for (let t = 0; t < e.length; t++) {
                        const r = e[t].slice(16);
                        dt.A.removeDb(this._cacheKey(r))
                    }
                }
                async _enrichProducts(e, t) {
                    if (0 === t.length)
                        return {};
                    const [r,n] = await Promise.all([wb.xnm.getXnmProducts(t, !0, !0), wb.xnm.getProductColorsByNmIdsAsync(t)])
                      , s = this._syncFrom(e);
                    let i = !1;
                    return s.forEach((e => {
                        r[e.cod1S] && (Ze.enrichCatalogGood(e, r[e.cod1S]),
                        i = !0),
                        n[e.cod1S] && (Ze.enrichStaticGood(e, n[e.cod1S]),
                        i = !0)
                    }
                    )),
                    i && this._syncTo(e, s),
                    r
                }
                _syncFrom(e) {
                    return wb.helpers.deepClone(this.innerStorage[e] || [])
                }
                async _syncTo(e, t) {
                    1 === (null == t ? void 0 : t.length) && (t[0].includeInOrder = !0);
                    const r = wb.helpers.deepClone(t);
                    this.innerStorage[e] = r;
                    try {
                        const t = await this._openIDb(e)
                          , n = null == t ? void 0 : t.transaction([gt], "readwrite")
                          , s = null == n ? void 0 : n.objectStore(gt);
                        null == s || s.clear();
                        for (const e of r)
                            null == s || s.put(e)
                    } catch (e) {
                        console.log(`[PROMO_BASKET]: saving to idb failed, reason=${e.message}`)
                    }
                }
                async _getAllDatabase() {
                    return (await indexedDB.databases()).filter((e => {
                        var t;
                        return (null == (t = e.name) ? void 0 : t.startsWith(mt)) && 1 === e.version
                    }
                    )).map((e => e.name))
                }
                async _openIDb(e) {
                    const t = await dt.A.openDb(this._cacheKey(e), {
                        onupgradeneeded: e => {
                            if (!e.objectStoreNames.contains(gt)) {
                                e.createObjectStore(gt, {
                                    keyPath: "characteristicId"
                                }).createIndex("timestamp", "timestamp", {
                                    unique: !1
                                })
                            }
                        }
                        ,
                        version: 1
                    });
                    if (!t)
                        throw new Error(`[PROMO_BASKET]: Failed to open the IndexedDB:${this._cacheKey(e)}`);
                    return t
                }
                _cacheKey(e) {
                    return bt.format(e)
                }
            }
            var ft = Object.defineProperty
              , vt = Object.defineProperties
              , wt = Object.getOwnPropertyDescriptors
              , _t = Object.getOwnPropertySymbols
              , St = Object.prototype.hasOwnProperty
              , Ct = Object.prototype.propertyIsEnumerable
              , It = (e, t, r) => t in e ? ft(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , kt = (e, t) => {
                for (var r in t || (t = {}))
                    St.call(t, r) && It(e, r, t[r]);
                if (_t)
                    for (var r of _t(t))
                        Ct.call(t, r) && It(e, r, t[r]);
                return e
            }
              , Pt = (e, t) => vt(e, wt(t));
            const {BASKET_RU_API_URL: Mt, BASKET_API_URL: Tt} = o.A
              , Et = class extends tt {
                constructor(e, t, r) {
                    super(),
                    this._isAuth = e,
                    this.sessionService = t,
                    this.$eventBus = r,
                    this.$eventBus.addEventListener("onUserAuth", this.clearMemory.bind(this))
                }
                get isAuth() {
                    return this._isAuth()
                }
                get maxItems() {
                    var e, t, r, n, s, i, a, o, l, c, u, d, h;
                    return "subscribed" === (null == (e = WbSpaModel.prototype.$user.getUserGradeFromCache()) ? void 0 : e.wbClub) && wb.global.settings.switches.enableWbLimitInCartOn1ShK ? (null == (n = null == (r = null == (t = wb.global.settings) ? void 0 : t.mobileAppVariables) ? void 0 : r.numbers) ? void 0 : n.basketMaxQt) ? 2 * (null == (a = null == (i = null == (s = wb.global.settings) ? void 0 : s.mobileAppVariables) ? void 0 : i.numbers) ? void 0 : a.basketMaxQt) : 2 * BASKET_ITEMS_LIMIT : (null == (c = null == (l = null == (o = wb.global.settings) ? void 0 : o.mobileAppVariables) ? void 0 : l.numbers) ? void 0 : c.basketMaxQt) ? null == (h = null == (d = null == (u = wb.global.settings) ? void 0 : u.mobileAppVariables) ? void 0 : d.numbers) ? void 0 : h.basketMaxQt : BASKET_ITEMS_LIMIT
                }
                clearMemory() {
                    this.innerStorage = new et(this.isAuth,[])
                }
                migrate() {
                    if (localStorage.hasItem("_basket")) {
                        const e = this._getGuestBasket();
                        return e.basketItems && e.basketItems.reverse(),
                        this.addManyItems(e.basketItems, !0),
                        this._detGuestBasket(),
                        e.basketItems
                    }
                    return []
                }
                addManyItems(e, t) {
                    if (!(null == e ? void 0 : e.length))
                        return {
                            isSuccess: !1,
                            error: "[basket] Неизвестная ошибка"
                        };
                    const r = this._syncFrom();
                    if (!t && r.basketItems.length + e.length > this.maxItems)
                        return {
                            isSuccess: !1,
                            error: wb.i18n.t("basket.errors.limitInBasketWithCount", {
                                count: this.maxItems
                            })
                        };
                    let n = !0;
                    const s = r.basketItems.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder));
                    for (let t = 0; t < e.length; t++) {
                        const i = r.basketItems.findIndex((r => r.characteristicId === e[t].characteristicId));
                        -1 === i ? (n = !1,
                        e[t].timestamp <= this.lastTs && (e[t].timestamp = this.lastTs + 1),
                        e[t].includeInOrder = s,
                        r.basketItems.unshift(e[t])) : r.basketItems[i].timestamp > 0 && (e[t].timestamp = r.basketItems[i].timestamp,
                        e[t].quantity = r.basketItems[i].quantity)
                    }
                    this._syncTo();
                    return {
                        isExist: n,
                        isSuccess: !0,
                        xnmDictTask: this._enrichProducts(r.basketItems.map((e => e.cod1S)))
                    }
                }
                clearItems(e) {
                    if ((null == e ? void 0 : e.length) > 0) {
                        const t = this._syncFrom();
                        t.basketItems = t.basketItems.filter((function(t) {
                            return -1 === e.indexOf(t.characteristicId)
                        }
                        )),
                        this._syncTo()
                    }
                }
                get lastTs() {
                    var e, t;
                    return null == (t = null == (e = this.innerStorage.basketItems) ? void 0 : e[0]) ? void 0 : t.timestamp
                }
                add(e) {
                    const t = this._syncFrom();
                    if (t.basketItems.length + 1 > this.maxItems)
                        return {
                            isSuccess: !1,
                            error: wb.i18n.t("basket.errors.limitInBasketWithCount", {
                                count: this.maxItems
                            })
                        };
                    const r = t.basketItems.find((t => t.characteristicId === e.characteristicId));
                    r ? r.timestamp > 0 && (e.timestamp = r.timestamp,
                    e.quantity = r.quantity) : (e.timestamp <= this.lastTs && (e.timestamp = this.lastTs + 1),
                    e.includeInOrder = t.basketItems.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder)),
                    t.basketItems.unshift(e)),
                    this._syncTo();
                    return {
                        isExist: !!r,
                        isSuccess: !0,
                        xnmDictTask: this._enrichProducts(t.basketItems.map((e => e.cod1S)))
                    }
                }
                updateMeta(e, t) {
                    if (!e || !t)
                        return !1;
                    const r = this._syncFrom().basketItems.find((t => t.characteristicId === e));
                    return !!r && (r.meta = WbSpaModel.prototype.$helper.deepMerge(r.meta || {}, t),
                    this._syncTo(),
                    !0)
                }
                refresh(e, t) {
                    var r, n, s, i, a, o, l;
                    const c = this._syncFrom();
                    if ("remove" === t) {
                        const t = (null == (r = e.chrtIds) ? void 0 : r.length) > 0 ? e.chrtIds[0] : e.chrtId;
                        c.basketItems = c.basketItems.filter((function(e) {
                            return e.characteristicId !== t
                        }
                        ))
                    } else if ("recalc" === t && e.quantity > 0) {
                        const t = c.basketItems.find((t => t.characteristicId === e.chrtId));
                        t && (t.quantity = e.quantity)
                    }
                    if (e.includeInOrderMap && c.basketItems.forEach((t => {
                        e.includeInOrderMap.has(t.id) && (t.includeInOrder = e.includeInOrderMap.get(t.id))
                    }
                    )),
                    "booking" !== e.deliveryWay) {
                        c.deliveryWay = e.deliveryWay;
                        let t = WbSpaModel.prototype.$services.userAddressService.get(e.addressId, e.deliveryWay);
                        t && (null == (n = c.deliveryPoint) ? void 0 : n.addressId) !== t.addressId && (c.deliveryPoint = t,
                        c.deliveryPriceModel = null)
                    }
                    "war" !== e.paymentTypeId && (e.paymentTypeId && e.paymentTypeId !== (null == (s = c.paymentType) ? void 0 : s.id) && (c.paymentType = c.paymentTypes.find((t => t.id === e.paymentTypeId && t.available))),
                    (null == (i = c.paymentType) ? void 0 : i.isCreditCard) && e.bankCardId && e.bankCardId !== (null == (a = c.paymentType) ? void 0 : a.bankCardId) && (c.paymentType.bankCardId = e.bankCardId,
                    c.paymentType.selectedBankCard = null == (l = null == (o = c.paymentTypes.find((e => e.isCreditCard))) ? void 0 : o.bankCards) ? void 0 : l.find((t => t.id === e.bankCardId)))),
                    this._syncTo()
                }
                deleteCards(e) {
                    var t;
                    if (!e)
                        return;
                    const r = null == (t = this._syncFrom().paymentTypes) ? void 0 : t.find((e => e.isCreditCard));
                    r && (r.bankCards = (r.bankCards || []).filter((t => -1 === e.indexOf(t.id)))),
                    this._syncTo()
                }
                setCardDefault(e) {
                    this.getBankCards().forEach((t => {
                        t.default = t.id === e
                    }
                    )),
                    this._syncTo()
                }
                setAddress(e, t) {
                    var r;
                    const n = this._syncFrom();
                    let s = WbSpaModel.prototype.$services.userAddressService.get(e, t);
                    s && (null == (r = n.deliveryPoint) ? void 0 : r.addressId) !== s.addressId && (n.deliveryWay = t,
                    n.deliveryPoint = s,
                    n.deliveryPriceModel = null,
                    this._syncTo())
                }
                getBankCards() {
                    var e, t;
                    return (null == (t = null == (e = this._syncFrom().paymentTypes) ? void 0 : e.find((e => e.isCreditCard))) ? void 0 : t.bankCards) || []
                }
                get count() {
                    const e = this._syncFrom();
                    return this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{
                        detail: {
                            count: e.totalQuantity
                        }
                    })),
                    e.totalQuantity
                }
                save(e) {
                    const t = this._syncFrom()
                      , r = JSON.parse(JSON.stringify(e, ( (e, t) => "basketItems" === e ? void 0 : t)));
                    r.basketItems = e.basketItems.reduce(( (e, t) => (e.get(t.id) && e.set(t.id, wb.helpers.deepClone(t)),
                    e)), t.basketItems.toMap((e => e.id), (e => e))).toArray(),
                    this._syncTo(r)
                }
                updateIncludeInOrder(e) {
                    if (!e)
                        return;
                    this._syncFrom().basketItems.forEach((t => {
                        e.has(t.id) && (t.includeInOrder = e.get(t.id))
                    }
                    )),
                    this._syncTo()
                }
                get() {
                    return this._syncFrom()
                }
                getItems() {
                    return this._syncFrom().basketItems
                }
                getDeliveryPoint() {
                    return this._syncFrom().deliveryPoint
                }
                enrichProductsIfNeedAsync({force: e}={}) {
                    const t = this._syncFrom();
                    return t.basketItems.length > 0 && t.basketItems.some((e => !e.hasOwnProperty("priceWithCouponAndDiscount") && !e.hasOwnProperty("price"))) || e ? this._enrichProducts(t.basketItems.map((e => e.cod1S))) : Promise.resolve([])
                }
                get basketKey() {
                    return this.isAuth ? `wb_basket_${this.sessionService.getUserUid()}` : "_basket"
                }
                _getGuestBasket() {
                    const e = localStorage.getObject("_basket");
                    return e || new et(!1)
                }
                _detGuestBasket() {
                    localStorage.removeItem("_basket")
                }
                _syncFrom() {
                    var e, t, r;
                    try {
                        const r = this.basketKey
                          , n = localStorage.getObject(r);
                        return n ? (this.innerStorage = n,
                        this.innerStorage ? this.innerStorage.basketItems || (this.innerStorage.basketItems = []) : this.innerStorage = new et(this.isAuth,[])) : (null == (t = null == (e = this.innerStorage) ? void 0 : e.basketItems) ? void 0 : t.length) || (this.innerStorage = new et(this.isAuth,[])),
                        this.isAuth && (localStorage.clearStartsWith("wb_basket_", r),
                        localStorage.clearStartsWith("wb___basketStorage_", `wb___basketStorage_${this.sessionService.getUserUid()}`)),
                        1 === this.innerStorage.basketItems.length && (this.innerStorage.basketItems[0].includeInOrder = !0),
                        this.innerStorage
                    } catch (e) {
                        return console.error(e),
                        wb.spa.logError(e, "cartService syncfrom"),
                        null != (r = this.innerStorage) ? r : new et(this.isAuth)
                    }
                }
                _syncTo(e) {
                    var t;
                    e && (this.innerStorage = e),
                    et.calc(this.innerStorage);
                    try {
                        localStorage.putObject(this.basketKey, this.innerStorage)
                    } catch (e) {}
                    this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{
                        detail: {
                            count: null == (t = this.innerStorage) ? void 0 : t.totalQuantity
                        }
                    }))
                }
                async _enrichProducts(e) {
                    if (0 === e.length)
                        return {};
                    const [t,r] = await Promise.all([wb.xnm.getXnmProducts(e, !0, !0), wb.xnm.getProductColorsByNmIdsAsync(e)])
                      , n = this._syncFrom();
                    let s = !1;
                    return n.basketItems.forEach((e => {
                        t[e.cod1S] && (Ze.enrichCatalogGood(e, t[e.cod1S]),
                        s = !0),
                        r[e.cod1S] && (Ze.enrichStaticGood(e, r[e.cod1S]),
                        s = !0)
                    }
                    )),
                    n.currency = WbSpaModel.prototype.$user.getCurrency(),
                    s && this._syncTo(n),
                    t
                }
                updateWbProducts(e) {
                    const t = this._syncFrom();
                    localStorage.hasItem(this.basketKey) || this._syncTo(),
                    (null == e ? void 0 : e.length) && (t.basketItems = [...t.basketItems, ...e.map((e => Ze.fromWbBasketProduct(e)))].reduce(( (e, t) => {
                        const r = e.findIndex((e => e.id === t.id));
                        return -1 !== r || t.isDeleted ? -1 !== r && (e[r].timestamp = Math.max(e[r].timestamp, t.timestamp),
                        e[r].quantity = t.quantity,
                        e[r].targetUrl = t.targetUrl,
                        e[r].isDeleted = t.isDeleted,
                        e[r].meta = t.meta) : (t._fromSync && (t.includeInOrder = e.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder)),
                        delete t._fromSync),
                        e.push(JSON.parse(JSON.stringify(t)))),
                        e
                    }
                    ), []).filter((e => !e.isDeleted)).sort(( (e, t) => t.timestamp - e.timestamp)),
                    this._syncTo())
                }
            }
              , Dt = Ze;
            class At {
                get BasketItemSharedModel() {
                    return ut
                }
                init() {
                    Object.setPrototypeOf(ct.prototype, WbSpaModel.prototype),
                    this.getBankCards = this.$helper.lockPromise(this.getBankCards),
                    this.localBasket = new Et(( () => this.$auth.isAuth),this.$services.sessionService,this.$eventBus),
                    this.promoBasket = new yt,
                    this.wbBasket = new ct(this.localBasket),
                    this.srv = this.wbBasket,
                    this.isGeLocale = "ge" === wb.settings.currentLocale,
                    this.isTjLocale = "tj" === wb.settings.currentLocale,
                    this.$eventBus.addEventListener("onUserAuth", this.sync.bind(this)),
                    this.$eventBus.addEventListener("onUserUnAuth", this.wbBasket.unAuth.bind(this.wbBasket)),
                    this.$eventBus.addEventListener("onBeforeSignOut", this.wbBasket.onBeforeSignOut.bind(this.wbBasket)),
                    this.$eventBus.addEventListener("onBeforeSignOut", this.promoBasket.onBeforeSignOut.bind(this.promoBasket)),
                    $.observe(this.$router, "activeContainer", "showPreview", ( (e, t) => {
                        document.body.classList.toggle("body-gray", 2 === e.target.activeContainer && !e.target.showPreview)
                    }
                    )),
                    "hidden"in document && "visibilityState"in document && document.addEventListener("visibilitychange", (e => {
                        "visible" === document.visibilityState && this.sync("interval")
                    }
                    ))
                }
                get publicBasketApiUrl() {
                    return "ru" === (e = wb.settings.currentDomain) || "kz" === e || "ge" === e || "global" === e ? Mt : Tt + e;
                    var e
                }
                deliveryWays(e="") {
                    var t, r;
                    let n = [{
                        id: 2,
                        code: "self",
                        name: wb.i18n.t("basket.delivery.pickupPoint"),
                        calendars: []
                    }, {
                        id: 1,
                        code: "courier",
                        name: wb.i18n.t("basket.goodsInfo.deliveryByCourier"),
                        calendars: []
                    }];
                    return (!1 === (null == (r = null == (t = wb.global.settings) ? void 0 : t.switches) ? void 0 : r.enableCourierDelivery) || this.isGeLocale && "refund" !== e || "tj" === this.$user.getLocale() && "refund" !== e) && (n = n.filter((e => "courier" !== e.code))),
                    n
                }
                async sync(e) {
                    var t, r;
                    if (e.syncPromo)
                        return this._syncPromoProcess = null != (t = this._syncPromoProcess) ? t : this.promoBasket.sync(e.syncPromo),
                        this._syncPromoProcess.finally(( () => {
                            this._syncProcess = null
                        }
                        ));
                    if (this.$auth.isAuth) {
                        let t = new AbortController;
                        return t._dt = (new Date).getTime() + 6e4,
                        (null == e ? void 0 : e.timeout) ? (this.backgroundController && this.backgroundController._dt < (new Date).getTime() ? (this.backgroundController.abort(),
                        this.backgroundController = null) : this.backgroundController && (t = this.backgroundController),
                        setTimeout(( () => t.abort()), e.timeout)) : this.backgroundController = t,
                        this._syncProcess = null != (r = this._syncProcess) ? r : this.srv.sync(t.signal, "interval" === e),
                        this._syncProcess.catch((e => {}
                        )).finally(( () => {
                            this.$auth.isAuth && (this._migrate(),
                            this.localBasket.enrichProductsIfNeedAsync()),
                            this._syncProcess = null,
                            this.backgroundController = null
                        }
                        ))
                    }
                }
                updateMeta(e, t) {
                    t && this.localBasket.updateMeta(e, t) && this.srv.updateItem(e)
                }
                addItem({model: e, product: t, stores: r, promoId: n}) {
                    const s = Dt.fromCardModel(e, t, r);
                    if (n)
                        return this.promoBasket.add(n, s);
                    const i = this.localBasket.add(s);
                    return this.$auth.isAuth && i.isSuccess && !i.isExist && this.srv.addItem(s),
                    i
                }
                addManyItems(e, t) {
                    if (!(null == e ? void 0 : e.length))
                        return;
                    const r = e.map((e => {
                        if (Dt.prototype.isPrototypeOf(e))
                            return e.meta = Pt(kt({}, e.meta), {
                                originalPrice: {
                                    price: e.priceWithCouponAndDiscount,
                                    currency: e.currency
                                }
                            }),
                            e;
                        const t = Dt.fromBasketInputExtended(e);
                        return t.meta = Pt(kt({}, t.meta), {
                            originalPrice: {
                                price: t.priceWithCouponAndDiscount,
                                currency: this.$user.getCurrency()
                            }
                        }),
                        t
                    }
                    ))
                      , n = this.localBasket.addManyItems(r, t);
                    return this.$auth.isAuth && n.isSuccess && !n.isExist && this.srv.addManyItems(r),
                    n
                }
                refresh({data: e, type: t, queryParams: r=null}) {
                    (null == r ? void 0 : r.promoId) ? this.promoBasket.refresh(r.promoId, e, t) : (this.localBasket.refresh(e, t),
                    this.$auth.isAuth && t && this.srv.refresh(e, t))
                }
                clearItems(e, t) {
                    (null == e ? void 0 : e.length) && (t ? this.promoBasket.clearItems(t, e) : (this.localBasket.clearItems(e),
                    this.$auth.isAuth && this.srv.clearItems(e)))
                }
                getItems(e) {
                    return (null == e ? void 0 : e.promoId) ? this.promoBasket.getItems(e.promoId) : this._filterItemsByParams(this.localBasket.getItems(), e).filteredItems.map((e => new ut(e)))
                }
                enrichItemsLocalInfo(e, t) {
                    if (!(null == t ? void 0 : t.length))
                        return;
                    const r = this.get(e).basketItems.toMap((e => e.id), (e => e));
                    t.forEach((e => {
                        const t = r.get(e.id);
                        e.meta = null == t ? void 0 : t.meta,
                        e.specs = null == t ? void 0 : t.specs,
                        (null == t ? void 0 : t.goodsName) && (e.goodsName = null == t ? void 0 : t.goodsName)
                    }
                    ))
                }
                updateIncludeInOrder(e, t) {
                    (null == e ? void 0 : e.promoId) ? this.promoBasket.updateIncludeInOrder(e.promoId, t) : this.localBasket.updateIncludeInOrder(t)
                }
                async getBankCards(e=6e3, t="", r=!1) {
                    var n, s, i;
                    const a = null == (n = (await this.$services.userData.getUserDataAsync()).userInfo.phone) ? void 0 : n.toString().startsWith("79");
                    try {
                        t || (t = this.$user.getCurrency());
                        const n = this.$user.getLocale()
                          , o = await this.$user.getUserGrade(t)
                          , l = await this.$httpClient.fetchJSON(`${this.publicBasketApiUrl}/webapi/lk/bankcards`, {
                            method: "POST",
                            credentials: "include",
                            body: this.$helper.objectSerializer({
                                currency: t,
                                locale: n,
                                userGradeSigned: o,
                                bypassCache: r
                            }, new URLSearchParams, !0, !0)
                        }, {
                            timeout: e,
                            useProccessResponse: !0
                        });
                        null == (s = null == l ? void 0 : l.maskedCards) || s.forEach((e => {
                            e.isSbp || (e.icon = e.system,
                            "mir" !== e.system || a && !this.isGeLocale || (e.icon = "none",
                            e.name = e.nameNotPaySystem))
                        }
                        ));
                        const c = null != (i = null == l ? void 0 : l.maskedCards) ? i : [];
                        return this.$eventBus.dispatchEvent(new CustomEvent("BankCardsUpdated",{
                            detail: c
                        })),
                        c
                    } catch (e) {}
                }
                async getPaymentsForDeliveries(e) {
                    var t;
                    const r = wb.settings.currentLocale
                      , {payments: n} = await this.$httpClient.fetchJSON(`${this.$services.cartService.publicBasketApiUrl}/payment/list/fordeliveriesv2`, {
                        method: "POST",
                        credentials: "include",
                        body: new URLSearchParams({
                            currency: e,
                            currentLocale: r
                        })
                    }, {
                        useProccessResponse: !0
                    }) || {};
                    return null == (t = null == n ? void 0 : n.find((e => e.isCreditCard))) || t.bankCards.forEach((e => {
                        e.isSbp || (e.icon = e.system),
                        this.isGeLocale && "mir" === e.system && (e.icon = "none",
                        e.nameNotPaySystem && (e.name = e.nameNotPaySystem))
                    }
                    )),
                    (this.isGeLocale || this.isTjLocale) && (null == n || n.forEach((e => {
                        "wlt" !== e.codeLower && "ebl" !== e.codeLower || (e.hideForGe = !0,
                        e.hideForTj = !0)
                    }
                    ))),
                    n
                }
                async getShopsBooking(e) {
                    return await this.$httpClient.fetchStatic(`shopdata/${e}/shops.json`)
                }
                async getShopsDbsp(e) {
                    return await this.$httpClient.fetchStatic(`shopdata/${e}/shopsbystore.json`)
                }
                get localCount() {
                    return this.localBasket.count
                }
                get currentDeliveryType() {
                    return this.localBasket.getDeliveryPoint()
                }
                save(e) {
                    this.localBasket.save(e)
                }
                get(e) {
                    let t = this.localBasket.get(e);
                    const r = !!(null == e ? void 0 : e.promoId);
                    r && (t = wb.helpers.deepClone(t),
                    t.basketItems = this.promoBasket.getItems(e.promoId));
                    const {filtered: n, filteredItems: s} = this._filterItemsByParams(t.basketItems, e);
                    if (n || r) {
                        const e = new et(this.$auth.isAuth,s);
                        return e.isBuyItNowMode = !0,
                        e.settings = t.settings,
                        e.deliveryWay = t.deliveryWay,
                        e.deliveryPoint = t.deliveryPoint,
                        e.paymentTypes = t.paymentTypes,
                        e.paymentType = t.paymentType,
                        e.paymentType && (e.paymentType.bankCardId = t.paymentType.bankCardId,
                        e.paymentType.selectedBankCard = t.paymentType.selectedBankCard),
                        et.calc(e),
                        e
                    }
                    return t
                }
                _filterItemsByParams(e, {sellerId: t=null, includeInOrderStr: r=null}={}) {
                    if (t || r) {
                        const n = e.filter((e => {
                            var n;
                            return (null == (n = e.stocks) ? void 0 : n.length) > 0 && (r ? e.characteristicId == r : e.supplierId == t && [10, 14].includes(15 & e.whDtype))
                        }
                        ));
                        return 1 === n.length && (n[0].includeInOrder = !0),
                        {
                            filtered: !0,
                            filteredItems: n
                        }
                    }
                    return {
                        filtered: !1,
                        filteredItems: e
                    }
                }
                _migrate() {
                    const e = this.localBasket.migrate();
                    0 !== e.length && this.srv.addManyItems(e)
                }
                async getBanner(e) {
                    var t;
                    try {
                        const r = await WbSpaModel.prototype.$httpClient.fetchJSON(`/webapi/lk/payment/marketing/banner?pan=${e}`, {
                            method: "POST"
                        });
                        return null == (t = null == r ? void 0 : r.result) ? void 0 : t.banner
                    } catch (e) {
                        console.log(e.error)
                    }
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(At.prototype, e)
                }
                static factory(e) {
                    return e && At.richPrototype(e),
                    new At
                }
            }
            var Ot = At
              , Bt = r(5890);
            const Lt = "Склад продавца";
            var $t = {
                0: Lt,
                507: "Коледино WB",
                686: "Новосибирск WB",
                1193: "Хабаровск WB",
                1733: "Екатеринбург WB",
                2737: "Уткина Заводь WB",
                117442: "Калуга WB",
                117501: "Подольск WB",
                117866: "Тамбов WB",
                117986: "Казань WB",
                120762: "Электросталь WB",
                121709: "Электросталь WB",
                130744: "Краснодар WB",
                159402: "Шушары WB",
                161812: "Санкт-Петербург WB",
                172430: "Барнаул WB",
                204615: "Томск WB",
                204939: "Астана WB",
                205104: "Ульяновск WB",
                205205: "Киров WB",
                205228: "Белая дача WB",
                206236: "Белые Столбы WB",
                206348: "Алексин WB",
                206708: "Новокузнецк WB",
                206844: "Калининград WB",
                206968: "Новосёлки WB",
                208277: "Невинномысск WB",
                208941: "Домодедово WB",
                209513: "Домодедово WB",
                210001: "Новосёлки-2 WB",
                210515: "Вёшки WB",
                208768: Lt + " Абакан",
                209649: Lt + " Алексин",
                208769: Lt + " Алматы",
                212038: Lt + " Алматы-2",
                209902: Lt + " Артём",
                214110: Lt + " Архангельск",
                122495: Lt + " Астана",
                204492: Lt + " Астрахань",
                204493: Lt + " Барнаул",
                206239: Lt + " Белая Дача (Москва)",
                213892: Lt + " Белгород",
                214112: Lt + " Белогорск",
                209112: Lt + " Белые Столбы",
                208814: Lt + " Бишкек",
                204494: Lt + " Брянск",
                204495: Lt + " Владикавказ",
                117392: Lt + " Владимир",
                152588: Lt + " Волгоград",
                204496: Lt + " Вологда",
                211895: Lt + " Воронеж",
                209111: Lt + " Гольяново (Москва)",
                208771: Lt + " Гомель (Беларусь)",
                210967: Lt + " Домодедово",
                208815: Lt + " Екатеринбург",
                211790: Lt + " Екатеринбург-2",
                208816: Lt + " Ереван",
                208772: Lt + " Иваново",
                172073: Lt + " Ижевск",
                131643: Lt + " Иркутск",
                208817: Lt + " Казань",
                208761: Lt + " Калининград",
                144046: Lt + " Калуга",
                208773: Lt + " Киров",
                119261: Lt + " Коледино",
                209109: Lt + " Комсомольский (Москва)",
                208818: Lt + " Краснодар",
                118365: Lt + " Красноярск",
                208774: Lt + " Крыловская (Краснодар)",
                172075: Lt + " Курск",
                209108: Lt + " Курьяновская (Москва)",
                208776: Lt + " Липецк",
                168826: Lt + " Лобня (Москва)",
                121700: Lt + " Минск",
                211672: Lt + " Минск-2",
                212032: Lt + " Вешки",
                211730: Lt + " Внуково",
                117673: Lt + " Москва",
                122259: Lt + " Москва",
                208777: Lt + " Мурманск",
                208778: Lt + " Набережные Челны",
                209107: Lt + " Нахабино (Москва)",
                209601: Lt + " Невинномысск",
                118535: Lt + " Нижний Новгород",
                213651: Lt + " Нижний Тагил",
                208789: Lt + " Новокузнецк",
                117419: Lt + " Новосибирск",
                209591: Lt + " Омск",
                208780: Lt + " Оренбург",
                157848: Lt + " Пенза",
                209592: Lt + " Пермь",
                208781: Lt + " Печатники",
                214111: Lt + " Псков",
                208782: Lt + " Пушкино (Москва)",
                204497: Lt + " Пятигорск",
                118019: Lt + " Ростов-на-Дону",
                152594: Lt + " Рязань",
                146666: Lt + " Самара",
                132043: Lt + " Санкт-Петербург",
                117414: Lt + " Санкт-Петербург (Уткина Заводь)",
                208819: Lt + " Санкт-Петербург (Шушары)",
                158929: Lt + " Саратов",
                204498: Lt + " Серов",
                144154: Lt + " Симферополь",
                208783: Lt + " Смоленск",
                204212: Lt + " Солнцево",
                158448: Lt + " Ставрополь",
                208784: Lt + " Сургут",
                115651: Lt + " Тамбов",
                152610: Lt + " Тверь",
                208785: Lt + " Темрюк (Краснодарский край)",
                208786: Lt + " Томск",
                146725: Lt + " Тюмень",
                209950: Lt + " Ульяновск",
                152700: Lt + " Уфа",
                208820: Lt + " Хабаровск",
                210815: Lt + " Хоргос",
                204499: Lt + " Чебоксары",
                152611: Lt + " Челябинск",
                209113: Lt + " Черная грязь (Москва)",
                209106: Lt + " Чертановский (Москва)",
                208787: Lt + " Чита",
                209510: Lt + " Электросталь",
                209110: Lt + " Южные ворота (Москва)",
                152612: Lt + " Ярославль"
            };
            const xt = ["ru", "by", "kg", "kz", "am", "uz", "tj", "ge"];
            var Rt = class {
                isMp(e) {
                    return e ? this._checkStoreFlag(e, 2, "type") : null
                }
                isCargoStore(e) {
                    return e ? this._checkStoreFlag(e, 4, "type") : null
                }
                isDbs(e) {
                    return e ? this._checkStoreFlag(e, 8, "type") : null
                }
                isRu(e) {
                    var t;
                    return !!e && "RU" === (null == (t = this[e]) ? void 0 : t.country)
                }
                isForeign(e) {
                    return e ? this._checkStoreFlag(e, 16, "type") : null
                }
                isWbGo(e) {
                    return e ? this._checkStoreFlag(e, 32, "type") : null
                }
                isExpress(e) {
                    return e ? this._checkStoreFlag(e, 64, "type") : null
                }
                isBooking(e) {
                    return e ? this._checkStoreFlag(e, 128, "type") : null
                }
                isTransit(e, t) {
                    return !!t && this._checkStoreFlag(t, 1 << this._localeBit(e), "transit")
                }
                needVerification(e, t) {
                    return !!t && this._checkStoreFlag(t, 1 << this._localeBit(e), "import")
                }
                getStoreCountry(e) {
                    var t, r, n;
                    return e && null != (n = null == (r = null == (t = this[e]) ? void 0 : t.country) ? void 0 : r.toLowerCase()) ? n : null
                }
                _checkStoreFlag(e, t, r) {
                    var n;
                    return void 0 !== (null == (n = this[e]) ? void 0 : n[r]) && (this[e][r] & t) === t
                }
                _localeBit(e) {
                    const t = xt.indexOf(e);
                    return Math.max(t, 0)
                }
            }
            ;
            const Ft = "wb__cargo_data_dt"
              , jt = 9e5
              , Nt = "cargo-stores"
              , Ut = "stores-data";
            class Wt {
                constructor() {
                    this._storeNames = $t,
                    this._stores = new Rt,
                    this._cargoStores = [],
                    this._getStoresData().then((e => {
                        if (e) {
                            for (let {id: t, name: r, type: n, intervals: s, workingHours: i, import: a, isWb: o, transit: l, country: c} of e)
                                this._storeNames[t] = r,
                                !0 & n && this._cargoStores.push(t),
                                this._stores[t] = {
                                    name: r,
                                    type: n,
                                    intervals: s,
                                    workingHours: i,
                                    import: a,
                                    isWb: o,
                                    transit: l,
                                    country: c
                                };
                            this._storesLoaded = !0
                        }
                        this._startJobSync()
                    }
                    ))
                }
                get cargoStores() {
                    return this._cargoStores || []
                }
                get names() {
                    return this._storeNames
                }
                get storesMap() {
                    return this._stores
                }
                _openDb() {
                    return this.$storageHelper.openDb("all-stores", {
                        onupgradeneeded: e => {
                            e.objectStoreNames.contains(Nt) || e.createObjectStore(Nt, {
                                keyPath: "id"
                            }),
                            e.objectStoreNames.contains(Ut) || e.createObjectStore(Ut, {
                                keyPath: "id"
                            })
                        }
                        ,
                        version: 2
                    })
                }
                _setStoresAsync(e) {
                    this._openDb().then((t => {
                        e instanceof Array && this.$storageHelper.addItems(t, Ut, e, 500)
                    }
                    ))
                }
                async _getStoresData() {
                    return this._openDb().then((e => this.$storageHelper.getAll(e, Ut)))
                }
                _startJobSync() {
                    (!this._storesLoaded || +localStorage.getItem(Ft) < Date.now()) && this._syncStores(),
                    setInterval(this._syncStores.bind(this), jt)
                }
                async _syncStores() {
                    const e = await this.$httpClient.fetchStatic("stores-data.json");
                    if (e instanceof Array) {
                        this._storesLoaded = !0,
                        this._cargoStores = [];
                        for (let {id: t, name: r, type: n, intervals: s=null, workingHours: i=null, import: a, isWb: o, transit: l, country: c} of e)
                            this._storeNames[t] = r,
                            !0 & n && this._cargoStores.push(t),
                            this._stores[t] = {
                                name: r,
                                type: n,
                                intervals: s,
                                workingHours: i,
                                import: a,
                                isWb: o,
                                transit: l,
                                country: c
                            };
                        localStorage.setItem(Ft, Date.now() + jt)
                    }
                    this._setStoresAsync(e)
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(Wt.prototype, e)
                }
                static factory(e) {
                    return e && Wt.richPrototype(e),
                    new Wt
                }
            }
            var Ht = Wt
              , qt = Object.defineProperty
              , Vt = Object.defineProperties
              , zt = Object.getOwnPropertyDescriptors
              , Gt = Object.getOwnPropertySymbols
              , Kt = Object.prototype.hasOwnProperty
              , Qt = Object.prototype.propertyIsEnumerable
              , Jt = (e, t, r) => t in e ? qt(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , Yt = (e, t) => {
                for (var r in t || (t = {}))
                    Kt.call(t, r) && Jt(e, r, t[r]);
                if (Gt)
                    for (var r of Gt(t))
                        Qt.call(t, r) && Jt(e, r, t[r]);
                return e
            }
              , Xt = (e, t) => Vt(e, zt(t));
            const Zt = [5352, 2255]
              , er = [1, 2, 3, 4, 6, 200, 204, 1327, 1465, 1513, 1616, 2273, 3497, 4607, 4735]
              , tr = [213, 1542, 2605, 2693, 4733, 4737, 212, 380, 733, 1675, 2687, 4738, 4827, 4932, 214, 2616, 218, 757, 53, 61, 63, 305, 946, 1161, 1422, 1439, 1475, 1487, 2318, 2379, 2747, 2920, 3489, 3490, 3579, 3766, 4200, 4256, 4537, 5154, 5220, 5222, 5273, 5094, 5096, 1339, 836, 5131, 1542, 5095, 4021, 4022, 1338, 2564]
              , rr = [786, 1107]
              , nr = [1524, 1525]
              , sr = [1, 2, 4, 200, 204, 239, 1513, 5038]
              , ir = "stashed_catalog_product";
            class ar {
                constructor() {
                    var e;
                    Jt(this, "symbol" != typeof (e = "stashedCatalogProductInner") ? e + "" : e, null)
                }
                stashCatalogProduct(e) {
                    e && (this.stashedCatalogProductInner = e,
                    localStorage.putObject(ir, e))
                }
                get stashedCatalogProduct() {
                    var e;
                    return null != (e = this.stashedCatalogProductInner) ? e : localStorage.getObject(ir)
                }
                async loadProductCardAsync(e, t, r=!1) {
                    try {
                        const n = this.stashedCatalogProduct;
                        if ((null == n ? void 0 : n.nmId) === e && !r && n.currency === WbSpaModel.prototype.$user.getCurrency())
                            return this.fromCatalogProduct(n, t);
                        const s = await this.loadStaticProductAsync(e, {
                            timeout: 2e3
                        }, wb.xnm.waitNoReturnSubjectsInitialized);
                        return this.loadDynamicProductAsync(e, t, s)
                    } catch (e) {
                        return null
                    }
                }
                async loadStaticProductAsync(e, t, r) {
                    const n = async n => {
                        const [s] = await Promise.all([WbSpaModel.prototype.$httpClient.fetchStatic(String(e), t, wb.helpers.url.urlProductStatic, void 0, n), null == r ? void 0 : r()]);
                        return s && (s.lang = n),
                        404 === (null == s ? void 0 : s.status) ? null : s
                    }
                      , s = wb.currentLanguage;
                    if (["ka", "kk", "uz"].includes(s)) {
                        let e = await n(s);
                        return e || (e = await n("ru"),
                        e.lang = "default",
                        e)
                    }
                    return n("ru")
                }
                async loadDynamicProductAsync(e, t, r) {
                    var n, s;
                    if (!e || isNaN(e))
                        throw new TypeError("[ProductCardService] nmId must be an integer at loadDynamicProductAsync");
                    t && isNaN(t) && (console.warn("[ProductCardService] chrtId is not an integer at loadDynamicProductAsync"),
                    t = null),
                    r = null != r ? r : await this.loadStaticProductAsync(e, {
                        timeout: 2e3
                    }, wb.xnm.waitNoReturnSubjectsInitialized);
                    const i = new Map;
                    let a = null != (n = null == r ? void 0 : r.colors) ? n : [e];
                    r && (r.colors = this.colorLimiter(e, a),
                    a = r.colors,
                    i.set(r.nm_id, r));
                    const o = "SubscriptionPageEntrypoint" === WbSpaModel.prototype.$router.targetRoute ? null == (s = this.stashedCatalogProductInner) ? void 0 : s.currency : void 0
                      , l = await wb.xnm.getXnmProducts(a, !0, !0, void 0, o).catch(( () => null))
                      , c = e.toString();
                    if (!l)
                        return null;
                    const u = l[c];
                    if (!u)
                        return null;
                    const d = await this.getMetaCardInfo(u, r)
                      , h = this.fillBaseProductCardFromX(r, u, !!d)
                      , p = Xt(Yt({}, h), {
                        metacard: d
                    });
                    (null == d ? void 0 : d.enabled) && !(null == d ? void 0 : d.options) && (a = [e]),
                    a.forEach((e => {
                        const t = i.get(e)
                          , r = null == l ? void 0 : l[e];
                        if (r && r.pics > 0) {
                            const n = this.fillNomenclature(e, t, r);
                            n.groupedAddedOptions = p.groupedAddedOptions,
                            n.miniAddedOptions = p.miniAddedOptions,
                            n.verifiedCertificate = this.setVerifiedCertificate(t),
                            "SubscriptionPageEntrypoint" === WbSpaModel.prototype.$router.targetRoute && (null == r ? void 0 : r.currency) && (n.currency = r.currency),
                            p.nomenclatures.push(n)
                        }
                    }
                    )),
                    p.nomenclatures = p.nomenclatures.sort(( (t, r) => t.nmId === e ? -1 : r.nmId === e ? 1 : r.sort - t.sort));
                    const m = p.nomenclatures.find((t => t.nmId === e));
                    if (null == m || null == m.sizes)
                        return null;
                    const b = Object.assign({}, m);
                    this.fillSelectedNomenclature(b, t),
                    this.addDigitalLinks(b, r);
                    const g = this.fillProductCardMetaTags(p);
                    return b.goodsName || (p.goodsName = wb.i18n.t("productCard.noNameSpecified")),
                    this.checkGroupedAddedOptionsExist(b.groupedAddedOptions) || (b.groupedAddedOptions = []),
                    {
                        metaTags: g,
                        product: p,
                        selectedNomenclature: b
                    }
                }
                async loadNomenclature(e) {
                    var t, r, n, s, i, a, o, l, c, u, d, h, p, m, b, g, y, f, v, w;
                    let _ = null;
                    if (!e.isDataLoaded)
                        try {
                            _ = await this.loadStaticProductAsync(e.nmId, {
                                timeout: 2e3
                            }, wb.xnm.waitNoReturnSubjectsInitialized)
                        } catch (e) {
                            _ = null
                        }
                    if (_) {
                        if (e.goodsName = null != (t = null == _ ? void 0 : _.imt_name) ? t : e.goodsName,
                        e.brandName = null != (n = null == (r = null == _ ? void 0 : _.selling) ? void 0 : r.brand_name) ? n : e.brandName,
                        e.colorName = _.nm_colors_names,
                        e.hasVideo = null == (s = _.media) ? void 0 : s.has_video,
                        e.isBestQualityVideo = null != (a = null == (i = null == _ ? void 0 : _.media) ? void 0 : i.is_best_quality_video) && a,
                        e.bestQualityPics = null != (l = null == (o = _.media) ? void 0 : o.best_qualities_photos) ? l : [],
                        e.hasRich = null != (c = null == _ ? void 0 : _.has_rich) && c,
                        e.hasImageTags = null != (u = (null == _ ? void 0 : _.enable_tags) && (null == _ ? void 0 : _.has_photo_tags)) && u,
                        e.consist = null != (b = null != (m = null == (d = null == _ ? void 0 : _.compositions) ? void 0 : d.map((e => e.value ? `${e.name} ${e.value}%` : e.name)).join(", ")) ? m : null == (p = null == (h = null == _ ? void 0 : _.options) ? void 0 : h.find((e => "Состав" === e.name))) ? void 0 : p.value) ? b : "",
                        e.isPrescription = null != (g = _.is_prescription) && g,
                        _.sizes_table && _.sizes_table.details_props) {
                            e.sizeTable = [];
                            const t = _.sizes_table.details_props.indexOf("RU")
                              , r = {
                                row: []
                            };
                            t >= 0 && (r.row[0] = wb.i18n.t("common.russianSize")),
                            r.row[1] = wb.i18n.t("common.manufactureSize");
                            let n = 2;
                            for (let e = 2; e < _.sizes_table.details_props.length; e++) {
                                const t = _.sizes_table.details_props[e];
                                r.row[n++] = "" !== t ? t : "-"
                            }
                            if (e.sizeTable.push(r),
                            _.sizes_table.values.forEach((r => {
                                var n, s;
                                const i = {
                                    chrtId: null != (n = r.chrt_id) ? n : 0,
                                    row: []
                                };
                                if (t >= 0 && (i.row[0] = r.details[t]),
                                i.row[1] = r.tech_size,
                                r.details.length > 2)
                                    for (let e = 2; e < r.details.length; e++)
                                        i.row[e] = "" !== r.details[e] ? r.details[e] : "-";
                                null == (s = e.sizeTable) || s.push(i)
                            }
                            )),
                            e.sizes)
                                for (const t of e.sizes) {
                                    const e = _.sizes_table.values.find((e => e.chrt_id === t.characteristicId));
                                    if (e && _.sizes_table.details_props.length === e.details.length)
                                        for (let r = 2; r < _.sizes_table.details_props.length; r++) {
                                            const n = {
                                                name: _.sizes_table.details_props[r],
                                                value: "" !== e.details[r] ? e.details[r] : "-"
                                            };
                                            t.dimensions && t.dimensions.push(n)
                                        }
                                }
                        }
                        const S = this.fillGroupedAddedOptions(_);
                        e.groupedAddedOptions = S,
                        e.miniAddedOptions = this.fillMiniGroupedAddedOptions(S, 6),
                        e.specs = wb.xnm.convertOptionsToSpecs(null == _ ? void 0 : _.options),
                        e.subjectName = null != (y = null == _ ? void 0 : _.subj_name) ? y : "",
                        e.subjectParent = null != (f = null == _ ? void 0 : _.subj_root_name) ? f : "",
                        e.verifiedCertificate = this.setVerifiedCertificate(_),
                        this.addDigitalLinks(e, _),
                        e.description = _.description,
                        e.markdownDescription = null != (v = _.markdown_description) && v,
                        e.isAutoplayingVideo = null == (w = _.media) ? void 0 : w.is_autoplaying_video,
                        e.isDataLoaded = !0,
                        this.fillIsChooseColor(_, e)
                    }
                    const S = Object.assign({}, e);
                    return this.fillSelectedNomenclature(S),
                    S
                }
                async getMetaCardInfo(e, t) {
                    var r, n, s, i, a;
                    const o = await WbSpaModel.prototype.isMetaCharacteristicEnabled()
                      , [l] = await Promise.all([(async () => {
                        const r = "nmId"in e ? e.nmId : e.id;
                        return null != t ? t : this.loadStaticProductAsync(r, {
                            timeout: 2e3
                        }, wb.xnm.waitNoReturnSubjectsInitialized)
                    }
                    )(), WbSpaModel.prototype.$moduleLoader.loadServiceAsync("metaCardService")]);
                    if (!l)
                        return null;
                    const c = null == e ? void 0 : e.rcId
                      , u = null == t ? void 0 : t.imt_id
                      , d = null == e ? void 0 : e.dest;
                    let h;
                    if (h = e.id ? e.id : e.nmId,
                    !h)
                        return null;
                    const p = await WbSpaModel.prototype.$services.metaCardService;
                    if ((null == (r = wb.global.settings.switches) ? void 0 : r.multicardV2Enable) && c && (2 === (null == (n = l.rc) ? void 0 : n.type) || (null == (s = l.rc) ? void 0 : s.id) === c))
                        return await p.getMetaInfo(h, c, null, l);
                    if (u && (null != (a = null == (i = null == e ? void 0 : e.sizes) ? void 0 : i.length) ? a : 0) < 2 && e.sizes && o) {
                        return this.checkBaseChooseColor(l.options, e.sizes) ? null : await p.getMetaInfo(h, null, d, l)
                    }
                    return null
                }
                async loadMiniCardData(e, t) {
                    var r, n, s, i;
                    const a = await wb.xnm.getMiniProductCard(e);
                    if (!a)
                        return null;
                    let o = null
                      , l = null;
                    if (t && !isNaN(t) && (null == (r = a.sizes) ? void 0 : r.some((e => e.ch == t))))
                        o = t,
                        l = null != (s = null == (n = a.sizes.find((e => e.ch == t))) ? void 0 : n.nm) ? s : null;
                    else if (1 == (null == (i = a.sizes) ? void 0 : i.length)) {
                        const e = a.sizes[0];
                        o = e.ch,
                        l = null == e ? void 0 : e.nm
                    }
                    return Xt(Yt({}, a), {
                        characteristicId: o,
                        sizeName: l,
                        isOnlyColor: !0
                    })
                }
                async loadPriceHistory(e) {
                    const t = await WbSpaModel.prototype.$httpClient.fetchStatic(String(e), {
                        logOff: !0
                    }, wb.helpers.url.urlPriceHistoryStatic);
                    return null != t ? t : null
                }
                async loadSizeTable(e) {
                    const t = await this.loadStaticProductAsync(e, {
                        timeout: 2e3
                    }, wb.xnm.waitNoReturnSubjectsInitialized);
                    return this.fillSizeTable(t)
                }
                setChooseColorInBasket(e, t) {
                    var r, n, s;
                    for (let i = 0; i < e.length; i++)
                        if ((null == (n = null == (r = e[i].meta) ? void 0 : r.shade) ? void 0 : n.colorHex) && t.sizes) {
                            if (e[i].characteristicId === (null == (s = t.sizes[0]) ? void 0 : s.characteristicId)) {
                                $.observable(t).setProperty({
                                    chooseColorInBasket: !0
                                });
                                break
                            }
                        } else
                            $.observable(t).setProperty({
                                chooseColorInBasket: !1
                            })
                }
                updateAnalyticsForProductRedirect(e) {
                    var t, r, n;
                    const s = wb.analitics.getState()
                      , i = {
                        catalog_type: null == e ? void 0 : e.xcatalogShard,
                        catalog_value: null == e ? void 0 : e.xcatalogQuery,
                        rmi: null == e ? void 0 : e.rmi,
                        rs: null == e ? void 0 : e.rs,
                        normquery: null != (t = null == e ? void 0 : e.normQuery) ? t : e.search,
                        article: 1,
                        meta_preset_id: "",
                        filters_entry_point: "",
                        filters: ""
                    };
                    if (wb.analitics.updateTailObjectData(i),
                    "SNT" === s.l || "SNH" === s.l) {
                        const t = {
                            t1: null != (r = null == e ? void 0 : e.xcatalogQuery) ? r : "",
                            t2: null != (n = null == e ? void 0 : e.xcatalogShard) ? n : ""
                        };
                        wb.analitics.updateState(t)
                    }
                }
                fromCatalogProduct(e, t) {
                    var r, n, s, i, a, o, l, c, u, d;
                    const h = {}
                      , p = {
                        imtId: e.imtId,
                        nomenclatures: [],
                        supplierDeliveryInfo: {
                            time1: e.time1 || null,
                            time2: e.time2 || null,
                            storeId: e.fastestStore || null
                        },
                        rcId: e.rcId
                    }
                      , m = e.pics
                      , b = 20624 === e.brandId || 30624 === e.siteBrandId
                      , g = !(null == (r = wb.global.settings.switches) ? void 0 : r.enableReturnSubjectsWithDays) && wb.xnm.setNoRefund(e.subjectId)
                      , y = {
                        adult: e.adult,
                        brandId: e.brandCod,
                        brandName: e.brand,
                        canFit: this.setCanFit(e.subjectId, e.subjectParentId, e.isC2C),
                        colorName: null,
                        consist: "",
                        deliveryHours: e.deliveryHours,
                        description: null,
                        markdownDescription: !1,
                        dest: e.dest,
                        fastestStore: e.fastestStore,
                        feedbacks: e.feedbacks,
                        goodsName: e.name,
                        isAlcohol: null != (n = e.isAlcohol) && n,
                        isPostpaidBooking: null != (s = e.isPostpaidBooking) && s,
                        isBooking: null != (i = e.isBooking) && i,
                        isActivationKey: -1 !== Zt.indexOf(e.subjectId),
                        isDataLoaded: !1,
                        isDetailsLoaded: !1,
                        isDigital: e.isDigitalGood,
                        isPreorder: 5772 === e.brandCod && wb.settings.preOrderList.includes(e.nmId),
                        isPrepaid: e.isPrepaid,
                        isVideo: 5105 === e.subjectId,
                        hasVideo: !!(16 & e.viewFlags),
                        isBestQualityVideo: !1,
                        hasRich: !1,
                        hasImageTags: !1,
                        kindId: null != (a = e.kindId) ? a : 0,
                        nmId: e.nmId,
                        nonRefundable: e.isUnrefusable || g,
                        panelPromoId: e.panelPromoId,
                        picsCount: m,
                        bestQualityPics: [],
                        promoText: e.promoTextCard,
                        promotions: null,
                        saleConditions: e.saleConditions,
                        subjectId: e.subjectId,
                        subjectName: "",
                        subjectParent: "",
                        subjectParentId: e.subjectParentId,
                        sizes: null == (o = e.sizes) ? void 0 : o.map((t => {
                            var r, n;
                            const s = t.catalogPrice;
                            return {
                                characteristicId: t.ch,
                                sizeName: t.nm,
                                sizeNameRus: t.rusNm,
                                quantity: t.unavailable || e.soldOut ? 0 : 1,
                                stocks: t.stocks,
                                storeIds: null == (r = t.stocks) ? void 0 : r.map((e => e.wh)),
                                isSoldOut: !!t.unavailable || e.soldOut,
                                deliveryHours: e.deliveryHours,
                                payloadV2: t.payloadV2,
                                saleConditions: t.saleConditions,
                                whDtype: t.whDtype,
                                price: s ? {
                                    price: s.basic ? s.basic / 100 : 0,
                                    salePrice: s.priceToShow ? s.priceToShow / 100 : 0,
                                    sale: s.sale,
                                    logisticsCost: s.logisticsToShow,
                                    returnCost: s.return,
                                    paymentDiscountAmount: s.paymentDiscountAmount,
                                    productPrice: s.product / 100,
                                    premiumSaleAmount: null != (n = s.premiumSaleAmount) ? n : 0
                                } : null,
                                dimensions: []
                            }
                        }
                        )),
                        sizeTable: null,
                        showMinDetails: !sr.includes(e.subjectParentId),
                        reviewRating: e.reviewRating,
                        star: e.star,
                        urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${e.nmId}`,
                        supplier: $.views.helpers.supplierFineName("Wildberries" === e.supplier ? "WILDBERRIES" : $.views.converters.trimSupplierName(e.supplier, $.views.helpers.suppliersOrgForms), e.brandId),
                        supplierId: e.supplierId,
                        supplierRating: e.supplierRating,
                        viewFlags: e.viewFlags,
                        shouldShowOriginalMark: !b && !!(8 & e.viewFlags),
                        miniAddedOptions: [],
                        groupedAddedOptions: [],
                        showThermometer: e.showThermometer,
                        quantity: e.totalQuantity,
                        whDtype: e.whDtype,
                        cashbackPercent: null == e ? void 0 : e.cashbackPercent,
                        expandedRichContent: !!(4 & ((null == e ? void 0 : e.supplierFlags) || 0))
                    };
                    e.supplierFlags && (y.hideMultipleSellers = !!(2 & e.supplierFlags) && !!(null == (l = wb.global) ? void 0 : l.settings.switches.hideMultipleSellersLever)),
                    y.allSizesSoldOut = null != (u = null == (c = y.sizes) ? void 0 : c.every((e => e.isSoldOut))) && u;
                    const f = !y.allSizesSoldOut && (null == (d = e.catalogPrice) ? void 0 : d.total) > 0;
                    return y.price = {
                        price: f ? e.catalogPrice.basic / 100 : 0,
                        salePrice: f && e.catalogPrice.priceToShow ? e.catalogPrice.priceToShow / 100 : 0,
                        sale: f && e.catalogPrice.sale ? e.catalogPrice.sale : 0,
                        priceDiff: !!f && e.priceDiff,
                        logisticsCost: e.catalogPrice.logisticsToShow,
                        returnCost: e.catalogPrice.return,
                        soldOut: y.allSizesSoldOut,
                        productPrice: e.catalogPrice.product / 100,
                        paymentDiscountAmount: e.catalogPrice.paymentDiscountAmount
                    },
                    y.sort = 0,
                    y.sizes && y.sizes.length > 0 && (1 === y.sizes.length ? y.sort = y.sizes[0].quantity > 0 ? 1 : 0 : y.sizes.reduce(( (e, t) => y.sort += +(t.quantity > 0)), {})),
                    p.nomenclatures.push(y),
                    this.fillSelectedNomenclature(y, t),
                    Object.assign(h, {
                        product: p,
                        selectedNomenclature: y
                    }),
                    h.metaTags = this.fillProductCardMetaTags(p),
                    h
                }
                fillSelectedNomenclature(e, t) {
                    var r, n, s, i, a;
                    wb.xnm.fillFeedbacksPayment([e]),
                    wb.xnm.isRedPrice(e.panelPromoId) && (e.showRedPrice = !0),
                    wb.settings.b2bMode && (e.isVatRefundable = wb.xnm.isVatRefundable(e.viewFlags),
                    e.vatPercent = wb.xnm.getVatPercent(e.viewFlags));
                    let o = !0;
                    e.sizes && (o = e.sizes.length <= 2 && (null == (r = e.sizes) ? void 0 : r.every((e => "0" === e.sizeName))),
                    o || 1 === e.sizes.length ? e.selectedSize = e.sizes.find((e => !e.isSoldOut)) || e.sizes[0] : null != t && (e.selectedSize = e.sizes.find((e => e.characteristicId === t)))),
                    this.setSelectedPrice(e),
                    wb.global.settings.switches.enableCashback && this._setCashbackAmount(e),
                    this.setButtons(e),
                    e.showSize = !o,
                    e.deliveryInfoEnable = !e.isDigital && !((null == (n = e.selectedSize) ? void 0 : n.isSoldOut) || e.allSizesSoldOut),
                    e.isVehicle = 8242 == e.subjectParentId,
                    e.saleConditions = null == (i = null == (s = e.sizes) ? void 0 : s.find((e => {
                        var t;
                        return null == (t = e.stocks) ? void 0 : t.length
                    }
                    ))) ? void 0 : i.saleConditions,
                    e.colorGroupBaseType && e.selectedSize && (e.isShowChooseColorBtn = !0),
                    e.isC2C = !!e.viewFlags && wb.xnm.isC2CProduct(e.viewFlags),
                    e.enablePaidCargoDelivery = this.isPaidCargoDelivery((null == (a = e.price) ? void 0 : a.logisticsCost) || 0)
                }
                fillNomenclature(e, t, r) {
                    var n, s, i, a, o, l, c, u, d, h, p, m, b, g, y, f, v, w, _, S, C, I, k, P, M, T, E, D, A, O, B, L, x, R, F, j, N, U, W, H, q, V, z, G, K, Q;
                    const J = null != (i = null != (s = null == (n = null == t ? void 0 : t.data) ? void 0 : n.subject_id) ? s : null == r ? void 0 : r.subjectId) ? i : 0
                      , Y = null != (l = null != (o = null == (a = null == t ? void 0 : t.data) ? void 0 : a.subject_root_id) ? o : null == r ? void 0 : r.subjectParentId) ? l : 0
                      , X = null != (c = null == t ? void 0 : t.subj_name) ? c : ""
                      , Z = null != (u = null == t ? void 0 : t.subj_root_name) ? u : ""
                      , ee = null != (p = null != (h = null == r ? void 0 : r.pics) ? h : null == (d = null == t ? void 0 : t.media) ? void 0 : d.photo_count) ? p : 0
                      , te = null != (b = null == (m = null == t ? void 0 : t.media) ? void 0 : m.best_qualities_photos) ? b : []
                      , re = 20624 === (null == r ? void 0 : r.brandId) || 30624 === (null == r ? void 0 : r.siteBrandId)
                      , ne = WbSpaModel.prototype.$services.storeService.storesMap
                      , se = (null == r ? void 0 : r.wh) ? ne[r.wh] : null
                      , ie = !(8 & ~(null == se ? void 0 : se.type))
                      , ae = !(null == (g = wb.global.settings.switches) ? void 0 : g.enableReturnSubjectsWithDays) && wb.xnm.setNoRefund(J)
                      , oe = {
                        adult: null != (y = null == r ? void 0 : r.isAdult) && y,
                        attachments: null == t ? void 0 : t.attachments,
                        brandId: null != (f = null == r ? void 0 : r.brandId) ? f : 0,
                        brandName: null != (_ = null != (w = null == (v = null == t ? void 0 : t.selling) ? void 0 : v.brand_name) ? w : null == r ? void 0 : r.brand) ? _ : "",
                        canFit: this.setCanFit(J, Y, null == r ? void 0 : r.isC2C),
                        colorName: -1 !== rr.indexOf(null == r ? void 0 : r.subjectId) ? null : null != (I = null != (C = null == t ? void 0 : t.nm_colors_names) ? C : null == (S = null == r ? void 0 : r.colors) ? void 0 : S.map((e => e.name)).join(", ")) ? I : "",
                        consist: null != (E = null != (T = null == (k = null == t ? void 0 : t.compositions) ? void 0 : k.map((e => e.value ? `${e.name} ${e.value}%` : e.name)).join(", ")) ? T : null == (M = null == (P = null == t ? void 0 : t.options) ? void 0 : P.find((e => "Состав" === e.name))) ? void 0 : M.value) ? E : "",
                        deliveryHours: ((null == r ? void 0 : r.time1) || 0) + ((null == r ? void 0 : r.time2) || 0),
                        intervals: null == se ? void 0 : se.intervals,
                        workingHours: null == se ? void 0 : se.workingHours,
                        isDbs: ie,
                        description: null == t ? void 0 : t.description,
                        markdownDescription: null != (D = null == t ? void 0 : t.markdown_description) && D,
                        dest: null == r ? void 0 : r.dest,
                        fastestStore: null == r ? void 0 : r.wh,
                        feedbacks: null != (A = null == r ? void 0 : r.feedbacks) ? A : 0,
                        specs: wb.xnm.convertOptionsToSpecs(null == t ? void 0 : t.options),
                        goodsName: null != (B = null != (O = null == t ? void 0 : t.imt_name) ? O : null == r ? void 0 : r.name) ? B : "",
                        isActivationKey: -1 !== Zt.indexOf(J),
                        isAlcohol: null != (L = null == r ? void 0 : r.isAlcohol) && L,
                        isBooking: 10 == (15 & (null == r ? void 0 : r.dtype)) || !1,
                        isAutoplayingVideo: null != (R = null == (x = null == t ? void 0 : t.media) ? void 0 : x.is_autoplaying_video) && R,
                        isDataLoaded: null != t,
                        isDetailsLoaded: !0,
                        isDigital: null != (F = null == r ? void 0 : r.isDigital) && F,
                        isPostpaidBooking: null != (j = null == r ? void 0 : r.isPostpaidBooking) && j,
                        isPreorder: 5772 === (null == r ? void 0 : r.brandId) && wb.settings.preOrderList.includes(e),
                        isPrepaid: null == r ? void 0 : r.isPrepaid,
                        isPrescription: (null == t ? void 0 : t.is_prescription) && wb.global.settings.switches.enablePrescriptionLever,
                        isVideo: 5105 === J,
                        hasVideo: !!(16 & r.viewFlags),
                        isBestQualityVideo: null != (U = null == (N = null == t ? void 0 : t.media) ? void 0 : N.is_best_quality_video) && U,
                        hasRich: null != (W = null == t ? void 0 : t.has_rich) && W,
                        hasImageTags: null != (H = (null == t ? void 0 : t.enable_tags) && (null == t ? void 0 : t.has_photo_tags)) && H,
                        kindId: null != (q = null == r ? void 0 : r.kindId) ? q : 0,
                        nmId: e,
                        nonRefundable: (null == r ? void 0 : r.isUnrefusable) || ae,
                        panelPromoId: null == r ? void 0 : r.panelPromoId,
                        picsCount: ee,
                        bestQualityPics: te,
                        promoText: null == r ? void 0 : r.promoTextCard,
                        promotions: null == r ? void 0 : r.promotions,
                        subjectId: J,
                        subjectName: X,
                        subjectParent: Z,
                        subjectParentId: Y,
                        sizes: this.fillSizes(r, t),
                        sizeTable: t ? this.fillSizeTable(t) : null,
                        showMinDetails: !sr.includes(Y),
                        reviewRating: null == r ? void 0 : r.reviewRating,
                        star: null != (V = null == r ? void 0 : r.rating) ? V : 0,
                        urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${e}`,
                        supplier: $.views.helpers.supplierFineName(null == r ? void 0 : r.supplier, null == r ? void 0 : r.brandId),
                        supplierId: null == r ? void 0 : r.supplierId,
                        supplierRating: null == r ? void 0 : r.supplierRating,
                        supplierFlags: null == r ? void 0 : r.supplierFlags,
                        premiumSale: null == r ? void 0 : r.premiumSale,
                        premiumSalePercent: null == r ? void 0 : r.premiumSalePercent,
                        showRedPrice: wb.xnm.isRedPrice(null == r ? void 0 : r.panelPromoId),
                        whDtype: null == r ? void 0 : r.dtype,
                        expandedRichContent: !!(4 & ((null == r ? void 0 : r.supplierFlags) || 0)),
                        is2025LogisticCost: r.is2025LogisticCost,
                        cashbackPercent: null == r ? void 0 : r.cashbackPercent,
                        priceAdjustmentPercent: null == r ? void 0 : r.priceAdjustmentPercent,
                        isC2C: r.isC2C
                    };
                    r && wb.settings.b2bMode && (oe.isVatRefundable = wb.xnm.isVatRefundable(r.viewFlags),
                    oe.vatPercent = wb.xnm.getVatPercent(r.viewFlags)),
                    oe.allSizesSoldOut = null != (G = null == (z = oe.sizes) ? void 0 : z.every((e => e.isSoldOut))) && G;
                    const le = null == r ? void 0 : r.price
                      , ce = !oe.allSizesSoldOut && (null == le ? void 0 : le.total) > 0;
                    return this.fillIsChooseColor(t, oe),
                    oe.price = {
                        price: ce && (null == le ? void 0 : le.basic) ? le.basic / 100 : 0,
                        salePrice: ce && (null == le ? void 0 : le.total) ? le.priceToShow / 100 : 0,
                        priceForBasket: ce && (null == le ? void 0 : le.priceForBasket) ? le.priceForBasket / 100 : 0,
                        sale: ce ? null == le ? void 0 : le.sale : 0,
                        priceDiff: !!ce && (null == r ? void 0 : r.diffPrice),
                        logisticsCost: null == le ? void 0 : le.logisticsToShow,
                        returnCost: null == le ? void 0 : le.return,
                        soldOut: oe.allSizesSoldOut,
                        paymentDiscountAmount: null == le ? void 0 : le.paymentDiscountAmount,
                        productPrice: (null == le ? void 0 : le.product) / 100,
                        premiumSaleAmount: null == le ? void 0 : le.premiumSaleAmount
                    },
                    oe.sort = 0,
                    oe.quantity = 0,
                    oe.sizes && (null == (K = oe.sizes) ? void 0 : K.length) > 0 && (1 === oe.sizes.length ? (oe.quantity = oe.sizes[0].quantity,
                    oe.sort = oe.quantity > 0 ? 1 : 0) : oe.sizes.reduce(( (e, t) => {
                        oe.quantity += t.quantity,
                        oe.sort += +(t.quantity > 0)
                    }
                    ), {})),
                    oe.supplierDeliveryInfo = {
                        time1: null == r ? void 0 : r.time1,
                        time2: null == r ? void 0 : r.time2,
                        storeId: null == r ? void 0 : r.wh
                    },
                    r && (oe.viewFlags = r.viewFlags,
                    oe.shouldShowOriginalMark = !re && !!(8 & r.viewFlags),
                    oe.hideMultipleSellers = !!(r.supplierFlags && 2 & r.supplierFlags) && !!(null == (Q = wb.global) ? void 0 : Q.settings.switches.hideMultipleSellersLever)),
                    (null == r ? void 0 : r.panelPromoId) && this.setCanShowThermometer(r.panelPromoId, oe),
                    oe
                }
                fillBaseProductCardFromX(e, t, r) {
                    var n, s, i, a, o, l, c, u;
                    const d = this.fillGroupedAddedOptions(e);
                    return {
                        imtId: null != (s = null != (n = null == e ? void 0 : e.imt_id) ? n : null == t ? void 0 : t.root) ? s : 0,
                        groupedAddedOptions: d,
                        miniAddedOptions: this.fillMiniGroupedAddedOptions(d, r || t.sizes.length > 1 ? 4 : 6),
                        nomenclatures: [],
                        promoTemplateUfu: null != (o = null == (a = null == (i = null == e ? void 0 : e.media) ? void 0 : i.promo_url) ? void 0 : a.replace(/^\/+|\/+$/g, "")) ? o : null,
                        supplierDeliveryInfo: {
                            time1: null != (l = null == t ? void 0 : t.time1) ? l : null,
                            time2: null != (c = null == t ? void 0 : t.time2) ? c : null,
                            storeId: null != (u = null == t ? void 0 : t.wh) ? u : null
                        }
                    }
                }
                fillSizes(e, t) {
                    var r;
                    return e && e.sizes ? e.sizes.sort(( (e, t) => e.rank - t.rank)).map((r => {
                        var n, s, i, a, o, l, c;
                        const u = []
                          , d = null == (s = null == (n = null == t ? void 0 : t.sizes_table) ? void 0 : n.values) ? void 0 : s.find((e => e.chrt_id === r.optionId));
                        if ((null == d ? void 0 : d.details) && (null == (i = null == t ? void 0 : t.sizes_table.details_props) ? void 0 : i.length) === d.details.length)
                            for (let e = 0; e < t.sizes_table.details_props.length; e++) {
                                if ("RU" === t.sizes_table.details_props[e] || "EU" === t.sizes_table.details_props[e])
                                    continue;
                                const r = {
                                    name: null == t ? void 0 : t.sizes_table.details_props[e],
                                    value: "" !== d.details[e] ? d.details[e] : "-"
                                };
                                u.push(r)
                            }
                        const h = null == e ? void 0 : e.price
                          , p = null != (o = null == (a = r.price) ? void 0 : a.total) ? o : h.total;
                        let m = 0;
                        p > 0 && r.stocks && r.stocks.length > 0 && (1 === r.stocks.length ? m = r.stocks[0].qty : r.stocks.reduce(( (e, t) => m += t.qty), 0));
                        const b = m > 0 ? null == (l = r.stocks) ? void 0 : l.map((e => e.wh)) : null
                          , g = {
                            characteristicId: r.optionId,
                            sizeName: r.origName,
                            sizeNameRus: r.name,
                            dimensions: u,
                            quantity: m,
                            stocks: r.stocks,
                            storeIds: b,
                            isSoldOut: 0 === m,
                            lowQuantity: m < 3 && m > 0,
                            deliveryHours: (r.time1 || 0) + (r.time2 || 0),
                            fastestStore: r.wh,
                            payloadV2: r.payload,
                            saleConditions: r.saleConditions,
                            whDtype: r.dtype,
                            isForeign: r.dtype && !!(32 & r.dtype)
                        };
                        return m > 0 && r.price && (g.price = {
                            price: r.price.basic ? r.price.basic / 100 : 0,
                            salePrice: r.price.total ? r.price.priceToShow / 100 : 0,
                            priceForBasket: r.price.priceForBasket ? r.price.priceForBasket / 100 : 0,
                            sale: r.price.sale,
                            logisticsCost: r.price.logisticsToShow,
                            returnCost: r.price.return,
                            paymentDiscountAmount: r.price.paymentDiscountAmount,
                            productPrice: r.price.product / 100,
                            premiumSaleAmount: null != (c = r.price.premiumSaleAmount) ? c : 0
                        },
                        e.panelPromoId && this.setCanShowThermometer(e.panelPromoId, g)),
                        g
                    }
                    )) : (null == (r = null == t ? void 0 : t.data) ? void 0 : r.chrt_ids) ? t.data.chrt_ids.map((e => {
                        var r, n, s;
                        const i = null == (r = null == t ? void 0 : t.sizes_table) ? void 0 : r.values.find((t => t.chrt_id === e))
                          , a = [];
                        if (i) {
                            const e = null == (n = null == t ? void 0 : t.sizes_table) ? void 0 : n.values.find((e => e.chrt_id === i.optionId));
                            if ((null == e ? void 0 : e.details) && (null == (s = t.sizes_table.details_props) ? void 0 : s.length) === e.details.length)
                                for (let r = 0; r < t.sizes_table.details_props.length; r++) {
                                    if ("RU" === t.sizes_table.details_props[r] || "EU" === t.sizes_table.details_props[r])
                                        continue;
                                    const n = {
                                        name: t.sizes_table.details_props[r],
                                        value: "" !== e.details[r] ? e.details[r] : "-"
                                    };
                                    a.push(n)
                                }
                        }
                        return {
                            characteristicId: e,
                            sizeName: "0",
                            sizeNameRus: "",
                            dimensions: a,
                            quantity: 0,
                            isSoldOut: !0
                        }
                    }
                    )) : null
                }
                fillSizeTable(e) {
                    var t;
                    const r = [];
                    if ((null == e ? void 0 : e.sizes_table) && (null == (t = e.sizes_table) ? void 0 : t.details_props)) {
                        const t = e.sizes_table.details_props.indexOf("RU")
                          , n = e.sizes_table.details_props.indexOf("EU")
                          , s = {
                            row: []
                        };
                        let i = 0;
                        t >= 0 && (s.row[i++] = wb.i18n.t("common.russianSize")),
                        s.row[i++] = wb.i18n.t("common.manufactureSize");
                        for (let r = 0; r < e.sizes_table.details_props.length; r++) {
                            if (r === t || r === n)
                                continue;
                            const a = e.sizes_table.details_props[r];
                            s.row[i++] = "" !== a ? a : "-"
                        }
                        r.push(s),
                        e.sizes_table.values.forEach((e => {
                            var s;
                            let i = 0;
                            const a = {
                                chrtId: null != (s = e.chrt_id) ? s : 0,
                                row: []
                            };
                            t >= 0 && (a.row[i++] = e.details[t]),
                            a.row[i++] = e.tech_size;
                            const o = (-1 !== t ? 1 : 0) + (-1 !== n ? 1 : 0);
                            if (e.details.length > o)
                                for (let r = 0; r < e.details.length; r++)
                                    r !== t && r !== n && (a.row[i++] = "" !== e.details[r] ? e.details[r] : "-");
                            r.push(a)
                        }
                        ))
                    }
                    return r
                }
                fillGroupedAddedOptions(e) {
                    var t, r, n, s, i, a, o;
                    const l = null != (r = null == (t = null == e ? void 0 : e.grouped_options) ? void 0 : t.map((e => {
                        var t;
                        return {
                            categoryName: e.group_name,
                            addedOptions: null == (t = e.options) ? void 0 : t.map((e => ({
                                property: e.name,
                                subProperty: e.value
                            })))
                        }
                    }
                    ))) ? r : [];
                    let c = null == l ? void 0 : l.find((e => "Дополнительная информация" === (null == e ? void 0 : e.categoryName)));
                    return null != c && null != c.addedOptions || (c = {
                        categoryName: wb.i18n.t("productCard.additionalInfo"),
                        addedOptions: []
                    },
                    l.push(c)),
                    (null == (n = null == e ? void 0 : e.options) ? void 0 : n.find((e => "Состав" === e.name))) || null == (null == e ? void 0 : e.compositions) || c.addedOptions.unshift({
                        property: wb.i18n.t("productCard.structure"),
                        subProperty: null == (s = null == e ? void 0 : e.compositions) ? void 0 : s.map((e => e.value ? `${e.name} ${e.value}%` : e.name)).join("; ")
                    }),
                    (null == (i = null == e ? void 0 : e.options) ? void 0 : i.find((e => "Комплектация" === e.name))) || null == (null == e ? void 0 : e.contents) || c.addedOptions.push({
                        property: wb.i18n.t("productCard.equipment"),
                        subProperty: e.contents
                    }),
                    (null == (a = null == e ? void 0 : e.options) ? void 0 : a.find((e => "Пол" === e.name))) || null == (null == e ? void 0 : e.kinds) || c.addedOptions.push({
                        property: wb.i18n.t("productCard.gender"),
                        subProperty: e.kinds.join(", ")
                    }),
                    !(null == (o = null == e ? void 0 : e.options) ? void 0 : o.find((e => "Сезон" === e.name))) && (null == e ? void 0 : e.season) && c.addedOptions.push({
                        property: wb.i18n.t("productCard.season"),
                        subProperty: e.season
                    }),
                    l.filter((e => e.addedOptions.length > 0))
                }
                fillIsChooseColor(e, t) {
                    var r;
                    if (!e || !t || !t.sizes)
                        return;
                    const n = this.checkBaseChooseColor(null == e ? void 0 : e.options, t.sizes);
                    if ("number" != typeof n || !t.sizes)
                        return;
                    if (!t.sizes.map((e => wb.xnm.expandSaleConditions({
                        currency: t.currency
                    }, e))).some((e => e.isUnrefusable && e.isPrepaid && (e.isUnreturnable || e.isVerificationReturn))))
                        return;
                    const s = null == (r = null == e ? void 0 : e.options[n]) ? void 0 : r.value.toLowerCase()
                      , i = ["a", "1", "bw"]
                      , a = ["c", "3", "bc", "d"];
                    s && (t.colorBaseType = s.toUpperCase(),
                    i.includes(s) ? t.colorGroupBaseType = "A" : a.includes(s) && (t.colorGroupBaseType = "C"));
                    const o = WbSpaModel.prototype.$services.cartService.get().basketItems;
                    this.setChooseColorInBasket(o, t)
                }
                checkBaseChooseColor(e, t) {
                    var r, n;
                    if (!e || !t)
                        return !1;
                    const s = e.findIndex((e => {
                        var t;
                        return "база для колеровки" === (null == (t = e.name) ? void 0 : t.toLowerCase()) && e.value
                    }
                    ))
                      , i = e.find((e => {
                        var t, r;
                        return "есть колеровка" === (null == (t = e.name) ? void 0 : t.toLowerCase()) && "да" === (null == (r = e.value) ? void 0 : r.toLowerCase())
                    }
                    ))
                      , a = e.find((e => {
                        var t, r;
                        return "каталог цветов" === (null == (t = e.name) ? void 0 : t.toLowerCase()) && (null == (r = e.value) ? void 0 : r.toLowerCase().split(/[; ]+/).includes("ncs"))
                    }
                    ))
                      , o = null == (n = null == (r = (t = null != t ? t : [])[0]) ? void 0 : r.stocks) ? void 0 : n.every((e => [1, 2, 3].includes(e.dtype)));
                    return !!(s && s > 0 && i && a && o) && s
                }
                fillProductCardMetaTags(e) {
                    const t = {};
                    return e.nomenclatures.map((e => {
                        const r = `${e.goodsName} ${e.brandName} ${e.nmId}`;
                        t[e.nmId] = {
                            title: wb.i18n.t("lk.cardMetaTags.title", {
                                title: r
                            }),
                            description: wb.i18n.t("lk.cardMetaTags.desc", {
                                title: r
                            })
                        }
                    }
                    )),
                    t
                }
                fillMiniGroupedAddedOptions(e, t=4) {
                    const r = [];
                    if (!e)
                        return [];
                    for (let n = 0; n < e.length; n++) {
                        const s = e[n].addedOptions.slice(0, t).filter((e => "Цвет" !== e.property));
                        if (r.push(...s),
                        (t -= s.length) < 1)
                            break
                    }
                    return r
                }
                checkGroupedAddedOptionsExist(e) {
                    return (null == e ? void 0 : e.length) > 0 && e.some((e => {
                        var t;
                        return (null == (t = e.addedOptions) ? void 0 : t.length) > 0
                    }
                    ))
                }
                addDigitalLinks(e, t) {
                    var r, n;
                    e.digitalLinks = {
                        audio: null == (r = null == t ? void 0 : t.media) ? void 0 : r.audiobook,
                        electronic: null == (n = null == t ? void 0 : t.media) ? void 0 : n.electronic_book
                    }
                }
                colorLimiter(e, t) {
                    if (null === t || t.length < 60)
                        return t;
                    if (t.indexOf(e) < 60)
                        return t.slice(0, 60);
                    const r = [e];
                    return r.push(...t.slice(0, 59)),
                    r
                }
                setCanFit(e, t, r) {
                    return -1 !== er.indexOf(t) && -1 === tr.indexOf(e) && !r
                }
                setVerifiedCertificate(e) {
                    var t, r;
                    return (null == (t = null == e ? void 0 : e.certificate) ? void 0 : t.verified) ? (null == (r = e.data) ? void 0 : r.subject_id) && nr.indexOf(e.data.subject_id) >= 0 ? 2 : 1 : 0
                }
                setSelectedPrice(e) {
                    var t;
                    e.selectedPrice = (null == (t = e.selectedSize) ? void 0 : t.price) ? e.selectedSize.price : e.price
                }
                _setCashbackAmount(e) {
                    var t, r, n, s, i, a;
                    if (void 0 !== (null == e ? void 0 : e.cashbackPercent) && (null == e ? void 0 : e.cashbackPercent) > 0 && void 0 !== (null == (t = e.selectedPrice) ? void 0 : t.salePrice) && (null == (r = e.selectedPrice) ? void 0 : r.salePrice) > 0) {
                        const t = WbSpaModel.prototype.$user.getCurrency()
                          , r = (null != (n = null == e ? void 0 : e.premiumSale) ? n : 0) > 0 && (null == (s = WbSpaModel.prototype.$user.getUserGradeFromCache()) ? void 0 : s.isPremium) ? wb.priceHelper.calculateDiscount((null == (i = e.selectedPrice) ? void 0 : i.productPrice) || 0, e.premiumSale, t) : 0;
                        e.cashbackAmount = wb.priceHelper.calculateDiscount((null == (a = e.selectedPrice) ? void 0 : a.productPrice) - r, e.cashbackPercent, t)
                    }
                }
                setButtons(e) {
                    var t, r, n;
                    e.addToBasketEnable = !((null == (t = e.selectedSize) ? void 0 : t.isSoldOut) || e.allSizesSoldOut),
                    e.addToPonedEnable = !((null == (r = e.selectedSize) ? void 0 : r.isSoldOut) || e.allSizesSoldOut),
                    e.addToWaitingListEnable = (null == (n = e.selectedSize) ? void 0 : n.isSoldOut) || e.allSizesSoldOut,
                    e.addedToBasket = !1,
                    e.addedToWl = !1
                }
                setCanShowThermometer(e, t) {
                    !WbSpaModel.prototype.$auth.isAuth || !t.quantity || t.quantity > 1e3 || WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(e) && (t.showThermometer = !0)
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(ar.prototype, e)
                }
                isPaidCargoDelivery(e) {
                    var t;
                    const r = null == (t = WbSpaModel.prototype.$user.getUserGradeFromCache()) ? void 0 : t.return_fee;
                    return wb.global.settings.switches.enablePaidCargoDeliveryKt && r > 0 && e > 0 || !1
                }
                static factory(e) {
                    return e && ar.richPrototype(e),
                    new ar
                }
            }
            var or = r(62145)
              , lr = r(13808);
            const {BANNERS_URL: cr} = o.A;
            var ur = class {
                constructor(e) {
                    this.publicUrlStage = "http://webappx-proxy.wildberries.ru/http/public.banners.k8s.stage-dm/public/v2/banners",
                    this.publicUrl = cr,
                    this.helper = e
                }
                async getBannersFromApi(e) {
                    var t;
                    const r = null != (t = e.appType) ? t : this._getAppType();
                    let n = await this._getBannersFromApi(e.urlType, r, e.menuId, e.brandId, e.useStage);
                    const s = (new Date).format("yyyy-MM-dd HH:mm:ss");
                    return n = n.filter((e => null != e)).map((e => this.helper.convertToBannerItem(e, s))),
                    n.sort(( (e, t) => {
                        var r, n;
                        return (null != (r = e.placementOptions.sort) ? r : 0) - (null != (n = t.placementOptions.sort) ? n : 0)
                    }
                    )),
                    n
                }
                async _getBannersFromApi(e, t, r, n, s) {
                    let i = await WbSpaModel.prototype.$user.getLocationData();
                    const a = WbSpaModel.prototype.$user.getUserInfo()
                      , o = this._getDisplayType(a)
                      , l = this._getCountry()
                      , c = lr._.getLangForServices()
                      , u = or.i.langs[c] || c
                      , d = new URLSearchParams({
                        urltype: e,
                        apptype: t,
                        displaytype: o,
                        longitude: i.longitude,
                        latitude: i.latitude,
                        country: l,
                        culture: u
                    });
                    WbSpaModel.prototype.$analitic.appendSplitInfoV2(d, "banner"),
                    r && d.append("menuid", r),
                    n && d.append("brandId", n);
                    const h = `${s ? this.publicUrlStage : this.publicUrl}?${new URLSearchParams(d)}`;
                    let p = await WbSpaModel.prototype.$httpClient.fetchJSON(h, {}, {
                        timeout: 1e4,
                        nullOnError: !0,
                        addAuthHeader: !0
                    });
                    if (p && (null == p ? void 0 : p.length) || (p = await this._getDefaultBannersFromStatic(e, t, r)),
                    p && WbSpaModel.prototype.$apiSupport.webpImage)
                        for (const e of p)
                            e.Src && (e.Src = e.Src.replace(".jpg", ".webp")),
                            e.src && (e.src = e.src.replace(".jpg", ".webp"));
                    return (null == p ? void 0 : p.length) > 0 ? p : []
                }
                async _getDefaultBannersFromStatic(e, t, r) {
                    const n = this._getBannersTypeForStatic(e);
                    if (!n)
                        return null;
                    const s = "global" === wb.settings.currentLocale ? "ru" : wb.settings.currentLocale
                      , i = r ? `banners-${n}-${s}-${r}-v1.json` : `banners-${n}-${s}-v1.json`;
                    try {
                        let r = await WbSpaModel.prototype.$httpClient.fetchStatic(i, {
                            timeout: 3e3
                        });
                        return t === or.i.appType.desktop ? r = null == r ? void 0 : r.filter((e => e.applicationType === or.i.appType.desktop || 225 === e.applicationType || 227 === e.applicationType)) : t === or.i.appType.mobile && (r = null == r ? void 0 : r.filter((e => e.applicationType === or.i.appType.mobile || 227 === e.applicationType))),
                        e === or.i.urlType.promotion && t === or.i.appType.desktop && (null == r || r.forEach((e => {
                            e.src = this.helper.createBannerPathByResolution(e.src, "c660x210")
                        }
                        ))),
                        r
                    } catch (e) {
                        return null
                    }
                }
                _getBannersTypeForStatic(e) {
                    switch (e) {
                    case or.i.urlType.main:
                        return "main";
                    case or.i.urlType.promotion:
                        return "promo";
                    case or.i.urlType.cataloger:
                        return "catalog"
                    }
                }
                _getAppType() {
                    return "d" === wb.settings.displayMode ? or.i.appType.desktop : or.i.appType.mobile
                }
                _getDisplayType(e) {
                    return e.isAuth ? or.i.bannerDisplayType.forAuth : or.i.bannerDisplayType.forNotAuth
                }
                _getCountry() {
                    var e;
                    return 1 << (null != (e = or.i.country[WbSpaModel.prototype.$user.getLocale()]) ? e : 0) - 1
                }
            }
              , dr = Object.defineProperty
              , hr = (e, t, r) => ( (e, t, r) => t in e ? dr(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const pr = "mobile-main-banner"
              , mr = "video-main-banner"
              , br = "static-main-banner";
            class gr {
                constructor(e, t) {
                    var r, n, s, i, a, o, l, c, u, d, h, p, m, b, g, y, f, v, w, _, S, C, I, k, P, M, T, E, D, A, O, B, L, $, x, R, F, j, N, U, W, H;
                    hr(this, "id"),
                    hr(this, "href"),
                    hr(this, "applicationType"),
                    hr(this, "locationType"),
                    hr(this, "placementOptions"),
                    hr(this, "src"),
                    hr(this, "alt"),
                    hr(this, "noFollow"),
                    hr(this, "noIndex"),
                    hr(this, "target"),
                    hr(this, "ordBannerMark"),
                    hr(this, "bannerSelections"),
                    hr(this, "promoText"),
                    hr(this, "promoTextLines"),
                    hr(this, "owner"),
                    hr(this, "statisticFields"),
                    hr(this, "absoluteUrl"),
                    hr(this, "absoluteUrlPb"),
                    hr(this, "link"),
                    hr(this, "pixelSrc"),
                    hr(this, "htmlSrc"),
                    hr(this, "htmlData"),
                    hr(this, "isVideo", !1),
                    hr(this, "isHtml5", !1),
                    hr(this, "bannerClass"),
                    hr(this, "loadTime"),
                    hr(this, "iframeId"),
                    this.id = null != (s = null != (n = null != (r = e.UID) ? r : e.uID) ? n : e.uid) ? s : "",
                    this.href = null != (a = null != (i = e.Href) ? i : e.href) ? a : "",
                    this.applicationType = null != (l = null != (o = e.ApplicationType) ? o : e.applicationType) ? l : 0,
                    this.locationType = null != (u = null != (c = e.LocationType) ? c : e.locationType) ? u : 0,
                    this.placementOptions = {
                        sort: null != (m = null != (p = null == (d = e.PlacementOptions) ? void 0 : d.Sort) ? p : null == (h = e.placementOptions) ? void 0 : h.sort) ? m : 0,
                        menuID: null != (f = null != (y = null == (b = e.PlacementOptions) ? void 0 : b.MenuID) ? y : null == (g = e.placementOptions) ? void 0 : g.menuID) ? f : 0
                    },
                    this.src = null != (w = null != (v = e.Src) ? v : e.src) ? w : "",
                    this.alt = null != (S = null != (_ = e.Alt) ? _ : e.alt) ? S : "",
                    this.noFollow = null == (I = null != (C = e.NoFollow) ? C : e.noFollow) || I,
                    this.noIndex = null == (P = null != (k = e.NoIndex) ? k : e.noIndex) || P,
                    this.target = null != (T = null != (M = e.Target) ? M : e.target) ? T : "",
                    this.ordBannerMark = null != (D = null != (E = e.OrdBannerMark) ? E : e.ordBannerMark) ? D : "";
                    const q = null != (A = e.AdditionalSections) ? A : e.additionalSections;
                    this.bannerSelections = null != (O = null == q ? void 0 : q.map((e => new yr(e)))) ? O : [],
                    this.promoText = null != (L = null != (B = e.PromoText) ? B : e.promoText) ? L : "",
                    this.promoTextLines = null != (x = null != ($ = e.PromoTextLines) ? $ : e.promoTextLines) ? x : [],
                    this.owner = null != (F = null != (R = e.Provider) ? R : e.provider) ? F : 0,
                    this.statisticFields = new fr(e),
                    this.absoluteUrl = this.getAbsoluteUrl(!1),
                    this.absoluteUrlPb = this.getAbsoluteUrl(!0),
                    this.link = this.getLink(),
                    this.pixelSrc = null != (j = e.PixelSrc) ? j : "",
                    this.bannerClass = this._getMainBannerClass(e),
                    this.loadTime = t;
                    const V = null != (U = null != (N = e.HtmlSrc) ? N : e.htmlSrc) ? U : null
                      , z = null != (H = null != (W = e.HtmlData) ? W : e.htmlData) ? H : null;
                    V && z && (this.isVideo = !!z.xml,
                    this.isHtml5 = !this.isVideo,
                    this.htmlSrc = V,
                    this.htmlData = z)
                }
                getLink() {
                    if (0 === this.href.indexOf("https:"))
                        return new URL(this.href).href;
                    const e = new URL(this.href,window.location.toString());
                    return e.searchParams.append("bid", this.id),
                    `${e.pathname}${e.search}`
                }
                getAbsoluteUrl(e) {
                    return -1 !== this.src.toLowerCase().indexOf("wildberries") ? this.src : (0,
                    l.urlStaticBasket)(`crm-bnrs${this.src}`, 1, e)
                }
                _getMainBannerClass(e) {
                    if (this.locationType === or.i.locationType.newMainBanners)
                        return this.applicationType === or.i.appType.mobile ? pr : void 0 !== e.htmlSrc && e.htmlData && e.htmlData.xml ? mr : br
                }
            }
            class yr {
                constructor(e) {
                    var t, r, n, s, i, a, o, l, c, u;
                    hr(this, "href"),
                    hr(this, "relativeXPos"),
                    hr(this, "relativeYPos"),
                    hr(this, "relativeHeight"),
                    hr(this, "relativeWidth"),
                    this.href = null != (r = null != (t = e.Href) ? t : e.href) ? r : "",
                    this.relativeXPos = null != (s = null != (n = e.RelativeXPos) ? n : e.relativeXPos) ? s : 1,
                    this.relativeYPos = null != (a = null != (i = e.RelativeYPos) ? i : e.relativeYPos) ? a : 1,
                    this.relativeHeight = null != (l = null != (o = e.RelativeHeight) ? o : e.relativeHeight) ? l : 1,
                    this.relativeWidth = null != (u = null != (c = e.RelativeWidth) ? c : e.relativeWidth) ? u : 1
                }
            }
            class fr {
                constructor(e) {
                    var t, r, n, s, i, a, o, l, c, u;
                    hr(this, "urlType"),
                    hr(this, "displayType"),
                    hr(this, "locationType"),
                    hr(this, "sort"),
                    this.urlType = null != (r = null != (t = e.URLType) ? t : e.uRLType) ? r : 0,
                    this.displayType = null != (s = null != (n = e.DisplayType) ? n : e.displayType) ? s : 0,
                    this.locationType = null != (a = null != (i = e.LocationType) ? i : e.locationType) ? a : 0,
                    this.sort = null != (u = null != (c = null == (o = e.PlacementOptions) ? void 0 : o.Sort) ? c : null == (l = e.placementOptions) ? void 0 : l.sort) ? u : 0
                }
            }
            const vr = "360x200"
              , wr = "532x300"
              , _r = "736x300"
              , Sr = "360x150"
              , Cr = "1600x150"
              , Ir = "480x169";
            class kr {
                static createAdvPlaceholder(e, t, r) {
                    const n = (new Date).format("yyyy-MM-dd HH:mm:ss")
                      , s = new gr({
                        applicationType: e ? or.i.appType.mobile : or.i.appType.desktop,
                        locationType: t,
                        href: "/promotions",
                        target: "_self"
                    },n);
                    return s.absoluteUrl = (0,
                    l.urlSiteStatic)(`i/placeholderBanners/banner_${r}.webp`),
                    s
                }
                static createHomePlaceholder(e) {
                    const t = "mobile" === e
                      , r = "video" === e
                      , n = (new Date).format("yyyy-MM-dd HH:mm:ss")
                      , s = new gr({
                        applicationType: "mobile" === e ? or.i.appType.mobile : or.i.appType.desktop,
                        locationType: or.i.locationType.newMainBanners,
                        href: "/promotions",
                        target: "_self",
                        htmlSrc: r ? "" : void 0,
                        htmlData: r ? {
                            xml: "xml"
                        } : void 0
                    },n)
                      , i = t ? vr : r ? wr : _r;
                    return s.absoluteUrl = (0,
                    l.urlSiteStatic)(`i/placeholderBanners/banner_${i}.webp`),
                    s
                }
            }
            class Pr {
                constructor(e, t, r, n, s) {
                    this.urlType = e,
                    this.menuId = r,
                    this.brandId = n,
                    this.appType = t,
                    this.useStage = s
                }
            }
            var Mr = class {
                constructor(e) {
                    this.helper = e,
                    this.api = new ur(this.helper)
                }
                async getBannersForHomePageAsync() {
                    const e = await this.api.getBannersFromApi(new Pr(or.i.urlType.main,or.i.appType.desktopAndMobile))
                      , t = [or.i.locationType._215x168, or.i.locationType._705x394, or.i.locationType._460x394, or.i.locationType._364x668]
                      , r = []
                      , n = [];
                    let s = []
                      , i = [];
                    const a = []
                      , o = []
                      , l = []
                      , c = [];
                    let u = [];
                    if (null == e || e.forEach((e => {
                        if ("wb travel" === e.alt) {
                            if (!WbSpaModel.prototype.$isTravelEnabled())
                                return
                        }
                        e.locationType === or.i.locationType._1440x168 ? e.applicationType === or.i.appType.desktop ? r.push(e) : e.applicationType === or.i.appType.mobile && s.push(e) : e.locationType === or.i.locationType.newMainBanners ? e.applicationType === or.i.appType.desktop ? n.push(e) : e.applicationType === or.i.appType.mobile && i.push(e) : e.locationType === or.i.locationType.mainInfo ? e.applicationType === or.i.appType.desktop ? o.push(e) : e.applicationType === or.i.appType.mobile && l.push(e) : -1 !== t.indexOf(e.locationType) ? a.push(e) : e.locationType === or.i.locationType.footerSocial && (e.applicationType === or.i.appType.desktop ? c.push(e) : e.applicationType === or.i.appType.mobile && u.push(e))
                    }
                    )),
                    s.length || (s = r),
                    i.length) {
                        const e = kr.createHomePlaceholder("mobile");
                        for (; i.length < 3; )
                            i.push(e)
                    }
                    if (n.length) {
                        const e = kr.createHomePlaceholder("static");
                        for (; n.length < 3; )
                            n.push(e)
                    }
                    return u.length || (u = c),
                    {
                        mainBanners: r,
                        newMainBanners: n,
                        mainMobileBanners: s,
                        newMainMobileBanners: i,
                        contentBanners: a,
                        mainInfoBanners: o,
                        mainInfoMobileBanners: l,
                        footerBanners: c,
                        footerMobileBanners: u
                    }
                }
                getPromoBanners() {
                    return this._getPromotionBanners()
                }
                async _getPromotionBanners() {
                    const e = (await this.api.getBannersFromApi(new Pr(or.i.urlType.promotion,or.i.appType.desktop))).filter((e => e.locationType === or.i.locationType._770x245));
                    return this.helper.dividePromotionBanners(e)
                }
                async getPromoCatalogBanners(e, t=!1) {
                    return (await this.api.getBannersFromApi(new Pr(or.i.urlType.promotionCatalog,t ? or.i.appType.mobile : or.i.appType.desktop,e))).filter((e => e.locationType === or.i.locationType.promo_strip))
                }
                async getPromotionSpecialBanners(e=!1) {
                    const t = await this.api.getBannersFromApi(new Pr(or.i.urlType.promotionCatalog,e ? or.i.appType.mobile : or.i.appType.desktop))
                      , r = []
                      , n = []
                      , s = []
                      , i = [];
                    if (t.forEach((e => {
                        e.locationType === or.i.locationType.promo_strip && r.push(e),
                        e.locationType === or.i.locationType.special_promo && n.push(e),
                        e.locationType === or.i.locationType.newPromoBanners && s.push(e),
                        e.locationType === or.i.locationType.newBottomPromoBanners && i.push(e)
                    }
                    )),
                    s.length) {
                        const t = kr.createAdvPlaceholder(e, or.i.locationType.newPromoBanners, e ? Sr : Cr);
                        for (; s.length < 3; )
                            s.push(t)
                    }
                    if (i.length) {
                        const t = kr.createAdvPlaceholder(e, or.i.locationType.newBottomPromoBanners, e ? Sr : Cr);
                        for (; i.length < 3; )
                            i.push(t)
                    }
                    return {
                        topBannersList: r,
                        bottomBannersList: n,
                        newTopBannersList: s,
                        newBottomBannersList: i
                    }
                }
                async getPromotionLandingBanners(e) {
                    const t = e ? await this.api.getBannersFromApi(new Pr(or.i.urlType.advBanner,or.i.appType.desktopAndMobile,void 0,void 0,e)) : await this.api.getBannersFromApi(new Pr(or.i.urlType.promotionLanding,or.i.appType.desktopAndMobile))
                      , r = []
                      , n = []
                      , s = [];
                    if (t.forEach((e => {
                        e.locationType === or.i.locationType.promo_landing_92 && r.push(e),
                        e.locationType === or.i.locationType.promo_landing_93 && n.push(e),
                        e.locationType === or.i.locationType.promo_landing_94 && s.push(e)
                    }
                    )),
                    3 === n.length) {
                        const e = kr.createAdvPlaceholder(!1, or.i.locationType.promo_landing_93, Ir);
                        n.push(e)
                    }
                    return {
                        topBannersList: r,
                        middleBannersList: n,
                        bottomBannersList: s
                    }
                }
                async getAdvBanners() {
                    const e = await this.api.getBannersFromApi(new Pr(or.i.urlType.advBanner,or.i.appType.desktopAndMobile))
                      , t = {
                        mobileBanners: [],
                        desktopBanners: []
                    }
                      , r = {
                        mobileBanners: [],
                        desktopBanners: []
                    }
                      , n = {
                        mobileBanners: [],
                        desktopBanners: []
                    }
                      , s = {
                        mobileBanners: [],
                        desktopBanners: []
                    };
                    return e.forEach((e => {
                        e.locationType === or.i.locationType.searchBanners ? e.applicationType === or.i.appType.mobile ? t.mobileBanners.push(e) : e.applicationType === or.i.appType.desktop && t.desktopBanners.push(e) : e.locationType === or.i.locationType.lkBanners ? e.applicationType === or.i.appType.mobile ? r.mobileBanners.push(e) : e.applicationType === or.i.appType.desktop && r.desktopBanners.push(e) : e.locationType === or.i.locationType.deliveryBanners ? e.applicationType === or.i.appType.mobile ? n.mobileBanners.push(e) : e.applicationType === or.i.appType.desktop && n.desktopBanners.push(e) : e.locationType === or.i.locationType.thxForOrderBanners && (e.applicationType === or.i.appType.mobile ? s.mobileBanners.push(e) : e.applicationType === or.i.appType.desktop && s.desktopBanners.push(e))
                    }
                    )),
                    [t, r, n, s].forEach(( ({mobileBanners: e, desktopBanners: t}) => {
                        if (e.length) {
                            const t = kr.createAdvPlaceholder(!0, e[0].locationType, Sr);
                            for (; e.length < 3; )
                                e.push(t)
                        }
                        if (t.length) {
                            const e = kr.createAdvPlaceholder(!1, t[0].locationType, Cr);
                            for (; t.length < 3; )
                                t.push(e)
                        }
                    }
                    )),
                    {
                        searchBanners: t,
                        lkBanners: r,
                        deliveryBanners: n,
                        thxForOrderBanners: s
                    }
                }
                async getTopMenuBanners() {
                    const e = await this.api.getBannersFromApi(new Pr(or.i.urlType.default,or.i.appType.desktop))
                      , t = this._menuSingleBanners(e)
                      , r = await this._getMenuPromotionBanners()
                      , n = t;
                    return (null == r ? void 0 : r.length) > 0 && (n[2192] = r),
                    n
                }
                _menuSingleBanners(e) {
                    return e.reduce(( (e, t) => {
                        var r;
                        if (t.locationType !== or.i.locationType.menu_banners)
                            return e;
                        const n = null != (r = t.placementOptions.menuID) ? r : 0;
                        return e.hasOwnProperty(n) || (e[n] = []),
                        e[n].push(t),
                        e
                    }
                    ), {})
                }
                async _getMenuPromotionBanners() {
                    const e = await this._getPromotionBanners()
                      , t = e.leftBanners.slice(0, 5).concat(e.rightBanners.slice(0, 5));
                    return null == t || t.forEach((e => {
                        e.src = this.helper.createBannerPathByResolution(e.src, "t305x245q"),
                        e.absoluteUrl = e.getAbsoluteUrl(),
                        e.absoluteUrlPb = e.getAbsoluteUrl(!0)
                    }
                    )),
                    t
                }
                async getCatalogBanners(e, t, r=!1) {
                    var n, s;
                    this.menuIdEnum || (this.menuIdEnum = t);
                    const i = await this.api.getBannersFromApi(new Pr(or.i.urlType.cataloger,or.i.appType.desktop,e))
                      , a = this._getBannersForCatalog(i, e);
                    let o = a.firstCarousel
                      , l = a.secondCarousel;
                    if (r) {
                        const t = await this.api.getBannersFromApi(new Pr(or.i.urlType.cataloger,or.i.appType.mobile,e))
                          , r = this._getCatalogBigBanners(t);
                        o = (null == (n = r.firstCarousel) ? void 0 : n.length) > 0 ? r.firstCarousel : a.firstCarousel,
                        l = (null == (s = r.secondCarousel) ? void 0 : s.length) > 0 ? r.secondCarousel : a.secondCarousel
                    }
                    return {
                        mainBannersFirst: o,
                        mainBannersSecond: l,
                        verticalBanners: a.verticalBanners,
                        smallBanners: a.commonBanners,
                        seasonBanners: a.seasonBanners
                    }
                }
                _getBannersForCatalog(e, t) {
                    if (!e)
                        return [];
                    const {firstCarousel: r, secondCarousel: n} = this._getCatalogBigBanners(e)
                      , s = this._getCatalogVerticalBanners(e)
                      , i = e.filter((e => e.locationType === or.i.locationType.small));
                    return {
                        firstCarousel: r,
                        secondCarousel: n,
                        verticalBanners: s,
                        commonBanners: this._getCommonBanners(i, t),
                        seasonBanners: this._getSeasonBanners(i, t)
                    }
                }
                _getCommonBanners(e, t) {
                    const r = this._getCatalogBannersSortParams(t, !0);
                    return this.helper.getBannersBySort(e, r).reduce(( (e, t) => {
                        const r = t.placementOptions.sort;
                        return e[r] = [...e[r] || [], t],
                        e
                    }
                    ), {})
                }
                _getSeasonBanners(e, t) {
                    const r = this._getCatalogBannersSortParams(t);
                    return this.helper.getBannersBySort(e, r)
                }
                _getCatalogVerticalBanners(e) {
                    return e.filter((e => e.locationType === or.i.locationType.vertical)).reduce(( (e, t) => {
                        const r = t.placementOptions.sort;
                        return e[r] = [...e[r] || [], t],
                        e
                    }
                    ), {})
                }
                _getCatalogBigBanners(e) {
                    const t = e.filter((e => e.locationType === or.i.locationType.big))
                      , r = []
                      , n = [];
                    return t.forEach((e => {
                        e.placementOptions.sort < 100 && r.push(e),
                        e.placementOptions.sort > 100 && e.placementOptions.sort < 110 && n.push(e)
                    }
                    )),
                    {
                        firstCarousel: r,
                        secondCarousel: n
                    }
                }
                _getCatalogBannersSortParams(e, t) {
                    const r = {
                        onlyMarketingSortStart: null,
                        onlyMarketingSortEnd: null,
                        suppliersSortStart: null,
                        suppliersSortCount: null
                    }
                      , n = [this.menuIdEnum.sport, this.menuIdEnum.monocity];
                    return t ? -1 !== n.indexOf(e) ? (r.suppliersSortStart = 0,
                    r.suppliersSortCount = 3) : (r.onlyMarketingSortStart = 0,
                    r.onlyMarketingSortEnd = 100,
                    r.suppliersSortStart = 100,
                    r.suppliersSortCount = 3) : (r.onlyMarketingSortStart = 50,
                    r.onlyMarketingSortEnd = 99),
                    r
                }
            }
            ;
            var Tr = class {
                constructor() {
                    this.fillingGapsSortStart = 300
                }
                convertToBannerItem(e, t) {
                    return new gr(e,t)
                }
                createBannerPathByResolution(e, t) {
                    const r = t
                      , n = e.split("/").slice(-1)
                      , s = lr._.getLangForServices();
                    return `/poster/${or.i.langs[s] || s}/action2/${r}/${n}`
                }
                dividePromotionBanners(e) {
                    const t = this._getBannersSoldToSuppliers(e, 100, 20)
                      , r = null == e ? void 0 : e.filter((e => e.owner === or.i.ownerType.marketing))
                      , n = r.filter((e => e.placementOptions.sort < 100));
                    let {leftBanners: s=[], rightBanners: i=[]} = this._createTwoSidesWithTheSameSize(r, n, t);
                    return s = s.map((e => e)),
                    i = i.map((e => e)),
                    {
                        leftBanners: s,
                        rightBanners: i
                    }
                }
                getBannersBySort(e, t) {
                    const r = e.filter((e => e.owner === or.i.ownerType.marketing && e.placementOptions.sort > t.onlyMarketingSortStart && e.placementOptions.sort < t.onlyMarketingSortEnd))
                      , n = this._getBannersSoldToSuppliers(e, t.suppliersSortStart, t.suppliersSortCount);
                    return r.concat(n)
                }
                _getBannersSoldToSuppliers(e, t, r) {
                    if (!WbSpaModel.prototype.$helper.isNumber(t) || !r)
                        return [];
                    const n = e.filter((e => e.owner === or.i.ownerType.supplier))
                      , s = e.filter((e => e.owner === or.i.ownerType.marketing && e.placementOptions.sort > 200 && e.placementOptions.sort < this.fillingGapsSortStart)).reduce(( (e, t) => {
                        const r = t.placementOptions.sort;
                        return e.set(r, [...e.get(r) || [], t])
                    }
                    ), new Map)
                      , i = n.reduce(( (e, t) => e.add(t.placementOptions.sort)), new Set);
                    for (let e = 1; e <= r; e++) {
                        const r = t + e;
                        if (!i.has(r)) {
                            const t = s.get(200 + e);
                            if ((null == t ? void 0 : t.length) > 0) {
                                const e = t[0];
                                e.placementOptions.sort = r,
                                n.push(e)
                            }
                        }
                    }
                    return n
                }
                _createTwoSidesWithTheSameSize(e, t, r) {
                    const n = e.filter((e => e.placementOptions.sort >= this.fillingGapsSortStart));
                    if (0 === n.length)
                        return r;
                    var s = Math.max(t.length, r.length);
                    return this._fillGapsIfNeeded(t, s, n),
                    this._fillGapsIfNeeded(r, s, n),
                    {
                        leftBanners: t,
                        rightBanners: r
                    }
                }
                _fillGapsIfNeeded(e, t, r) {
                    let n = t - e.length;
                    for (; n > 0 && r.length > 0; ) {
                        {
                            const t = r[0];
                            r.splice(0, 1),
                            e.push(t)
                        }
                        n--
                    }
                    e.sort(( (e, t) => e.placementOptions.sort - t.placementOptions.sort))
                }
            }
            ;
            const Er = "home-banners-cache-new"
              , Dr = "menu-banners-cache-v2"
              , Ar = "main-catalog-banners-cache"
              , Or = "promotions-banners-cache"
              , Br = "footer-banners-cache"
              , Lr = "promotion-special-banners-cache"
              , $r = "promotion-landing-banners-cache"
              , xr = 3e5;
            var Rr = class {
                constructor() {
                    WbSpaModel.prototype.$eventBus.addEventListener("GeoUpdated", ( () => this._refreshCache())),
                    this.cacheVers = 5
                }
                get bannersCacheType() {
                    return {
                        main: 1,
                        menu: 2,
                        catalog: 3,
                        promotion: 4,
                        promotionCatalog: 5,
                        footer: 6,
                        promotionSpecial: 7,
                        promotionLanding: 8,
                        advBanners: 9
                    }
                }
                async getCachedResultsWithCacheInfo(e, t, r, n) {
                    return await this.getCachedResults(e, t, r, n, !0)
                }
                async getCachedResults(e, t, r, n, s) {
                    const i = WbSpaModel.prototype.$user.getUserInfo().uid
                      , a = this._getCacheKey(e);
                    if (!a)
                        return Promise.resolve(null);
                    n || (n = 1);
                    const o = await this._getCachedResultsWithLock(e, this._addLocaleToCacheKey(a), t, i, r, n);
                    return s ? o : o.result
                }
                async _getCachedResultsWithLock(e, t, r, n, s, i) {
                    const a = this._tryGetCachedData(t, n)
                      , o = this._getResultsFromCachedData(a, s, i);
                    return o ? {
                        result: o,
                        fromCache: !0
                    } : navigator.locks.request(`lock-${t}`, (async e => {
                        const a = this._tryGetCachedData(t, n)
                          , o = this._getResultsFromCachedData(a, s, i);
                        if (o)
                            return {
                                result: o,
                                fromCache: !0
                            };
                        const l = await r();
                        if (!l)
                            return null;
                        if (this._checkBannersExist(l)) {
                            const e = this._toCacheResult(n, s, i, a, l);
                            localStorage.putObject(t, e)
                        }
                        return {
                            result: l,
                            fromCache: !1
                        }
                    }
                    ))
                }
                _tryGetCachedData(e, t) {
                    const r = localStorage.getObject(e);
                    return r && this.cacheVers === r.version && r.userId === t ? r : null
                }
                _getResultsFromCachedData(e, t, r) {
                    var n;
                    const s = this._getDisplayName(t)
                      , i = null == (n = null == e ? void 0 : e[s]) ? void 0 : n[r];
                    return !i || Date.now() - i.updateTs > xr ? null : i.data
                }
                _toCacheResult(e, t, r, n, s) {
                    n || (n = {}),
                    n.version = this.cacheVers,
                    n.userId = e,
                    n.desktop = this._getCleanedCachedData(n.desktop),
                    n.mobile = this._getCleanedCachedData(n.mobile);
                    return n[this._getDisplayName(t)][r] = {
                        updateTs: Date.now(),
                        data: s
                    },
                    n
                }
                _checkBannersExist(e) {
                    let t = !1;
                    if (Array.isArray(e))
                        return !0;
                    for (let r in e) {
                        const n = e[r];
                        if (n && (Array.isArray(n) ? t = n.length > 0 : "object" == typeof n && (t = this._checkBannersExist(n)),
                        t))
                            break
                    }
                    return t
                }
                _getCleanedCachedData(e) {
                    const t = {};
                    for (let r in null != e ? e : {})
                        !r || Date.now() - e[r].updateTs > xr || (t[r] = e[r]);
                    return t
                }
                _getDisplayName(e) {
                    return e ? "mobile" : "desktop"
                }
                _addLocaleToCacheKey(e) {
                    return "ru" === wb.currentLanguage ? e : `${e}-${wb.currentLanguage}`
                }
                _getCacheKey(e) {
                    switch (e) {
                    case this.bannersCacheType.main:
                        return Er;
                    case this.bannersCacheType.menu:
                        return Dr;
                    case this.bannersCacheType.catalog:
                        return Ar;
                    case this.bannersCacheType.promotion:
                        return Or;
                    case this.bannersCacheType.promotionCatalog:
                        return "promotions-catalog-banners-cache";
                    case this.bannersCacheType.footer:
                        return Br;
                    case this.bannersCacheType.promotionSpecial:
                        return Lr;
                    case this.bannersCacheType.promotionLanding:
                        return $r;
                    case this.bannersCacheType.advBanners:
                        return "adv-banners-cache";
                    default:
                        return null
                    }
                }
                _refreshCache() {
                    [Er, Dr, Ar, Or, Br, Lr, $r].forEach((e => {
                        localStorage.removeItem(this._addLocaleToCacheKey(e))
                    }
                    ))
                }
            }
            ;
            class Fr {
                constructor() {
                    const e = new Tr;
                    this.service = new Mr(e),
                    this.cache = new Rr
                }
                async getBannersForHomePageAsync() {
                    return (await this.cache.getCachedResultsWithCacheInfo(this.cache.bannersCacheType.main, ( () => this.service.getBannersForHomePageAsync()))).result
                }
                async getBannersForFooterAsync() {
                    var e, t;
                    const r = await this.getBannersForHomePageAsync()
                      , n = null != (e = null == r ? void 0 : r.footerBanners) ? e : [];
                    return {
                        desktopBanners: n,
                        mobileBanners: (null == (t = null == r ? void 0 : r.footerMobileBanners) ? void 0 : t.length) ? null == r ? void 0 : r.footerMobileBanners : n
                    }
                }
                async getMenuBanners() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.menu, ( () => this.service.getTopMenuBanners()))
                }
                async getCatalogBanners(e, t) {
                    this.menuIdEnum || (this.menuIdEnum = t);
                    const r = "m" === wb.settings.displayMode;
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.catalog, ( () => this.service.getCatalogBanners(e, this.menuIdEnum, r)), r, e)
                }
                async getPromoBanners() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.promotion, ( () => this.service.getPromoBanners()))
                }
                async getPromoCatalogBanners(e, t) {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionCatalog, ( () => this.service.getPromoCatalogBanners(t, e)), e, t)
                }
                async getPromotionSpecialBanners(e) {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionSpecial, ( () => this.service.getPromotionSpecialBanners(e)), e)
                }
                async getPromotionLandingBanners(e) {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionLanding, ( () => this.service.getPromotionLandingBanners(e)))
                }
                async getAdvBanners(e) {
                    const t = await this.cache.getCachedResults(this.cache.bannersCacheType.advBanners, ( () => this.service.getAdvBanners()));
                    switch (e) {
                    case or.i.locationType.searchBanners:
                        return t.searchBanners;
                    case or.i.locationType.lkBanners:
                        return t.lkBanners;
                    case or.i.locationType.deliveryBanners:
                        return t.deliveryBanners;
                    case or.i.locationType.thxForOrderBanners:
                        return t.thxForOrderBanners;
                    default:
                        return null
                    }
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(Fr.prototype, e)
                }
                static factory(e) {
                    return e && Fr.richPrototype(e),
                    new Fr
                }
            }
            var jr = Fr
              , Nr = Object.defineProperty
              , Ur = Object.defineProperties
              , Wr = Object.getOwnPropertyDescriptors
              , Hr = Object.getOwnPropertySymbols
              , qr = Object.prototype.hasOwnProperty
              , Vr = Object.prototype.propertyIsEnumerable
              , zr = (e, t, r) => t in e ? Nr(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , Gr = (e, t) => {
                for (var r in t || (t = {}))
                    qr.call(t, r) && zr(e, r, t[r]);
                if (Hr)
                    for (var r of Hr(t))
                        Vr.call(t, r) && zr(e, r, t[r]);
                return e
            }
            ;
            const Kr = 24
              , Qr = 50
              , Jr = 37
              , Yr = 0
              , Xr = -1
              , Zr = "route-mapping"
              , en = "user-storage-01.wb.ru"
              , tn = {
                1: en
            };
            class rn {
                constructor() {
                    this.auth = WbSpaModel.prototype.$auth;
                    const e = this.getRouteMapping();
                    this.isExpiredRouteMapping(null == e ? void 0 : e.timestamp) && this.getRouteMappingAsync().then((e => {
                        e === tn || this.setRouteMapping(e)
                    }
                    ))
                }
                async fetch(e, t, r) {
                    const n = r || await this._userStorageHost(this.auth.shard);
                    return this.$httpClient.fetch(`${n}${e}`, Gr({
                        withJwtToken: !0,
                        withAuthz: !0
                    }, t)).then((e => e.json()))
                }
                async _get(e, t, r, n) {
                    var s, i;
                    try {
                        const i = await this.fetch(e, t, n);
                        if (i.state === Yr)
                            return i.body;
                        if (i.state === Xr && i.reason === Kr)
                            return [];
                        if (i.state === Xr && i.reason === Qr)
                            return (null == r ? void 0 : r.replaceBroken) && (null == (s = t.paths) ? void 0 : s.length) ? t.paths.map((e => ({
                                path: e.path,
                                file: "W10="
                            }))) : [];
                        if (i.state === Xr && i.reason === Jr) {
                            this.updateRouteMapping(i.location);
                            const r = await this.fetch(e, t);
                            if (r.state === Yr)
                                return r.body;
                            if (r.state === Xr && r.reason === Kr)
                                return []
                        }
                        return null
                    } catch (s) {
                        if (!n) {
                            this.resetTimestamp();
                            const n = await this._userStorageHost(this.auth.shard);
                            if (!(null == (i = null == t ? void 0 : t.signal) ? void 0 : i.aborted))
                                return await this._get(e, t, r, n);
                            t.signal = null
                        }
                        return null
                    }
                }
                getList(e, t) {
                    const r = {
                        method: "POST",
                        body: JSON.stringify({
                            path: e
                        }),
                        signal: null == t ? void 0 : t.signal,
                        timeout: null == t ? void 0 : t.timeout
                    };
                    return this._get("/api/v2/list", r, t)
                }
                getData(e, t) {
                    if (!e || 0 === e.length)
                        return null;
                    const r = {
                        method: "POST",
                        body: JSON.stringify(e),
                        signal: null == t ? void 0 : t.signal,
                        paths: e
                    };
                    return this._get("/api/v2/data/get", r, t)
                }
                async setData(e) {
                    try {
                        const t = {
                            method: "POST",
                            body: JSON.stringify(e)
                        }
                          , r = await this.fetch("/api/v2/data/set", t);
                        if (r.state === Yr)
                            return {
                                success: !0
                            };
                        if (r.state === Xr && r.reason === Jr) {
                            this.updateRouteMapping(r.location);
                            const e = await this.fetch("/api/v2/data/set", t);
                            return e.state === Yr ? {
                                success: !0
                            } : {
                                success: !1,
                                error: new Error(`error - ${e}`)
                            }
                        }
                        return {
                            success: !1,
                            error: new Error(`error - ${r}`)
                        }
                    } catch (e) {
                        return {
                            success: !1,
                            error: e
                        }
                    }
                }
                getRouteMapping() {
                    try {
                        const e = localStorage.getItem(Zr);
                        return e ? JSON.parse(e) : this.routeMapping ? this.routeMapping : tn
                    } catch (e) {
                        return tn
                    }
                }
                resetTimestamp() {
                    const e = this.getRouteMapping();
                    e.timestamp = null,
                    localStorage.setItem(Zr, JSON.stringify(e))
                }
                updateRouteMapping(e) {
                    const t = this.getRouteMapping()
                      , r = (n = Gr({}, t),
                    s = {
                        [this.auth.shard]: e
                    },
                    Ur(n, Wr(s)));
                    var n, s;
                    this.setRouteMapping(r)
                }
                setRouteMapping(e) {
                    this.routeMapping = e,
                    this.routeMapping.timestamp = Date.now(),
                    localStorage.setItem(Zr, JSON.stringify(e))
                }
                async _userStorageHost(e) {
                    return `https://${(await this.getRouteMappingAsync())[e] || en}`
                }
                async getRouteMappingAsync() {
                    const e = this.getRouteMapping();
                    if (!this.isExpiredRouteMapping(null == e ? void 0 : e.timestamp))
                        return e;
                    const t = `https://${en}`;
                    try {
                        const e = await this.$httpClient.fetch(`${t}/api/v3/routes`)
                          , {payload: r} = await e.json();
                        return this.setRouteMapping(r),
                        r
                    } catch (e) {
                        return console.log("Could not get routeMappin from api/v3/routes"),
                        tn
                    }
                }
                isExpiredRouteMapping(e) {
                    if (!e)
                        return !0;
                    return Date.now() - e >= 864e5
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(rn.prototype, e)
                }
                static factory(e) {
                    return e && rn.richPrototype(e),
                    new rn
                }
            }
            var nn = rn;
            const sn = "wbx__sessionID";
            class an {
                constructor() {
                    this.session = localStorage.getItem(sn),
                    window.addEventListener("storage", (e => {
                        e.key === sn && (this.session = localStorage.getItem(sn))
                    }
                    ))
                }
                getSession() {
                    return this.session || (this.session = localStorage.getItem(sn),
                    this.session || (this.session = `site_${wb.helpers.generateGuid()}`,
                    localStorage.setItem(sn, this.session))),
                    this.session
                }
                getUserUid() {
                    return this.$auth.isAuth ? this.$auth.um.userUid : this.getBasketUid()
                }
                getBasketUid() {
                    let e = wb.cookieHelper.getCookie("BasketUID");
                    return e || (e = this.getSession()),
                    e
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(an.prototype, e)
                }
                static factory(e) {
                    return e && an.richPrototype(e),
                    new an
                }
            }
            var on = an;
            const ln = "[RETRY FETCH SERVICE]";
            class cn {
                constructor() {
                    this.sendQueue = "queue",
                    this.storage = this.$storageHelper,
                    this.storage.supportIndexedDb() ? setInterval(( () => this._sendJobChecker.call(this, this.sendQueue)), 1e4) : this.dbPromise = Promise.reject()
                }
                saveRequest(e, t, {tryTill: r=0, timeout: n=0}={}) {
                    try {
                        delete t.signal;
                        const s = {
                            url: e,
                            options: t,
                            retryCount: 1,
                            retryTime: Date.now()
                        };
                        r > 0 && (s.tryTill = r),
                        n > 0 && (s.timeout = n),
                        this._openDb().then((e => e.transaction(this.sendQueue, "readwrite").objectStore(this.sendQueue).add(s)))
                    } catch (e) {
                        wb.spa.logError(e, `${ln}: failed to save table=${this.sendQueue}`, !0)
                    }
                }
                _openDb() {
                    return this.dbPromise || (this.dbPromise = this.storage.openDb("send-queue", {
                        onupgradeneeded: e => {
                            if (!e.objectStoreNames.contains(this.sendQueue)) {
                                e.createObjectStore(this.sendQueue, {
                                    autoIncrement: !0
                                }).createIndex("retryTime", "retryTime", {
                                    unique: !1
                                })
                            }
                            e.objectStoreNames.contains(this.storage.metadataTableName(this.sendQueue)) || e.createObjectStore(this.storage.metadataTableName(this.sendQueue), {
                                keyPath: "name"
                            })
                        }
                        ,
                        version: 2
                    })),
                    this.dbPromise
                }
                _log(e) {
                    window._debug && console.debug(`%c${ln}: ${e}`, "color:#4B6F44")
                }
                _sendJobChecker() {
                    const e = "job_in_progress"
                      , t = this.storage.metadataTableName(this.sendQueue);
                    wb.settings.isOffline || this._openDb().then((async r => {
                        let n = !1;
                        try {
                            const s = await this.storage.get(r, t, e);
                            s && Date.now() > s.value && await this.storage.removeItem(r, t, e).then(( () => this._log("lock cleared"))),
                            n = await this.storage.addItem(r, t, {
                                name: e,
                                value: Date.now() + 3e5
                            }, !0);
                            try {
                                await this.storage.withCursor(r, this.sendQueue, "retryTime", (async (e, t, n) => {
                                    var s;
                                    const i = Date.now();
                                    if (this._log(`checking ${n.primaryKey} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`),
                                    t.retryCount > 10 && 0 < t.tryTill && t.tryTill > i && (t.retryCount = Math.max(2, 8),
                                    t.retryTime = i - 1e3),
                                    t.retryCount > 10)
                                        this.storage.removeItem(r, this.sendQueue, n.primaryKey).then(( () => this._log(`cleared url: ${t.url}`)));
                                    else if (t.retryTime < i) {
                                        const e = n.primaryKey;
                                        try {
                                            this._log(`executing ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`);
                                            const n = {
                                                timeout: t.timeout
                                            };
                                            if (await this.$httpClient.fetchText(t.url, t.options, n),
                                            null == (s = n.modified) ? void 0 : s.timeout)
                                                throw this._log(`timeout for ${e} url: ${t.url}`),
                                                new Error("service timeout");
                                            this.storage.removeItem(r, this.sendQueue, e).then(( () => this._log(`cleared ${e} url: ${t.url}`)))
                                        } catch (n) {
                                            t.retryTime = Date.now() + 2 ** t.retryCount * 1e3,
                                            t.retryCount++,
                                            delete t.options.signal,
                                            this.storage.updateItem(r, this.sendQueue, t, e).then(( () => this._log(`extended ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`)))
                                        }
                                    }
                                }
                                ))
                            } catch (e) {
                                console.log(e)
                            }
                        } catch (e) {} finally {
                            n && this.storage.removeItem(r, t, e)
                        }
                    }
                    ))
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(cn.prototype, e)
                }
                static factory(e) {
                    return e && cn.richPrototype(e),
                    new cn
                }
            }
            var un = cn;
            const dn = 36e5
              , hn = "splitInfoV2"
              , pn = {
                splitId: "no_test",
                title: "no_test"
            }
              , mn = {
                default: [{
                    key: "ab_testing",
                    value: !1
                }]
            };
            class bn {
                constructor() {
                    this.splitInfo = mn.default,
                    this._setSplitInfo = this._setSplitInfo.bind(this)
                }
                init() {
                    this._setSplitInfo()
                }
                removeCountInFilters() {
                    return "no_filters_count" === this.splitInfo.title
                }
                getSplitInfo() {
                    return pn
                }
                getSplitInfoV2(e) {
                    return this.splitInfo[e] || mn.default
                }
                appendSplitInfoV2(e, t) {
                    const r = this.getSplitInfoV2(t);
                    r && r.forEach((t => e.append(t.key, t.value)))
                }
                _updSplitInfo() {
                    this.timerId && clearTimeout(this.timerId),
                    this.timerId = setTimeout(this._setSplitInfo, dn)
                }
                async _setSplitInfo() {
                    var e;
                    const t = this._getSplitInfoFromCache();
                    if (this.splitInfo = null != (e = null == t ? void 0 : t.splitInfo) ? e : mn,
                    !(null == t ? void 0 : t.skipSplitRequest)) {
                        const e = await this._getSplitInfoFromService() || mn;
                        this._setSplitInfoToCache(e),
                        this.splitInfo = e
                    }
                    wb.analitics.sendEvent("AB_Test_Splitter_Request", this.splitInfo),
                    this._updSplitInfo()
                }
                async _getSplitInfoFromService() {
                    const e = wb.cookieHelper.getCookie("_wbauid");
                    if (!e)
                        return null;
                    try {
                        const t = "https://splitter.wb.ru/v2/result"
                          , r = {
                            "X-API-KEY": "c8ab0248-284e-4fad-a8a2-d4dd258cbd6c",
                            "X-USER-ID": e
                        };
                        let n = await WbSpaModel.prototype.$httpClient.fetchJSON(t, {
                            credentials: "omit",
                            headers: r
                        }, {
                            timeout: 3e3,
                            nullOnError: !0,
                            return204: !0
                        });
                        return n && 204 !== n.status ? this._convertToAssociativeArray(n) : mn
                    } catch (e) {
                        return null
                    }
                }
                _convertToAssociativeArray(e) {
                    let t = {};
                    return Array.isArray(e) && (t = e.reduce(( (e, t) => (e[t.type] = t.properties,
                    e)), {})),
                    t
                }
                _getSplitInfoFromCache() {
                    var e;
                    let t = localStorage.getObject(hn);
                    return t ? (t.t = null != (e = t.t) ? e : 0,
                    Date.now() > t.t + 72e5 ? null : {
                        splitInfo: t.splitInfo,
                        skipSplitRequest: Date.now() <= t.t + dn
                    }) : null
                }
                _setSplitInfoToCache(e) {
                    e && localStorage.putObject(hn, {
                        splitInfo: e,
                        t: Date.now()
                    })
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(bn.prototype, e)
                }
                static factory(e) {
                    return e && bn.richPrototype(e),
                    new bn
                }
            }
            var gn = bn
              , yn = Object.defineProperty
              , fn = (e, t, r) => ( (e, t, r) => t in e ? yn(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const {STIMULUS_API_URL: vn} = o.A
              , wn = "stimulus_list";
            class _n {
                constructor() {
                    fn(this, "stimuliList", []),
                    fn(this, "_enableStimulus"),
                    this._enableStimulus = null
                }
                init() {
                    WbSpaModel.prototype.$eventBus.addEventListener("onUserAuth", this.loadStimuli.bind(this))
                }
                get enableStimulus() {
                    var e, t, r;
                    return !!WbSpaModel.prototype.$auth.isAuth && (null !== this._enableStimulus || (this._enableStimulus = (null == (r = null == (t = null == (e = wb.global.settings) ? void 0 : e.mobileAppVariables) ? void 0 : t.numbers) ? void 0 : r.enableMotivationInCartOn1ShK) || wb.analitics.checkDataInSplitterServiceV2("common", "ab_enableMotivationInCartOn1ShK", "enable_1")),
                    this._enableStimulus)
                }
                async loadStimuli() {
                    this.stimuliList = await this.getStimulus()
                }
                async getStimulus() {
                    if (!this.enableStimulus)
                        return [];
                    if (this._isValidCache())
                        return this._getStimulusFromCache();
                    try {
                        const e = await WbSpaModel.prototype.$httpClient.fetchJSON(vn, {
                            method: "POST",
                            body: JSON.stringify({
                                split_id: 1
                            })
                        }, {
                            addContentTypeHeader: !0,
                            addAuthHeader: !0
                        });
                        if ((null == e ? void 0 : e.stimuli) && e.stimuli.length)
                            return this._saveToCache(e.stimuli),
                            e.stimuli;
                        if (null == e ? void 0 : e.error)
                            return this._getStimulusFromCache()
                    } catch (e) {
                        return wb.spa.logError(e, "[STIMULUS_SERVICE]: stimulus exception"),
                        this._getStimulusFromCache()
                    }
                    return []
                }
                _saveToCache(e) {
                    const t = Date.now()
                      , r = `1|${e.join(",")}|${t}`;
                    localStorage.setItem(wn, r)
                }
                _getStimulusFromCache() {
                    const e = localStorage.getItem(wn);
                    if (!e)
                        return [];
                    const [,t] = e.split("|");
                    return t ? t.split(",") : []
                }
                _isValidCache() {
                    const e = localStorage.getItem(wn);
                    if (!e)
                        return !1;
                    const [,,t] = e.split("|");
                    return !!t && Date.now() - Number(t) < 864e5
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(_n.prototype, e)
                }
                static factory(e) {
                    return e && _n.richPrototype(e),
                    new _n
                }
            }
            var Sn = _n;
            const {WB_COURIER_TIME_SLOTS_URL: Cn} = o.A;
            class In {
                async getWbCourierSlots(e, t, r) {
                    const n = function(e, t) {
                        return `${t}_${e.format("yyyy-MM-dd")}`
                    }(t, e);
                    if (null == r ? void 0 : r[n])
                        return r[n];
                    const s = {
                        office_id: e,
                        sm_id: 5,
                        delivery_day: t.format("yyyy-MM-dd")
                    }
                      , i = {
                        method: "POST",
                        body: JSON.stringify(s)
                    }
                      , a = {
                        addContentTypeHeader: !0,
                        addAuthHeader: !0,
                        noProcessResponse: !0,
                        timeout: 1e4
                    };
                    try {
                        const e = await WbSpaModel.prototype.$httpClient.fetchJSON(Cn, i, a)
                          , t = null == e ? void 0 : e.delivery_time_slots;
                        return (null == t ? void 0 : t.length) ? (r[n] = t,
                        t) : null
                    } catch (e) {
                        return console.log("Error getting WB timeslots:", e),
                        null
                    }
                }
                isSlotAvailable(e, t) {
                    if (0 === Object.keys(t).length)
                        return !1;
                    const r = new Map;
                    for (const t of e) {
                        const e = t.day
                          , n = t.time_slots.map((e => {
                            const t = new Date(e.from)
                              , r = new Date(e.to);
                            return `${60 * t.getHours() + t.getMinutes()}-${60 * r.getHours() + r.getMinutes()}`
                        }
                        ));
                        r.set(e, new Set(n))
                    }
                    for (const e in t) {
                        const n = t[e];
                        if (!n.dt)
                            return !1;
                        const s = new Date(n.dt).format("yyyy-MM-dd")
                          , i = `${n.start}-${n.end}`;
                        if (!r.has(s) || !r.get(s).has(i))
                            return !1
                    }
                    return !0
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(In.prototype, e)
                }
                static factory(e) {
                    return e && In.richPrototype(e),
                    new In
                }
            }
            var kn = In
              , Pn = r(37046)
              , Mn = Object.defineProperty
              , Tn = (e, t, r) => ( (e, t, r) => t in e ? Mn(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class En {
                constructor() {
                    Tn(this, "_isConfirmed"),
                    Tn(this, "_adultPopup"),
                    this.proceedIfAdultConfirmed = this.proceedIfAdultConfirmed.bind(this)
                }
                get isConfirmed() {
                    if (null == this._isConfirmed) {
                        const e = localStorage.getObject("__ac");
                        e && e.dtExp > Date.utcNow() ? this._isConfirmed = e.state : this._isConfirmed = !1
                    }
                    return this._isConfirmed
                }
                set isConfirmed(e) {
                    this._isConfirmed = e;
                    try {
                        localStorage.putObject("__ac", {
                            dtExp: Date.utcNow() + 36e5,
                            state: e
                        })
                    } catch (e) {}
                }
                get adultPopup() {
                    return this._adultPopup ? Promise.resolve(this._adultPopup) : new Promise((e => {
                        WbSpaModel.prototype.$moduleLoader.loadModuleAsync("adultConfirmedPopup").then((t => {
                            this._adultPopup = new t,
                            e(this._adultPopup)
                        }
                        ))
                    }
                    ))
                }
                proceedIfAdultConfirmed(e, t, r, ...n) {
                    this.adultPopup.then((s => {
                        null == s || s.closePopup(),
                        !e || this.isConfirmed ? null == t || t.apply(r, n) : null == s || s.proceedIfAdultConfirmed(t, r, n).then((e => {
                            $.observable(this).setProperty({
                                isConfirmed: e
                            })
                        }
                        ))
                    }
                    ))
                }
                pushToQueue(e) {
                    this.adultPopup.then((t => null == t ? void 0 : t.pushToQueue(e)))
                }
                closePopup() {
                    this.adultPopup.then((e => null == e ? void 0 : e.closePopup()))
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(En.prototype, e)
                }
                static factory(e) {
                    return e && En.richPrototype(e),
                    new En
                }
            }
            var Dn = En
              , An = Object.defineProperty
              , On = (e, t, r) => ( (e, t, r) => t in e ? An(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class Bn {
                getVerticalObserver(e, t, r) {
                    return new Ln(e,t,r)
                }
                getCarouselBannersObserver(e, t, r) {
                    const n = Object.assign({
                        keepObserve: !0,
                        sendOutEvent: !0
                    }, null != r ? r : {});
                    return new Ln(e,t,n)
                }
                getSimpleObserver(e, t, r) {
                    if (WbSpaModel.prototype.$apiSupport.intersectionObserver) {
                        let n = function() {
                            d.forEach((e => h.unobserve(e))),
                            d = []
                        }
                          , s = function() {
                            null == h || h.disconnect()
                        }
                          , i = function(e) {
                            n(),
                            d = e,
                            d.forEach((e => h.observe(e)))
                        }
                          , a = function(e) {
                            h.unobserve(e)
                        };
                        const o = {
                            threshold: .5
                        }
                          , l = Object.assign(o, null != t ? t : {})
                          , c = {
                            keepObserve: !1
                        }
                          , u = Object.assign(c, null != r ? r : {});
                        let d = [];
                        const h = new IntersectionObserver(( (t, r) => {
                            t.forEach((t => {
                                t.isIntersecting ? (e(t.target, d.indexOf(t.target) + 1),
                                u.keepObserve || r.unobserve(t.target)) : !t.isIntersecting && (null == u ? void 0 : u.sendOutEvent) && e(t.target, d.indexOf(t.target) + 1, !0)
                            }
                            ))
                        }
                        ),l);
                        return {
                            observe: i,
                            destroy: s,
                            unobserveItem: a
                        }
                    }
                    return {
                        observe: t => t.forEach((r => e(r, t.indexOf(r) + 1))),
                        destroy: () => {}
                        ,
                        unobserveItem: () => {}
                    }
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(Bn.prototype, e)
                }
                static factory(e) {
                    return e && Bn.richPrototype(e),
                    new Bn
                }
            }
            class Ln {
                constructor(e, t, r) {
                    On(this, "intersectionObserverEnable"),
                    On(this, "items"),
                    On(this, "settings"),
                    On(this, "observer"),
                    On(this, "options"),
                    On(this, "elementInViewportEventName"),
                    On(this, "elementOutOfViewportEventName"),
                    this.intersectionObserverEnable = WbSpaModel.prototype.$apiSupport.intersectionObserver,
                    e = null != e ? e : [],
                    this.items = (Array.isArray(e) ? e : [e]).toHashSet(),
                    this.options = null != t ? t : {};
                    this.settings = Object.assign({
                        keepObserve: !1,
                        sendOutEvent: !1
                    }, null != r ? r : {}),
                    this.observer = null,
                    this.elementInViewportEventName = "elementInViewportEvent",
                    this.elementOutOfViewportEventName = "elementOutOfViewportEvent"
                }
                _observe(e) {
                    var t, r;
                    const n = {
                        bubbles: !0
                    };
                    (null == (t = this.settings) ? void 0 : t.eventDetails) && (n.detail = this.settings.eventDetails);
                    let s = new CustomEvent(this.elementInViewportEventName,n)
                      , i = new CustomEvent(this.elementOutOfViewportEventName,n);
                    this.intersectionObserverEnable ? (this.observer = null != (r = this.observer) ? r : new IntersectionObserver(( (e, t) => {
                        e.forEach((e => {
                            var r, n;
                            e.isIntersecting ? (e.target.dispatchEvent(s),
                            (null == (r = this.settings) ? void 0 : r.keepObserve) || (this.items.delete(e.target),
                            t.unobserve(e.target))) : !e.isIntersecting && (null == (n = this.settings) ? void 0 : n.sendOutEvent) && e.target.dispatchEvent(i)
                        }
                        ))
                    }
                    ),this.options),
                    e.forEach((e => {
                        var t;
                        e && (null == (t = this.observer) || t.observe(e))
                    }
                    ))) : e.forEach((e => {
                        e.dispatchEvent(s),
                        this.items.delete(e)
                    }
                    ))
                }
                observe() {
                    return this._observe(this.items),
                    this
                }
                update(e) {
                    let t;
                    if (Array.isArray(e))
                        t = e;
                    else if (e instanceof HTMLElement)
                        t = [e];
                    else {
                        if (!("toArray"in e))
                            return;
                        t = e.toArray()
                    }
                    this._observe(t)
                }
                unobserve(e) {
                    var t;
                    e && this.intersectionObserverEnable && (null == (t = this.observer) || t.unobserve(e))
                }
                unobserveAll() {
                    this.items.forEach((e => {
                        var t;
                        return null == (t = this.observer) ? void 0 : t.unobserve(e)
                    }
                    )),
                    this.items.clear()
                }
                destroy() {
                    var e;
                    this.items.clear(),
                    null == (e = this.observer) || e.disconnect()
                }
            }
            var $n = Bn
              , xn = r(8379)
              , Rn = Object.defineProperty
              , Fn = (e, t, r) => ( (e, t, r) => t in e ? Rn(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class jn {
                constructor() {
                    Fn(this, "allModules"),
                    Fn(this, "allServices"),
                    Fn(this, "modulesDict"),
                    Fn(this, "servicesDict"),
                    Fn(this, "loadingServices"),
                    this.allModules = {},
                    this.modulesDict = {},
                    this.allServices = {},
                    this.servicesDict = {},
                    this.loadingServices = {}
                }
                init() {
                    return window.__spaModuleManager__ = {
                        register: (e, t) => {
                            this._enrichProto(t),
                            this.modulesDict[e] = t
                        }
                        ,
                        getModule: (e, t) => {
                            if (null != this.modulesDict[e] || t)
                                return this.modulesDict[e];
                            throw new Error("Module " + e + " has not been loaded yet")
                        }
                    },
                    window.__spaServiceManager__ = {
                        register: (e, t) => {
                            this._enrichProto(t),
                            this.servicesDict[e] = t
                        }
                        ,
                        getService: (e, t) => {
                            if (null != this.servicesDict[e] || t)
                                return this.servicesDict[e];
                            throw new Error("Service " + e + " has not been loaded yet")
                        }
                    },
                    this
                }
                setModules(e) {
                    this.allModules = e
                }
                setServices(e) {
                    this.allServices = e
                }
                async loadServiceAsync(e) {
                    const {physicalPath: t} = this.allServices[e] || {};
                    if (null == t)
                        throw new Error(e + " service doesnt exist");
                    const r = await this._loadServiceAsync(e, t)
                      , n = null != r ? new r : null;
                    (0,
                    v.DQ)(e, n)
                }
                async loadServiceAsSingletonAsync(e) {
                    const {physicalPath: t} = this.allServices[e] || {};
                    if (null == t)
                        throw new Error(e + " service doesnt exist");
                    return this.loadingServices[e] || (this.loadingServices[e] = this._loadServiceAsync(e, t).then((t => {
                        const r = null != t ? new t : null;
                        return (0,
                        v.DQ)(e, r),
                        r
                    }
                    ))),
                    this.loadingServices[e]
                }
                async loadModuleAsync(e, t=!1) {
                    "pooMapModule" === e && (wb.global.settings.switches.wbTilesMap || wb.settings.secondHost) && (e = "pooWbMapModule");
                    let {physicalPath: r, dataPath: n, hasTmpl: s, tmpls: i=[], templateId: a, isDynamic: o=!1, httpMethod: l="GET", cssPaths: c, jsPaths: u, apiName: d} = this.allModules[e] || {};
                    if (null == r)
                        throw new Error(e + " module doesnt exist");
                    const h = i.map((e => this._loadTemplateAsync(e)))
                      , p = this._loadTemplateAsync(s ? e : null, a)
                      , m = this._loadDataAsync(e, n, o, l, d)
                      , b = null == c ? [Promise.resolve(null)] : c.map((e => WbSpaModel.prototype.$helper.loadCssAsync(e)))
                      , g = null == u ? [Promise.resolve(null)] : u.map((e => WbSpaModel.prototype.$helper.loadJsAsync(e)))
                      , [y,f,v] = await Promise.all([this._loadModule(e, r, t), m, p, ...h, ...b, ...g]);
                    return null != y && (y.data = f,
                    y.template = v),
                    y
                }
                async execModule(e="", t="", r=[]) {
                    try {
                        (await this.loadModuleAsync(e))[t](...r)
                    } catch (e) {
                        console.error(e)
                    }
                }
                async _loadModule(e, t, r) {
                    if (null == e || null == t)
                        throw new Error("path and name are required to load module");
                    return await WbSpaModel.prototype.$helper.loadJsAsync(t),
                    window.__spaModuleManager__.getModule(e, r)
                }
                async _loadServiceAsync(e, t) {
                    if (null == e || null == t)
                        throw new Error("path and name are required to load service");
                    return await WbSpaModel.prototype.$helper.loadJsAsync(t),
                    window.__spaServiceManager__.getService(e)
                }
                async _loadDataAsync(e, t, r, n, s) {
                    if (null == t)
                        return null;
                    const i = this.modulesDict[e];
                    if (!r && null != i && (0,
                    xn.rI)(i)) {
                        const e = new i;
                        if (!e.isNetworkError)
                            return e.data
                    }
                    return "basket" === s && (t = `${(0,
                    v.cQ)("cartService").publicBasketApiUrl}${t}`),
                    await WbSpaModel.prototype.$httpClient.fetchJSON(t, {
                        method: n || "GET",
                        credentials: "include"
                    }, {
                        defaultValue: {
                            isNetworkError: !0
                        },
                        useProccessResponse: !0
                    })
                }
                async _loadTemplateAsync(e, t, r) {
                    return null == e && null == t ? Promise.resolve(null) : t ? $.views.loadWebApiTemplateAsync(t, r) : null != e ? $.views.loadTemplateAsync(e, r) : Promise.resolve(null)
                }
                _enrichProto(e) {
                    if (!e.prototype)
                        return;
                    let t = e.prototype
                      , r = null;
                    for (; (r = Object.getPrototypeOf(t)) && r != Object.prototype; )
                        t = r;
                    t != WbSpaModel.prototype && Object.setPrototypeOf(t, WbSpaModel.prototype)
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(jn.prototype, e)
                }
                static factory(e) {
                    return e && jn.richPrototype(e),
                    new jn
                }
            }
            var Nn = jn
              , Un = Object.defineProperty
              , Wn = (e, t, r) => ( (e, t, r) => t in e ? Un(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class Hn {
                constructor() {
                    Wn(this, "items"),
                    Wn(this, "requestUrl"),
                    Wn(this, "defaultTitle"),
                    this.items = [],
                    this.requestUrl = ""
                }
                init() {
                    this.defaultTitle = wb.i18n.t("common.metaInfo.title");
                    const e = [{
                        tagName: "title",
                        htmlContent: wb.i18n.t("common.metaInfo.title")
                    }];
                    this.items = e.map((e => {
                        var t;
                        try {
                            const r = Object.keys(null != (t = e.attributesDictionary) ? t : {}).map((t => {
                                return `[${t}='${r = e.attributesDictionary ? e.attributesDictionary[t] : "",
                                r.replace(/[\n\r]/g, "").replace(/["']/g, "\\$&")}']`;
                                var r
                            }
                            ));
                            return document.querySelector(`${e.tagName}${r.join("")}`)
                        } catch (e) {
                            return console.error(e.message),
                            null
                        }
                    }
                    ))
                }
                async update(e, t=null) {
                    return this._loadMetaTags(null != t ? t : this.requestUrl, e).then((e => {
                        if (this.delete(),
                        (null != e ? e : []).length > 0)
                            return this._renderMetatags(e),
                            e;
                        this._renderDefaultTitle()
                    }
                    )).catch(( () => {}
                    ))
                }
                render(e) {
                    this.delete(),
                    (null != e ? e : []).length > 0 ? this._renderMetatags(e) : this._renderDefaultTitle()
                }
                async loadMetaTags(e, t) {
                    if (e.metaTags)
                        return this.render(e.metaTags);
                    const r = await this.update(window.location.pathname, WbSpaModel.prototype.$router.currentRoute.metaTagsUrl);
                    if (!r)
                        return;
                    const n = r.find((e => "H1" === e.tagName));
                    if (n && window.requestAnimationFrame(( () => $.observable(e).setProperty({
                        title: n.hTMLContent
                    }))),
                    t) {
                        const t = r.find((e => "bottomText" === e.tagName));
                        t && window.requestAnimationFrame(( () => $.observable(e).setProperty({
                            bottomText: t.hTMLContent
                        })))
                    }
                }
                delete() {
                    this.items.forEach((e => null == e ? void 0 : e.remove())),
                    this.items.length = 0
                }
                _loadMetaTags(e, t) {
                    var r, n, s;
                    if (!e)
                        return Promise.resolve();
                    const i = new URLSearchParams(WbSpaModel.prototype.$router.queryParams);
                    let a;
                    return i.append("targetUrl", encodeURIComponent(("/" === t[0] ? "" : "/") + t)),
                    e.indexOf("{*category}") > -1 && (e = e.replace("{*category}", null != (r = WbSpaModel.prototype.$router.routeParameters.category) ? r : "")),
                    e.indexOf("{brandBasePath}") > -1 && "/" === (e = e.replace("{brandBasePath}", null != (n = WbSpaModel.prototype.$router.routeParameters.brandBasePath) ? n : ""))[e.length - 1] && (e = e.slice(0, -1)),
                    e.indexOf("{promoBasePath}") > -1 && "/" === (e = e.replace("{promoBasePath}", null != (s = WbSpaModel.prototype.$router.routeParameters.promoBasePath) ? s : ""))[e.length - 1] && (e = e.slice(0, -1)),
                    a = e,
                    WbSpaModel.prototype.$httpClient.fetchJSON(a + "?" + i, {}, {
                        useProccessResponse: !0
                    }).then((e => Promise.resolve(null == e ? void 0 : e.metaTags))).catch((r => (r.isCancelled || "" === r.message || (console.error(r.message),
                    console.error(`Error loading meta tags for path ${t} by requesting ${e}`)),
                    Promise.resolve())))
                }
                _renderMetatags(e) {
                    const t = document.createDocumentFragment();
                    e.forEach((e => {
                        var r;
                        if ("H1" === e.tagName)
                            return;
                        if ("bottomText" === e.tagName)
                            return;
                        const n = document.createElement(e.tagName);
                        Object.keys(null != (r = e.attributesDictionary) ? r : {}).forEach((t => n.setAttribute(t, e.attributesDictionary ? e.attributesDictionary[t] : "")));
                        const s = e.hTMLContent || e.htmlContent;
                        s && (n.innerHTML = s),
                        this.items.push(n),
                        t.appendChild(n)
                    }
                    )),
                    document.head.appendChild(t)
                }
                _renderDefaultTitle() {
                    const e = document.createElement("title");
                    e.innerHTML = this.defaultTitle || "",
                    this.items.push(e),
                    document.head.appendChild(e)
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(Hn.prototype, e)
                }
                static factory(e) {
                    return e && Hn.richPrototype(e),
                    new Hn
                }
            }
            var qn = Object.defineProperty
              , Vn = (e, t, r) => ( (e, t, r) => t in e ? qn(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class zn {
                constructor() {
                    Vn(this, "nativeLazyImage"),
                    Vn(this, "intersectionObserver"),
                    Vn(this, "webpImage"),
                    this.nativeLazyImage = "loading"in HTMLImageElement.prototype,
                    this.intersectionObserver = "IntersectionObserver"in window,
                    this.webpImage = !1,
                    this._checkWebpImageSupport()
                }
                _checkWebpImageSupport() {
                    if (0 === document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"))
                        this.webpImage = !0;
                    else
                        try {
                            const e = new Image;
                            e.onload = () => {
                                e.width > 0 && e.height > 0 && (this.webpImage = !0)
                            }
                            ,
                            e.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"
                        } catch (e) {}
                }
                static factory() {
                    return new zn
                }
            }
            var Gn = zn;
            class Kn {
                constructor() {
                    this.$eventBus.addEventListener("CurrencyChanged", this._onChangeCurrency.bind(this))
                }
                async initPreferredLocation() {
                    await this.updateLocation();
                    document.querySelectorAll(".j-geocity-link").forEach((e => {
                        e.addEventListener("click", this.doOnGeoBtnClick.bind(this))
                    }
                    ))
                }
                async updateLocation() {
                    this.location = await this.$user.getLocationData(),
                    this.setCityName(this.location.address)
                }
                setCityName(e) {
                    const t = document.querySelectorAll(".j-geocity-link")
                      , r = decodeURI(e);
                    t.forEach((e => {
                        e.textContent !== r && (e.textContent = r)
                    }
                    ))
                }
                doOnGeoBtnClick(e) {
                    const t = e.currentTarget;
                    e.preventDefault(),
                    t.classList.contains("_click") || (t.classList.add("_click"),
                    this.openDeliveryPointsPopup().then((e => t.classList.remove("_click"))))
                }
                findCurrentAddress(e, t=!1) {
                    return this.location ? null == e ? void 0 : e.find((e => e.lat == this.location.latitude && e.lon == this.location.longitude && (e.address == this.location.address || !t))) : null
                }
                async openDeliveryPointsPopup(e) {
                    const t = await this.$moduleLoader.loadModuleAsync("deliveryPointsChoosePopup");
                    this.dpPopup || (this.dpPopup = new t),
                    await this.dpPopup.init({
                        source: "geo",
                        selectAddress: (e, t, r, n) => {
                            const s = r || this.$services.userAddressService.get(t, e);
                            this._submitGeo(s, n)
                        }
                        ,
                        updateSelectedAddresses: t => {
                            const r = this.findCurrentAddress(t.courier.list, !0)
                              , n = this.findCurrentAddress(t.self.list);
                            t.courier.selected = null == r ? void 0 : r.addressId,
                            t.self.selected = null == n ? void 0 : n.addressId,
                            t.preferred = "courier" === e || "self" === e ? e : r ? "courier" : "self"
                        }
                        ,
                        beforeSelectDw: (e, t) => {
                            if ("self" == $.view(e.target).ctxPrm("selectedDeliveryWay"))
                                return;
                            if (this.dpPopup.deliveryWays.length < 2)
                                return;
                            "self" === $.view(e.target).data.code && this.$moduleLoader.loadModuleAsync("basketProductModel").then((t => {
                                var r;
                                const n = (null == (r = this.$services.cartService.get().basketItems) ? void 0 : r.map((e => new t(e)))).filter((e => {
                                    var t;
                                    const r = !wb.xnm.isB2BProduct(e.viewFlags) || (null == (t = wb.settings.selectedCompany) ? void 0 : t.supplierIds.find((t => t === e.supplierId)))
                                      , n = e.isDbs && !e.isEdbs && !r;
                                    return wb.settings.b2bMode ? n && e.onlyCourier : e.onlyCourier
                                }
                                )) || [];
                                n.length > 0 && (e.preventDefault(),
                                this.$moduleLoader.loadModuleAsync("productCourierOnlyPopup").then((e => {
                                    var t;
                                    e.show(e.template, n, null == (t = this.dpPopup.selectedAddresses) ? void 0 : t.preferred, this.openDeliveryPointsPopup.bind(this))
                                }
                                )),
                                this.dpPopup.close())
                            }
                            ))
                        }
                    }),
                    this.dpPopup.show()
                }
                _onChangeCurrency() {
                    var e;
                    "SpaBasketEntrypoint" !== (null == (e = this.$router.currentRoute) ? void 0 : e.name) && this.$services.cartService.localBasket.enrichProductsIfNeedAsync({
                        force: !0
                    })
                }
                _submitGeo(e, t) {
                    var r;
                    let n, s = this.map;
                    if (((null == e ? void 0 : e.id) || (null == e ? void 0 : e.addressId)) && (n = e),
                    n || (n = (null == s ? void 0 : s.selectedPointId) ? ("courier" === s.deliveryType ? s.courierList : s.visiblePoints).find((e => e.id === s.selectedPointId)) : s.selectedPoint),
                    !n)
                        return;
                    const i = n.id || n.addressId || (null == s ? void 0 : s.selectedPointId);
                    this.saveLastAddressAsync(i, n.deliveryType, e.address, t, null != (r = n.officeId) ? r : n.addressId),
                    this.$user.setGeo(n).then(( () => {
                        this.$eventBus.dispatchEvent(new CustomEvent("ExternalSelectAddress",{
                            detail: {
                                selectedAddressId: i,
                                dWay: n.deliveryType
                            }
                        }))
                    }
                    )),
                    this.dpPopup.close()
                }
                async saveLastAddressAsync(e, t, r, n, s) {
                    this.$services.cartService.localBasket.setAddress(e, t, r, n),
                    this.$auth.isAuth && this.$httpClient.fetchJSON(this.$services.cartService.publicBasketApiUrl + "/spa/address/select", {
                        credentials: "include",
                        method: "POST",
                        body: this.$helper.objectSerializer({
                            addressId: e,
                            deliveryWay: t
                        })
                    }, {
                        useProccessResponse: !0
                    }),
                    this.$analitic.setCurrentAddress(t, s),
                    this.$analitic.sendAddressSelection({
                        source: "Header",
                        deliveryType: t,
                        addressId: e,
                        address: r,
                        isChanged: n
                    })
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(Kn.prototype, e)
                }
                static factory(e) {
                    return e && Kn.richPrototype(e),
                    new Kn
                }
            }
            var Qn = Kn
              , Jn = r(81499)
              , Yn = r(5977)
              , Xn = Object.defineProperty
              , Zn = Object.defineProperties
              , es = Object.getOwnPropertyDescriptors
              , ts = Object.getOwnPropertySymbols
              , rs = Object.prototype.hasOwnProperty
              , ns = Object.prototype.propertyIsEnumerable
              , ss = (e, t, r) => t in e ? Xn(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , is = (e, t) => {
                for (var r in t || (t = {}))
                    rs.call(t, r) && ss(e, r, t[r]);
                if (ts)
                    for (var r of ts(t))
                        ns.call(t, r) && ss(e, r, t[r]);
                return e
            }
              , as = (e, t) => Zn(e, es(t));
            const os = new RegExp(["ru-basket-api.wildberries.ru", "basket-api.wildberries.by", "basket-api.wildberries.kz", "basket-api.wildberries.kg", "basket-api.wildberries.am", "basket-api.wildberries.tj", "basket-api.wildberries.ge", "basket-api.wildberries.uz", "localhost", "wbxoofex.wildberries.ru", "customs.wb.ru", "user-geo-data.wildberries.ru", "shopper-bt.wb.ru", "webappx-proxy.wbx-site-utility.k8s.stage-xc", "wbx-site-utility-ingress-controller.wbx-site-utility.k8s.stage-el", "webapp-*.wbx-site.k8s.dev-el", "webapp-*.wbx-site.k8s.stage-dm", "webapp-*.wbx-site.k8s.prod-el", "kg.wildberries.ru", "uz.wildberries.ru", "global.wildberries.ru", "gateway.c2c.k8s.stage-dm", "resale-api.wildberries.ru", "dfa.wildberries.by"].map((e => e.replace(/\./g, "\\.").replace(/\*/g, ".*"))).join("|"))
              , ls = new RegExp(["www.wildberries.ru", "www.wildberries.by", "www.wildberries.kz", "www.wildberries.kg", "kz.wildberries.ru", "www.wildberries.am", "www.wildberries.tj", "www.wildberries.ge", "www.wildberries.uz", "www.wildberries.global", "ru-basket-api.wildberries.ru", "basket-api.wildberries.by", "basket-api.wildberries.kz", "basket-api.wildberries.kg", "basket-api.wildberries.am", "basket-api.wildberries.tj", "basket-api.wildberries.ge", "basket-api.wildberries.uz", "localhost", "webapp-*.wbx-site.k8s.dev-el", "webapp-*.wbx-site.k8s.stage-dm", "webapp-*.wbx-site.k8s.prod-el", "kg.wildberries.ru", "uz.wildberries.ru", "global.wildberries.ru", "gateway.c2c.k8s.stage-dm", "resale-api.wildberries.ru"].map((e => e.replace(/\./g, "\\.").replace(/\*/g, ".*"))).join("|"));
            class cs {
                async fetchJSON(e, t={}, r={}) {
                    var n, s, i, a;
                    const o = as(is({}, r), {
                        useProccessResponse: null != (n = r.useProccessResponse) && n
                    })
                      , l = ( ({url: e, reqBody: t, type: r}) => {
                        var n;
                        const [s,i] = e.split("?")
                          , a = null == i ? void 0 : i.replace(/^\?/, "").split("&").join("; ")
                          , o = null != (n = WbSpaModel.prototype.$user.getLocale()) ? n : wb.settings.currentLocale
                          , l = Date.now()
                          , c = WbSpaModel.prototype.$auth
                          , u = WbSpaModel.prototype.$services.sessionService;
                        return {
                            url: s,
                            params: a,
                            locale: o,
                            auth: String(c.isAuth),
                            location: null == window ? void 0 : window.location.href,
                            type: r,
                            source: "site",
                            reqBody: t,
                            headers: {
                                "Wb-AppType": "site",
                                "Wb-AppVersion": WbSpaModel.appVersion,
                                deviceid: u.getSession(),
                                sessionid: c.jwtData.session_id
                            },
                            ts: l
                        }
                    }
                    )({
                        url: e,
                        reqBody: "string" != typeof t.body ? JSON.stringify(t.body) : t.body,
                        type: t.method
                    })
                      , c = WbSpaModel.prototype.$auth.jwt;
                    this.prepareHeaders(t, o);
                    const u = null != (s = o.retry) ? s : 1
                      , d = Math.max(u, 2);
                    for (let r = 1; r <= d; r++) {
                        const n = r % 2 == 0 && o.reserve ? o.reserve : e;
                        this.applyTimeout(t, o.timeout);
                        try {
                            await this.applyCaptchaHeader(t, o, c);
                            const e = await this.fetch(n, t);
                            if (o.addCatalogCaptcha && (null == (i = wb.global) ? void 0 : i.settings.switches.enableCatalogCaptcha) && e.status === y.HTTP_CODES.INVALID_TOKEN)
                                throw null == (a = WbSpaModel.prototype.$services.parseTokenService) || a.providers.catalog.resetToken(),
                                new Error("Need refresh token");
                            const {data: r, response: s} = await this.handleResponse(e, o, l);
                            return await this.processFetchedData(s, r, o)
                        } catch (n) {
                            if (n instanceof NotFoundError && o.offRepeatWith404Error)
                                break;
                            const s = await this.handleFetchError(n, e, t, o, r, d, l);
                            if (void 0 !== s)
                                return s
                        }
                    }
                }
                async fetchText(e, t={}, r={}) {
                    t && r && (this.prepareHeaders(t, r),
                    this.applyTimeout(t, r.timeout));
                    const n = await this.fetch(e, is(as(is({}, t), {
                        dataType: "text"
                    }), r));
                    return n.ok ? n.text() : Promise.reject("Could not get text from " + e)
                }
                async fetchStatic(e, t={
                    timeout: 3e4,
                    fetchType: "json"
                }, r, ...n) {
                    var s, i;
                    let a = wb.helpers.url.urlStaticData.apply(null, [e])
                      , o = {};
                    "function" == typeof r && (o = {
                        nullOnError: !0,
                        retry: 2,
                        reserve: r.apply(null, [e, ...n, !0]),
                        timeout: null != (s = t.timeout) ? s : 3e4
                    },
                    a = r.apply(null, [e, ...n]));
                    const l = as(is(is({}, o), t), {
                        useProccessResponse: !1,
                        throwErr: !1,
                        timeout: null != (i = null == t ? void 0 : t.timeout) ? i : 3e4
                    });
                    return await this.fetchJSON(a, {}, l)
                }
                async fetch(e, t={}) {
                    var r, n, s, i;
                    const a = t
                      , {headers: o={}} = a
                      , l = ( (e, t) => {
                        var r = {};
                        for (var n in e)
                            rs.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                        if (null != e && ts)
                            for (var n of ts(e))
                                t.indexOf(n) < 0 && ns.call(e, n) && (r[n] = e[n]);
                        return r
                    }
                    )(a, ["headers"])
                      , c = new Headers(o)
                      , u = WbSpaModel.prototype.$auth
                      , d = u.jwt;
                    t.withAuthz && u.checkSlide();
                    let h = 1
                      , p = !1;
                    try {
                        const t = new URL(e.startsWith("//") ? `${document.location.protocol}${e}` : e);
                        if ((t.hostname === window.location.host && t.port === window.location.port || os.test(t.hostname)) && (ls.test(t.hostname) && (h = 2,
                        c.set("X-Spa-Version", WbSpaModel.appVersion),
                        c.set("X-Requested-With", "XMLHttpRequest"),
                        c.set("DeviceId", WbSpaModel.prototype.$services.sessionService.getSession()),
                        WbSpaModel.prototype.$adult.isConfirmed && c.set("adultConfirmed", "1")),
                        !c.has("Authorization") && d && c.set("Authorization", `Bearer ${d}`)),
                        wb.settings.secondHost) {
                            const r = t.host.split(".");
                            r.splice(-1)[0] !== wb.settings.currentDomain && (t.pathname = r.join(".") + t.pathname,
                            t.host = wb.settings.secondHost,
                            t.port = "",
                            e = t.href)
                        }
                    } catch (e) {
                        p = !0,
                        h = 2,
                        c.set("X-Requested-With", "XMLHttpRequest"),
                        c.set("X-Spa-Version", WbSpaModel.appVersion),
                        c.set("DeviceId", WbSpaModel.prototype.$services.sessionService.getSession()),
                        !c.has("Authorization") && d && c.set("Authorization", `Bearer ${d}`),
                        WbSpaModel.prototype.$adult.isConfirmed && c.set("adultConfirmed", "1")
                    }
                    t.body instanceof URLSearchParams && (c.set("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"),
                    l.body = null == (r = null == l ? void 0 : l.body) ? void 0 : r.toString()),
                    t.withJwtToken && c.set("Authorization", `Bearer ${d}`);
                    const m = is({
                        credentials: null != (n = t.credentials) ? n : "same-origin",
                        headers: c
                    }, l);
                    let b;
                    for (let r = 1; r <= h; r++) {
                        if (t.withJwtToken) {
                            if (!d)
                                return Promise.reject("miss token");
                            b = await fetch(e, m)
                        } else
                            b = await fetch(e, m);
                        if (t.withAuthz && this.slideWithAuthz(b),
                        b.status === y.HTTP_CODES.INVALID_TOKEN) {
                            const e = b.headers.get("x-wbaas-token");
                            if ("get" === e || "refresh" === e) {
                                const e = null != (s = WbSpaModel.prototype.$services.parseTokenService) ? s : await WbSpaModel.prototype.$getService("parseTokenService");
                                await e.providers.main.getToken();
                                continue
                            }
                        }
                        if (p && (null == (i = null == wb ? void 0 : wb.helpers) ? void 0 : i.date)) {
                            const e = b.headers.get("Date");
                            wb.helpers.date.serverDate = new Date(String(e))
                        }
                        break
                    }
                    return b
                }
                async get(e, t, r) {
                    return await this.fetchJSON(e, as(is({}, t), {
                        method: "GET"
                    }), r)
                }
                async post(e, t, r) {
                    return await this.fetchJSON(e, as(is({}, t), {
                        method: "POST"
                    }), r)
                }
                async put(e, t, r) {
                    return await this.fetchJSON(e, as(is({}, t), {
                        method: "PUT"
                    }), r)
                }
                async delete(e, t, r) {
                    return await this.fetchJSON(e, as(is({}, t), {
                        method: "DELETE"
                    }), r)
                }
                async patch(e, t, r) {
                    return await this.fetchJSON(e, as(is({}, t), {
                        method: "PATCH"
                    }), r)
                }
                async slideWithAuthz(e) {
                    const t = WbSpaModel.prototype.$auth;
                    if (e.ok) {
                        const r = Number(e.headers.get("content-length"));
                        if (r > 16 && r < 256) {
                            const r = await e.clone().json();
                            -1 === (null == r ? void 0 : r.state) && 41 === r.reason && t._slide(!0)
                        }
                    }
                    401 === e.status && t._slide(!0)
                }
                prepareHeaders(e, t) {
                    if (e.headers || (e.headers = new Headers),
                    t.addContentTypeHeader && e.headers.set("Content-Type", "application/json"),
                    t.addUserHeader) {
                        const t = WbSpaModel.prototype.$user.getId();
                        t && e.headers.set("X-Userid", t)
                    }
                    t.noCache && e.headers.set("cache", "no-cache");
                    const r = WbSpaModel.prototype.$auth.jwt;
                    t.addAuthHeader && r && e.headers.set("Authorization", `Bearer ${r}`)
                }
                applyTimeout(e, t) {
                    if (t)
                        if (AbortSignal.timeout && "function" == typeof AbortSignal.timeout)
                            e.signal = AbortSignal.timeout(t);
                        else {
                            const r = new AbortController;
                            setTimeout(( () => r.abort()), t),
                            e.signal = r.signal
                        }
                }
                async handleResponse(e, t, r) {
                    let n;
                    switch (e.status) {
                    case y.HTTP_CODES.UNAUTHORIZED:
                    case y.HTTP_CODES.FORBIDDEN:
                        throw new UnauthorizeError({
                            jwtDrop: e.headers.has("X-Jwt-Drop")
                        });
                    case y.HTTP_CODES.NOT_FOUND:
                        throw new NotFoundError;
                    case y.HTTP_CODES.NO_CONTENT:
                    case y.HTTP_CODES.ALREADY_REPORTED:
                        n = null;
                        break;
                    default:
                        if (!e.ok) {
                            const n = new Error(`Fetch failed with status code ${e.status}`);
                            n.status = e.status;
                            const s = await e.json();
                            throw t.keepRespData && (n.data = s),
                            this.enrichJournalBody(r, s, e.status.toString(), n.message),
                            n
                        }
                        if (n = "text" === t.fetchType ? await e.text() : await e.json(),
                        "v2" === t.v && (null == n ? void 0 : n.error))
                            throw new KnownServerError(n.error)
                    }
                    return {
                        data: n,
                        response: e
                    }
                }
                enrichJournalBody(e, t, r, n) {
                    e.body = JSON.stringify(t),
                    e.status = r,
                    e.errorText = (null == t ? void 0 : t.error_description) ? null == t ? void 0 : t.error_description : n,
                    (null == t ? void 0 : t.error_code) && (e.errorCode = null == t ? void 0 : t.error_code)
                }
                processFetchedData(e, t, r) {
                    return r.useProccessResponse && null != t ? new Promise(( (n, s) => {
                        $.processResponse(t, (t => r.includeResponse ? n({
                            response: e,
                            responseData: t,
                            headers: e.headers
                        }) : n(t)), (e => s(new KnownServerError(e))), (t => r.includeResponse ? n({
                            response: e,
                            responseData: t,
                            headers: e.headers
                        }) : n(t)))
                    }
                    )) : Promise.resolve(r.includeResponse ? {
                        response: e,
                        responseData: t,
                        headers: e.headers
                    } : t)
                }
                async handleFetchError(e, t, r, n, s, i, a) {
                    var o, l, c;
                    let u = e;
                    const d = "AbortError" === e.name;
                    if (d && n.throwTimeoutError)
                        throw e;
                    const h = !e.isCustomError && e instanceof TypeError && ("Failed to fetch" === e.message || "NetworkError when attempting to fetch resource." === e.message || "Cancelled" === e.message);
                    if (n.logOff || (null == (o = wb.spa) || o.logError(e, {
                        url: t,
                        attempt: s
                    }),
                    null == (l = wb.spa) || l.journalLogError(as(is({}, a), {
                        errorText: `${e.name}: ${e.message}`
                    }))),
                    h && (u = new CancelledRequestError(e.message)),
                    (h || d) && n.tryResend)
                        return WbSpaModel.prototype.$services.retryFetchService.saveRequest(t, r, n),
                        {};
                    if (n.hasOwnProperty("defaultValue"))
                        return n.includeResponse ? {
                            response: void 0,
                            responseData: n.defaultValue
                        } : n.defaultValue;
                    if (u.isCustomError,
                    u.isUnauthorize && (u.jwtDrop && WbSpaModel.prototype.$auth.setToken(null),
                    n.noLoginPopupOnUnauthorized || await WbSpaModel.prototype.$auth.loginPopup(),
                    n.redirectUnauth && wb.spa.signIn({
                        query: {
                            returnUrl: window.location.href
                        }
                    }, null != (c = n.replaceState) && c)),
                    e.isNotFound && n.throwErr404)
                        throw e;
                    if (s === i && n.nullOnError)
                        return null;
                    if (s === i && e instanceof TypeError && ("Failed to fetch" === e.message || "NetworkError when attempting to fetch resource." === e.message))
                        throw new NetworkError;
                    if (n.throwErr || n.useProccessResponse)
                        throw e
                }
                async applyCaptchaHeader(e, t, r) {
                    var n, s;
                    if (t.addCatalogCaptcha && (null == (n = wb.global) ? void 0 : n.settings.switches.enableCatalogCaptcha) && !r) {
                        const t = null != (s = WbSpaModel.prototype.$services.parseTokenService) ? s : await WbSpaModel.prototype.$getService("parseTokenService")
                          , r = await t.providers.catalog.getToken();
                        r && e.headers.set("X-Captcha-ID", `Catalog ${r}`)
                    }
                }
                static factory() {
                    return new cs
                }
            }
            var us = {
                updateVerificationToken(e) {
                    const t = document.querySelector("input[name=__RequestVerificationToken]");
                    t && (t.value = e)
                }
            };
            class ds {
                get $userEnv() {
                    return (0,
                    j.x)()
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                get $helper() {
                    return (0,
                    Jn.d)()
                }
                get $moduleLoader() {
                    return (0,
                    f.s)()
                }
                get $verificationTokenHelper() {
                    return us
                }
                async menuLk(e) {
                    const t = (0,
                    K.M)();
                    return await t.menuLk(e)
                }
                get $httpClient() {
                    return (0,
                    y.getHttpClient)()
                }
                get $auth() {
                    return (0,
                    z.c)()
                }
                get $observable() {
                    return $.observable(this)
                }
                asObservable(e) {
                    return $.observable(e)
                }
                toggleProperty(e) {
                    this.asObservable(this).setProperty(e, !this[e])
                }
                get $storageHelper() {
                    return dt.A
                }
                get $seoHelper() {
                    return (0,
                    B.s)()
                }
                get $stat() {
                    return wb.stat
                }
                get $user() {
                    return (0,
                    A.u)()
                }
                get $geoLocation() {
                    return (0,
                    E.getSaveInstance)(D)
                }
                get $adult() {
                    return (0,
                    O.z)()
                }
                get $observerHelper() {
                    return (0,
                    K.M)().observerHelper
                }
                get $analitic() {
                    return (0,
                    T.a)()
                }
                get $productCardPopup() {
                    return (0,
                    G.w)().getSingltone()
                }
                get $isDesktop() {
                    return (0,
                    K.M)().isDesktop()
                }
                get $eventBus() {
                    return (0,
                    x.J)()
                }
                get $services() {
                    return (0,
                    v.Z1)()
                }
                get $apiSupport() {
                    return (0,
                    L.C)()
                }
                get $recentViews() {
                    return (0,
                    K.M)().recentViews
                }
                get $promotionsHelper() {
                    return (0,
                    K.M)().promotionsHelper
                }
                async isMetaCharacteristicEnabled() {
                    var e, t, r, n, s, i;
                    if (!(null == (e = this.$auth.jwtData) ? void 0 : e.user))
                        return !1;
                    const a = WbSpaModel.prototype.$analitic.checkDataInSplitterServiceV2("common", "ab_siropFilter", "yes")
                      , o = parseInt(null == (t = this.$auth.jwtData) ? void 0 : t.user) || 0;
                    return ((null == (r = wb.global.settings.switches) ? void 0 : r.metaCharacteristicEnable) || !(null == (n = wb.global.settings.switches) ? void 0 : n.metaCharacteristicEnable) && a) && this.checkMobileRange(o, (null == (i = null == (s = wb.global.settings.mobileAppVariables) ? void 0 : s.objects) ? void 0 : i.variantsCardRange) || [])
                }
                $moveToAnchor(...e) {
                    this.$helper.moveToAnchor(...e)
                }
                $void() {}
                $getCurrentXInfoAsync() {
                    return this.$user.getXinfo()
                }
                $getCurrentXInfoWithClustersAndVectorsAsync(e) {
                    return (0,
                    K.M)().getCurrentXInfoWithClustersAndVectorsAsync(e)
                }
                async $getUserGender() {
                    const e = (0,
                    K.M)();
                    return await e.getUserGender()
                }
                $generateGuid() {
                    return (0,
                    K.M)().generateGuid()
                }
                async $getLoadingError() {
                    return (0,
                    me.V)().get()
                }
                $isWbxOrderEnabled(e) {
                    var t, r, n;
                    return !!(null == (t = this.$auth.jwtData) ? void 0 : t.user) && ("ru" !== wb.settings.currentLocale || (!!e.isWbxOrderEnabled || !!(null == (n = null == (r = wb.global.settings) ? void 0 : r.variables) ? void 0 : n.wbxOrderUsersRange) && this._checkByRange(wb.global.settings.variables.wbxOrderUsersRange)))
                }
                $isSupportBooking() {
                    return (0,
                    K.M)().isSupportBooking()
                }
                $isSupportDbsp() {
                    return "RUB" === wb.user.getCurrency() && !wb.settings.b2bMode
                }
                $isUserPremiumEnabled() {
                    return (0,
                    K.M)().isUserPremiumEnabled()
                }
                $isTravelEnabled() {
                    return (0,
                    K.M)().isTravelEnabled()
                }
                $isTravelEnabledMenu() {
                    return (0,
                    K.M)().isTravelEnabledMenu()
                }
                $isTrendEnabledMenu() {
                    return (0,
                    K.M)().isTrendEnabledMenu()
                }
                isUserHasAccountWallet() {
                    return (0,
                    K.M)().isUserHasAccountWallet()
                }
                isEnabledLogisticCostV3() {
                    var e, t;
                    return !wb.global.settings.switches.enableDetailingForLogisticVer3 && wb.analitics.checkDataInSplitterServiceV2("common", "ab_enableDetailingForLogisticVer3", "enable") || wb.global.settings.switches.enableDetailingForLogisticVer3 && this.checkMobileRange(Number(this.$user.getId()), (null == (t = null == (e = wb.global.settings.mobileAppVariables) ? void 0 : e.objects) ? void 0 : t.detailingForLogisticVer3Range) || [])
                }
                isResaleEnabled({isSeller: e=!1}) {
                    return (0,
                    K.M)().isResaleEnabled({
                        isSeller: e
                    })
                }
                isFeedbacksResaleEmployeeEnabled({isSeller: e=!1}) {
                    return (0,
                    K.M)().isFeedbacksResaleEmployeeEnabled({
                        isSeller: e
                    })
                }
                isQuestionsResaleEmployeeEnabled({isSeller: e=!1}) {
                    return (0,
                    K.M)().isQuestionsResaleEmployeeEnabled({
                        isSeller: e
                    })
                }
                isResaleSupplierLKQuestionsEnabled() {
                    return (0,
                    K.M)().isResaleSupplierLKQuestionsEnabled()
                }
                isResaleSupplierLKFeedbacksEnabled() {
                    return (0,
                    K.M)().isResaleSupplierLKFeedbacksEnabled()
                }
                checkMobileRange(e, t) {
                    return (0,
                    K.M)().checkMobileRange(e, t)
                }
                _checkByRange(e) {
                    return (0,
                    K.M)().checkByRange(e)
                }
                $isRangeEnabledFor(e) {
                    return (0,
                    K.M)().isRangeEnabledFor(e)
                }
                $useCatalogReturnCost() {
                    return (0,
                    K.M)().useCatalogReturnCost()
                }
                $isReceiptsFromAstroEnabled() {
                    var e, t, r;
                    return !!(null == (e = this.$auth.jwtData) ? void 0 : e.user) && (null == (r = null == (t = wb.global.settings) ? void 0 : t.switches) ? void 0 : r.enableAstroReceipts)
                }
                getConfigForCustomCharges(e, t) {
                    var r, n;
                    const s = {
                        from: e,
                        to: t,
                        textGroup: "default",
                        count: 0
                    }
                      , i = null == (n = null == (r = wb.global.settings.mobileAppVariables) ? void 0 : r.objects) ? void 0 : n.newRestrictionsOnImportedGoodsObjects;
                    if (!(null == i ? void 0 : i.length))
                        return s;
                    const a = i.filter((r => r.from === e && r.to === t));
                    return 0 === a.length ? null : a.length > 1 ? s : a[0]
                }
                $getService(e) {
                    const {getService: t} = (0,
                    F.D)();
                    return t(e)
                }
                $getServiceOf(e) {
                    const {getServiceOf: t} = (0,
                    F.D)();
                    return t(e)
                }
                $loadModule(e, ...t) {
                    const {loadModule: r} = (0,
                    F.D)();
                    return r(e, ...t)
                }
                static richPrototype(e) {
                    Object.setPrototypeOf(e, ds.prototype)
                }
            }
            Object.defineProperties(window, {
                WbSpaModel: {
                    value: ds
                }
            });
            var hs = ds
              , ps = r(77409)
              , ms = Object.defineProperty
              , bs = (e, t, r) => ( (e, t, r) => t in e ? ms(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const {CATALOG_URL: gs} = o.A;
            var ys = class {
                constructor() {
                    bs(this, "isInited"),
                    bs(this, "menuById"),
                    bs(this, "menuByUrl"),
                    bs(this, "menuIdEnum"),
                    bs(this, "fullMenu"),
                    bs(this, "menuItems"),
                    this.fullMenu = null,
                    this.menuByUrl = new Map,
                    this.menuById = new Map,
                    this.isInited = !1,
                    this.menuIdEnum = this._menuIdEnum(),
                    this.menuItems = {
                        trend: {
                            id: 1235,
                            name: wb.i18n.t("promotions.trend"),
                            url: "/promotions/trend"
                        },
                        certificates: {
                            id: 1234,
                            name: wb.i18n.t("promotions.certificates"),
                            url: "/gift/certificates"
                        },
                        promotion: {
                            id: 1111,
                            name: "",
                            url: ""
                        },
                        resale: {
                            id: 131841,
                            name: wb.i18n.t("pageTitles.c2c"),
                            url: "/catalog/reseyl",
                            shard: "c2c",
                            query: "vflags=8388608"
                        }
                    }
                }
                async initMenu() {
                    var e;
                    const t = $.views.helpers.getLangForServices()
                      , r = `main-menu-${WbSpaModel.prototype.$user.getLocale()}-${t}-v3.json`;
                    if (this.fullMenu = await WbSpaModel.prototype.$httpClient.fetchStatic(r, {
                        timeout: 1e4
                    }),
                    this.fullMenu && (this.fullMenu = this.fullMenu.filter((e => e.id !== this.menuItems.trend.id))),
                    this.fullMenu) {
                        const t = null == (e = WbSpaModel.prototype.$user.getUserGradeFromCache()) ? void 0 : e.wbClub
                          , r = this.fullMenu.findIndex((e => 1234 === e.id));
                        "ru" !== wb.settings.currentLocale && r >= 0 && this.fullMenu.splice(r, 1);
                        const n = this.fullMenu.findIndex((e => 1111 === e.id));
                        if (!wb.settings.b2bMode && WbSpaModel.prototype.$isUserPremiumEnabled()) {
                            const e = {
                                id: 1122,
                                name: wb.i18n.t("wbClub.discounts"),
                                url: t && "subscribed" === t ? "/promotions/klubnye-skidki" : "/subscription",
                                locked: !t || "subscribed" !== t
                            };
                            t && "subscribed" === t || (e.target = "_blank"),
                            this.fullMenu.splice(r >= 0 ? r : n + 1, 0, e)
                        }
                        if (WbSpaModel.prototype.$isTrendEnabledMenu()) {
                            const e = this.fullMenu.findIndex((e => e.id === this.menuItems.certificates.id))
                              , t = this.fullMenu.findIndex((e => e.id === this.menuItems.promotion.id))
                              , r = -1 !== e ? e + 1 : -1 !== t ? t + 1 : 0;
                            this.fullMenu.splice(r, 0, this.menuItems.trend)
                        }
                        if (WbSpaModel.prototype.$isTravelEnabledMenu()) {
                            this.fullMenu.splice(this.fullMenu.findIndex((e => e.id === this.menuItems.trend.id)) + 1, 0, {
                                id: 1236,
                                name: "Авиабилеты",
                                url: "https://www.wildberries.ru/travel",
                                target: "_blank"
                            });
                            const e = this.fullMenu.findIndex((e => 61037 === e.id));
                            -1 !== e && this.fullMenu.splice(e, 1)
                        }
                        if (!WbSpaModel.prototype.isResaleEnabled({
                            isSeller: !1
                        })) {
                            const e = this.fullMenu.findIndex((e => 131841 === e.id));
                            -1 !== e && this.fullMenu.splice(e, 1)
                        }
                        this._createMenuMap();
                        const s = this.fullMenu.filter((e => e.dynamic)).map((e => this.loadDynamicBranch(e)));
                        await Promise.all(s),
                        this.isInited = !0
                    }
                    return this
                }
                setEntryPointWBClub() {
                    window.localStorage.setItem("entryPointWBClub", "Catalog")
                }
                async loadDynamicBranch(e) {
                    const t = WbSpaModel.prototype.$user.getDest()
                      , r = $.views.helpers.getLangForServices()
                      , n = `${gs}menu/v11/api?locale=${WbSpaModel.prototype.$user.getLocale()}&lang=${r}&id=${e.id}&dest=${t}`
                      , s = await WbSpaModel.prototype.$httpClient.fetchJSON(n, {}, {
                        timeout: 1e4,
                        nullOnError: !0
                    });
                    if (null == s ? void 0 : s.data) {
                        const r = this._fromDynamicMenu(s.data, e);
                        r.forEach((t => this._setNode(t, e.id))),
                        e.childs = r,
                        e.isDenyLink = !0,
                        e.loadedForDest = t
                    } else
                        e.dest = [0]
                }
                getCurrentMenuItem(e) {
                    if (!e)
                        return null;
                    const t = e.pathname.replace("catalogdata", "catalog");
                    return this.menuByUrl.get(t)
                }
                getSitePathItems(e) {
                    var t;
                    if (!e)
                        return null;
                    const r = [];
                    r.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url,
                        analytic: ["CCC", null, null, e.id]
                    });
                    let n = null == (t = this.menuById.get(e.id)) ? void 0 : t.parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        if (!e)
                            return r.reverse();
                        r.push({
                            id: n,
                            name: e.name,
                            pageUrl: e.url,
                            analytic: ["CCC", null, null, n]
                        }),
                        n = e.parentId
                    }
                    return r.reverse()
                }
                getCatalogDenyMenu(e, t) {
                    var r, n, s, i, a, o, l;
                    if (!e)
                        return;
                    if (e.landing || 1 === t.length)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [],
                            parent: {},
                            parents: [],
                            tagsMenu: null != (n = null == (r = e.childs) ? void 0 : r.map((e => ({
                                name: e.name,
                                link: e.url
                            })))) ? n : []
                        };
                    const c = t[t.length - 2]
                      , u = t.slice(1).map((e => ({
                        name: e.name,
                        link: e.pageUrl
                    })));
                    u[u.length - 1].lastSelected = !0;
                    const d = null != (i = null == (s = e.childs) ? void 0 : s.map((e => ({
                        name: e.name,
                        link: e.url,
                        anc: !0
                    })))) ? i : [];
                    if ((null != (a = e.childs) ? a : []).length > 0)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [...u, ...d],
                            parent: {
                                name: c.name,
                                link: c.pageUrl
                            },
                            parents: this.getParentsForDeny(e.id),
                            tagsMenu: null != d ? d : []
                        };
                    const h = this.menuByUrl.get(c.pageUrl);
                    return {
                        current: {
                            name: e.name,
                            link: e.url,
                            isTop: e.isTop,
                            lastSelected: !0
                        },
                        sideMenu: u,
                        parent: {
                            name: c.name,
                            link: c.pageUrl
                        },
                        parents: this.getParentsForDeny(e.id),
                        tagsMenu: null != (l = null == (o = null == h ? void 0 : h.childs) ? void 0 : o.map((e => ({
                            name: e.name,
                            link: e.url
                        })))) ? l : []
                    }
                }
                getRootNode(e) {
                    let t = e;
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return t
                }
                hasItem(e) {
                    return !!e && this.menuById.has(e)
                }
                getCatalogLink(e) {
                    var t;
                    return null == (t = this.menuById.get(e)) ? void 0 : t.url
                }
                getParents(e) {
                    var t;
                    const r = [];
                    let n = null == (t = this.menuById.get(e)) ? void 0 : t.parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        if (!e)
                            return r.reverse();
                        r.push(e.name),
                        n = e.parentId
                    }
                    return r.reverse()
                }
                getParentsForDeny(e) {
                    var t;
                    const r = [];
                    let n = null == (t = this.menuById.get(e)) ? void 0 : t.parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        r.push({
                            name: null == e ? void 0 : e.name,
                            link: null == e ? void 0 : e.url
                        }),
                        n = null == e ? void 0 : e.parentId
                    }
                    return r.reverse()
                }
                _menuIdEnum() {
                    return {
                        sport: 784,
                        monocity: 61042,
                        forAdults: 62057,
                        promotion: 2192
                    }
                }
                _createMenuMap() {
                    var e;
                    null == (e = this.fullMenu) || e.forEach((e => this._setNode(e, null)))
                }
                _setNode(e, t) {
                    var r;
                    t && (e.parentId = t),
                    this.menuByUrl.has(e.url) && !e.shard || (this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, e)),
                    null == (r = e.childs) || r.forEach((t => this._setNode(t, e.id)))
                }
                _fromDynamicMenu(e, t) {
                    return e.map((e => r(e, t.id, t)));
                    function r(e, t, n) {
                        const s = {
                            id: 1e6 * n.id + e.id,
                            parent: null != t ? t : 1e6 * n.id + t,
                            name: e.name,
                            url: n.url + e.url.replace("/catalog", ""),
                            shard: e.shardKey,
                            query: e.query,
                            isDenyLink: e.childrenOnly || "blackhole" == e.shardKey
                        };
                        return e.nodes && (s.childs = e.nodes.map((e => r(e, s.id, n)))),
                        s
                    }
                }
            }
              , fs = r(43185);
            r(37324);
            $.observable.Object.prototype.setAllProperty = function(e, t) {
                $.each(e, ( (e, r) => {
                    let n = e;
                    t && (n = `${t}.${n}`),
                    $.isPlainObject(r) ? this.setAllProperty(r, n) : !$.isArray(r) && this.setProperty(n, r)
                }
                ))
            }
            ,
            $.observable.Array.prototype.refreshArray = function(e) {
                for (let t = 0; t < e.length; t++)
                    this._data.length === t ? this.insert(e[t]) : $.observable(this._data[t]).setProperty(e[t]);
                for (; e.length < this._data.length; )
                    this.remove(this._data.length - 1)
            }
            ;
            const vs = {};
            $.views.helpers({
                loadTemplateAsync: async function(e, t="") {
                    var r;
                    if ($.templates[e])
                        return $.templates[e];
                    if (!vs[e]) {
                        let n;
                        const {$router: s, $httpClient: i} = WbSpaModel.prototype;
                        if (window._debug)
                            n = `${e}.json`;
                        else {
                            const t = `${e}.json`
                              , i = null == (r = s.tmplHashes) ? void 0 : r[t];
                            n = t.replace(".json", `.${i}.json`)
                        }
                        const a = (e, r) => t ? `${t}${n}` : wb.helpers.url.urlForJsTmpl(n);
                        vs[e] = i.fetchStatic(n, {}, a)
                    }
                    try {
                        const t = await vs[e]
                          , r = Object.keys(t);
                        return 1 === r.length ? ($.templates(e, t[r[0]]),
                        vs[e] = null,
                        $.templates[e]) : ($.templates(t),
                        vs[e])
                    } catch (t) {
                        throw vs[e] = null,
                        t
                    }
                },
                copyText: function(e, t=15, r="") {
                    var n;
                    t = Number(t),
                    (null == (n = navigator.clipboard) ? void 0 : n.writeText) ? navigator.clipboard.writeText(e) : $.views.helpers.copyTextFallback(e),
                    this.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [t, null, r])
                },
                copyTextFallback: function(e) {
                    const t = document.createElement("textarea");
                    return t.value = e,
                    t.style.position = "fixed",
                    t.style.top = "0",
                    t.style.left = "0",
                    t.style.opacity = "0",
                    document.body.appendChild(t),
                    t.focus(),
                    t.select(),
                    document.execCommand("copy"),
                    document.body.removeChild(t),
                    Promise.resolve()
                },
                loadWebApiTemplateAsync: async function(e) {
                    const t = `webapi_tmpl_${e}`
                      , r = WbSpaModel.prototype;
                    if ($.templates[t])
                        return $.templates[t];
                    vs[t] || (vs[t] = r.$httpClient.fetchText(`/webapi/htmltemplate/${e}`));
                    try {
                        const e = await vs[t];
                        try {
                            const t = JSON.parse(e);
                            $.templates(t)
                        } catch (r) {
                            $.templates(t, e)
                        }
                        return vs[t] = null,
                        $.templates[t]
                    } catch (e) {
                        throw vs[t] = null,
                        e
                    }
                },
                suppliersOrgForms: lr._.suppliersOrgForms,
                isDefaultSupplier: lr._.isDefaultSupplier,
                supplierFineName: lr._.supplierFineName,
                ImageUrl: wb.helpers.url.imageUrl,
                ImageUrlPb: lr._.ImageUrlPb,
                urlFeedbackPhoto: wb.helpers.url.urlFeedbackPhoto,
                urlProductVideo: wb.helpers.url.urlVideoProduct,
                urlFeedbackVideo: wb.helpers.url.urlFeedbackVideo,
                productCardUrl: lr._.productCardUrl,
                forBrandLogoFromId: lr._.forBrandLogoFromId,
                forSellerLogo: lr._.forSellerLogo,
                forSellerLogoPb: lr._.forSellerLogoPb,
                isEmptyObject: lr._.isEmptyObject,
                Declension: lr._.Declension,
                pluralize: lr._.pluralize,
                debug: lr._.debug,
                dateFormat: l.formatDate,
                toDateFormat: lr._.toDateFormat,
                formatDate: l.formatDate,
                toJson: lr._.toJson,
                fromJson: lr._.fromJson,
                encode: lr._.encode,
                isLazyImgInCarousel: lr._.isLazyImgInCarousel,
                timeLeft: lr._.timeLeft,
                parseFromDotNet: lr._.parseFromDotNet,
                timeLeftSpa: lr._.timeLeftSpa,
                isPriceEqual: lr._.isPriceEqual,
                isNullOrWhiteSpace: lr._.isNullOrWhiteSpace,
                HasFlag: lr._.HasFlag,
                blurAdult: lr._.blurAdult,
                nonBreakingSpaceFormatted: lr._.nonBreakingSpaceFormatted,
                pickupType: lr._.pickupType,
                pickupPhotos: lr._.pickupPhotos,
                priceFromRub: lr._.priceFromRub,
                priceToRub: lr._.priceToRub,
                toLocalPrice: lr._.toLocalPrice,
                max: lr._.max,
                abs: lr._.abs,
                trimWord: lr._.trimWord,
                trimSupplierName: lr._.trimSupplierName,
                brandUrl: lr._.brandUrl,
                brandUrlById: lr._.brandUrlById,
                formatPrice: l.formatPrice,
                isDateToday: lr._.isDateToday,
                isClosedByUser: lr._.isClosedByUser,
                getCurrentCurrency: lr._.getCurrentCurrency,
                fillFeedbackPhotosAndVideo: lr._.fillFeedbackPhotosAndVideo,
                fillFeedbackPhotos: lr._.fillFeedbackPhotos,
                fillFeedbackVideos: lr._.fillFeedbackVideos,
                stripHtml: lr._.stripHtml,
                isIosDevice: lr._.isIosDevice,
                isHuaweiDevice: lr._.isHuaweiDevice,
                sumBy: lr._.sumBy,
                minFiscalPriceInCurrency: l.minFiscalPriceInCurrency,
                stopPropagation: lr._.stopPropagation,
                subtract: lr._.subtract,
                addLogisticsCost: lr._.addLogisticsCost,
                isExpressDeliveryToday: lr._.isExpressDeliveryToday,
                formatNumberWithDot: lr._.formatNumberWithDot,
                getVatAmount: lr._.getVatAmount,
                onPreventDefault: lr._.onPreventDefault,
                checkProductOpenSameWindowAb: lr._.checkProductOpenSameWindowAb,
                applyConverter: lr._.applyConverter,
                getMenuItems: lr._.getMenuItems,
                getFilteredAllowedServicePages: lr._.getFilteredAllowedServicePages,
                getAvailableLangs: lr._.getAvailableLangs,
                getLangForServices: lr._.getLangForServices,
                escapeHtmlSpecialChars: lr._.escapeHtmlSpecialChars
            }),
            $.views.converters({
                not: lr.m.not,
                formatPhone: lr.m.formatPhone,
                toOrdinalDigitByFemaleGender: lr.m.toOrdinalDigitByFemaleGender,
                spaceFormatted: lr.m.spaceFormatted,
                convertQuantity: lr.m.convertQuantity,
                plusMinus: lr.m.plusMinus,
                toInt: lr.m.toInt,
                toFixed: lr.m.toFixed,
                leadZero: lr.m.leadZero,
                basketDeliveryDate: lr.m.basketDeliveryDate,
                priceWithPrecision: lr.m.priceWithPrecision,
                priceWithCoins: lr.m.priceWithCoins,
                priceWithCurrencyOld: lr.m.priceWithCurrencyOld,
                priceWithCurrencyV2: function(e, t, r, n) {
                    var s, i;
                    return l.priceWithCurrencyV2.call(this, e, {
                        showEmpty: t,
                        currency: r,
                        iso: null == (i = null == (s = this.tagCtx) ? void 0 : s.props) ? void 0 : i.iso,
                        omitZeroCents: n
                    })
                },
                urlForGood: lr.m.urlForGood,
                urlSiteStatic: l.urlSiteStatic,
                urlSiteStaticPb: lr.m.urlSiteStaticPb,
                urlStaticBasket: l.urlStaticBasket,
                toLower: lr.m.toLower,
                dateFromTimestamp: lr.m.dateFromTimestamp,
                formatDate: lr.m.formatDate,
                humanDate: lr.m.humanDate,
                humanTime: function(e) {
                    var t, r, n, s, i, a;
                    const o = null == (r = null == (t = this.tagCtx) ? void 0 : t.props) ? void 0 : r.genitive
                      , l = null == (s = null == (n = this.tagCtx) ? void 0 : n.props) ? void 0 : s.withDays
                      , c = null == (a = null == (i = this.tagCtx) ? void 0 : i.props) ? void 0 : a.withSeconds;
                    return lr.m.humanTime(e, o, l, c)
                },
                differenceDatesInSeconds: lr.m.differenceDatesInSeconds,
                humanTimerFormat: lr.m.humanTimerFormat,
                humanTimerFormatSimple: lr.m.humanTimerFormatSimple,
                humanTimerFormatSaleTimer: lr.m.humanTimerFormatSaleTimer,
                getDaysFromOrder: lr.m.getDaysFromOrder,
                dateStringToFormat: lr.m.dateStringToFormat,
                localize: lr.m.localize,
                pluralize: lr.m.pluralize,
                customDateTimeFormat: lr.m.customDateTimeFormat,
                divideNumberBySeparator: l.divideNumberBySeparator,
                trimWord: lr.m.trimWord,
                trimSupplierName: lr.m.trimSupplierName,
                join: lr.m.join,
                humanBytes: lr.m.humanBytes,
                deliveryDateTxt: lr.m.deliveryDateTxt,
                fastDeliveryText: lr.m.fastDeliveryText,
                minutesToTime: lr.m.minutesToTime,
                formatTimeStr: lr.m.formatTimeStr,
                dayNameFromDate: l.dayNameFromDate,
                getWorkSchedule: lr.m.getWorkSchedule,
                deliveryType: lr.m.deliveryType,
                formatString: lr.m.formatString,
                trim: lr.m.trim,
                imgForPromoCategory: lr.m.imgForPromoCategory,
                fileName: lr.m.fileName,
                convertToText: lr.m.convertToText,
                onlyDigits: lr.m.onlyDigits,
                toWebp: lr.m.toWebp,
                useWebp: lr.m.useWebp,
                toNumber: lr.m.toNumber,
                fixHtml: lr.m.fixHtml,
                legalRedirectUrl: lr.m.legalRedirectUrl,
                fromPayment: e => e ? e.id : "",
                escapeHtml: lr.m.escapeHtml
            }),
            $.views.tags({
                range: {
                    boundProps: ["start", "end"],
                    baseTag: "for",
                    render: function(e) {
                        let t = e;
                        const r = this.tagCtx
                          , n = r.props.start || 0;
                        let s = r.props.end;
                        const i = r.params.props;
                        if (n || s)
                            if (r.args.length)
                                $.isArray(t) && (t = t.slice(n, s));
                            else {
                                t = [],
                                s = s || 0;
                                for (let e = n; e <= s; e++)
                                    t.push(e)
                            }
                        return arguments.length || i && (i.start || i.end) ? this.base && this.base(t) : this.base && this.base()
                    },
                    onArrayChange: function(e, t) {
                        this.refresh()
                    }
                },
                calendarV2: {
                    dataBoundOnly: !0,
                    onUpdate: !1,
                    bindTo: ["selected", "limitTo", "limitFrom"],
                    linkedCtxParam: ["selected", "limitTo", "limitFrom"],
                    format: "dd.MM.yyyy",
                    init: function(e) {
                        (null == e ? void 0 : e.props.format) && (this.format = e.props.format),
                        (null == e ? void 0 : e.props.appendTo) && (this.appendTo = e.props.appendTo)
                    },
                    onBind: function(e) {
                        const t = {
                            x: 0,
                            y: 1
                        };
                        e.props.offsetX && (t.x = e.props.offsetX),
                        this.datePicker = $(e.props.target).glDatePicker({
                            selectedDate: this.ctxPrm("selected") ? this.ctxPrm("selected") : e.props.limitTo,
                            customWidth: e.props.width,
                            zIndex: e.props.zIndex,
                            appendTo: this.appendTo,
                            overlay: "m" === wb.settings.displayMode,
                            useClick: !0,
                            calendarOffset: t,
                            onClick: (t, r, n) => {
                                this.ctxPrm("selected", n),
                                "function" == typeof e.props.onSelect && e.props.onSelect(n.format(this.format))
                            }
                        }).glDatePicker(!0)
                    },
                    onAfterLink: function(e) {
                        const t = {
                            from: e.props.defaultFrom ? e.props.defaultFrom : new Date(2001,1,1),
                            to: new Date
                        }
                          , r = [];
                        e.props.limitFrom && (t.from = e.props.limitFrom),
                        e.props.limitTo && (t.to = e.props.limitTo),
                        this.datePicker.options.selectableDateRange = [t];
                        for (let e = t.from.getFullYear(); e <= t.to.getFullYear(); e++)
                            r.push(e);
                        this.datePicker.options.selectableYears = r,
                        this.datePicker.render()
                    }
                },
                swiper: {
                    dataBoundOnly: !0,
                    mainElement: ".custom-slider",
                    boundProps: ["total", "needRefresh", "activeSlide"],
                    template: '\n                <div class="custom-slider{{if ~tag.sliderClass}} {{: ~tag.sliderClass}}{{/if}}">\n                    <div class="custom-slider__list"  data-lk-header-wba="All">\n                        {{include tmpl=#content/}}\n                    </div>\n                    {{if ~tag.showArrows}}\n                    <button type="button" aria-label="{{:~t(\'common.goBack\')}}" class="custom-slider__arrow custom-slider__arrow--prev" data-link="{on ~tag.scroll \'left\'}disabled{:~leftArrowDisabled}" data-lk-header-wba="See_more"></button>\n                    <button type="button" aria-label="{{:~t(\'common.goForward\')}}" class="custom-slider__arrow custom-slider__arrow--next" data-link="{on ~tag.scroll \'right\'}disabled{:~rightArrowDisabled}" data-lk-header-wba="See_more"></button>\n                    {{/if}}\n                    {{if ~tag.showArrows && ~tag.showFade}}\n                    <div class="custom-slider__fade custom-slider__fade--prev" data-link="disabled{:~leftArrowDisabled}"></div>\n                    <div class="custom-slider__fade custom-slider__fade--next" data-link="disabled{:~rightArrowDisabled}"></div>\n                    {{/if}}\n                </div>\n            ',
                    init: function() {
                        var e, t, r, n, s;
                        const i = this.tagCtx.props.slidesPerView;
                        this.slidesPerView = "auto" === i || "number" == typeof i ? i : 1,
                        this.showArrows = null != (e = this.tagCtx.props.showArrows) && e,
                        this.showFade = null != (t = this.tagCtx.props.showFade) && t,
                        this.sliderClass = null != (r = this.tagCtx.props.sliderClass) && r,
                        this.slideSelector = null != (n = this.tagCtx.props.slideSelector) ? n : ".custom-slider__item",
                        this.arrowStopPropagation = null != (s = this.tagCtx.props.arrowStopPropagation) && s,
                        this.checkArrows = this.checkArrows.bind(this),
                        this.doOnScroll = WbSpaModel.prototype.$helper.throttle(this.doOnScroll.bind(this), 300),
                        this.scrollToSlide = this.scrollToSlide.bind(this)
                    },
                    onAfterLink: function() {
                        this.checkArrows();
                        const e = this.tagCtx.props.activeSlide;
                        void 0 !== e && this.scrollToSlide(e)
                    },
                    onBind: function() {
                        var e;
                        this.containerList = this.mainElem[0].querySelector(".custom-slider__list"),
                        null == (e = this.containerList) || e.addEventListener("scroll", this.doOnScroll)
                    },
                    onUpdate: function(e, t) {
                        return "propertyChange" === e.type && "needRefresh" === t.path && (this.containerList.scrollLeft = 0,
                        this.checkArrows()),
                        !1
                    },
                    scroll: function(e, t) {
                        var r;
                        this.arrowStopPropagation && t.stopPropagation();
                        const n = Number(null == (r = this.containerList.querySelector(this.slideSelector)) ? void 0 : r.clientWidth) + parseInt(getComputedStyle(this.containerList).gap);
                        let s = this.slidesPerView;
                        if ("auto" === this.slidesPerView) {
                            const e = this.mainElem[0].getBoundingClientRect();
                            s = Math.floor(e.width / n)
                        }
                        const i = n * Number(s)
                          , a = Math.round(this.containerList.scrollLeft) + ("left" === e ? -i : i);
                        this.containerList.scrollLeft = Math.round(a / n) * n
                    },
                    scrollToSlide: function(e) {
                        var t;
                        const r = e * (Number(null == (t = this.containerList.querySelector(this.slideSelector)) ? void 0 : t.clientWidth) + parseInt(getComputedStyle(this.containerList).gap));
                        this.containerList.scrollLeft = r
                    },
                    doOnScroll: async function(e) {
                        this.checkArrows()
                    },
                    checkArrows: async function() {
                        window.requestAnimationFrame(( () => {
                            const e = this.containerList.querySelectorAll(this.slideSelector);
                            if (e.length > 0) {
                                const t = this.mainElem[0].getBoundingClientRect()
                                  , r = e[e.length - 1].getBoundingClientRect();
                                this.ctxPrm("leftArrowDisabled", this.containerList.scrollLeft <= 0),
                                this.ctxPrm("rightArrowDisabled", t.right + 5 >= r.right)
                            } else
                                this.ctxPrm("leftArrowDisabled", !0),
                                this.ctxPrm("rightArrowDisabled", !0)
                        }
                        ))
                    }
                },
                btnAdvertising: {
                    template: "\n            {{if ordBannerMark}}\n                <button \n                    type=\"button\" \n                    class=\"btn-advertising\" \n                    title=\"\"\n                    data-link=\"{on ~onPreventDefault}\n                    {tooltip classes='tooltip-advertising j-tooltip-advertising tooltip--dark' pos='alignright bottom' trigger='hover' distance=0 tmplName='advertisingTooltipTmpl' tmplData=ordBannerMark}\">\n                    <span>{{:~t('promo.advertisement')}}</span>\n                </button>\n            {{/if}}\n        "
                },
                infiniteScroll: {
                    mainElement: "div",
                    template: '<div class="scroll-loader"></div>',
                    onAfterLink() {
                        this.scrollObserver = new IntersectionObserver(( (e, t) => {
                            e.forEach((e => {
                                e.isIntersecting && this.tagCtx.props.callback()
                            }
                            ))
                        }
                        ),{
                            threshold: 0,
                            rootMargin: "0px 0px 50% 0px"
                        }),
                        this.scrollObserver.observe(this.mainElem[0])
                    },
                    onDispose() {
                        this.scrollObserver.disconnect()
                    }
                },
                onSwipe: {
                    init: function(e) {
                        var t;
                        this.threshold = 10,
                        1 == (null == (t = null == e ? void 0 : e.args) ? void 0 : t.length) && "function" == typeof e.args[0] && (this.onSwiped = e.args[0]),
                        this.onTouchStart = this.onTouchStart.bind(this),
                        this.onTouchMove = this.onTouchMove.bind(this),
                        this.onTouchEnd = this.onTouchEnd.bind(this)
                    },
                    onBind: function() {
                        var e, t, r;
                        this.onSwiped && (null == (e = this.linkCtx) || e.elem.addEventListener("touchstart", this.onTouchStart, !1),
                        null == (t = this.linkCtx) || t.elem.addEventListener("touchmove", this.onTouchMove, !1),
                        null == (r = this.linkCtx) || r.elem.addEventListener("touchend", this.onTouchEnd, !1))
                    },
                    onUnbind: function() {
                        var e, t, r;
                        null == (e = this.linkCtx) || e.elem.removeEventListener("touchstart", this.onTouchStart, !1),
                        null == (t = this.linkCtx) || t.elem.removeEventListener("touchmove", this.onTouchMove, !1),
                        null == (r = this.linkCtx) || r.elem.removeEventListener("touchend", this.onTouchEnd, !1)
                    },
                    onTouchStart: function(e) {
                        const t = e.changedTouches[0];
                        this.startX = t.pageX,
                        this.startY = t.pageY,
                        e.cancelable && e.preventDefault()
                    },
                    onTouchMove: function(e) {
                        const t = e.changedTouches[0];
                        this.deltaX = t.pageX - this.startX,
                        this.deltaY = t.pageY - this.startY,
                        e.cancelable && e.preventDefault()
                    },
                    onTouchEnd: function(e) {
                        const t = Math.atan2(-this.deltaY, -this.deltaX)
                          , r = 3 * Math.PI / 4
                          , n = Math.PI / 4;
                        let s;
                        s = n <= t && t <= r ? "up" : -r <= t && t <= -n ? "down" : -r < t && t < r ? "left" : "right",
                        (Math.abs(this.deltaX) >= this.threshold || Math.abs(this.deltaY) >= this.threshold) && this.onSwiped(s),
                        e.cancelable && e.preventDefault()
                    }
                }
            });
            var ws = Object.defineProperty
              , _s = Object.defineProperties
              , Ss = Object.getOwnPropertyDescriptors
              , Cs = Object.getOwnPropertySymbols
              , Is = Object.prototype.hasOwnProperty
              , ks = Object.prototype.propertyIsEnumerable
              , Ps = (e, t, r) => t in e ? ws(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , Ms = (e, t, r) => Ps(e, "symbol" != typeof t ? t + "" : t, r);
            const {CARDS_DETAIL: Ts, CARDS_LIST: Es, CARDS_SLIST: Ds} = o.A;
            wb.xnm = function() {
                let e = []
                  , t = {}
                  , r = null;
                const n = 864e5
                  , s = "adultSubjectIds"
                  , i = 36e5
                  , a = 36e5
                  , o = "no-return-subjects.json"
                  , c = "product_colors"
                  , u = "return-days"
                  , d = [7031, 7032, 3382, 3392, 8332, 5020, 8411, 7018, 8251, 6217, 7019, 6296, 6304, 6302, 5783, 5519, 5948, 5814, 5784, 5789, 5813, 5553, 7015, 5779, 5780, 5292, 5293, 5294, 5297, 5478, 8588, 5132, 5129, 5150, 5121, 5126, 8590, 5361, 5127, 5128, 5158, 5193, 5194, 5159, 5019, 5186, 5021, 5023, 5119, 5122, 5125, 5156, 5065, 5050, 5084, 5025, 5037, 5026, 5086, 5040, 5043, 5045, 5046, 5052, 5064, 5066, 5068, 5070, 5073, 5076, 5085, 5087, 5088, 5091, 8589, 5051, 5090, 7014, 5117, 5118, 7025, 7733, 5069, 5071, 5120, 4256, 3489, 5075, 5080, 5197, 5534, 5482, 5288, 53, 5289, 5039, 2909, 5273, 2603, 2604, 2606, 2611, 3490, 2610, 2612, 7710, 2616, 2609, 2613, 2618, 5360, 2602, 2605, 5630, 7540, 5074, 5067, 2617, 2607, 7571, 6998, 5116, 5042, 5668, 2608, 5083, 2614, 5082, 5047, 8145, 5044, 7016, 5328, 7731, 8256, 5332, 5925, 5340, 5355, 7666, 7655, 5576, 7106, 5593, 5356, 7020, 5812, 400, 5049, 7755, 8110, 7012, 5072, 5048, 3517, 2615, 5325, 6303, 5153, 5359, 7770, 8111, 6315, 8248, 5326, 6246, 880, 5324, 5513, 5624, 5295, 8243, 2596, 5296, 5327, 1354, 7017, 5354, 5406, 6062, 6976, 7013, 7438, 5497, 5353, 5041, 5298, 7732, 5880, 6412, 5484, 5357, 3415, 3452, 3451, 3410, 6975, 6986, 6939, 6972, 6980, 6990, 7030, 6981, 6989, 6974, 6977, 6983, 6979, 6984, 6978, 6987, 6982, 6973, 6985, 5089, 5772]
                  , h = [6967]
                  , p = (e, t) => e.rank > t.rank ? 1 : e.rank === t.rank ? 0 : -1;
                async function m() {
                    if (e.length > 0)
                        return Promise.resolve();
                    const t = JSON.parse(localStorage.getItem(s));
                    if ((null == t ? void 0 : t.expired) > Date.now() - n)
                        return e = t.info,
                        Promise.resolve();
                    try {
                        const t = "adult-subjects.json"
                          , r = await WbSpaModel.prototype.$httpClient.fetchStatic(t, {
                            timeout: 5e3
                        });
                        return r && 0 !== r.length ? (e = r,
                        null == localStorage || localStorage.putObject(s, {
                            info: r,
                            expired: Date.now() + n
                        }),
                        Promise.resolve()) : (console.warn("Getting adult subjects has failed"),
                        Promise.reject())
                    } catch (e) {
                        return console.warn("Getting adult subjects has failed"),
                        console.error(e.message),
                        Promise.resolve()
                    }
                }
                function b(e) {
                    var t, n, s;
                    return (!r || r.expired < Date.now() - a) && y(),
                    null != (s = null == (n = null == (t = null == r ? void 0 : r.info) ? void 0 : t.returnDaysData) ? void 0 : n.subjects[e]) ? s : null
                }
                async function g(e) {
                    await navigator.locks.request("lock-return-subjects", (async () => {
                        const t = await WbSpaModel.prototype.$httpClient.fetchStatic("", {}, ( () => (0,
                        l.urlStaticBasket)(`data/subjects-return-days-${e}.json`, 0)));
                        if (t) {
                            const n = {
                                info: {
                                    locale: e,
                                    returnDaysData: t
                                },
                                expired: Date.now() + i
                            };
                            localStorage.setItem(u, JSON.stringify(n)),
                            r = n
                        }
                    }
                    ))
                }
                async function y() {
                    var e, t, n, s;
                    try {
                        if (!(null == (e = wb.global.settings.switches) ? void 0 : e.enableReturnSubjectsWithDays))
                            return;
                        r || window.addEventListener("storage", (e => {
                            e.key === u && e.newValue && (r = JSON.parse(e.newValue))
                        }
                        ));
                        const o = null != (t = WbSpaModel.prototype.$user.getLocale()) ? t : wb.settings.currentLocale
                          , c = localStorage.getItem(u);
                        if (c) {
                            const e = JSON.parse(c);
                            if (e.info.locale !== o)
                                g(o);
                            else if (e.expired > Date.now() - a)
                                r = e;
                            else {
                                const t = () => (0,
                                l.urlStaticBasket)("data/subjects-return-days-front.json.hash", 0);
                                await WbSpaModel.prototype.$httpClient.fetchStatic("", {}, t) === e.info.returnDaysData.hash ? (localStorage.setItem(u, JSON.stringify({
                                    info: e.info,
                                    expired: Date.now() + i
                                })),
                                n = ( (e, t) => {
                                    for (var r in t || (t = {}))
                                        Is.call(t, r) && Ps(e, r, t[r]);
                                    if (Cs)
                                        for (var r of Cs(t))
                                            ks.call(t, r) && Ps(e, r, t[r]);
                                    return e
                                }
                                )({}, e),
                                s = {
                                    expired: Date.now() + i
                                },
                                r = _s(n, Ss(s))) : g(o)
                            }
                        } else
                            g(o)
                    } catch (e) {
                        console.warn("Initializing return-days has failed"),
                        console.error(e.message)
                    }
                }
                function f(e) {
                    const r = t[e];
                    if (!r)
                        return !1;
                    let n;
                    switch (WbSpaModel.prototype.$user.getLocale()) {
                    case "by":
                        n = 2;
                        break;
                    case "kz":
                        n = 3;
                        break;
                    case "kg":
                        n = 4;
                        break;
                    case "am":
                        n = 5;
                        break;
                    case "uz":
                        n = 13;
                        break;
                    default:
                        n = 1
                    }
                    return !!(r & 1 << n - 1)
                }
                function v(t, r) {
                    const n = e.length > 0 ? e : d;
                    return -1 !== n.indexOf(t) || !!r && -1 !== n.indexOf(r)
                }
                function w(e, t) {
                    const r = h;
                    return -1 !== r.indexOf(e) || !!t && -1 !== r.indexOf(t)
                }
                class _ {
                    constructor(e) {
                        Ms(this, "width", 0),
                        Ms(this, "weight", 0),
                        Ms(this, "length", 0),
                        Ms(this, "depth", 0),
                        Ms(this, "v"),
                        Ms(this, "sum3d"),
                        null == e || e.forEach((e => {
                            "Вес с упаковкой (кг)" === e.name && (this.weight = parseFloat(e.value) || 0),
                            "Ширина упаковки (мм)" === e.name && (this.width = parseInt(e.value, 10) || 0),
                            "Длина упаковки (мм)" === e.name && (this.length = parseInt(e.value, 10) || 0),
                            "Высота упаковки (мм)" === e.name && (this.depth = parseInt(e.value, 10) || 0)
                        }
                        )),
                        this.v = this.width / 1e3 * (this.length / 1e3) * (this.depth / 1e3),
                        this.sum3d = this.width + this.length + this.depth
                    }
                }
                const S = (e, t) => {
                    if (e) {
                        if (!wb.currencies.localeWithCoins.includes(String(t)))
                            return e.toString().slice(0, -2);
                        const r = e.toString();
                        return `${r.slice(0, -2) || "0"}.${r.slice(-2)}`
                    }
                    return ""
                }
                ;
                function C(e, t=!1) {
                    if (t && e.pics > 0)
                        return !0;
                    if (!e.price)
                        return !1;
                    if (0 === e.pics || !e.sizes || 0 === e.sizes.length)
                        return !1;
                    for (let t = 0; t < e.sizes.length; t++) {
                        const r = e.sizes[t];
                        if (r.stocks && r.stocks.length > 0)
                            return !0
                    }
                    return !1
                }
                function I(e, t=!1) {
                    return !!(t && e.pics > 0) || !(0 === e.pics || !e.price || !e.sizes || 0 === e.sizes.length)
                }
                function k(e, t) {
                    return !t || !e.isAdult
                }
                function P() {
                    var e, t;
                    return wb.global.settings.switches.enableNewRangingDeferred ? WbSpaModel.prototype.checkMobileRange(Number(WbSpaModel.prototype.$user.getId()), (null == (t = null == (e = wb.global.settings.mobileAppVariables) ? void 0 : e.objects) ? void 0 : t.enableNewRangingDeferredRange) || []) : WbSpaModel.prototype.$analitic.checkDataInSplitterServiceV2("common", "ab_adv_waiting_wish_u_see", "yes")
                }
                function M(e, t, r) {
                    const n = new URLSearchParams(e);
                    return t && n.set("dest", t.toString()),
                    r && n.set("curr", r.toLowerCase()),
                    WbSpaModel.prototype.$analitic.appendSplitInfoV2(n, "catalog"),
                    n.set("lang", wb.currentLanguage),
                    n
                }
                function T(e, t, r, n) {
                    return `${(e => e ? Ts : Es)(r)}?${e}&nm=${t.join(";")}${!r && n ? "&ignore_stocks=true" : ""}`
                }
                async function E(e, t) {
                    return WbSpaModel.prototype.$httpClient.fetchJSON(e, {
                        xhrFields: {
                            withCredentials: !1
                        },
                        dataType: "json"
                    }, {
                        timeout: t,
                        addAuthHeader: !0,
                        addCatalogCaptcha: !0,
                        retry: 2,
                        nullOnError: !0
                    })
                }
                function D(e, t=!1, r=!1, n=null, s=null) {
                    return new Promise(( (i, a) => {
                        Promise.all([wb.user.getXinfo(), m()]).then(( ([o]) => {
                            var l, c;
                            const u = [];
                            let d = [];
                            const h = M(o, n, s);
                            e.forEach((e => {
                                100 === d.length && (u.push(E(T(h, d, t, r))),
                                d = []),
                                d.push(e)
                            }
                            )),
                            d.length > 0 && u.push(E(T(h, d, t, r)));
                            const p = {}
                              , m = h.get("curr").toUpperCase()
                              , b = Number(h.get("spp"))
                              , g = Number(h.get("dest"))
                              , y = !(null != (c = null == (l = wb.global.settings.variables.withLogisticsCountries) ? void 0 : l.includes(WbSpaModel.prototype.$user.getLocale())) && c)
                              , f = wb.xnm.show2025Logistics();
                            Promise.all(u).then((e => {
                                e.forEach((e => {
                                    var t;
                                    0 === (t = e).state && t.data.products && t.data.products.forEach((e => {
                                        var t;
                                        e.name = (null == (t = e.name) ? void 0 : t.length) > 0 ? e.name : wb.i18n.t("productCard.noNameSpecified"),
                                        e.isAdult = e.isAdult || v(e.subjectId, e.subjectParentId),
                                        e.isAlcohol = e.isAlcohol || w(e.subjectId, e.subjectParentId),
                                        e.currency = m,
                                        e.spp = b,
                                        e.dest = g,
                                        e.isC2C = W(e.viewFlags),
                                        O(e),
                                        A(e, y, f),
                                        e.price.priceToShow || (e.soldOut = !0),
                                        e.is2025LogisticCost = e.price.logisticsToShow > 0 && f,
                                        e.isC2C = W(e.viewFlags),
                                        p[e.id] = e
                                    }
                                    ))
                                }
                                )),
                                i(p)
                            }
                            )).catch((e => {
                                console.log(`${e.statusText} ${e.responseText}`),
                                a()
                            }
                            ))
                        }
                        ))
                    }
                    ))
                }
                function A(e, t=!0, r=!1) {
                    var n, s;
                    if (!e || !e.sizes)
                        return;
                    let i, a = !1;
                    const o = WbSpaModel.prototype.$user.getUserGradeFromCache()
                      , l = e.premiumSale > 0 && ((null == o ? void 0 : o.isPremium) || (null == e ? void 0 : e.showPremium))
                      , c = null != (n = null == o ? void 0 : o.priceAdjustmentPercent) ? n : 0
                      , u = wb.settings.b2bMode || e.isPriceAdjustmentDisabled && c < 0 ? 0 : c
                      , d = Math.abs(u)
                      , h = 15 & e.dtype;
                    e.priceAdjustmentPercent = 10 !== h && 13 !== h && 0 !== u ? u : 0,
                    e.premiumSalePercent = WbSpaModel.prototype.$auth.isAuth && null != (s = e.premiumSale) ? s : 0,
                    l || (e.premiumSale = 0),
                    e.sizes.forEach((n => {
                        var s;
                        if (!n.price)
                            return;
                        n.price.product || delete n.stocks;
                        let c = t ? n.price.total : n.price.product;
                        n.price.priceForBasket = n.price.total;
                        let u = 0;
                        const h = null != (s = e.priceAdjustmentPercent) ? s : 0;
                        if (n.price.premiumSaleAmount = 0,
                        !wb.global.settings.switches.enableNewCalculationOfLogistic || t || !o || 64 & (null == n ? void 0 : n.dtype) && !(o.return_fee > 1) ? n.price.logisticsToShow = n.price.logistics : n.price.logisticsToShow = function(e, t, r) {
                            if (0 === r || 0 === e.logistics)
                                return 0;
                            return 100 * wb.priceHelper.calculateDiscount(e.logistics / 100, 100 * r, t, !0)
                        }(n.price, e.currency, o.return_fee),
                        0 !== e.priceAdjustmentPercent && (u = 100 * wb.priceHelper.calculateDiscount(n.price.product / 100, d, e.currency),
                        c -= h > 0 ? u : -u),
                        l) {
                            const t = wb.priceHelper.calculateDiscount((n.price.product - (h > 0 ? u : -u)) / 100, e.premiumSale, e.currency);
                            c -= 100 * t,
                            n.price.premiumSaleAmount = t
                        }
                        const p = t ? c : c + n.price.logistics;
                        n.price.paymentDiscountAmount = wb.settings.b2bMode ? 0 : wb.priceHelper.calcWalletDiscount(c / 100, p / 100, e.currency, n.saleConditions, 0, wb.settings.walletRidLimit),
                        r && (c += n.price.logisticsToShow);
                        const m = ~~(100 * (n.price.basic - c) / n.price.basic);
                        n.price.sale = m > 0 ? m : 0,
                        n.price.priceToShow = c,
                        (n.price.basic < c || n.price.basic === c && Number(n.sale) > 0 || n.price.sale <= wb.global.settings.variables.pricesDeltaToShowSale) && (n.price.basic = c,
                        n.price.sale = 0),
                        i || (i = n),
                        i.price.priceToShow !== n.price.priceToShow && (a = !0),
                        (i.price.priceToShow > n.price.priceToShow || i.price.priceToShow == n.price.priceToShow && n.time1 + n.time2 < i.time1 + i.time2) && (i = n)
                    }
                    )),
                    i ? (e.price = i.price,
                    e.time1 = i.time1,
                    e.time2 = i.time2) : e.price = {},
                    a && (e.diffPrice = !0)
                }
                function O(e, t, r) {
                    var n, s, i, a, o;
                    return e ? (t || (t = null != (o = null != (a = null == (s = null == (n = e.sizes) ? void 0 : n.filter((e => e.payload))) ? void 0 : s[0]) ? a : null == (i = e.sizes) ? void 0 : i[0]) ? o : e),
                    t && t.saleConditions ? (1 & t.saleConditions && (e.isUnrefusable = !0),
                    2 & t.saleConditions && (e[1 === r ? "needPrepay" : "isPrepaid"] = !0),
                    4 & t.saleConditions && (e.isUnreturnable = !0),
                    8 & t.saleConditions && (e.isVerificationReturn = !0),
                    128 & t.saleConditions && (e.isWbInstCompliant = !0),
                    1048576 & t.saleConditions && (e.wltSaleBan = !0),
                    536870912 & t.saleConditions && (e.isPostpaidBooking = !0),
                    t.saleConditions >= 4096 && wb.global.settings.switches.enableCashback && "ru" == WbSpaModel.prototype.$user.getLocale() && "ru" === wb.settings.currentLocale && "RUB" == e.currency ? e.cashbackPercent = t.saleConditions >> 13 & 31 : e.cashbackPercent = 0,
                    e.premiumSale = t.saleConditions >> 22 & 31,
                    e.isPriceAdjustmentDisabled = !!(t.saleConditions >> 30 & 1),
                    e) : e) : e
                }
                function B() {
                    try {
                        return localStorage.getObject(c) || {}
                    } catch (e) {
                        return console.warn("[ProductColorsCache]: failed to read from local storage", e),
                        {}
                    }
                }
                function L(e) {
                    var t;
                    const r = {
                        isOnlyColor: !1,
                        value: ""
                    }
                      , n = (e || []).map((e => {
                        var t;
                        if (e.is_variable) {
                            const r = /^[\d.,]+$/
                              , n = null == (t = e.variable_values) ? void 0 : t.filter((e => !r.test(e) && Boolean(e))).join(", ");
                            if (!(4 !== e.charc_type && 5 !== e.charc_type || r.test(e.value)))
                                return {
                                    value: e.value,
                                    name: e.name
                                };
                            if (n)
                                return {
                                    value: n,
                                    name: e.name
                                }
                        }
                        return null
                    }
                    )).filter((e => Boolean(e))).splice(0, 3);
                    return 1 == (null == n ? void 0 : n.length) && "Цвет" == (null == (t = n[0]) ? void 0 : t.name) ? (r.isOnlyColor = !0,
                    r.value = null == n ? void 0 : n.map((e => e.value)).toString(),
                    r) : (null == n ? void 0 : n.length) >= 1 ? (r.isOnlyColor = !1,
                    r.value = null == n ? void 0 : n.map((e => e.value)).join(" • "),
                    r) : null
                }
                function x(e, t=!1, r=!1) {
                    var n, s, i, a, o, l, c, u, d, h, p;
                    const m = !(null != (s = null == (n = wb.global.settings.variables.withLogisticsCountries) ? void 0 : n.includes(WbSpaModel.prototype.$user.getLocale())) && s)
                      , b = wb.xnm.show2025Logistics()
                      , g = null != (l = null == (a = null == (i = e.sizes) ? void 0 : i.filter((e => e.payload))) ? void 0 : a[0]) ? l : null == (o = e.sizes) ? void 0 : o[0];
                    O(e, g),
                    A(e, m, b);
                    const y = null != (c = e.price) ? c : {}
                      , f = 20624 === e.brandId || 30624 === e.siteBrandId
                      , _ = 0 !== e.priceAdjustmentPercent ? wb.priceHelper.calculateDiscount(y.product / 100, Math.abs(null != (u = e.priceAdjustmentPercent) ? u : 0), e.currency) : 0
                      , C = e.premiumSale > 0 && ((null == (d = WbSpaModel.prototype.$user.getUserGradeFromCache()) ? void 0 : d.isPremium) || (null == e ? void 0 : e.showPremium)) ? wb.priceHelper.calculateDiscount(y.product / 100 - ((null != (h = e.priceAdjustmentPercent) ? h : 0) > 0 ? _ : -_), e.premiumSale, e.currency) : 0
                      , I = wb.global.settings.switches.enableCashback && e.cashbackPercent > 0 && !e.soldOut ? wb.priceHelper.calculateDiscount(y.product / 100 - _ - C, e.cashbackPercent, e.currency) : 0
                      , k = S(y.priceToShow, e.currency)
                      , P = S(y.product, e.currency)
                      , M = 15 & (null == g ? void 0 : g.dtype)
                      , T = 2 === M || 7 === M || !1
                      , E = !e.soldOut && "RUB" == e.currency && "ru" == WbSpaModel.prototype.$user.getLocale()
                      , D = {
                        rcId: e.rcId,
                        nmId: e.id,
                        cod1S: e.id,
                        imtId: e.root,
                        name: e.name,
                        pics: e.pics,
                        subjectId: e.subjectId,
                        subjectParentId: e.subjectParentId,
                        kindId: e.kindId,
                        brand: e.brand,
                        brandId: e.siteBrandId,
                        brandCod: e.brandId,
                        price: S(y.basic, e.currency),
                        salePrice: k,
                        productSalePrice: P,
                        priceForBasket: S(y.priceForBasket, e.currency),
                        logisticsCost: y.logisticsToShow,
                        colorCodes: e.colors.map((e => e.id)),
                        sale: y.sale,
                        priceDiff: e.diffPrice,
                        star: e.rating,
                        reviewRating: e.reviewRating,
                        feedbacks: e.feedbacks,
                        feedbackPoints: E ? e.feedbackPoints : void 0,
                        adult: e.isAdult || v(e.subjectId, e.subjectParentId) || !1,
                        isPostpaidBooking: e.isPostpaidBooking || !1,
                        isBooking: 10 == (15 & (null == g ? void 0 : g.dtype)) || !1,
                        isAlcohol: e.isAlcohol || w(e.subjectId, e.subjectParentId) || !1,
                        isDigitalGood: e.isDigital || !1,
                        sizes: R(e.sizes, t, r, e.currency),
                        panelPromoId: e.panelPromoId,
                        promoTxt: e.promoTextCat,
                        promoTextCard: e.promoTextCard,
                        color: e.colors.map((e => e.name)).join(","),
                        woSize: 1 === (null == (p = e.sizes) ? void 0 : p.length) && "" === g.name,
                        canQuickOrder: !e.isDigital,
                        soldOut: e.soldOut || !1,
                        deliveryHours: (e.time1 || 0) + (e.time2 || 0),
                        fastestStore: e.wh,
                        isPreorder: 5772 === e.brandId && wb.settings.preOrderList.includes(e.id),
                        currency: e.currency,
                        spp: e.spp,
                        dest: e.dest,
                        saleConditions: null == g ? void 0 : g.saleConditions,
                        isUnrefusable: e.isUnrefusable,
                        isPrepaid: e.isPrepaid,
                        isUnreturnable: e.isUnreturnable,
                        isVerificationReturn: e.isVerificationReturn,
                        dist: e.dist,
                        time1: e.time1,
                        time2: e.time2,
                        totalQuantity: e.totalQuantity,
                        payloadV2: null == g ? void 0 : g.payload,
                        optionId: null == g ? void 0 : g.optionId,
                        whDtype: null == g ? void 0 : g.dtype,
                        logs: e.logs,
                        supplierId: e.supplierId,
                        supplier: $.views.helpers.supplierFineName(e.supplier, e.brandId),
                        supplierRating: e.supplierRating,
                        sort: e.sort || 0,
                        viewFlags: e.viewFlags,
                        shouldShowOriginalMark: !f && !!(8 & e.viewFlags),
                        paymentDiscountAmount: y.paymentDiscountAmount,
                        premiumSaleAmount: y.premiumSaleAmount,
                        catalogPrice: y,
                        supplierFlags: e.supplierFlags,
                        normQuery: e.normQuery,
                        rs: e.rs,
                        isAdv: F(e),
                        isDbs: T,
                        extraAnaliticsCode: e.extraAnaliticsCode,
                        preset_type: e.preset_type,
                        premiumSale: e.premiumSale,
                        premiumSalePercent: e.premiumSalePercent,
                        isAccentSnippet: wb.global.settings.switches.enablePremiumSellerAccent && !!(8 & e.supplierFlags),
                        isPremiumSeller: !!(1 & e.supplierFlags),
                        cashbackPercent: e.cashbackPercent,
                        cashbackAmount: I,
                        hideMultipleSellers: !!(2 & e.supplierFlags) && Boolean(wb.global.settings.switches.hideMultipleSellersLever),
                        priceWithCouponAndDiscount: String(k),
                        productPriceWithCouponAndDiscount: P,
                        is2025LogisticCost: y.logisticsToShow > 0 && b,
                        isWbInstCompliant: e.isWbInstCompliant || !1,
                        siteBrandId: e.siteBrandId,
                        wbaMeta: e.meta,
                        isC2C: W(e.viewFlags),
                        catalog_type: e.catalog_type,
                        catalog_value: e.catalog_value,
                        recid: e.recid
                    };
                    return wb.settings.b2bMode && N(D.viewFlags) && (D.isVatRefundable = !0,
                    D.vatPercent = U(D.viewFlags)),
                    j(D.panelPromoId) && (D.showRedPrice = !0),
                    D.isC2C && (D.paymentDiscountAmount = 0,
                    D.brand = "",
                    D.brandId = 0,
                    D.showRedPrice = !1,
                    D.priceDiff = !1,
                    D.sale = 0,
                    D.panelPromoId = 0),
                    function(e) {
                        if (!WbSpaModel.prototype.$auth.isAuth || !e.totalQuantity || e.totalQuantity > 1e3)
                            return;
                        WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(Number(e.panelPromoId)) && (e.showThermometer = !0)
                    }(D),
                    D
                }
                const R = (e, t=!1, r=!1, n=null) => {
                    if (null == e)
                        return;
                    e.sort(( (e, t) => e.rank - t.rank));
                    let s = e;
                    return t && (s = e.filter((e => e.stocks && e.stocks.length > 0))),
                    s.map((e => {
                        var t;
                        const s = {
                            ch: e.optionId,
                            s: 1,
                            nm: e.origName,
                            rusNm: e.name,
                            stocks: null != (t = e.stocks) ? t : [{
                                wh: e.wh,
                                dtype: e.dtype,
                                qty: 1,
                                time1: e.time1,
                                time2: e.time2
                            }],
                            unavailable: !!e.stocks && e.stocks.length <= 0,
                            payloadV2: e.payload,
                            saleConditions: e.saleConditions,
                            whDtype: e.dtype,
                            deliveryHours: (e.time1 || 0) + (e.time2 || 0)
                        };
                        return r && e.price && n && (s.price = S(e.price.basic, n),
                        s.salePrice = S(e.price.priceToShow, n),
                        s.priceForBasket = S(e.price.priceForBasket, n),
                        s.catalogPrice = e.price,
                        s.returnCost = e.price.return,
                        s.logisticsCost = e.price.logisticsToShow),
                        s
                    }
                    ))
                }
                ;
                function F(e) {
                    return e && !!(64 & e.viewFlags)
                }
                function j(e) {
                    return Boolean(WbSpaModel.prototype.$promotionsHelper.isRedPriceNeeded(Number(e)))
                }
                function N(e) {
                    return Boolean(Number(e) >> 14 & 1)
                }
                function U(e) {
                    switch (Number(e) >> 18 & 15) {
                    case 0:
                    case 1:
                    case 6:
                        return null;
                    case 2:
                        return 5;
                    case 3:
                        return 7;
                    case 4:
                        return 10;
                    case 5:
                        return 20;
                    default:
                        return
                    }
                }
                function W(e) {
                    return !!e && Boolean(!!(8388608 & e))
                }
                return {
                    getGoodsForRecommendAndCatalog: function(e, t, r, n) {
                        return new Promise(( (s, i) => {
                            const a = [];
                            if (!e)
                                return void s(a);
                            const o = n;
                            D(e, o, t).then((i => {
                                e.forEach((e => {
                                    if (i[e]) {
                                        const s = i[e];
                                        if (o) {
                                            if (s && C(s, t) && k(s, r)) {
                                                const e = x(s, !n, !0);
                                                a.push(e)
                                            }
                                        } else if (s && I(s, t) && k(s, r)) {
                                            const e = x(s, !1, !0);
                                            a.push(e)
                                        }
                                    }
                                }
                                )),
                                s(a)
                            }
                            )).catch(( () => {
                                e.forEach((e => {
                                    a.push({
                                        nmId: e,
                                        cod1S: e,
                                        isFail: !0
                                    })
                                }
                                )),
                                s(a)
                            }
                            ))
                        }
                        ))
                    },
                    getXnmProducts: D,
                    getInfoForWbaStat: async function(e, t) {
                        try {
                            const r = e.map((e => e.nmId))
                              , n = t ? await t : await D(r);
                            return e.reduce(( (e, t) => {
                                var r, s, i;
                                const {nmId: a, size: o} = t;
                                let l = null;
                                if (null == n ? void 0 : n.hasOwnProperty(t.nmId)) {
                                    const e = n[a]
                                      , t = null == (s = null == (r = e.sizes.find((e => e.optionId === o))) ? void 0 : r.price) ? void 0 : s.total
                                      , c = o ? e.sizes.find((e => e.optionId === o)) : null == (i = R(e.sizes)) ? void 0 : i.filter((e => {
                                        var t;
                                        return (null == (t = e.stocks) ? void 0 : t.length) > 0
                                    }
                                    ))[0];
                                    l = {
                                        salePrice: Number(t) / 100,
                                        stores: null == c ? void 0 : c.stocks
                                    }
                                }
                                return e.set(a, l),
                                e
                            }
                            ), new Map)
                        } catch (e) {
                            return console.error(e),
                            new Map
                        }
                    },
                    getCatalogCards: function(e, t, r, n=!1) {
                        return new Promise(( (s, i) => {
                            const a = {};
                            e.forEach((e => {
                                a[e] = {}
                            }
                            ));
                            const o = n;
                            D(e, o, r).then((e => {
                                Object.values(e).forEach((e => {
                                    const n = a[e.id];
                                    o ? n && C(e, r) && k(e, t) && (e.sizes && e.sizes.length > 0 && e.sizes.sort(p),
                                    a[e.id] = e) : n && I(e, r) && k(e, t) && (e.sizes.sort(p),
                                    a[e.id] = e)
                                }
                                ))
                            }
                            )).then(( () => s(a)), ( () => i()))
                        }
                        ))
                    },
                    convertXProductToSpaCatalogProduct: x,
                    getProductNamesMap: B,
                    getProductColorsByNmIdsAsync: function(e) {
                        return new Promise(( (t, r) => {
                            let n = B()
                              , s = {}
                              , i = [];
                            const a = wb.currentLanguage;
                            if (e.forEach((e => {
                                const t = n[e];
                                !t || !t.dims || "default" !== t.lang && (t.lang || "ru") !== a ? i.push(e) : s[e] = t
                            }
                            )),
                            !i.length)
                                return void t(s);
                            const o = i.map((e => WbSpaModel.prototype.$services.productCard.loadStaticProductAsync(e).then((t => t ? Promise.resolve({
                                lang: t.lang,
                                options: t.options,
                                nmId: t.nm_id,
                                color: t.nm_colors_names,
                                name: t.imt_name,
                                dims: new _(t.options),
                                specs: L(t.options)
                            }) : Promise.resolve({
                                nmId: e,
                                color: ""
                            }))).catch(( () => Promise.resolve({
                                nmId: e,
                                color: ""
                            })))));
                            return Promise.all(o).then((e => {
                                !function(e, t) {
                                    try {
                                        const r = 255;
                                        t = null != t ? t : B(),
                                        e.forEach((e => {
                                            t[e.nmId] = {
                                                nmId: e.nmId,
                                                c: e.color,
                                                n: e.name,
                                                lang: e.lang,
                                                dims: e.dims,
                                                specs: e.specs,
                                                ts: Date.now()
                                            }
                                        }
                                        ));
                                        let n = Object.values(t);
                                        return n.length > r && (n.sort(( (e, t) => t.ts - e.ts)),
                                        n.splice(r),
                                        t = n.reduce(( (e, t) => (e[t.nmId] = t,
                                        e)), {})),
                                        localStorage.putObject(c, t),
                                        t
                                    } catch (e) {
                                        return console.warn("[ProductColorsCache]: failed to update colors map", e),
                                        {}
                                    }
                                }(e, n),
                                t(n)
                            }
                            ))
                        }
                        ))
                    },
                    getMiniProductCard: async function(e) {
                        if (isNaN(e))
                            throw new TypeError("nmId at getMiniProductCard is not a number");
                        const t = await D([e], !0);
                        return t[e] ? x(t[e], !1, !0) : null
                    },
                    proceedPrices: A,
                    waitNoReturnSubjectsInitialized: async function() {
                        if (Object.keys(t).length > 0)
                            return Promise.resolve();
                        const e = JSON.parse(localStorage.getItem(o));
                        if ((null == e ? void 0 : e.expired) > Date.now() - i)
                            return t = e.info,
                            Promise.resolve();
                        try {
                            const e = "no-return-subjects.json"
                              , r = await WbSpaModel.prototype.$httpClient.fetchStatic(e, {
                                timeout: 5e3
                            });
                            return r && 0 !== r.length ? (t = r,
                            null == localStorage || localStorage.putObject(o, {
                                info: r,
                                expired: Date.now() + i
                            }),
                            Promise.resolve()) : (console.warn("Getting subjects has failed"),
                            Promise.reject())
                        } catch (e) {
                            return console.warn("Getting adult subjects has failed"),
                            console.error(e.message),
                            Promise.resolve()
                        }
                    },
                    initializeReturnDays: y,
                    isNoReturnProduct: function(e) {
                        var t;
                        return (null == (t = wb.global.settings.switches) ? void 0 : t.enableReturnSubjectsWithDays) ? !b(e) : f(e)
                    },
                    getReturnDaysBySubject: b,
                    setNoRefund: f,
                    expandSaleConditions: O,
                    fillFeedbacksPayment: async function(e) {
                        if (!wb.global.settings.switches.enableFeedbacksForPoints || !(null == e ? void 0 : e.length))
                            return null;
                        await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPayments(e)
                    },
                    fillFeedbacksPaymentByUser: async function(e) {
                        if (!wb.global.settings.switches.enableFeedbacksForPoints || !(null == e ? void 0 : e.length))
                            return null;
                        await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPaymentsByUser(e)
                    },
                    getFeedbacksPaymentByUser: async function() {
                        return wb.global.settings.switches.enableFeedbacksForPoints ? (await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.getFeedbacksPaymentByUser()) : null
                    },
                    getFeedbacksPaymentByNms: async function(e) {
                        return wb.global.settings.switches.enableFeedbacksForPoints ? (await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.getFeedbacksPaymentByNms(e)) : null
                    },
                    convertOptionsToSpecs: L,
                    isRedPrice: j,
                    isAdvert: F,
                    isB2BProduct: function(e) {
                        return Boolean(e >> 13 & 1)
                    },
                    isRuSeller: function(e) {
                        return 191 === (e >> 6 & 255)
                    },
                    isEmptySellerCountry: function(e) {
                        return 0 === (e >> 6 & 255)
                    },
                    isVatRefundable: N,
                    getVatPercent: U,
                    show2025Logistics: function() {
                        var e, t, r, n;
                        return null != (t = null == (e = wb.global.settings.variables.withLogisticsCountries) ? void 0 : e.includes(WbSpaModel.prototype.$user.getLocale())) && t && (!wb.global.settings.switches.enableDetailingForLogisticVer3 && wb.analitics.checkDataInSplitterServiceV2("common", "ab_enableDetailingForLogisticVer3", "enable") || wb.global.settings.switches.enableDetailingForLogisticVer3 && WbSpaModel.prototype.checkMobileRange(Number(WbSpaModel.prototype.$user.getId()), (null == (n = null == (r = wb.global.settings.mobileAppVariables) ? void 0 : r.objects) ? void 0 : n.detailingForLogisticVer3Range) || []))
                    },
                    isAlcohol: w,
                    isC2C: function(e) {
                        return 13 == (15 & e)
                    },
                    isC2CProduct: W,
                    isDbspProduct: function(e) {
                        return Boolean(14 == (15 & e) && wb.global.settings.switches.enableDBSPInBasket)
                    },
                    getSMergerXnmProducts: function(e, t=null, r=null) {
                        const n = e.distinct().slice(0, 100);
                        return new Promise(( (e, s) => {
                            if (!P() || !n.length)
                                return e([]);
                            Promise.all([wb.user.getXinfo(), m()]).then(( ([s]) => {
                                E(function(e, t) {
                                    return `${Ds}?${e}&nm=${t.join(";")}`
                                }(M(s, t, r), n), 2e3).then((t => {
                                    e(t.products)
                                }
                                )).catch((t => {
                                    console.log(`${t.statusText} ${t.responseText}`),
                                    e([])
                                }
                                ))
                            }
                            ))
                        }
                        ))
                    },
                    useSMerger: P
                }
            }();
            r(25322),
            r(85483),
            r(2157),
            r(22351),
            r(67496);
            var As = r(13203)
              , Os = Object.defineProperty
              , Bs = (e, t, r) => ( (e, t, r) => t in e ? Os(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class Ls {
                static async loadGlobal() {
                    const e = Object.keys(this.polyfills).filter((e => !this.polyfills[e].pageSpecific));
                    return this.load(e)
                }
                static async load(e) {
                    const t = {
                        needed: !1,
                        loaded: [],
                        failed: []
                    }
                      , r = e ? e.filter((e => e in this.polyfills)) : Object.keys(this.polyfills);
                    return await Promise.all(r.map((async e => {
                        const r = this.polyfills[e];
                        if (!r.test() || this.loaded.has(e))
                            return;
                        const n = r.load().then(( () => {
                            this.loaded.add(e),
                            t.loaded.push(e)
                        }
                        )).catch(( () => {
                            t.failed.push(e)
                        }
                        ));
                        await n
                    }
                    ))),
                    t.needed = t.loaded.length > 0 || t.failed.length > 0,
                    t
                }
            }
            Bs(Ls, "loaded", new Set),
            Bs(Ls, "polyfills", {
                abortController: {
                    test: () => !("AbortController"in window),
                    load: () => r.e(63043).then(r.bind(r, 20272))
                },
                formData: {
                    test: () => !("FormData"in window) || !("get"in FormData.prototype),
                    load: () => r.e(11025).then(r.bind(r, 24984))
                },
                webLocks: {
                    test: () => "undefined" != typeof navigator && !navigator.locks,
                    load: () => r.e(96977).then(r.bind(r, 51731))
                },
                svgClassList: {
                    test: () => "undefined" != typeof SVGElement && !("classList"in SVGElement.prototype),
                    load: () => r.e(62045).then(r.bind(r, 17956)).then((e => e.applySVGClassListPolyfill())),
                    pageSpecific: !0
                },
                arrayFindLast: {
                    test: () => !("findLast"in Array.prototype),
                    load: () => r.e(54130).then(r.bind(r, 1727)).then((e => e.applyFindLastPolyfill()))
                },
                stringReplaceAll: {
                    test: () => !("replaceAll"in String.prototype),
                    load: () => r.e(49916).then(r.bind(r, 19547)).then((e => e.applyReplaceAllPolyfill()))
                },
                arrayFlatMap: {
                    test: () => !("flatMap"in Array.prototype),
                    load: () => r.e(74212).then(r.bind(r, 38567)).then((e => e.applyFlatMapPolyfill()))
                }
            });
            const {JOURNAL_HOST: $s} = o.A
              , xs = new RegExp(["www.wildberries.ru", "www.wildberries.by", "www.wildberries.kz", "www.wildberries.kg", "www.wildberries.am", "www.wildberries.tj", "www.wildberries.ge", "www.wildberries.uz", "www.wildberries.global", "global.wildberries.ru", "localhost", "webapp-*.wbx-site.k8s.dev-el", "webapp-*.wbx-site.k8s.stage-dm", "webapp-*.wbx-site.k8s.prod-el", "webapp-*.wbx-site.k8s.prod-xc", "kg.wildberries.ru", "uz.wildberries.ru", "*.wb.ru", "stage.wildberries.ru", "stage-2.wildberries.ru", "napi.wildberries.ru", "*-napi.wildberries.ru"].map((e => e.replace(/\./g, "\\.").replace(/\*/g, ".*"))).join("|"))
              , Rs = ["mediabasket_route_map", "feedback_route_map", "videonme_route_map", "staticbasket_route_map"];
            wb.utils = Object.assign((null == wb ? void 0 : wb.utils) || {}, Yn),
            de.richPrototype(hs),
            Se.richPrototype(hs),
            J.A.richPrototype(hs),
            oe.richPrototype(hs),
            (0,
            Jn.v)(Yn);
            const Fs = new class {
                getService(e) {
                    const t = (0,
                    f.s)()
                      , r = (0,
                    v.Z1)();
                    return t.loadServiceAsSingletonAsync(e).then(( () => r[e]))
                }
                getServiceOf(e) {
                    return (0,
                    f.s)().loadServiceAsSingletonAsync(e).then((e => e))
                }
                loadModule(e, ...t) {
                    return (0,
                    f.s)().loadModuleAsync(e).then((e => new e(...t)))
                }
            }
            ;
            (0,
            F.e)(Fs);
            const js = cs.factory();
            (0,
            y.setHttpClient)(js);
            let Ns = Q.A.factory();
            (0,
            n.r)(Ns);
            const Us = q.factory(Ns);
            (0,
            V.M)(Us),
            (0,
            T.C)(wb.analitics);
            const Ws = Hn.factory(hs);
            (0,
            B.D)(Ws);
            const Hs = Gn.factory();
            (0,
            L.B)(Hs);
            const qs = Nn.factory(hs).init();
            (0,
            f.n)(qs);
            const Vs = Dn.factory(hs);
            (0,
            O.M)(Vs);
            const zs = new class {
                constructor() {
                    _(this, "_data"),
                    _(this, "signInModel"),
                    _(this, "loginPopupInProgress"),
                    0 === window.location.hostname.indexOf("napi") && (S = "auth_token"),
                    this._data = {
                        token: null,
                        data: {},
                        um: {}
                    },
                    this.loginPopupInProgress = !1,
                    this._pull(),
                    window.addEventListener("storage", (e => {
                        e.key === S && this._pull()
                    }
                    ))
                }
                get AUTH_HOST() {
                    let e = wb.settings.currentDomain;
                    return "ge" === e ? "https://wbx-auth-internal.wildberries.ru" : ("kz" === e && (e = "ru"),
                    M + e)
                }
                get isAuth() {
                    var e;
                    return Boolean(null == (e = this._data) ? void 0 : e.token)
                }
                get jwt() {
                    var e;
                    return null == (e = this._data) ? void 0 : e.token
                }
                get jwtData() {
                    var e;
                    return null == (e = this._data) ? void 0 : e.data
                }
                get isUserGuid() {
                    var e;
                    return isNaN(Number(null == (e = this.jwtData) ? void 0 : e.user))
                }
                get um() {
                    var e;
                    return null == (e = this._data) ? void 0 : e.um
                }
                get shard() {
                    var e;
                    return Number(null == (e = this.jwtData) ? void 0 : e.shard_key) || 1
                }
                get sShard() {
                    return $.views.converters.leadZero(this.shard, 2)
                }
                checkSlide() {
                    if (this.jwt) {
                        (this.jwtData ? this._isJwtExpired(this.jwtData) : null) && this._slide()
                    }
                    return this._data
                }
                setToken(e) {
                    try {
                        if (e) {
                            const t = this._tryDecodeJwt(e);
                            if (t) {
                                this._data = {
                                    token: e,
                                    data: t,
                                    um: this._createUm(t)
                                };
                                try {
                                    localStorage.putObject(S, {
                                        token: e
                                    })
                                } catch (e) {}
                                return
                            }
                        }
                        this._data = {
                            token: null,
                            data: {},
                            um: this._createUm()
                        },
                        localStorage.removeItem(S)
                    } catch (e) {}
                }
                async signOut(e) {
                    const t = (0,
                    v.Z1)();
                    if (!this.isAuth)
                        return;
                    const r = new AbortController;
                    setTimeout(( () => r.abort()), 2e3);
                    const n = {
                        method: "POST",
                        credentials: "include",
                        signal: r.signal,
                        headers: {
                            deviceid: t.sessionService.getSession(),
                            "wb-apptype": "web",
                            "wb-appversion": WbSpaModel.appVersion,
                            "Access-Token": this.jwt
                        }
                    };
                    wb.settings.secondHost && (n.headers["x-forwarded-host"] = wb.settings.secondHost,
                    n.headers["x-forwarded-path"] = "/wbx-auth-internal.wildberries/v2/auth"),
                    await this._fetch(P, n).catch((e => Promise.resolve({
                        isNetworkError: !0
                    }))),
                    this.signOutOld(e),
                    this.setToken(null)
                }
                async signOutOld(e) {
                    return (0,
                    y.getHttpClient)().fetchJSON(`/webapi/security/exit?returnUrl=${encodeURIComponent(e || "")}`, {
                        method: "POST"
                    }, {
                        useProccessResponse: !0,
                        addAuthHeader: !0
                    })
                }
                _pull() {
                    var e;
                    const t = "auth_token" === S ? localStorage.getItem("auth_token") : null == (e = localStorage.getObject(S)) ? void 0 : e.token
                      , r = this._tryDecodeJwt(t);
                    this._data = r ? {
                        token: t,
                        data: r,
                        um: this._createUm(r)
                    } : {
                        token: null,
                        data: {},
                        um: this._createUm(r)
                    }
                }
                _isJwtExpired(e) {
                    const t = e.iat || 0;
                    return Date.now() >= 1e3 * (t + 172800)
                }
                _isJwtShortExpired(e) {
                    const t = e.iat || 0;
                    return Date.now() >= 1e3 * (t + 120)
                }
                _slide(e) {
                    try {
                        return this._slideToken(e)
                    } catch (e) {
                        return void wb.spa.logError(e, {
                            msg: "wbx_auth_slide"
                        })
                    }
                }
                _createUm(e) {
                    let t = null == e ? void 0 : e.user;
                    if (t) {
                        t = `user:${t}`;
                        const e = [];
                        for (let r = 0; r < t.length; r++)
                            e.push(129 ^ t.charCodeAt(r));
                        return {
                            userUid: btoa(String.fromCodePoint(...(new TextEncoder).encode(String.fromCharCode.apply(null, e)))),
                            userId: t
                        }
                    }
                    return {
                        userUid: "",
                        userId: ""
                    }
                }
                _tryDecodeJwt(e) {
                    try {
                        if (!e)
                            return null;
                        const [t,r,n] = e.split(".");
                        if (!(t || r || n))
                            return null;
                        const s = atob(r);
                        return s ? JSON.parse(s) || {} : null
                    } catch (e) {
                        return console.error(e),
                        null
                    }
                }
                _fetch(e, t) {
                    return (0,
                    y.getHttpClient)().fetch(this.AUTH_HOST + e, t)
                }
                async _slideToken(e) {
                    const t = (0,
                    v.Z1)();
                    navigator.locks.request("lock-auth-slide", (async r => {
                        var n;
                        if (!this.jwt)
                            return;
                        if (e && !this._isJwtShortExpired(this.jwtData))
                            return;
                        if (!e && !this._isJwtExpired(this.jwtData))
                            return;
                        const s = new AbortController;
                        setTimeout(( () => s.abort()), 1e4);
                        const i = t.sessionService.getSession()
                          , a = {
                            method: "POST",
                            credentials: "include",
                            signal: s.signal,
                            headers: {
                                deviceid: i,
                                "wb-apptype": "web",
                                "wb-appversion": WbSpaModel.appVersion,
                                "Access-Token": this.jwt
                            }
                        };
                        wb.settings.secondHost && (a.headers["x-forwarded-host"] = wb.settings.secondHost,
                        a.headers["x-forwarded-path"] = "/wbx-auth-internal.wildberries/v2/auth");
                        const o = await this._fetch(I, a).then((e => e.ok ? e.json() : {})).then((e => (e.error && wb.spa.logError(new Error(`[wbx_auth_slide]: res: ${e.result}, error: ${e.error}`)),
                        e))).catch(( () => ({})));
                        if (12 !== o.result) {
                            if (0 === o.result && (null == (n = o.payload) ? void 0 : n.sticker) && o.payload.access_token) {
                                const e = {
                                    sticker: o.payload.sticker
                                }
                                  , t = {
                                    method: "POST",
                                    credentials: "include",
                                    signal: s.signal,
                                    headers: {
                                        deviceid: i,
                                        "wb-apptype": "web",
                                        "wb-appversion": WbSpaModel.appVersion
                                    },
                                    body: JSON.stringify(e)
                                };
                                wb.settings.secondHost && (t.headers["x-forwarded-host"] = wb.settings.secondHost,
                                t.headers["x-forwarded-path"] = "/wbx-auth-internal.wildberries/v2/auth");
                                const r = await this._fetch(k, t).then((e => e.ok ? e.json() : {})).then((e => (e.error && wb.spa.logError(new Error(`[wbx_auth_slide_confirm]: res: ${e.result}, error: ${e.error}`)),
                                e))).catch(( () => ({})));
                                12 === r.result ? this.setToken(null) : 0 === r.result && this.setToken(o.payload.access_token)
                            }
                        } else
                            this.setToken(null)
                    }
                    ))
                }
                sendMetrics(e, t) {
                    const r = (0,
                    y.getHttpClient)();
                    if (!window._debug)
                        try {
                            r.fetch(`/webapi/logging/wbxauth/metrics?act=${e}&status=${t}`, {
                                method: "POST"
                            })
                        } catch (e) {}
                }
                async loginPopup(e) {
                    var t;
                    const r = (0,
                    f.s)();
                    if (!this.loginPopupInProgress) {
                        this.loginPopupInProgress = !0;
                        try {
                            if (this.signInModel)
                                this.signInModel.showAuthPopup();
                            else {
                                const n = await r.loadModuleAsync("signInBase");
                                this.signInModel = new n,
                                await (null == (t = this.signInModel) ? void 0 : t.init(!0, e))
                            }
                        } finally {
                            this.loginPopupInProgress = !1
                        }
                    }
                }
            }
            ;
            (0,
            z.B)(zs);
            const Gs = Pn.A.factory(hs);
            (0,
            A.f)(Gs);
            const Ks = new class {
                constructor() {
                    X(this, "eventsDictionary"),
                    this.eventsDictionary = {}
                }
                addEventListener(e, t, {single: r}={}) {
                    const n = this._validateInput(e, t);
                    if (!n.valid)
                        throw n.error;
                    null == this.eventsDictionary[e] && (this.eventsDictionary[e] = []);
                    const s = this.eventsDictionary[e];
                    r && s.includes(t) || s.push(t)
                }
                removeEventListener(e, t) {
                    var r;
                    const n = this._validateInput(e, t);
                    if (!n.valid)
                        throw n.error;
                    const s = this.eventsDictionary[e];
                    this.eventsDictionary[e] = null != (r = null == s ? void 0 : s.filter((e => e !== t))) ? r : []
                }
                dispatchEvent(e) {
                    if (!(e instanceof Event))
                        throw new TypeError("DispatchEvent can be called only with Event instance");
                    if ("" == e.type)
                        throw new TypeError("Event doesnt have sufficient type");
                    const t = this.eventsDictionary[e.type];
                    null == t || t.forEach((t => {
                        e.isPropagationStopped || queueMicrotask(( () => {
                            t(e)
                        }
                        ))
                    }
                    ))
                }
                _validateInput(e, t) {
                    return "string" != typeof e || "" == e ? {
                        valid: !1,
                        error: new TypeError("Event type must be a valid string value")
                    } : t instanceof Function ? {
                        valid: !0
                    } : {
                        valid: !1,
                        error: new TypeError("Callback must be a function")
                    }
                }
            }
            ;
            (0,
            x.O)(Ks);
            const Qs = Qn.factory(hs);
            var Js;
            Js = Qs,
            (0,
            E.setInstance)(D, Js);
            const Ys = $n.factory(hs);
            (0,
            R.G)(Ys);
            const Xs = new class {
                async getUserGender() {
                    const e = (0,
                    v.Z1)()
                      , {userInfo: t} = await e.userData.getUserDataAsync();
                    return t.genderE
                }
                async menuLk(e) {
                    return null == pe && (pe = de.factory(e),
                    await pe.init()),
                    pe
                }
                get recentViews() {
                    return ee
                }
                get promotionsHelper() {
                    return oe
                }
                get observerHelper() {
                    return (0,
                    R.Z)()
                }
                getCurrentXInfoWithClustersAndVectorsAsync(e) {
                    return (0,
                    A.u)().getXinfoWithClustersAndVectors(e)
                }
                isFeedbacksResaleEmployeeEnabled({isSeller: e=!1}) {
                    return Boolean(this.isResaleEnabled({
                        isSeller: e
                    }) && wb.global.settings.switches.enableC2CFeedbacksOnPA)
                }
                generateGuid() {
                    const e = () => Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);
                    return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e()
                }
                isQuestionsResaleEmployeeEnabled({isSeller: e=!1}) {
                    return Boolean(this.isResaleEnabled({
                        isSeller: e
                    }) && wb.global.settings.switches.enableC2CQuestionsOnPA)
                }
                isResaleSupplierLKQuestionsEnabled() {
                    return wb.global.settings.switches.enableSupplierLKc2cQuestions
                }
                isResaleSupplierLKFeedbacksEnabled() {
                    return wb.global.settings.switches.enableSupplierLKc2cFeedbacks
                }
                isResaleOnboardingEnabled() {
                    return wb.global.settings.switches.enableC2CResaleHowToSend
                }
                isSupportBooking() {
                    return "RUB" === wb.user.getCurrency() && !wb.settings.b2bMode && wb.global.settings.switches.enableSupportBooking
                }
                isUserPremiumEnabled() {
                    var e, t;
                    const r = (0,
                    v.Z1)()
                      , n = (0,
                    z.c)()
                      , s = (0,
                    A.u)()
                      , i = ["ru"];
                    if (wb.global.settings.switches.enableClubInBelarus && i.push("by"),
                    !(null == (e = n.jwtData) ? void 0 : e.user) || !i.includes(wb.settings.currentLocale))
                        return !1;
                    const a = r.userData.getMaskedInfo()
                      , o = "ru" == wb.settings.currentLocale && (null == a ? void 0 : a.phone.startsWith("79")) || "by" == wb.settings.currentLocale && (null == a ? void 0 : a.phone.startsWith("375"));
                    return (null == (t = s.getUserGradeFromCache()) ? void 0 : t.premiumIsAvailable) && o
                }
                isTravelEnabled() {
                    return "ru" === wb.settings.currentLocale
                }
                isTravelEnabledMenu() {
                    return "ru" === wb.settings.currentLocale && "ru" === (0,
                    A.u)().getLocale()
                }
                isTrendEnabledMenu() {
                    const e = (0,
                    A.u)().getLocale()
                      , t = wb.settings.currentLocale;
                    return !(!e || !t) && ("ru" === t && ["ru", "by", "uz", "am"].includes(e) || "ge" === t && "ge" === e)
                }
                isResaleEnabled({isSeller: e=!1}) {
                    var t, r, n;
                    const s = (0,
                    z.c)()
                      , i = (0,
                    v.Z1)();
                    if (wb.settings.b2bMode || !wb.global.settings.switches.enableC2CSales || "ru" !== wb.settings.currentLocale)
                        return !1;
                    const a = parseInt((null == (t = s.jwtData) ? void 0 : t.user) || "") || 0
                      , {isActiveEmployee: o, isEmployeeSynced: l} = i.userData.userData
                      , c = o || l
                      , u = wb.global.settings.switches.enableC2CSalesForAllEmp && c
                      , d = this.checkMobileRange(a, (null == (n = null == (r = wb.global.settings.mobileAppVariables) ? void 0 : r.objects) ? void 0 : n.C2CSalesRangeExternal) || [])
                      , h = u || d;
                    return e ? h && wb.global.settings.switches.enableC2CResaleProfile : h
                }
                checkMobileRange(e, t) {
                    let r = !1;
                    for (let n = 0; n < t.length; n++)
                        if (0 === t[n].fromId && (r = !0),
                        e >= t[n].fromId && e <= t[n].toId)
                            return !0;
                    return !(!r || 0 !== e)
                }
                checkByRange(e) {
                    var t;
                    const r = (0,
                    z.c)()
                      , n = (null != (t = null == e ? void 0 : e.split(";")) ? t : []).map((e => parseInt(e)));
                    if (n.length < 2)
                        return !1;
                    const s = r.jwtData.user || ""
                      , i = isNaN(s) ? Math.abs(s.hashCode()) : parseInt(s);
                    return n.length > 2 ? !!n.find((e => e === i)) : i > n[0] && i <= n[1]
                }
                isRangeEnabledFor(e) {
                    var t;
                    return !(!(null == (t = (0,
                    z.c)().jwtData) ? void 0 : t.user) || !e) && this.checkByRange(e)
                }
                useCatalogReturnCost() {
                    var e, t, r, n;
                    const s = (0,
                    A.u)();
                    return !!(null == (t = null == (e = wb.global.settings) ? void 0 : e.variables) ? void 0 : t.catalogReturnCostLocales) && (null == (n = null == (r = wb.global.settings) ? void 0 : r.variables) ? void 0 : n.catalogReturnCostLocales.includes(s.getLocale()))
                }
                isUserHasAccountWallet() {
                    const e = (0,
                    A.u)().balance;
                    return "active" === (null == e ? void 0 : e.walletStatus) && "account" === (null == e ? void 0 : e.originalWalletType)
                }
                isDesktop() {
                    return he.desktop == wb.settings.displayMode
                }
            }
            ;
            (0,
            K.Z)(Xs);
            const Zs = ye.factory();
            (0,
            me.w)(Zs),
            (0,
            G.Y)(Se),
            wb.user = Gs,
            wb.adult = Vs;
            const ei = {
                currency: Gs.getCurrency(),
                activePositions: [],
                activePositionsTask: new Yn.Deferred
            };
            (0,
            j.U)(ei);
            const ti = {
                storeService: Ht.factory(hs),
                userAddressService: Bt.A.factory(hs),
                cartService: Ot.factory(hs),
                userData: De.factory(hs),
                notifications: ze.factory(hs),
                productCard: ar.factory(hs),
                bannersService: jr.factory(hs),
                apiUserStorage: nn.factory(hs),
                sessionService: on.factory(hs),
                pager: ke,
                retryFetchService: un.factory(hs),
                splitterService: gn.factory(hs),
                favsService: Pe.Y.factory(hs),
                stimulus: Sn.factory(hs),
                aidService: As.A.factory(hs),
                calendarWbIntervals: kn.factory(hs)
            };
            (0,
            v.u)(ti),
            ti.splitterService.init(),
            ti.notifications.init(),
            ti.cartService.init(),
            ti.stimulus.init(),
            ti.userAddressService.init(),
            wb.namespace("spa", function() {
                let e = {}
                  , t = new ps.A;
                const r = new hs
                  , n = e => !(e.transferSize > 0) && (e.decodedBodySize > 0 || e.duration < 3)
                  , s = async e => {
                    const {isEnabled: t, company: n} = localStorage.getObject("b2bMode") || {
                        isEnabled: !1,
                        company: {}
                    };
                    if (t) {
                        const t = new (await qs.loadModuleAsync("userCompaniesManager"))(e);
                        r.$auth.isAuth ? t.restoreState(n) : t.resetB2B()
                    }
                }
                  , i = () => {
                    if (!window.opener || window.opener === window || "esia_unblock_2fa" !== window.name)
                        return;
                    const e = new URLSearchParams(window.location.search)
                      , t = e.get("code")
                      , r = e.get("state");
                    t && r && (window.opener.postMessage({
                        name: "2fa_unblock_params",
                        payload: {
                            code: t,
                            state: r
                        }
                    }),
                    window.close())
                }
                ;
                $.views.loadTemplateDictionaryAsync = $.views.loadTemplateAsync = $.views.helpers.loadTemplateAsync,
                $.views.loadWebApiTemplateAsync = $.views.helpers.loadWebApiTemplateAsync;
                async function a() {
                    var e, t, r;
                    if (!((null == (t = null == (e = wb.global.settings) ? void 0 : e.variables) ? void 0 : t.resourseStatSettings) && "PerformanceObserver"in window && (null == (r = null == PerformanceObserver ? void 0 : PerformanceObserver.supportedEntryTypes) ? void 0 : r.includes("resource"))))
                        return;
                    const s = await wb.user.getShardAsync();
                    for (const e in wb.global.settings.variables.resourseStatSettings) {
                        const t = wb.global.settings.variables.resourseStatSettings
                          , [r,i] = t[e].split(";")
                          , a = parseInt(i)
                          , [o,l] = r.split("-")
                          , c = parseInt(o)
                          , u = parseInt(l);
                        if (s >= c && s <= u && a > 0) {
                            let t = 0;
                            new PerformanceObserver((async r => {
                                var s, i, o, l, c;
                                if (r.getEntries) {
                                    const u = r.getEntries();
                                    for (const r of u.filter((t => t.initiatorType === e))) {
                                        if (t % a === 0 && !n(r)) {
                                            const e = {
                                                url: r.name,
                                                ok: r.responseStatus > 300 ? 1 : 0,
                                                error: r.responseStatus >= 300 ? r.responseStatus : 0,
                                                dns: parseInt(r.domainLookupEnd - r.domainLookupStart),
                                                connect: parseInt(r.connectEnd - r.connectStart),
                                                ttfb: parseInt(r.responseStart - r.requestStart),
                                                load: r.responseStart > 0 ? parseInt(r.responseEnd - r.fetchStart) : 0,
                                                full: parseInt(r.duration),
                                                cache: "HIT" === (null == (i = null == (s = r.serverTiming) ? void 0 : s.find((e => "cache" === e.name))) ? void 0 : i.description) ? 1 : 0,
                                                srv: null != (c = null == (l = null == (o = r.serverTiming) ? void 0 : o.find((e => "srv" === e.name))) ? void 0 : l.description) ? c : "",
                                                size: r.transferSize
                                            };
                                            wb.analitics.sendEvent("performance_static_download", e)
                                        }
                                        t++
                                    }
                                }
                            }
                            )).observe({
                                type: "resource",
                                buffered: !0
                            });
                            let r = 0;
                            new PerformanceObserver((e => {
                                if (e.getEntries) {
                                    const t = e.getEntries();
                                    for (const e of t.filter((e => "img-load-error" === e.name)))
                                        r % a === 0 && wb.analitics.sendEvent("performance_static_download", {
                                            url: e.detail.url,
                                            ok: 0
                                        }),
                                        r++
                                }
                            }
                            )).observe({
                                type: "mark",
                                buffered: !0
                            })
                        }
                    }
                }
                return {
                    _catalogMenuTask: null,
                    init: async e => {
                        const {router: n, menuLkHelper: o} = e;
                        if (await Ls.loadGlobal(),
                        Object.defineProperty(hs, "appVersion", {
                            value: n.appVersion,
                            writable: !1
                        }),
                        Ns.setData(n.routesDictionary, n.tmplHashes),
                        await fs.A.init(),
                        qs.setModules(n.modules),
                        qs.setServices(n.services),
                        wb.displayModeSettings.init(),
                        t.preInit(),
                        Gs.initUser(),
                        wb.global.loadSettingAsync(),
                        wb.global.periodicBasketConfigUpdate(),
                        Ws.init(),
                        await r.menuLk(o),
                        t.init(),
                        wb.network.init(),
                        s(),
                        i(),
                        wb.analitics.getSplitInfo(),
                        await Ns.init(n.ssrModel),
                        !xs.test(window.location.hostname))
                            return wb.spa.logError(new Error(`fishing from ${document.location}`), {
                                referrer: wb.spa.getReferrer(),
                                cookie: document.cookie
                            }),
                            wb.popup.renderModalError(wb.i18n.t("common.errors.phishingSite")),
                            void (wb.spa = null);
                        document.body.addEventListener("load", (e => {
                            var t;
                            const r = e.target;
                            "IMG" === (null == r ? void 0 : r.tagName) && r.complete && (null == (t = r.closest(".img-plug")) || t.classList.remove("img-plug--error"))
                        }
                        ), !0),
                        navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0 || document.body.addEventListener("error", (e => {
                            var t, r;
                            const n = e.target
                              , s = n.closest(".img-plug")
                              , i = n.src;
                            return n.dataset.srcPb && n.dataset.srcPb !== i ? (n.src = n.dataset.srcPb,
                            n.dataset.src && (n.dataset.src = n.dataset.srcPb),
                            delete n.dataset.srcPb,
                            void (null == s || s.classList.remove("load"))) : n.dataset.srcPc && n.dataset.srcPc !== i ? (n.src = n.dataset.srcPc,
                            void delete n.dataset.srcPc) : void ((null == (r = null == (t = wb.global.settings) ? void 0 : t.switches) ? void 0 : r.enableErrorImagePlug) && "IMG" === n.tagName && -1 === n.src.indexOf("/i/blank.gif") && (null == s || s.classList.add("img-plug--error"),
                            null == s || s.classList.remove("load"),
                            null == performance || performance.mark("img-load-error", {
                                detail: {
                                    url: n.src
                                }
                            })))
                        }
                        ), !0),
                        setTimeout(a, 2e3),
                        setTimeout(( () => {
                            WbSpaModel.prototype.$helper.loadJsAsync(wb.settings.scripts.performance)
                        }
                        ), 5e3)
                    }
                    ,
                    registerViewModel: t => {
                        const r = Object.getPrototypeOf(t.prototype);
                        r === Object.prototype ? Object.setPrototypeOf(t.prototype, hs.prototype) : r !== hs.prototype && Object.setPrototypeOf(r, hs.prototype),
                        Ns.getAppliedEntries().forEach((r => {
                            e[r] = t
                        }
                        ))
                    }
                    ,
                    getViewModelByName: t => e[t],
                    redirect: (e, t, r=!1) => {
                        Ns.moveTo(e, t, !1, r)
                    }
                    ,
                    setUserStatus: ({userIsAuth: e, userUid: t, userId: n}) => {
                        $.observable(Ns).setProperty({
                            userIsAuth: e,
                            userUid: t,
                            userId: n
                        }),
                        r.$eventBus.dispatchEvent(new CustomEvent(e ? "onUserAuth" : "onUserUnAuth")),
                        ti.userData.setKey(e, t),
                        r.$getService("orderService").then((e => e.startSync(ti.cartService.publicBasketApiUrl))),
                        r.$getService("wbxOrderService").then((e => e.startSync(ti.cartService.publicBasketApiUrl))),
                        e && r.$getService("groupedDeliveriesService").then((e => e.init()))
                    }
                    ,
                    refresh: () => {
                        Ns.refresh()
                    }
                    ,
                    getMainLayout: () => t,
                    getCatalogMenu: async function() {
                        return this._catalogMenuTask || (this._catalogMenuTask = new Promise((async (e, t) => {
                            const r = new ys;
                            await r.initMenu(),
                            r.isInited ? e(r) : (t(),
                            this._catalogMenuTask = null)
                        }
                        ))),
                        this._catalogMenuTask
                    },
                    clearCatalogMenu: function() {
                        this._catalogMenuTask = null
                    },
                    getReferrer: () => Ns.referrer,
                    restoreB2BState: s,
                    logError: (e, t=null, r=!1) => {
                        if (!window._debug)
                            try {
                                const n = {
                                    msg: null == e ? void 0 : e.message
                                };
                                r && (n.stk = null == e ? void 0 : e.stack),
                                t && (n.data = t);
                                const s = "/webapi/logging/jserror"
                                  , i = {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify(n)
                                };
                                js.fetch(s, i).catch(( () => {
                                    ti.retryFetchService.saveRequest(s, i)
                                }
                                ))
                            } catch (e) {}
                    }
                    ,
                    orderMetrics: e => {
                        try {
                            js.fetch(`/webapi/logging/orders/metrics?status=${e}`, {
                                method: "POST"
                            })
                        } catch (e) {}
                    }
                    ,
                    signIn: (e, t) => {
                        Ns.moveToSignIn(e, t)
                    }
                    ,
                    afterSignOut: () => {
                        wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        }),
                        t.updateAfterLogin()
                    }
                    ,
                    journalLogError: (e=null) => {
                        if (!window._debug && "ge" !== wb.settings.currentLocale)
                            try {
                                const t = `${$s}/api/v1/set`
                                  , r = {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify([e])
                                };
                                js.fetch(t, r).catch(( () => {
                                    ti.retryFetchService.saveRequest(t, r)
                                }
                                ))
                            } catch (e) {}
                    }
                }
            }()),
            wb.namespace("global", function() {
                const e = "user-settings"
                  , t = "global-settings-v2"
                  , r = "cdn-config-v2"
                  , n = 18e4
                  , s = Ce;
                let i, a, o, l, c = [], u = 0;
                window.addEventListener("storage", (e => {
                    if (e.key === t)
                        try {
                            const {data: t} = JSON.parse(String(e.newValue));
                            i = t,
                            h(i.variables.siteMinVersion),
                            c.forEach((e => e(i))),
                            window._debug && console.log("[globalsettings] changed external")
                        } catch (e) {
                            console.error("[globalsettings] changed external failed")
                        }
                    else if (e.key === r) {
                        const t = JSON.parse(e.newValue);
                        t && b(t)
                    }
                }
                ));
                const d = () => {
                    o || (o = setInterval(d, 12e4));
                    return (u >= 2 ? js.fetchText("/webapi/settings/global/hash", void 0, {
                        noCache: !0
                    }) : js.fetchText(wb.helpers.url.urlStaticData("settings-front.json.hash"), void 0, {
                        noCache: !0
                    })).then((e => {
                        var r;
                        if (null == e)
                            throw new Error;
                        if (e !== (null == (r = localStorage.getObject(t)) ? void 0 : r.hash)) {
                            return (u >= 2 ? js.fetchJSON("/webapi/settings/global/get", {
                                headers: {
                                    "Content-Type": "application/json"
                                }
                            }, {
                                noCache: !0
                            }) : js.fetchStatic("settings-front.json", {
                                noCache: !0
                            }, wb.helpers.url.urlStaticData)).then((r => {
                                if (!r)
                                    throw new Error;
                                return i = r,
                                localStorage.putObject(t, {
                                    hash: e,
                                    data: i
                                }),
                                u = 0,
                                window._debug && console.log("[globalsettings] changed"),
                                c.forEach((e => e(i))),
                                h(i.variables.siteMinVersion),
                                Promise.resolve()
                            }
                            )).catch(( () => Promise.resolve()))
                        }
                        return Promise.resolve()
                    }
                    )).catch(( () => (u++,
                    Promise.resolve())))
                }
                  , h = e => {
                    if (!e || !WbSpaModel.appVersion)
                        return;
                    const t = e.split(".")
                      , r = WbSpaModel.appVersion.split(".");
                    if (t.length < 3 || r.length < 3)
                        return;
                    +((parseInt(r[0]) || 0) + ("000" + (parseInt(r[1]) || 0)).slice(-3) + ("000" + (parseInt(r[2]) || 0)).slice(-3)) < +(t[0] + ("000" + t[1]).slice(-3) + ("000" + t[2]).slice(-3)) && window.location.reload()
                }
                  , p = () => a || (a = localStorage.getObject(e),
                a || (a = {
                    closed: [],
                    colorsHitory: [],
                    confirmed: []
                }),
                a.closed || (a.closed = []),
                a.colorsHitory || (a.colorsHitory = []),
                a.confirmed || (a.confirmed = []),
                a)
                  , m = async function() {
                    if ("ge" !== wb.settings.currentLocale && wb.global.settings.switches.enableCdnConfig)
                        if (l)
                            try {
                                await navigator.locks.request(`lock-${r}`, (async e => {
                                    const t = localStorage.getObject(r);
                                    if (t && t.timestamp + n > Date.now())
                                        return;
                                    const s = await js.fetchJSON(`https://cdn.wbbasket.ru/api/v3/upstreams?t=${Date.now()}`, void 0, {
                                        nullOnError: !0,
                                        noCache: !0
                                    });
                                    (null == s ? void 0 : s.recommend) && (null == s ? void 0 : s.origin) && (b(s),
                                    Object.assign(s, {
                                        timestamp: Date.now(),
                                        hash: s.hash
                                    }),
                                    localStorage.putObject(r, s),
                                    localStorage.removeItem("cdn-config"))
                                }
                                ))
                            } catch (e) {
                                wb.spa.logError(e)
                            }
                        else {
                            l = setInterval(m, n);
                            const e = localStorage.getObject(r);
                            e && e.timestamp + n > Date.now() ? b(e) : setTimeout(m, 5e3)
                        }
                }
                  , b = e => {
                    var t;
                    if ("ge" !== wb.settings.currentLocale)
                        for (const r of Rs) {
                            const n = e.origin[r]
                              , s = null != (t = e.recommend[r]) ? t : n;
                            if (!s || !n)
                                continue;
                            let i = `\n                if (!reserve) {\n                    ${g(s[0], r)}\n                } else {\n                 ${g(n[0], r)}\n                }\n            \n            `;
                            const a = new Function("number","reserve",i);
                            a(0),
                            wb.helpers.setImgFunc(r, a)
                        }
                }
                  , g = (e, t, r) => {
                    const n = e => {
                        switch (e) {
                        case "staticbasket_route_map":
                            return "number";
                        case "videonme_route_map":
                            return "number%144";
                        default:
                            return "~~(number/100000)"
                        }
                    }
                    ;
                    let s = "";
                    if ("range" === e.method) {
                        s += `const volId = ${n(t)}; switch (true) {`;
                        for (const t of e.hosts)
                            s += `case volId >= ${t.vol_range_from} && volId <= ${t.vol_range_to}: return \`${t.host}${r ? "fail" : ""}/vol\${volId}\`;`;
                        s += "}"
                    } else if ("mod" === e.method) {
                        const r = e.hosts.length;
                        s += `const volId = ${n(t)}; switch (number % ${r}) {`;
                        for (let t = 0; t < r; t++)
                            s += `case ${t}: return \`${e.hosts[t].host}/vol\${volId}\`;`;
                        s += "}"
                    }
                    return s
                }
                ;
                return {
                    get settings() {
                        const e = i || (i = null != (n = null == (r = localStorage.getObject(t)) ? void 0 : r.data) ? n : s,
                        i);
                        var r, n;
                        return e.switches.enableWbxOrder = !0,
                        e.variables.enableLanguageSwitcher = ["ge", "uz"],
                        e.switches.enableSendPersonalDataGe = !0,
                        wb.settings.wallet.limitVerified = e.variables.wlt2DiscountDisplayMaxPrice,
                        "ge" == wb.settings.currentLocale && (WbSpaModel.prototype.$auth.isAuth || (e.switches.enableUnauthOnlineChat = e.switches.enableUnauthOnlineChatGE),
                        e.switches.enableSellersChat = e.switches.enableSellersChatGE),
                        e.switches.enableChat = WbSpaModel.prototype.$auth.isAuth ? e.switches.enableOnlineChat : e.switches.enableUnauthOnlineChat,
                        e
                    },
                    get userSettings() {
                        return p()
                    },
                    saveUserSettings: () => {
                        localStorage.putObject(e, p()),
                        hs.prototype.$eventBus.dispatchEvent(new CustomEvent("UserSettingsSaved"))
                    }
                    ,
                    periodicBasketConfigUpdate: m,
                    loadSettingAsync: d,
                    subscribe: e => {
                        c.push(e)
                    }
                }
            }())
        },
        77409: function(e, t, r) {
            "use strict";
            r.d(t, {
                A: function() {
                    return z
                }
            });
            var n = {};
            r.r(n),
            r.d(n, {
                dataProceeder: function() {
                    return u
                },
                urlCreator: function() {
                    return c
                }
            });
            var s = class {
                constructor(e) {
                    var t;
                    this.layoutModel = e.layoutModel,
                    this.tmpl = "shortBasketInfoTmpl",
                    this.control = document.querySelector("#basketContent"),
                    this.addressesInfo = null,
                    this.eventsModels = this.layoutModel.$services.notifications.eventsModel,
                    this.profileMenu = null,
                    this.lkMenuMouseEnterHandler = this.lkMenuMouseEnterHandler.bind(this),
                    this.deliveriesPreviewEnterHandler = this.deliveriesPreviewEnterHandler.bind(this),
                    this.toggleControl = this.toggleControl.bind(this),
                    this.authHandler = this.authHandler.bind(this),
                    this.controlState = {
                        hide: !1
                    },
                    this.basketInfo = {
                        IsAuthenticated: this.layoutModel.$auth.isAuth,
                        BasketQuantity: this.layoutModel.$services.cartService.localCount,
                        UserIsPremium: !!this.layoutModel.$auth.isAuth && (null == (t = this.layoutModel.$user.getUserGradeFromCache()) ? void 0 : t.isPremium)
                    },
                    $.templates[this.tmpl].link(this.control, this, {
                        controlState: this.controlState
                    })
                }
                init() {
                    var e, t, r;
                    this.layoutModel.$eventBus.addEventListener("LocalBasketUpdateCount", this._updateLocalBasketCount.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("UserReset", this.update.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("UserGradeUpdated", this.updatePremiumState.bind(this));
                    const n = this.layoutModel.$services.cartService.currentDeliveryType;
                    n && this.layoutModel.$analitic.setCurrentAddress(n.deliveryType, null != (e = n.officeId) ? e : n.addressId),
                    (null == (r = null == (t = this.layoutModel) ? void 0 : t.menuTop) ? void 0 : r.mobileMenu) && this.layoutModel.menuTop.mobileMenu.updateBasket(this.basketInfo.BasketQuantity),
                    window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished && this.toggleControl(!1)
                    }
                    )),
                    this.basketInfo.IsAuthenticated && this.layoutModel.$services.notifications.checkNotificationCountAsync().then((e => {
                        var t, r;
                        (null == (r = null == (t = this.layoutModel) ? void 0 : t.menuTop) ? void 0 : r.mobileMenu) && this.layoutModel.menuTop.mobileMenu.updateEvents(e),
                        $.observable(this.eventsModel).setAllProperty(e)
                    }
                    ))
                }
                update() {
                    var e;
                    const t = {
                        IsAuthenticated: this.layoutModel.$auth.isAuth,
                        BasketQuantity: this.layoutModel.$services.cartService.localCount,
                        UserIsPremium: null == (e = this.layoutModel.$user.getUserGradeFromCache()) ? void 0 : e.isPremium
                    };
                    $.observable(this.basketInfo).setAllProperty(t),
                    (t.IsAuthenticated ? this.layoutModel.$services.notifications.checkNotificationCountAsync() : Promise.resolve({
                        eventsCount: 0
                    })).then((e => {
                        var t, r;
                        (null == (r = null == (t = this.layoutModel) ? void 0 : t.menuTop) ? void 0 : r.mobileMenu) && this.layoutModel.menuTop.mobileMenu.updateEvents(e),
                        $.observable(this.eventsModel).setAllProperty(e)
                    }
                    ))
                }
                updatePremiumState() {
                    var e;
                    $.observable(this.basketInfo).setProperty({
                        UserIsPremium: null == (e = this.layoutModel.$user.getUserGradeFromCache()) ? void 0 : e.isPremium
                    })
                }
                _updateLocalBasketCount(e) {
                    var t, r, n, s;
                    const i = null != (r = null == (t = e.detail) ? void 0 : t.count) ? r : 0;
                    $.observable(this.basketInfo).setProperty({
                        BasketQuantity: i
                    }),
                    (null == (s = null == (n = this.layoutModel) ? void 0 : n.menuTop) ? void 0 : s.mobileMenu) && this.layoutModel.menuTop.mobileMenu.updateBasket(i)
                }
                deliveriesPreviewEnterHandler() {
                    if (this.deliveriesPreview)
                        return this.toggleControl(!0);
                    this.layoutModel.$moduleLoader.loadModuleAsync("deliveriesPreview").then((e => {
                        const t = this.control.querySelector(".j-tooltip-delivery");
                        this.deliveriesPreview = new e,
                        e.template.link(t, this.deliveriesPreview, {
                            controlState: this.controlState
                        }),
                        this.toggleControl(!0)
                    }
                    ))
                }
                lkMenuMouseEnterHandler() {
                    if (this.lkMenuPreview)
                        return this.toggleControl(!0);
                    const e = WbSpaModel.prototype;
                    Promise.all([e.$moduleLoader.loadModuleAsync("cabinetMenuPreview"), e.$user.getBalance().catch((e => Promise.resolve({
                        isNetworkError: !0
                    }))), e.$services.userData.getUserDataAsync()]).then(( ([e,t]) => {
                        const r = this.control.querySelector(".j-tooltip-profile");
                        this.lkMenuPreview = new e(t),
                        this.lkMenuPreview.template.link(r, this.lkMenuPreview, {
                            controlState: this.controlState
                        }),
                        this.lkMenuPreview.onAfterRender(),
                        this.toggleControl(!0)
                    }
                    ))
                }
                toggleControl(e) {
                    $.observable(this.controlState).setProperty({
                        hide: !e
                    })
                }
                async authHandler(e) {
                    e.preventDefault(),
                    WbSpaModel.prototype.$auth.loginPopup()
                }
            }
              , i = r(62145)
              , a = Object.freeze({
                history: 0,
                catalog: 1,
                brands: 2,
                subjects: 3,
                goods: 4,
                grouped: 5,
                tags: 6,
                supplier: 7,
                redirect: 8
            })
              , o = r(28288);
            const l = Object.freeze(new Map([["home", "/"], ["faq", "/services/voprosy-i-otvety"], ["lk", "/lk"], ["notifications", "/lk#notifications"], ["basket", "/lk/basket"], ["delivery", "/lk/myorders/delivery"], ["orders", "/lk/myorders/archive"], ["favorites", "/lk/favorites"], ["favorite_brands", "/lk/favoritebrands"], ["claims", "/lk/claims"], ["feedback", "/lk/discussion/feedback"], ["cards", "/lk#bankCard"], ["sessions", "/lk#personal-safety"], ["balance", "/lk/mywallet/purchases"], ["refunds", "/lk/myrefunds"], ["receipts", "/lk/receipts/get"], ["pickups", "/services/besplatnaya-dostavka"], ["make_refund", "/lk/refund"], ["make_order", "/services/kak-sdelat-zakaz"], ["payment_options", "/services/sposoby-oplaty"], ["goods_refund", "/services/vozvrat-tovara"], ["money_refund", "/services/vozvrat-denezhnyh-sredstv"], ["sale_rules", "/services/pravila-prodazhi"], ["market_rules", "/services/pravila-polzovaniya-torgovoy-ploshchadkoy"], ["about_us", "/services/o-nas"], ["requisites", "/services/rekvizity"], ["press", "/presservice"], ["contacts", "/services/kontakty"], ["bug_bounty", "/services/bug-bounty"]]))
              , c = async () => "https://suggests.wb.ru/suggests/api/v7/hint"
              , u = async (e, t) => {
                const r = e.suggests
                  , n = e.max_tags_rows
                  , s = [];
                if (!Array.isArray(r) && !t)
                    return s;
                if ((!Array.isArray(r) || Array.isArray(r) && 0 === r.length) && t.trim())
                    return [{
                        type: a.catalog,
                        suggestions: [{
                            name: t,
                            search: t,
                            type: 1,
                            typedText: t
                        }]
                    }];
                if (0 !== n) {
                    const e = r.filter((e => "tag" === e.type)).map((e => ({
                        name: e.name,
                        type: a.catalog,
                        typeStr: e.type,
                        pos: e.pos,
                        maxTagsRows: n
                    })));
                    s.push({
                        type: a.tags,
                        suggestions: e
                    })
                }
                const i = r.filter((e => "brand" === e.type || "redirect" === e.type || "external_redirect" === e.type)).map((e => {
                    switch (e.type) {
                    case "brand":
                        return {
                            typeStr: e.type,
                            typeName: wb.i18n.t("common.brand"),
                            name: e.brand_name,
                            search: e.brand_name,
                            brandId: e.brand_id,
                            brandHash: e.brand_hash,
                            typedText: t,
                            type: a.brands,
                            src: $.views.helpers.forBrandLogoFromId(wb.global.settings.switches.brandLogoV3 ? e.brand_id : e.brand_hash),
                            srcReserve: $.views.helpers.forBrandLogoFromId(wb.global.settings.switches.brandLogoV3 ? e.brand_id : e.brand_hash, !0),
                            imgOnError: (0,
                            o.urlSiteStatic)("i/v3/broken-img/brands.jpg"),
                            imgWidth: 32,
                            imgHeight: 13
                        };
                    case "redirect":
                    case "external_redirect":
                        return {
                            typeStr: e.type,
                            typeName: wb.i18n.t("communications.chapter"),
                            name: e.name,
                            search: e.name,
                            id: e.id,
                            typedText: t,
                            type: a.redirect,
                            url: "external_redirect" === e.type ? e.url : l.get(e.id),
                            src: (0,
                            o.urlSiteStatic)("i/v3/shops/wb.webp"),
                            imgWidth: 67,
                            imgHeight: 28
                        }
                    }
                }
                )).filter((e => e));
                s.push({
                    type: a.grouped,
                    suggestions: i
                });
                const c = r.filter((e => "suggest" === e.type)).map((e => ({
                    name: e.name,
                    search: e.name,
                    type: a.catalog,
                    typedText: t,
                    typeStr: e.type,
                    xParams: e.query,
                    xShard: e.shard_key
                }))).slice(0, 7);
                return 0 === c.length && 0 === tagsSuggests.length && t.trim() && c.push({
                    name: t,
                    search: t,
                    type: a.catalog,
                    typedText: t,
                    typeStr: "self"
                }),
                s.push({
                    type: a.catalog,
                    suggestions: c
                }),
                s
            }
              , d = [34, 42]
              , h = [38, 40]
              , p = Object.freeze({
                6: 0,
                0: 1,
                1: 2,
                5: 3
            });
            class m extends WbSpaModel {
                constructor() {
                    super(),
                    this.t = wb.i18n.t,
                    this.searchText = "",
                    this.searchQueryText = "",
                    this.showImageSearch = !1,
                    this.uploadingPhoto = !1,
                    this.suggestions = [],
                    this.allSuggestions = [],
                    this.suggestionsQueue = [],
                    this.prohibitSuggestions = !0,
                    this.searchTagClick = !1,
                    this.onlyTags = !1,
                    this.banners = null,
                    this.isOpenPopup = !1,
                    this.widthScrollbar = Math.abs(window.innerWidth - document.documentElement.clientWidth),
                    this.header = document.querySelector(".j-header"),
                    this.wrapper = document.querySelector(".j-wrapper"),
                    this.fixedBlock = document.querySelector(".j-fixed-block"),
                    this.hasBannerAb = "ru" === this.$user.getLocale() && "ru" === wb.settings.currentLocale && wb.global.settings.switches.enableNewSizeBannerSearch && wb.analitics.checkDataInSplitterServiceV2("common", "ab_enableNewSizeBannerSearch", "yes"),
                    this.enableSearchInSellerOnSplit = wb.analitics.checkDataInSplitterServiceV2("common", "ab_sp_search", "true"),
                    this.enableSearchInSellerOnSettings = wb.global.settings.switches.enableSearchInSeller || this.enableSearchInSellerOnSplit,
                    this.enableSearchInSeller = !1,
                    this.showSellerSuggestions = !1,
                    localStorage.setItem("enableSearchInSeller", this.enableSearchInSeller),
                    this.renderSuggestEventSourcePage = "",
                    this.sellerFilterName.depends = ["sellerFilter^trademark"],
                    this.searchInputPlaceholder.depends = ["sellerFilter^trademark", "enableSearchInSeller"],
                    this.isNewSearchByImage = !0,
                    this.showSuggestionsDebouncer = this.showSuggestionsDebouncer(),
                    this.showSuggestionsDebounced = this.showSuggestionsDebouncer.debounce(this.showSuggestionsOuter.bind(this), 100),
                    this._hideSuggestionsByClick = this._hideSuggestionsByClick.bind(this),
                    this.toggleSearchInSeller = this.toggleSearchInSeller.bind(this),
                    this.changeInputPadding = this.changeInputPadding.bind(this),
                    this.inputPaddingLeft = this.$isDesktop ? "20px" : "12px"
                }
                get allSuggestionsAnalitics() {
                    return this.allSuggestions.map((e => e.name)).join("|")
                }
                get suggestionsJsonString() {
                    const e = {}
                      , t = this.allSuggestions.map((t => {
                        t.typeStr in e || (e[t.typeStr] = 0);
                        const r = e[t.typeStr];
                        return e[t.typeStr] += 1,
                        {
                            type: "history" === t.typeStr ? "hist" : t.typeStr,
                            value: t.name,
                            index: r
                        }
                    }
                    ));
                    return this.$analitic.saveLastSearchAnalyticsDataForSuggest(JSON.stringify(t)),
                    JSON.stringify(t)
                }
                get location() {
                    return {
                        SpaActiveOrdersEntrypoint: "Delivery",
                        SpaCatalogEntrypoint: "Catalog",
                        SpaSearchEntrypoint: "Catalog",
                        SpaBrandsEntrypoint: "Brand",
                        SpaSellerCatalogEntrypoint: "Supplier",
                        SpaArchivePositionsEntrypoint: "Purchases",
                        SpaFavoritesEntrypoint: "Favorites",
                        SpaBasketEntrypoint: "Cart",
                        SpaPersonalCabinetEntrypoint: "LK",
                        SpaHomeEntrypoint: "Main"
                    }[WbSpaModel.prototype.$router.currentRoute.name]
                }
                sellerFilterName() {
                    var e;
                    return this.sellerFilter && (null == (e = this.sellerFilter) ? void 0 : e.trademark) ? this.sellerFilter.trademark : ""
                }
                searchInputPlaceholder() {
                    return this.enableSearchInSeller ? this.t("header.searchInSellerPlaceholder") : this.t("header.searchPlaceholder")
                }
                get lastSuggestShowedText() {
                    var e, t;
                    if (this.allSuggestions.length)
                        return null != (t = null == (e = this.allSuggestions.filter((e => e.typedText))[0]) ? void 0 : e.typedText) ? t : ""
                }
                clearSearch() {
                    this.searchTagClick = !1,
                    this.onlyTags = !1,
                    $.observable(this).setProperty({
                        searchText: ""
                    }),
                    this.inputEl.focus()
                }
                onSearchInputKeypress(e) {
                    var t, r;
                    if (d.indexOf(e.which) > -1)
                        return !1;
                    if (13 === e.which && "brand" === (null == (t = this.targetSuggestion) ? void 0 : t.typeStr))
                        return this._followSuggest(this.targetSuggestion),
                        this.targetSuggestion = null,
                        this._hideSuggestionsByClick(),
                        !1;
                    if (13 === e.which)
                        return this.showSuggestionsDebouncer.stop(),
                        this.applySearch(),
                        !1;
                    if (this.isSearchByKeyboard = !1,
                    this.onlyTags && (this.onlyTags = !1),
                    this.$isDesktop && h.indexOf(e.which) > -1 && this.allSuggestions.length) {
                        e.preventDefault();
                        const t = 38 === e.which
                          , n = this.allSuggestions.filter((e => 1 !== e.type || 1 === e.type && !e.hasOwnProperty("pos")));
                        let s = n.findIndex((e => e.selected));
                        if (t && -1 === s && (s = 0),
                        s += t ? -1 : 1,
                        s %= n.length,
                        s < 0 && (s += n.length),
                        this.targetSuggestion = n[s],
                        null != this.targetSuggestion) {
                            $.observable(this).setProperty({
                                searchText: this.targetSuggestion.name
                            }),
                            null == (r = this._markSuggestAsSelected) || r.call(this, this.targetSuggestion),
                            this.isSearchByKeyboard = !0;
                            const e = 0 === this.targetSuggestion.type ? "SNH" : 1 === this.targetSuggestion.type ? "SNS" : "STB";
                            this.infoByKeyboardSearch = {
                                tail: e,
                                type: "SNS" === e ? "Suggest" : "SNH" === e ? "Hist" : "Brand",
                                typedText: this.targetSuggestion.typedText
                            }
                        }
                    }
                }
                onSearchSubmit(e) {
                    e.preventDefault()
                }
                applySearch() {
                    this.searchText.length && (this.inputEl.blur(),
                    this.$analitic.saveLastSearchAnaliticsData("Text", this.searchText, this.allSuggestionsAnalitics),
                    this._hideSuggestionsByClick(),
                    this._loadSearchPage())
                }
                async searchByImage(e) {
                    var t;
                    $.observable(this).setProperty({
                        enableSearchInSeller: !1
                    }),
                    await this.$getService("searchByImageService"),
                    window.innerWidth < 1024 ? (await this.$moduleLoader.loadModuleAsync("cropSearchImagePopup"),
                    this.$services.searchByImageService.uploadImageOnMobile(e)) : null == (t = this.uploadImageForSearchByImagePopUp) || t.setVisible()
                }
                _isMobileInput(e) {
                    return !1
                }
                enableSuggestions(e) {
                    if (this.imageChipData)
                        e.preventDefault();
                    else if (this.$isDesktop || this._isMobileInput(this.inputEl))
                        return "focus" !== e.type || this.searchTagClick || (this.focusSearchTime = Date.now().toString(),
                        this.focusSearchText = this.searchText),
                        $.observable(this).setProperty({
                            prohibitSuggestions: !1
                        }),
                        this.showSuggestions(e)
                }
                showSuggestionsDebouncer() {
                    let e = null;
                    function t() {
                        e && clearTimeout(e)
                    }
                    return {
                        debounce: (r, n) => (...s) => {
                            t(),
                            e = setTimeout(( () => {
                                r.apply(this, s),
                                e = null
                            }
                            ), n)
                        }
                        ,
                        stop: t
                    }
                }
                showSuggestionsOuter(e) {
                    return this.prohibitSuggestions ? this.enableSuggestions(e) : this.showSuggestions(e)
                }
                showSuggestions(e) {
                    if (this.imageChipData)
                        return void (null == e || e.preventDefault());
                    clearTimeout(this._hideSuggestionsTimer);
                    const t = this.suggestionsHelper.loadSuggestionsAsync(this.searchText)
                      , r = this.$isDesktop ? $.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl") : Promise.resolve();
                    this.suggestionsQueue.push(t),
                    Promise.all([t, r]).then(( ([e]) => {
                        if (this.prohibitSuggestions)
                            return void $.observable(this.suggestions).refresh([]);
                        const r = this.suggestionsQueue.findIndex((e => e == t));
                        if (r < 0)
                            return;
                        this.suggestionsQueue = this.suggestionsQueue.slice(r + 1);
                        const n = JSON.parse(JSON.stringify(e));
                        this._removeRepeats(n),
                        this._sortSuggests(n),
                        $.observable(this.suggestions).refresh(n);
                        const s = n.find((e => 6 === e.type));
                        if (s) {
                            const {suggestions: e} = s;
                            let t = document.querySelector(".j-unmark-suggests");
                            t && (s.suggestions = this._filterSuggestions(e, t.offsetWidth))
                        }
                        window.requestAnimationFrame(( () => $.observable(this).setProperty({
                            suggestions: n
                        }))),
                        this.allSuggestions = n.reduce(( (e, t) => e.concat(t.suggestions)), []),
                        document.removeEventListener("click", this._hideSuggestionsByClick),
                        document.addEventListener("click", this._hideSuggestionsByClick),
                        this.toggleBackgroundBlur(!0)
                    }
                    )).catch((e => {
                        console.error(e)
                    }
                    ))
                }
                _filterSuggestions(e, t) {
                    const [r,n] = this._createMeasurementElements()
                      , s = e[0].maxTagsRows;
                    document.body.appendChild(r);
                    const i = this._calculateVisibleSuggestions(e, t, r, n, s);
                    return document.body.removeChild(r),
                    i
                }
                _createMeasurementElements() {
                    const e = document.createElement("div")
                      , t = document.createElement("p");
                    return e.classList.add("autocomplete__item", "autocomplete__item--tag", "autocomplete__item--tag_hidden"),
                    e.style.width = "fit-content",
                    t.classList.add("autocomplete__phrase"),
                    e.appendChild(t),
                    [e, t]
                }
                _calculateVisibleSuggestions(e, t, r, n, s) {
                    const i = []
                      , a = document.createElement("div");
                    a.classList.add("autocomplete__list", "autocomplete__list--tags", "autocomplete__list--tags_hidden"),
                    a.style.width = `${t}px`,
                    document.body.appendChild(a);
                    for (const n of e) {
                        const e = r.querySelector(".autocomplete__phrase");
                        if (e && (e.textContent = n.name),
                        this._getFullWidth(r) > t)
                            break;
                        const o = r.cloneNode(!0);
                        o.style.position = "",
                        a.appendChild(o);
                        if (a.offsetHeight > 47 * s) {
                            a.removeChild(o);
                            break
                        }
                        i.push(n)
                    }
                    return document.body.removeChild(a),
                    i
                }
                _getFullWidth(e) {
                    const t = e.offsetWidth
                      , r = window.getComputedStyle(e);
                    return t + (parseFloat(r.marginLeft) || 0) + (parseFloat(r.marginRight) || 0)
                }
                getCrossHandler() {
                    return this.enableSearchInSeller && !this.searchText ? this.toggleSearchInSeller() : this.clearSearch()
                }
                toggleBackgroundBlur(e) {
                    var t;
                    if (e && this.$isDesktop) {
                        if (!document.querySelector(".overlay--search")) {
                            const e = document.createElement("div");
                            e.classList.add("overlay", "overlay--search", "hide-mobile"),
                            document.querySelector("body").appendChild(e)
                        }
                    } else
                        null == (t = document.querySelector(".overlay--search")) || t.remove()
                }
                _hideSuggestionsByClick(e) {
                    if ("m" === wb.settings.displayMode || (null == e ? void 0 : e.target.closest(".search-catalog__btn--clear")) || (null == e ? void 0 : e.target.closest(".btn-advertising")) || (null == e ? void 0 : e.target.closest(".j-tooltip-advertising")) || (null == e ? void 0 : e.target.closest(".j-not-close-pop-up-on-click")))
                        return;
                    (e ? !e.target.closest(".j-menu-burger-btn") && this.inputEl == document.activeElement || e.target.closest(".j-clear-history") || e.target.closest(".j-clear-history-all") || e.target.closest(".j-suggest-tag") || e.target.closest(".j-btn-seller") : null) ? this.inputEl.focus() : (document.activeElement === this.inputEl && this.inputEl.blur(),
                    clearTimeout(this._hideSuggestionsTimer),
                    $.observable(this).setProperty({
                        prohibitSuggestions: !0
                    }),
                    this._hideSuggestionsTimer = setTimeout(( () => {
                        $.observable(this.suggestions).refresh([]),
                        document.removeEventListener("click", this._hideSuggestionsByClick),
                        this.toggleBackgroundBlur(!1)
                    }
                    ), 150))
                }
                clearAllSearchHistories() {
                    this._clearSearchHistory(null, !0),
                    this.$analitic.sendEvent("Search_History_Delete")
                }
                clearSearchHistory(e) {
                    const {data: t} = $.view(e.currentTarget);
                    this._clearSearchHistory(t.search)
                }
                _clearSearchHistory(e, t) {
                    this.suggestionsHelper.removeFromHistorySearch(e, t),
                    "m" === wb.settings.displayMode && this.showSuggestions(),
                    this.inputEl.focus()
                }
                changeInputPadding() {
                    if (this.enableSearchInSeller && this.$isDesktop) {
                        const e = String(Math.floor(this.searchBySellerEl.getBoundingClientRect().width) + 20) + "px";
                        $.observable(this).setProperty({
                            inputPaddingLeft: e
                        })
                    } else
                        $.observable(this).setProperty({
                            inputPaddingLeft: this.$isDesktop ? "20px" : "12px"
                        })
                }
                toggleSearchInSeller(e) {
                    var t, r, n, s, i, a, o;
                    if (!this.$isDesktop)
                        return void $.observable(this).setProperty({
                            enableSearchInSeller: !1
                        });
                    const l = null == (t = null == e ? void 0 : e.detail) ? void 0 : t.updateFromFilter
                      , c = null == (r = null == e ? void 0 : e.detail) ? void 0 : r.updateFromSellerPage
                      , u = null == (n = null == e ? void 0 : e.detail) ? void 0 : n.updateFromSearch;
                    $.observable(this).setProperty({
                        enableSearchInSeller: l || u || c ? e.detail.enableSearchInSeller : !this.enableSearchInSeller
                    });
                    const d = e.detail.sellerInfo ? e.detail.sellerInfo : localStorage.getItem("sellerFilterInfo") ? JSON.parse(null != (s = localStorage.getItem("sellerFilterInfo")) ? s : "") : null;
                    if ($.observable(this).setProperty({
                        sellerFilter: null != d ? d : this.sellerFilter
                    }),
                    $.observable(this).setProperty({
                        showSellerSuggestions: window.location.pathname.includes("seller") || this.$router.queryParams.has("fsupplier")
                    }),
                    localStorage.setItem("enableSearchInSeller", this.enableSearchInSeller),
                    localStorage.setItem("sellerFilterInfo", JSON.stringify(this.sellerFilter)),
                    !l && (null == (i = this.sellerFilter) ? void 0 : i.id)) {
                        const e = (null == (o = null == (a = wb.analitics.getTailObjectData()) ? void 0 : a.filters) ? void 0 : o.trim().split(",").filter((e => e))) || []
                          , t = new Set(e.map((e => "fsupplier" === e ? `${this.sellerFilter.id}` : e)));
                        this.enableSearchInSeller ? t.add(`${this.sellerFilter.id}`) : t.delete(`${this.sellerFilter.id}`);
                        const r = [...t].join(",");
                        this.$analitic.updateTailObjectData({
                            filters: r
                        }),
                        this.enableSearchInSeller && this.$analitic.updateTailObjectData({
                            filters_entry_point: "Search_Bar"
                        })
                    }
                    this.changeInputPadding()
                }
                fillWithTag(e) {
                    var t, r, n;
                    if (this.searchTagClick = !0,
                    e.target.closest(".j-clear-history"))
                        return;
                    const {data: s} = $.view(e.currentTarget);
                    if (!s)
                        return;
                    const i = null != (t = s.name) ? t : ""
                      , a = this.searchText
                      , o = 0 === s.pos ? i : this.searchText.trimStart().split(/\s+/).slice(0, s.pos).join(" ") + " " + i;
                    this.onlyTags = !0,
                    this.tagsTypedText = a,
                    this.$analitic.sendEvent("Search_Tag_Suggest_T", {
                        text: i,
                        text_typed: null != (r = this.searchText) ? r : ""
                    }),
                    $.observable(this).setProperty({
                        searchText: o + " "
                    }),
                    null == (n = this.inputEl) || n.focus()
                }
                _setTextInSearchInput(e) {
                    $.observable(this).setProperty({
                        searchText: e
                    }),
                    !this.$isDesktop && this.parentBlock && $.observable(this.parentBlock).setProperty({
                        searchText: e
                    })
                }
                onFollowSuggest(e) {
                    if (e.target.closest(".j-clear-history"))
                        return;
                    this.onlyTags = !1;
                    const {data: t} = $.view(e.currentTarget);
                    null != t && this._followSuggest(t)
                }
                _followSuggest(e) {
                    var t, r, n, s;
                    const i = this.allSuggestionsAnalitics;
                    this._setTextInSearchInput(e.name),
                    this.suggestionsHelper.saveHistorySearch(e.name);
                    const a = this._getAnalyticsFromSuggest(e)
                      , o = {
                        type: a.type,
                        l: a.location,
                        t: this.searchText,
                        t1: null == (t = e.searchParams) ? void 0 : t.get("xParams"),
                        t2: null == (r = e.searchParams) ? void 0 : r.get("xShard"),
                        t3: e.typedText,
                        t4: this.searchTagClick
                    }
                      , l = a.type
                      , c = this.$analitic.getTermByTermName("qid")
                      , u = this.enableSearchInSeller ? "Supplier" : null != (s = this.$analitic.getLocationFromEntrypoint(null == (n = this.$router.currentRoute) ? void 0 : n.name)) ? s : ""
                      , d = {
                        search_text: this.searchText,
                        query_id: c,
                        entry_point: u,
                        text_typed: e.typedText
                    };
                    this.$analitic.saveQueryIdForSearch(c),
                    this.$analitic.updateTailObjectData(d),
                    this.$analitic.saveState(o);
                    const h = {
                        type: l,
                        text: e.search,
                        text_typed: e.typedText,
                        text_suggest: i,
                        query_id: c,
                        suggests: this.suggestionsJsonString,
                        start_inputed_at: this.focusSearchTime,
                        start_inputed_text: this.focusSearchText,
                        location: u,
                        last_suggests_showed_text: this.lastSuggestShowedText
                    };
                    e.isBrand || e.isHistory || (h.group = "new"),
                    "Supplier" === u && this.sellerFilter && (h.supplier_id = this.sellerFilter.id),
                    this.$analitic.saveLastSearchAnaliticsData(h),
                    this._getUrlToFollow(e).then((e => {
                        if (this._checkIsRedirectToSearchCatalog(e) ? this.$analitic.saveLastSearchAnaliticsData(h) : this.$analitic.sendEvent("Search_Request_Send", h),
                        null != wb.spa)
                            return wb.spa.redirect(e);
                        window.location.href = e
                    }
                    ))
                }
                _checkIsRedirectToSearchCatalog(e) {
                    return -1 !== e.indexOf(wb.urlHelper.xSearchBase)
                }
                removeImageChip() {
                    $.observable(this).setProperty({
                        imageChipData: null
                    })
                }
                _loadSearchPage() {
                    var e, t, r, n, s, i;
                    if (/^\s+$/.test(this.searchText)) {
                        switch (wb.analitics.getState().l) {
                        case "SNT":
                            this.typeSearch = "Text";
                            break;
                        case "SNS":
                            this.typeSearch = "Suggest";
                            break;
                        case "SNH":
                            this.typeSearch = "Hist";
                            break;
                        case "STB":
                            this.typeSearch = "Brand";
                            break;
                        case "SPA":
                            this.typeSearch = "Photo";
                            break;
                        case "AST":
                        case "SST":
                            this.typeSearch = "Tag_Suggest"
                        }
                    }
                    this.suggestionsHelper.saveHistorySearch(this.searchText);
                    const a = this.allSuggestionsAnalitics
                      , o = this.isSearchByKeyboard ? this.infoByKeyboardSearch.typedText : this.searchText
                      , l = this.$analitic.getTermByTermName("qid")
                      , c = this.isSearchByKeyboard ? this.infoByKeyboardSearch.tail : this.onlyTags ? "SST" : "SNT"
                      , u = this.enableSearchInSeller ? "Supplier" : null != (t = this.$analitic.getLocationFromEntrypoint(null == (e = this.$router.currentRoute) ? void 0 : e.name)) ? t : ""
                      , d = {
                        search_text: this.searchText,
                        query_id: l,
                        entry_point: u
                    };
                    "STB" === c && (d.brand = this.searchText),
                    this.$analitic.saveState({
                        l: c,
                        t: this.searchText,
                        t1: null == (r = this.xData) ? void 0 : r.xcatalogQuery,
                        t2: null == (n = this.xData) ? void 0 : n.xcatalogShard,
                        t3: o,
                        t4: this.searchTagClick
                    }),
                    this.$analitic.saveQueryIdForSearch(l),
                    this.$analitic.updateTailObjectData(d, !0),
                    this.$analitic.saveLastSearchAnaliticsData({
                        text: this.searchText,
                        type: this.isSearchByKeyboard ? this.infoByKeyboardSearch.type : this.onlyTags ? "Tag_Suggest" : "Text",
                        group: "new",
                        text_typed: o,
                        text_suggest: a,
                        query_id: l,
                        suggests: this.suggestionsJsonString,
                        start_inputed_at: this.focusSearchTime,
                        start_inputed_text: this.focusSearchText,
                        location: null != (s = this.location) ? s : "",
                        last_suggests_showed_text: this.lastSuggestShowedText,
                        entry_point: u
                    }),
                    $.observable(this).setProperty({
                        searchQueryText: this.searchText
                    });
                    let h = this._makeSafeString(this.searchText)
                      , p = `${wb.urlHelper.xSearchBase}?search=${h}`;
                    if (this.enableSearchInSeller && (null == (i = this.sellerFilter) ? void 0 : i.id) && (p += `&fsupplier=${this.sellerFilter.id}`),
                    null != wb.spa)
                        return wb.spa.redirect(p);
                    window.location.href = p
                }
                _makeSafeString(e) {
                    return e.toSafeString()
                }
                async _getUrlToFollow(e) {
                    var t;
                    if (e.url)
                        return Promise.resolve(e.url);
                    if (2 === e.type) {
                        const t = await $.views.helpers.brandUrlById(e.brandId);
                        if (t)
                            return t
                    }
                    let r = `${wb.urlHelper.xSearchBase}?search=${this._makeSafeString(e.search)}`;
                    return this.enableSearchInSeller && (null == (t = this.sellerFilter) ? void 0 : t.id) && (r += `&fsupplier=${this.sellerFilter.id}`),
                    Promise.resolve(r)
                }
                markSelected(e, t) {
                    var r, n;
                    if (!t)
                        return $.views.converters.encode(e);
                    let s = 0
                      , i = 0;
                    for (; s < t.length; )
                        if (" " !== t[s])
                            if (" " !== e[i]) {
                                if ((null == (r = e[i]) ? void 0 : r.toLowerCase()) !== (null == (n = t[s]) ? void 0 : n.toLowerCase()))
                                    break;
                                s++,
                                i++
                            } else
                                i++;
                        else
                            s++;
                    return s === t.length ? `${$.views.converters.encode(e.substring(0, i))}<b>${$.views.converters.encode(e.substring(i))}</b>` : `<b>${$.views.converters.encode(e)}</b>`
                }
                _removeRepeats(e) {
                    const {history: t, common: r} = e.reduce(( (e, t) => {
                        switch (t.type) {
                        case 0:
                            e.history = t;
                            break;
                        case 1:
                            e.common = t
                        }
                        return e
                    }
                    ), {
                        history: null,
                        common: null
                    });
                    if (!t || !r)
                        return;
                    const n = t.suggestions.reduce(( (e, t) => (e.add(t.name),
                    e)), new Set);
                    r.suggestions = r.suggestions.filter((e => !n.has(e.name)))
                }
                _sortSuggests(e) {
                    e.sort(( (e, t) => p[e.type] - p[t.type]))
                }
                _getAnalyticsFromSuggest(e) {
                    switch (e.type) {
                    case 0:
                        return {
                            location: "SNH",
                            type: "Hist"
                        };
                    case 1:
                        return {
                            location: "SNS",
                            type: "Suggest"
                        };
                    case 2:
                        return {
                            location: "STB",
                            type: "Brand"
                        };
                    default:
                        return {
                            location: "",
                            type: "Unknown"
                        }
                    }
                }
                async setBanners() {
                    var e, t;
                    const r = "phone" === wb.settings.displayType
                      , n = (null == (t = null == (e = this.banners) ? void 0 : e.at(0)) ? void 0 : t.applicationType) ? this.banners[0].applicationType === i.i.appType.mobile : void 0;
                    if (void 0 !== n && r === n)
                        return;
                    const s = await this.$services.bannersService.getAdvBanners(i.i.locationType.searchBanners)
                      , a = r ? null == s ? void 0 : s.mobileBanners : null == s ? void 0 : s.desktopBanners;
                    $.observable(this).setProperty({
                        banners: a
                    }),
                    $.observable(this.mobileSearchPopupModel).setProperty({
                        banners: a
                    })
                }
            }
            class b extends m {
                constructor(e) {
                    super(),
                    this.suggestionsHelper = e.suggestionsHelper,
                    this.searchText = e.searchText,
                    this.parentBlock = e,
                    this.inputElIdSelector = "mobileSearchInput",
                    this.banners = e.banners
                }
                _isMobileInput(e) {
                    return e === document.getElementById(this.inputElIdSelector)
                }
                onAfterShown() {
                    this.inputEl = document.getElementById(this.inputElIdSelector),
                    this.inputElFullPage = document.getElementById("searchInput"),
                    this.inputEl.focus()
                }
            }
            var g = class extends m {
                constructor() {
                    super(),
                    this._hideSuggestionsTimer = null,
                    this.uploadImageForSearchByImagePopUp = null,
                    this.searchByImageFormAbOld = document.getElementById("searchByImageFormAbOld"),
                    this.searchByImageFormAbNew = document.getElementById("searchByImageFormAbNew"),
                    this.inputEl = document.getElementById("searchInput"),
                    this.applySearchEl = document.getElementById("applySearchBtn"),
                    this.searchByImageBtnEl = document.getElementById("searchByImageBtn"),
                    this.searchByImageContainerEl = document.getElementById("searchByImageContainer"),
                    this.searchInputMobileEl = document.querySelector(".j-search-input-mobile"),
                    this.searchBySellerEl = document.querySelector(".j-btn-seller"),
                    this._checkImageFormClick = this._checkImageFormClick.bind(this),
                    this.hasAnySuggestions.depends = ["suggestions"]
                }
                async init() {
                    await Promise.all([this._prepareSuggestionsHelper(), this.$helper.loadJsAsync(wb.settings.scripts.swiper)]),
                    this._observeProperties(),
                    this._bindEvents(),
                    $.link(!0, "#searchBlock", this),
                    null === this.uploadImageForSearchByImagePopUp && this.$moduleLoader.loadModuleAsync("uploadImageForSearchByImagePopUp").then((e => {
                        this.uploadImageForSearchByImagePopUp = new e,
                        this.uploadImageForSearchByImagePopUp.init()
                    }
                    )),
                    this._toggleActiveSearchByImageButton(),
                    this.hasBannerAb && this.setBanners(),
                    window.addEventListener("resize", this.$helper.debounce(this.setBanners.bind(this), 300))
                }
                _toggleActiveSearchByImageButton() {
                    window.innerWidth < 1024 ? (this.searchByImageFormAbNew.classList.add("hide"),
                    this.searchByImageFormAbOld.classList.remove("hide")) : (this.searchByImageFormAbOld.classList.add("hide"),
                    this.searchByImageFormAbNew.classList.remove("hide"))
                }
                hasAnySuggestions() {
                    const e = this.suggestions.some((e => e.suggestions.length > 0));
                    return e !== this.isOpenPopup && this._toggleScrollbar(e),
                    e
                }
                _toggleScrollbar(e) {
                    document.body.classList.toggle("body--overflow", e),
                    this.wrapper.style.paddingRight = e ? `${this.widthScrollbar}px` : "",
                    this.header.style.paddingRight = e ? `${this.widthScrollbar}px` : "",
                    this.header.style.marginRight = e ? `-${this.widthScrollbar}px` : "",
                    this.fixedBlock.style.marginRight = e ? `${this.widthScrollbar}px` : "",
                    this.isOpenPopup = e
                }
                toggleImageSearch() {
                    this.toggleProperty("showImageSearch")
                }
                markSuggest(e) {
                    const {data: t} = $.view(e.currentTarget);
                    null != t && this._markSuggestAsSelected(t)
                }
                unmarkSuggests() {
                    this.allSuggestions.forEach((e => {
                        $.observable(e).setProperty({
                            selected: !1
                        })
                    }
                    ))
                }
                _markSuggestAsSelected(e) {
                    this.allSuggestions.forEach((t => {
                        $.observable(t).setProperty({
                            selected: t === e
                        })
                    }
                    ))
                }
                _observeProperties() {
                    $.observe(this, "showImageSearch", ( (e, {value: t}) => {
                        t ? this._addImageSearchHandlers() : this._removeImageSearchHandlers()
                    }
                    ))
                }
                _bindEvents() {
                    var e;
                    window.addEventListener("spaTransition", (e => {
                        var t;
                        "SpaSearchEntrypoint" !== (null == (t = e.detail.dest) ? void 0 : t.name) && ($.observable(this).setProperty({
                            searchText: ""
                        }),
                        $.observable(this).setProperty({
                            searchQueryText: ""
                        }),
                        $.observable(this).setProperty({
                            enableSearchInSeller: !1
                        }),
                        $.observable(this).setProperty({
                            showSellerSuggestions: !1
                        }),
                        $.observable(this).setProperty({
                            inputPaddingLeft: this.$isDesktop ? "20px" : "12px"
                        }),
                        localStorage.setItem("enableSearchInSeller", !1),
                        localStorage.setItem("sellerFilterInfo", null))
                    }
                    )),
                    this.inputEl.addEventListener("focus", ( () => {
                        var e;
                        if (this.$isDesktop) {
                            if (this.enableSearchInSeller && this.sellerFilter && window.location.pathname.includes("seller")) {
                                const t = ["Seller_SearchBar_T", {
                                    supplier_id: null == (e = this.sellerFilter) ? void 0 : e.id,
                                    type: "Search_Text"
                                }];
                                this.$analitic.sendEvent(...t)
                            }
                        } else
                            this._showMobileSearchPopup()
                    }
                    )),
                    null == (e = wb.displayModeSettings) || e.addObserver(this.changeInputPadding),
                    this.$eventBus.addEventListener("NeedSearchUpdate", (e => {
                        const {searchText: t} = e.detail;
                        $.observable(this).setProperty({
                            searchText: t
                        }),
                        $.observable(this).setProperty({
                            searchQueryText: t
                        })
                    }
                    )),
                    this.isNewSearchByImage || this.$eventBus.addEventListener("RenderImageChip", (e => {
                        const {imageChipData: t} = e.detail;
                        $.observable(this).setProperty({
                            imageChipData: t
                        })
                    }
                    )),
                    this.enableSearchInSellerOnSettings && this.$eventBus.addEventListener("NeedUpdateSearchInSeller", this.toggleSearchInSeller),
                    this._bindDisplayEvents()
                }
                _bindDisplayEvents() {
                    var e;
                    const t = this
                      , r = this._showMobileSearchPopup.bind(this);
                    function n() {
                        var e, n;
                        "m" === wb.settings.displayMode ? null == (e = t.searchInputMobileEl) || e.addEventListener("click", r) : null == (n = t.searchInputMobileEl) || n.removeEventListener("click", r)
                    }
                    n(),
                    null == (e = wb.displayModeSettings) || e.addObserver(( () => {
                        this.$eventBus.dispatchEvent(new CustomEvent("NeedUpdateSearchInSeller",{
                            detail: {
                                updateFromSearch: !0,
                                enableSearchInSeller: this.$isDesktop && (window.location.href.includes("seller") || this.$router.queryParams.has("fsupplier")),
                                sellerInfo: this.sellerFilter
                            }
                        })),
                        n(),
                        this._toggleActiveSearchByImageButton()
                    }
                    ))
                }
                _addImageSearchHandlers() {
                    document.documentElement.addEventListener("click", this._checkImageFormClick)
                }
                _removeImageSearchHandlers() {
                    document.documentElement.removeEventListener("click", this._checkImageFormClick)
                }
                _checkImageFormClick(e) {
                    e.target === this.searchByImageBtnEl || this.searchByImageContainerEl.contains(e.target) || $.observable(this).setProperty({
                        showImageSearch: !1
                    })
                }
                async _showMobileSearchPopup() {
                    await $.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl");
                    const e = wb.popup.showCustomPopup({
                        showCross: !1,
                        useCenteredFunction: !0,
                        useHtml: !0,
                        lockScroll: !0,
                        popupClassesList: ["popup-search", "shown"],
                        contentClasses: ["popup__content", "popup-search__content"],
                        onShow: async (t, r) => {
                            this.mobileSearchPopupModel = new b(this),
                            this.mobileSearchPopupModel.searchByImage = t => {
                                this.searchByImage(t),
                                e.close()
                            }
                            ,
                            $.templates.searchMobilePopupTmpl.link(t.querySelector(".popup__content"), this.mobileSearchPopupModel, {
                                close: () => e.close()
                            }),
                            await r,
                            this.mobileSearchPopupModel.onAfterShown()
                        }
                    })
                }
                async _prepareSuggestionsHelper() {
                    const e = await this.$moduleLoader.loadModuleAsync("suggestionsHelper");
                    let t = [[{
                        cacheKey: "historySearch",
                        historiesLimit: 20
                    }, e.suggestionsTypes.history]];
                    t.push([n, e.suggestionsTypes.grouped]),
                    this.suggestionsHelper = e.createSuggestionsHelper(t)
                }
            }
            ;
            var y = class {
                constructor(e) {
                    var t, r;
                    this.layoutModel = e,
                    this.container = document.getElementById("balanceBlock"),
                    this.updateBalance = this.updateBalance.bind(this),
                    this.updateGeo = this.updateGeo.bind(this),
                    this.model = {
                        balance: 0,
                        cashbackBalance: 0,
                        showCashbackInfoPopup: this.showCashbackInfoPopup.bind(this)
                    },
                    this._setWalletInfo(null == (t = e.$user.balance) ? void 0 : t.walletTypeCode, null == (r = e.$user.balance) ? void 0 : r.walletRidLimit),
                    this.enableCashback = wb.global.settings.switches.enableCashback && "ru" === wb.settings.currentLocale,
                    this.enableCashbackWidgetHide = wb.global.settings.switches.enableCashbackWidgetHide
                }
                async init(e) {
                    e && await this._fetchBalanceAndLink().catch((e => Promise.resolve())),
                    this.layoutModel.$eventBus.addEventListener("BalanceReset", this._fetchBalanceAndLink.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("CurrencyChanged", this._fetchBalanceAndLink.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("BalanceUpdated", this.updateBalance.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("GeoUpdated", this.updateGeo.bind(this))
                }
                async _fetchBalanceAndLink() {
                    if (!this.layoutModel.$auth.isAuth)
                        return;
                    let e = await this.layoutModel.$user.getBalance();
                    e && this._link(e.totalBalance || 0, e.cashbackBalance || 0, (null == e ? void 0 : e.balanceCurrency) || "RUB", e.totalBalanceRub || 0, e.walletTypeCode || 0, e.walletRidLimit || null)
                }
                _link(e, t, r, n, s, i) {
                    void 0 !== e && null != e && this.layoutModel.$router.userIsAuth && !this._isLinked && (this._isLinked = !0,
                    this.model.balance = e,
                    this.model.cashbackBalance = t,
                    this.model.enableCashback = this.enableCashback,
                    this.model.enableCashbackWidgetHide = this.enableCashbackWidgetHide,
                    this.model.balanceCurrency = r,
                    this.model.totalBalanceRub = n,
                    this.model.locale = WbSpaModel.prototype.$user.getLocale(),
                    this.model.isGeLocale = "ge" === wb.settings.currentLocale,
                    this.model.isTjLocale = "tj" === wb.settings.currentLocale,
                    $.link(!0, this.container, this.model),
                    $.observable(this.layoutModel.$userEnv).setProperty({
                        balance: e,
                        balanceCurrency: r,
                        totalBalanceRub: n
                    }),
                    this._setWalletInfo(s, i))
                }
                updateBalance(e) {
                    const {totalBalance: t, balanceCurrency: r, walletTypeCode: n, totalBalanceRub: s, cashbackBalance: i, walletRidLimit: a} = e.detail;
                    this._isLinked ? ($.observable(this.model).setProperty({
                        balance: t,
                        balanceCurrency: r,
                        totalBalanceRub: s,
                        cashbackBalance: i
                    }),
                    $.observable(this.layoutModel.$userEnv).setProperty({
                        balance: t,
                        balanceCurrency: r,
                        totalBalanceRub: s,
                        cashbackBalance: i
                    })) : this._link(t, i, r, s),
                    this._setWalletInfo(n, a)
                }
                updateGeo() {
                    const e = WbSpaModel.prototype.$user.getLocale();
                    $.observable(this.model).setProperty({
                        locale: e
                    })
                }
                _setWalletInfo(e, t) {
                    $.observable(wb.settings).setProperty({
                        balanceTitle: this._getBalanceTitle(e),
                        balanceSectionTitle: this._getBalanceSectionTitle(e),
                        walletTypeCode: e,
                        walletRidLimit: t
                    })
                }
                async showCashbackInfoPopup() {
                    this.enableCashback && (0 === wb.settings.walletTypeCode ? this.showCashbackPopup() : await this.showCashbackDetailsPopup())
                }
                showCashbackPopup() {
                    WbSpaModel.prototype.$moduleLoader.loadModuleAsync("cashbackPopup").then((e => {
                        this.cashbackPopup = new e(e.template,!0),
                        this.cashbackPopup.showCashbackPopup("header")
                    }
                    ))
                }
                async showCashbackDetailsPopup() {
                    WbSpaModel.prototype.$moduleLoader.loadModuleAsync("cashbackDetailsPopup").then((async e => {
                        this.model.cashbackDetailsPopup = new e({
                            template: e.template,
                            cashbackBalance: this.model.cashbackBalance
                        }),
                        await this.model.cashbackDetailsPopup.init(),
                        this.model.cashbackDetailsPopup.showCashbackDetailsPopup()
                    }
                    ))
                }
                _getBalanceSectionTitle(e=0) {
                    return "ru" === wb.settings.currentLocale && "RUB" === this.model.balanceCurrency ? wb.i18n.t("lk.wbBank") : e > 0 ? wb.i18n.t("pageTitles.wbWallet") : wb.i18n.t("pageTitles.balance")
                }
                _getBalanceTitle(e=0) {
                    return e > 0 ? wb.i18n.t("pageTitles.wbWallet") : wb.i18n.t("pageTitles.balance")
                }
            }
              , f = r(13808)
              , v = r(94286);
            class w extends WbSpaModel {
                constructor(e) {
                    super(),
                    this.mainLayout = e,
                    this.cont = document.querySelector(".j-b-header-country"),
                    this.changeLangCont = this.cont.querySelector(".j-b-change-settings"),
                    this.tooltip = document.querySelector(".j-tooltip-country"),
                    $.observable(e.$userEnv).setProperty({
                        currency: e.$user.getCurrency()
                    }),
                    this.currentCurrency = e.$user.getCurrency(),
                    this.changeCurrency = this.changeCurrency.bind(this),
                    this.currentLang = wb.currentLanguage,
                    this.changeLang = this.changeLang.bind(this),
                    this.langs = f._.getAvailableLangs(),
                    this.isGlobalLocale = "global" === wb.settings.currentLocale;
                    this.isGlobalLocale && "ru" !== wb.currentLanguage && !this.langs ? wb.i18n.changeLang("ru") : (this.$eventBus.addEventListener("GeoUpdated", this._updateGeoHandler.bind(this)),
                    this._render(),
                    document.addEventListener("click", e.$helper.delegator(".j-settings-show-popup", ( (e, t) => this.showPopup()))))
                }
                _render() {
                    this.langs ? ($.views.helpers({
                        wbLanguages: (0,
                        v.getWbLanguages)()
                    }),
                    $.templates({
                        changeSettingsTmpl: '\n                    <h2 class="popup__header">{{:~t(\'common.language\')}}</h2>\n                    <div class="country">\n                        <div class="country__wrap" data-link="{on \'click\' \'.j-lang-item\' changeLang}">\n                        {^{radiogroup currentLang}}\n                            {^{props ~wbLanguages sort=sortLang ^~current=currentLang}}\n                                <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                    <input class="j-lang-item" type="radio" name="language" value=\'{{:key}}\'>\n                                    <span class="radio-with-text__text radio-with-text__text--flag">\n                                        <span class="radio-with-text__language-code">{{:prop.languageCode}}</span>\n                                        <span class="radio-with-text__name">{{:prop.name}}</span>\n                                    </span>\n                                </label>\n                            {{/props}}\n                        {{/radiogroup}}\n                        </div>\n                    </div>\n                    {{if ~wbSettings.currentLocale !== \'ge\'}}\n                    <h2 class="popup__header popup__header-second">{{:~t(\'common.currency\')}}</h2>\n                    <div class="country">\n                        <div class="country__wrap" data-link="{on \'click\' \'.j-currency-item\' changeCurrency}">\n                        {^{radiogroup currentCurrency}}\n                            {^{props ~wbCurrencies sort=sortCurrency ^~current=currentCurrency}}\n                                <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                    <input class="j-currency-item" type="radio" name="currency" value=\'{{:key}}\' ">\n                                    <span class="radio-with-text__text radio-with-text__text--flag">\n                                        <span class="radio-with-text__language"><span class="radio-with-text__flag flag-{{:prop.locale}}"></span>{{:key}}</span>\n                                        <span class="radio-with-text__name">{{:~t(`currenciesName.${key}`)}}</span>\n                                    </span>\n                                </label>\n                            {{/props}}\n                        {{/radiogroup}}\n                        </div>\n                    </div>\n                    {{/if}}     \n            '
                    })) : $.templates({
                        changeSettingsTmpl: '\n                   <h2 class="popup__header">{{:~t(\'common.currency\')}}</h2>\n                    <div class="country">\n                        <div class="country__wrap" data-link="{on \'click\' \'.j-currency-item\' changeCurrency}">\n                        {^{radiogroup currentCurrency}}\n                            {^{props ~wbCurrencies sort=sortCurrency ^~current=currentCurrency}}\n                                <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                    <input class="j-currency-item" type="radio" name="currency" value=\'{{:key}}\' ">\n                                    <span class="radio-with-text__text radio-with-text__text--flag">\n                                        <span class="radio-with-text__language"><span class="radio-with-text__flag flag-{{:prop.locale}}"></span>{{:key}}</span>\n                                        <span class="radio-with-text__name">{{:~t(`currenciesName.${key}`)}}</span>\n                                    </span>\n                                </label>\n                            {{/props}}\n                        {{/radiogroup}}\n                        </div>\n                    </div>\n            '
                    }),
                    $.templates.changeSettingsTmpl.link(this.changeLangCont, this),
                    $.link(!0, this.cont, this),
                    $.link(!0, document.querySelector(".nav-element__currency"), this)
                }
                _updateGeoHandler() {
                    var e;
                    if (!this.isGlobalLocale)
                        return;
                    const t = f._.getAvailableLangs();
                    (null == (e = this.langs) ? void 0 : e.toString()) === (null == t ? void 0 : t.toString()) || (this.langs = t,
                    "ru" === wb.currentLanguage || this.langs ? this._render() : wb.i18n.changeLang("ru"))
                }
                showPopup() {
                    this.currentPopup = wb.popup.showCustomPopup({
                        useHtml: !0,
                        popupClassesList: ["popup-country", "j-popup-country", "shown"],
                        contentClasses: ["popup__content"],
                        useCenteredFunction: !0,
                        modal: !0,
                        closeClass: ["j-close", "popup__close"],
                        closeSelector: ".j-close",
                        onShow: e => $.templates.changeSettingsTmpl.link(e.querySelector(".popup__content"), this)
                    })
                }
                needShowCurrencies() {
                    return !("GEL" === this.currentCurrency && "ge" === this.mainLayout.$user.getLocale())
                }
                sortLang(e, t) {
                    return e.key === this.view.data.currentLang ? -1 : t.key === this.view.data.currentLang ? 1 : 0
                }
                sortCurrency(e, t) {
                    return e.key === this.view.data.currentCurrency ? -1 : t.key === this.view.data.currentCurrency ? 1 : 0
                }
                changeLang(e) {
                    const t = e.target.value;
                    wb.i18n.changeLang(t),
                    this._closeTooltip()
                }
                changeCurrency(e) {
                    const t = e.target.value;
                    this.mainLayout.$user.setCurrency(t).then(( () => {
                        var e;
                        $.observable(this.mainLayout.$userEnv).setProperty({
                            currency: t
                        }),
                        this.mainLayout.$eventBus.dispatchEvent(new CustomEvent("CurrencyChanged",{
                            detail: {
                                currency: t
                            }
                        })),
                        null == (e = this.currentPopup) || e.close()
                    }
                    )),
                    this.tooltip || (this.tooltip = document.querySelector(".j-tooltip-country")),
                    this._closeTooltip()
                }
                refresh(e) {
                    wb.currencies.info[e] && $.observable(this).setProperty("currentCurrency", e)
                }
                _closeTooltip() {
                    if (this.tooltip)
                        return this.tooltip.style.pointerEvents = "none",
                        setTimeout(( () => this.tooltip.style.pointerEvents = "auto"), 100)
                }
            }
            var _ = w;
            var S = class {
                constructor(e) {
                    this.layoutModel = e.layoutModel,
                    this.shortBasketInfo = new s(e),
                    this.search = new g,
                    this.chatStartedRefunds = new this.layoutModel.$helper.Deferred,
                    this.chatStarted = new this.layoutModel.$helper.Deferred
                }
                _initOnlineChat(e) {
                    this.chatTask = this.layoutModel.$moduleLoader.loadModuleAsync("onlineChatPopup").then((t => {
                        var r, n;
                        return this.onlineChat = new t({
                            auth: e.isAuth,
                            uid: e.isAuth ? e.uid : e.basketUid,
                            startedRefunds: this.chatStartedRefunds,
                            chatStarted: this.chatStarted
                        }).init(),
                        wb.displayModeSettings.removeObserver(this.onlineChat.onBreakpoint),
                        (null == (n = null == (r = wb.global.settings) ? void 0 : r.switches) ? void 0 : n.enableChat) ? (wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint, !0),
                        this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited"))) : wb.global.subscribe(( () => {
                            var e, t;
                            !this.onlineChat.inited && (null == (t = null == (e = wb.global.settings) ? void 0 : e.switches) ? void 0 : t.enableChat) && (wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint, !0),
                            this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited")))
                        }
                        )),
                        wb.global.subscribe((e => {
                            const t = e.switches.enableSellersChat;
                            this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("SellersChatSwitched",{
                                detail: t
                            }))
                        }
                        )),
                        this.onlineChat
                    }
                    ))
                }
                async init() {
                    this.userBalance = new y(this.layoutModel),
                    this.changeSettings = new _(this.layoutModel),
                    this.shortBasketInfo.init();
                    const e = WbSpaModel.prototype.$geoLocation.initPreferredLocation()
                      , t = this.search.init();
                    this.bindSignOut(),
                    this.bindStat();
                    const r = this.layoutModel.$user.getUserInfo();
                    return this._initOnlineChat(r),
                    this.userBalance.init(r.isAuth),
                    this.updateSwitcher(),
                    this.updateB2BEntryPoint(),
                    this.setupBusinessBlock(),
                    Promise.all([e, t])
                }
                setupBusinessBlock() {
                    const e = document.querySelector("#headerBusinessBlock")
                      , t = document.querySelector("#businessBlock");
                    if (!e || !t)
                        return;
                    const r = () => {
                        t.classList.add("hide"),
                        e.classList.remove("business-open")
                    }
                    ;
                    e.addEventListener("click", (n => {
                        n.stopPropagation(),
                        t.classList.contains("hide") ? (t.classList.remove("hide"),
                        e.classList.add("business-open")) : r()
                    }
                    )),
                    document.addEventListener("click", (n => {
                        e.contains(n.target) || t.contains(n.target) || r()
                    }
                    )),
                    t.querySelectorAll(".business-block__link").forEach((r => {
                        r.addEventListener("click", (r => {
                            t.classList.add("hide"),
                            e.classList.remove("business-open")
                        }
                        ))
                    }
                    ))
                }
                updateSwitcher() {
                    var e;
                    const t = WbSpaModel.prototype.$isTravelEnabled();
                    "ru" == wb.settings.currentLocale && (null == (e = document.querySelector("#travelSwitcher")) || e.classList.toggle("hide", !t))
                }
                updateB2BEntryPoint() {
                    var e;
                    wb.global.settings.switches.enableB2bInn && "ru" === wb.settings.currentLocale && (null == (e = document.querySelector("#b2bHeaderEntryPoint")) || e.classList.toggle("hide"))
                }
                bindSignOut() {
                    document.addEventListener("click", (e => {
                        const t = e.target.closest("a");
                        null != t && t.href.endsWith("/security/exit") && (e.preventDefault(),
                        this.signOut())
                    }
                    ))
                }
                signOut(e) {
                    this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("onBeforeSignOut")),
                    this.layoutModel.$user.clearLocalUserData(),
                    this.layoutModel.$auth.signOut(e)
                }
                bindStat() {
                    const e = this.layoutModel.$analitic;
                    const t = document.querySelector(".j-header");
                    null == t || t.addEventListener("click", this.layoutModel.$helper.delegator(".j-wba-header-item", (function(t) {
                        const r = t.target.closest(".j-wba-header-item");
                        r && e.sendEvent("Header_T", {
                            name: r.dataset.wbaHeaderName
                        })
                    }
                    )));
                    const r = document.querySelector(".j-country");
                    null == r || r.addEventListener("click", this.layoutModel.$helper.delegator(".j-country-item input", (function(t) {
                        const r = t.target.closest(".j-country-item input");
                        r && e.sendEvent("Header_Country_Apl", {
                            name: r.value
                        })
                    }
                    )))
                }
                showChat(e) {
                    this.chatStarted.then((t => t.showChat(e)))
                }
            }
              , C = Object.defineProperty
              , I = (e, t, r) => ( (e, t, r) => t in e ? C(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class k extends WbSpaModel {
                constructor() {
                    super(),
                    I(this, "bannersLoaded", !1),
                    I(this, "footerBanners", []),
                    I(this, "showFooterObserver", null),
                    I(this, "userLocale", null),
                    I(this, "banners", {
                        mobileBanners: [],
                        desktopBanners: []
                    }),
                    I(this, "footerWrapper"),
                    I(this, "lastScrollTop", 0),
                    I(this, "isExpandedFooterInitialized", !1),
                    I(this, "prevTargetName", ""),
                    I(this, "abortController"),
                    this._onChangeDisplayMode = this._onChangeDisplayMode.bind(this),
                    this._loadBanners = this._loadBanners.bind(this),
                    this.abortController = new AbortController,
                    this.$eventBus.addEventListener("GeoUpdated", ( () => {
                        this.$observable.setProperty({
                            userLocale: this.$user.getLocale()
                        }),
                        this._loadBanners(!0),
                        this.footerWrapper && $.templates.footer.link(this.footerWrapper, this)
                    }
                    )),
                    this.footerWrapper = document.querySelector("#footer")
                }
                async init() {
                    if (!this.footerWrapper)
                        return;
                    await $.views.helpers.loadTemplateAsync("footer"),
                    await this.$helper.loadJsAsync(wb.settings.scripts.bannersTag),
                    this.userLocale = this.$user.getLocale() || "ru",
                    $.templates.footer.link(this.footerWrapper, this),
                    $.link(!0, this.footerWrapper, this),
                    this.showFooterObserver = WbSpaModel.prototype.$observerHelper.getVerticalObserver(this.footerWrapper),
                    this.footerWrapper.addEventListener(this.showFooterObserver.elementInViewportEventName, ( () => {
                        this._loadBanners(),
                        WbSpaModel.prototype.$analitic.sendEvent("Footer_S")
                    }
                    )),
                    this.showFooterObserver.observe();
                    const e = "by" === wb.settings.currentLocale
                      , t = "ge" === wb.settings.currentLocale;
                    (e || t) && window.addEventListener("spaTransition", (e => {
                        const t = document.querySelector(".footer__btn-container");
                        this.onSpaTransition(e, t)
                    }
                    ))
                }
                onSpaTransition(e, t) {
                    var r, n, s, i;
                    const a = null == (r = e.detail.dest) ? void 0 : r.name
                      , o = document.querySelector(".footer__info-main")
                      , l = document.querySelector(".footer__info-main-toggle")
                      , c = document.querySelector(".footer-expanded .fixed-block__cookies");
                    this.handleFooterPadding(),
                    this.prevTargetName == a && this._resetAbortController(),
                    "SpaHomeEntrypoint" == a ? (this.isExpandedFooterInitialized = !1,
                    this._initExpandedFooter(t),
                    null == (n = document.querySelector(".footer-expanded")) || n.classList.add("bottom-footer"),
                    null == t || t.classList.remove("hide"),
                    o && (o.classList.add("text-truncate"),
                    l.textContent = "Показать полностью"),
                    l && l.classList.remove("hide"),
                    c && (window.innerWidth <= 1023.98 ? c.style.marginBottom = "12px" : c.style.marginBottom = "-40px")) : (this._resetAbortController(),
                    (null == (s = this.footerWrapper) ? void 0 : s.classList.contains("footer--by")) && this.footerWrapper.classList.remove("footer--by"),
                    null == (i = document.querySelector(".footer-expanded")) || i.classList.remove("bottom-footer"),
                    null == t || t.classList.add("hide"),
                    o && o.classList.remove("text-truncate"),
                    l && l.classList.add("hide"),
                    c && (c.style.marginBottom = "0")),
                    this.prevTargetName = a
                }
                _resetAbortController() {
                    var e;
                    null == (e = this.abortController) || e.abort(),
                    this.abortController = new AbortController
                }
                _initExpandedFooter(e) {
                    var t, r, n;
                    if (this.isExpandedFooterInitialized)
                        return;
                    this.isExpandedFooterInitialized = !0;
                    const s = null == (t = this.abortController) ? void 0 : t.signal;
                    this.footerWrapper && this.footerWrapper.classList.add("footer--by"),
                    null == (r = document.querySelector(".footer-expanded")) || r.classList.add("bottom-footer");
                    const i = e.querySelector(".footer__btn")
                      , a = document.querySelector(".footer__info-main")
                      , o = document.querySelector(".footer__info-main-toggle");
                    null == (n = this.footerWrapper) || n.classList.add("footer--by"),
                    this.lastScrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    if (null == i || i.addEventListener("click", ( () => this.handleButtonClick(this.footerWrapper, i, e)), {
                        signal: s
                    }),
                    document.addEventListener("click", (t => this.handleOutsideClick(t, this.footerWrapper, i, e)), {
                        signal: s
                    }),
                    window.addEventListener("scroll", ( () => this.handleScroll(this.footerWrapper, i, e)), {
                        signal: s
                    }),
                    o && a) {
                        const t = () => this.handleToggleButtonClick(o, a, e);
                        o.addEventListener("click", t, {
                            signal: s
                        })
                    }
                }
                handleButtonClick(e, t, r) {
                    var n;
                    if (null == e || e.classList.toggle("footer--expanded"),
                    null == t || t.classList.toggle("footer__btn--active"),
                    r) {
                        (null == e ? void 0 : e.classList.contains("footer--expanded")) ? (r.classList.remove("hide"),
                        r.style.bottom = `${((null == (n = document.querySelector("#footer")) ? void 0 : n.clientHeight) || 0) + 24}px`,
                        WbSpaModel.prototype.$analitic.sendEvent("Footer_Details_T", {
                            type: "open"
                        })) : (r.style.bottom = "48px",
                        WbSpaModel.prototype.$analitic.sendEvent("Footer_Details_T", {
                            type: "close"
                        }))
                    }
                }
                handleToggleButtonClick(e, t, r) {
                    var n;
                    null == t || t.classList.toggle("text-truncate"),
                    WbSpaModel.prototype.$analitic.sendEvent("Footer_Details_T", {
                        type: "more"
                    }),
                    (null == t ? void 0 : t.classList.contains("text-truncate")) ? e.textContent = "Показать полностью" : e.textContent = "Свернуть",
                    r && (r.style.bottom = `${((null == (n = document.querySelector("#footer")) ? void 0 : n.clientHeight) || 0) + 24}px`)
                }
                handleOutsideClick(e, t, r, n) {
                    if (!(null == t ? void 0 : t.classList.contains("footer--expanded")))
                        return;
                    const s = e.target
                      , i = null == t ? void 0 : t.contains(s)
                      , a = null == r ? void 0 : r.contains(s);
                    i || a || this.handleButtonClick(t, r, n)
                }
                handleScroll(e, t, r) {
                    const n = window.pageYOffset || document.documentElement.scrollTop;
                    (null == e ? void 0 : e.classList.contains("footer--expanded")) && Math.abs(n - this.lastScrollTop) > 10 && this.handleButtonClick(e, t, r),
                    this.lastScrollTop = n
                }
                handleFooterPadding() {
                    var e, t, r, n;
                    null == (e = this.footerWrapper) || e.classList.remove("footer--padding", "footer--padding-lg");
                    const s = this.$router.currentRoute.name
                      , i = null == (t = this.$router.queryParams) ? void 0 : t.size
                      , a = "SpaBasketEntrypoint" === s && 0 !== i;
                    "SpaProductCardEntrypoint" === s && (null == (r = this.footerWrapper) || r.classList.add("footer--padding-lg")),
                    a && (null == (n = this.footerWrapper) || n.classList.add("footer--padding"))
                }
                onMenuSelected(e) {
                    if ("m" !== wb.settings.displayMode)
                        return;
                    e.currentTarget.parentNode.classList.toggle("dropdown-open")
                }
                sendStatEvent(e) {
                    const t = e.target;
                    if (!(t instanceof HTMLAnchorElement))
                        return;
                    const r = t.closest("[data-wba-footer-name]");
                    r && WbSpaModel.prototype.$analitic.sendEvent("Footer_T", {
                        name: r.dataset.wbaFooterName
                    })
                }
                _onChangeDisplayMode() {
                    this._setBanners()
                }
                _setBanners() {
                    if (!this.banners)
                        return;
                    const e = "phone" == wb.settings.displayType;
                    $.observable(this).setProperty({
                        footerBanners: e ? this.banners.mobileBanners : this.banners.desktopBanners
                    })
                }
                async _loadBanners(e) {
                    if (this.bannersLoaded && !e)
                        return;
                    this.bannersLoaded = !0;
                    const [t] = await Promise.all([this.$services.bannersService.getBannersForFooterAsync(), this.$helper.loadJsAsync(wb.settings.scripts.swiper)]);
                    this.banners = t,
                    this._onChangeDisplayMode(),
                    !e && $.observe(wb.settings, "displayType", this._onChangeDisplayMode)
                }
                scrollToHeader(e) {
                    (e.ctrlKey || e.metaKey) && 0 === e.button || window.scrollTo({
                        top: 0
                    })
                }
            }
            var P = k;
            const M = Object.freeze({
                UNKNOWN: "unknown",
                HOME: "home",
                CATALOG: "catalog",
                PRODUCTCARD: "product-card",
                SECURITY: "security",
                BASKET: "basket",
                PONED: "poned",
                PROFILE: "profile",
                ARCHIVE: "archive",
                ORDERS: "orders",
                SERVICES: "services",
                CLAIMS: "claims",
                SUBSCRIPTION: "subscription",
                CONTACTS: "contacts",
                WALLET: "wallet"
            });
            var T = class {
                static get types() {
                    return M
                }
                static getType() {
                    const e = location.pathname.toLowerCase();
                    return "/" == e ? M.HOME : /\/catalog\/\d+\/detail\.aspx/.test(e) || /\/resale\/product\/[a-zA-Z0-9]+/.test(e) ? M.PRODUCTCARD : e.startsWith("/catalog") ? M.CATALOG : e.startsWith("/subscription") ? M.SUBSCRIPTION : e.startsWith("/security") ? M.SECURITY : e.startsWith("/lk/basket") ? M.BASKET : e.startsWith("/lk/favorites") ? M.PONED : e.startsWith("/lk/myorders/archive") ? M.ARCHIVE : e.startsWith("/lk/myorders/delivery") ? M.ORDERS : e.startsWith("/lk/claims") || e.startsWith("/lk/refund") ? M.CLAIMS : e.startsWith("/lk/mywallet/purchases") ? M.WALLET : e.startsWith("/lk") ? M.PROFILE : e.startsWith("/services/kontakty") ? M.CONTACTS : e.startsWith("/services/") || e.startsWith("/promo/") || e.startsWith("/presservice") ? M.SERVICES : M.UNKNOWN
                }
            }
            ;
            class E extends WbSpaModel {
                constructor() {
                    var e;
                    super(),
                    this.navbarContainer = document.querySelector(".j-navbar-mobile"),
                    this.currentType = T.getType(),
                    this.menuModel = {
                        type: this.currentType,
                        catalogState: !1,
                        router: this.$router,
                        isPremium: !!this.$auth.isAuth && (null == (e = this.$user.getUserGradeFromCache()) ? void 0 : e.isPremium)
                    },
                    this.catalogState = !1
                }
                get menuLink() {
                    return this.navbarMenuLink
                }
                get types() {
                    return T.types
                }
                async init() {
                    var e, t, r, n;
                    const s = this.$analitic.checkDataInSplitterServiceV2("common", "ab_NewHeaderMob", "wallet")
                      , i = this.$analitic.checkDataInSplitterServiceV2("common", "ab_NewHeaderMob", "wallet_and_favorites");
                    let a = "mobileMenuTemp";
                    (null == (t = null == (e = wb.global.settings) ? void 0 : e.switches) ? void 0 : t.enableNewHeaderMob) && s && (a = "mobileMenuTempB"),
                    (null == (n = null == (r = wb.global.settings) ? void 0 : r.switches) ? void 0 : n.enableNewHeaderMob) && i && (a = "mobileMenuTempC"),
                    await $.views.helpers.loadTemplateAsync(a),
                    this._init(a),
                    this.navbarMenuLink = document.querySelector("#catalogNavbarLink")
                }
                _init(e) {
                    this._bindEvents(),
                    $.templates[e].link(this.navbarContainer, this),
                    $.link(!0, this.navbarContainer, this)
                }
                sendAnalytics(e) {
                    const t = e.target.closest(".navbar-mobile__link");
                    t && this.$analitic.sendEvent("Header_T", {
                        name: t.dataset.wbaHeaderName
                    })
                }
                showPopupLoginMobile(e) {
                    !1 === this.$auth.isAuth && (e.preventDefault(),
                    this.$auth.loginPopup())
                }
                setType(e) {
                    this.catalogState = e == this.types.CATALOG,
                    this.catalogState ? e = null : this.currentType = e,
                    $.observable(this.menuModel).setProperty({
                        catalogState: this.catalogState,
                        type: e
                    })
                }
                setCatalog() {
                    this.setType("catalog")
                }
                isCatalog() {
                    return this.catalogState
                }
                isNavbarLink(e) {
                    return !!e.closest(".navbar-mobile__link")
                }
                revertActive() {
                    this.setType(this.currentType)
                }
                updatePremiumState() {
                    var e;
                    $.observable(this.menuModel).setProperty({
                        isPremium: null == (e = this.$user.getUserGradeFromCache()) ? void 0 : e.isPremium
                    })
                }
                updateBasket(e) {
                    $.observable(this.menuModel).setProperty({
                        basketCount: e
                    })
                }
                updateEvents(e) {
                    $.observable(this.menuModel).setProperty({
                        eventsModel: e
                    })
                }
                _bindEvents() {
                    window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished || (this.currentType = T.getType(),
                        this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{
                            detail: {
                                currentType: this.currentType
                            }
                        })))
                    }
                    )),
                    this.$eventBus.addEventListener("OnlineChatInited", (e => {
                        this.currentType = T.getType(),
                        this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{
                            detail: {
                                currentType: this.currentType,
                                isInit: !0
                            }
                        }))
                    }
                    )),
                    this.$eventBus.addEventListener("MobileMenuTypeChange", (e => {
                        const {currentType: t} = e.detail;
                        let r = "";
                        switch (t) {
                        case T.types.HOME:
                        case T.types.BASKET:
                        case T.types.PONED:
                        case T.types.ARCHIVE:
                        case T.types.ORDERS:
                        case T.types.PROFILE:
                        case T.types.SUBSCRIPTION:
                        case T.types.WALLET:
                        case T.types.CONTACTS:
                            r = t;
                            break;
                        case T.types.SECURITY:
                            r = T.types.PROFILE
                        }
                        this.setType(r)
                    }
                    )),
                    this.$eventBus.addEventListener("UserGradeUpdated", this.updatePremiumState.bind(this))
                }
            }
            var D = E;
            var A = class {
                constructor(e) {
                    this.delay = e.delay,
                    this.menuContainer = e.menuContainer,
                    this.timerId = null,
                    this.updateFirstLvlMenuTask = null,
                    this.success = !1,
                    this.menuItemsUpdated = null,
                    this.getFullEcomInfo = e.getFullEcomInfo
                }
                lazyUpdateMenu() {
                    this.timerId = setTimeout(this._setUpdateFirstLvlMenuTask.bind(this), this.delay)
                }
                async forceUpdateMenu() {
                    this._setUpdateFirstLvlMenuTask();
                    try {
                        const e = await this.updateFirstLvlMenuTask;
                        return Promise.resolve(e)
                    } catch (e) {
                        return Promise.reject(null)
                    }
                }
                reloadMenu() {
                    this.updateFirstLvlMenuTask = null,
                    this.forceUpdateMenu()
                }
                _stopUpdatingMenu() {
                    this.timerId && clearTimeout(this.timerId)
                }
                _setUpdateFirstLvlMenuTask() {
                    this.updateFirstLvlMenuTask && this.success || (this.updateFirstLvlMenuTask = this._updateFirstLvlMenu()),
                    this._stopUpdatingMenu()
                }
                async _updateFirstLvlMenu() {
                    const [e] = await Promise.all([wb.spa.getCatalogMenu(), $.views.loadTemplateDictionaryAsync("menuTopTmpl")])
                      , t = e.fullMenu;
                    return this.menuItemsUpdated = await this._addMenuItemsFirstLvl(t, this.menuContainer),
                    this.menuContainer.addEventListener("click", (e => {
                        e.target.closest('a[href="/subscription"]') && this.setEntryPointWBClub()
                    }
                    )),
                    this.success = !0,
                    Promise.resolve(e)
                }
                setEntryPointWBClub() {
                    window.localStorage.setItem("entryPointWBClub", "Catalog")
                }
                async _addMenuItemsFirstLvl(e, t) {
                    var r;
                    const n = t.querySelector(".menu-burger__main-list");
                    let s = n.querySelectorAll(".j-menu-main-item")
                      , i = null
                      , a = !0
                      , o = 0;
                    const l = n.getAttribute("lang");
                    for (let t = 0; t < e.length; t++) {
                        const c = e[t];
                        if (a && (i = null == s ? void 0 : s[o]),
                        c.id == (null == (r = null == i ? void 0 : i.dataset) ? void 0 : r.menuId) && l === wb.currentLanguage) {
                            a = !0,
                            o++;
                            continue
                        }
                        a = !1;
                        const u = $.templates.menuFirstLvlTmpl.render(c);
                        i ? i.insertAdjacentHTML("beforebegin", u) : n.insertAdjacentHTML("beforeend", u)
                    }
                    if (s = t.querySelectorAll(".j-menu-main-item"),
                    e.length < s.length)
                        for (let t = e.length; t < s.length; t++)
                            s[t].remove();
                    return Promise.resolve(s)
                }
            }
            ;
            class O extends WbSpaModel {
                constructor(e) {
                    super(),
                    this.mobileMenu = new D,
                    this.layoutModel = e.layoutModel,
                    this.menuBtn = document.querySelector(".j-menu-burger-btn"),
                    this.menuContainer = document.querySelector(".j-menu-burger"),
                    this.mainMenuContainer = this.menuContainer.querySelector(".j-menu-burger-main"),
                    this.header = document.querySelector(".j-header"),
                    this.wrapper = document.querySelector(".j-wrapper"),
                    this.fixedBlock = document.querySelector(".j-fixed-block"),
                    this.widthScrollbar = Math.abs(window.innerWidth - document.documentElement.clientWidth),
                    this.bodyOverflowClass = "body--overflow",
                    this.menuContainerActiveClass = "menu-burger--active",
                    this.innerMenuContainerActiveClass = "menu-burger__drop--active",
                    this.innerMenuItemActiveClass = "menu-burger__drop-list-item--active",
                    this.menuActiveClass = "j-menu-active",
                    this.mainMenuItemActiveClass = "menu-burger__main-list-item--active",
                    this.headerFixedClass = "header--fixed",
                    this.headerFixedAnimateClass = "header--fixed-animate",
                    this.menuItemActiveClass = "menu-burger__drop-list-item--active",
                    this.menuBtnCloseClass = "nav-element__burger--close",
                    this.menuOverlay = this._getMenuOverlay(document.body.querySelector(".j-menu-burger")),
                    this._menuOpenHandler = this._menuOpenHandler.bind(this),
                    this._menuCloseHandler = this._menuCloseHandler.bind(this),
                    this.firstLvlMenuUpdater = new A({
                        menuContainer: this.menuContainer,
                        delay: 12e3
                    }),
                    this.firstLvlMenuUpdater.lazyUpdateMenu()
                }
                get headerFixedScrollTop() {
                    return this.$isDesktop ? 0 : 400
                }
                get mainMenuItems() {
                    var e;
                    return (null == (e = this.firstLvlMenuUpdater) ? void 0 : e.menuItemsUpdated) ? this.firstLvlMenuUpdater.menuItemsUpdated : this.menuContainer.querySelectorAll(".menu-burger__main-list-item")
                }
                isMenuOpened() {
                    return this.menuContainer.classList.contains(this.menuContainerActiveClass)
                }
                async init() {
                    this._bindB2BEvent(),
                    await this.mobileMenu.init(),
                    this._bindEvents(),
                    this._initMobileSearchbar(!this.$isDesktop)
                }
                _initMobileSearchbar(e) {
                    const t = this.mobileMenu.types;
                    let r = 0
                      , n = !1
                      , s = "";
                    function i() {
                        n || (window.requestAnimationFrame(o.bind(this)),
                        n = !0)
                    }
                    i = i.bind(this);
                    const a = (e, t) => {
                        e ? (this.header.classList.add(this.headerFixedClass),
                        window.requestAnimationFrame(( () => this.header.classList.add(this.headerFixedAnimateClass)))) : (t && this.header.classList.remove(this.headerFixedClass),
                        window.requestAnimationFrame(( () => this.header.classList.remove(this.headerFixedAnimateClass))))
                    }
                    ;
                    function o() {
                        const e = window.scrollY;
                        if (Math.abs(e - r) < 0)
                            return void (n = !1);
                        if (e <= this.headerFixedScrollTop)
                            return a(!1, !0),
                            void (n = !1);
                        const t = e > r;
                        t && "down" != s ? (this.$isDesktop ? a(!0) : a(!1),
                        s = "down") : t || "up" == s || (a(!0),
                        s = "up"),
                        r = e > 0 ? e : 0,
                        n = !1
                    }
                    const l = e => {
                        const {currentType: r} = e.detail;
                        r == t.PRODUCTCARD ? this.header.classList.add("hide-mobile") : this.header.classList.remove("hide-mobile"),
                        r == t.HOME || r == t.SERVICES ? window.addEventListener("scroll", i) : (this.header.classList.remove(this.headerFixedClass, this.headerFixedAnimateClass),
                        window.removeEventListener("scroll", i))
                    }
                    ;
                    this.$eventBus.addEventListener("MobileMenuTypeChange", l);
                    l({
                        detail: {
                            currentType: T.getType()
                        }
                    })
                }
                async _renderInnerMenu() {
                    var e, t;
                    const [r,n] = await Promise.all([this.layoutModel.$moduleLoader.loadModuleAsync("sideMenu"), this.firstLvlMenuUpdater.forceUpdateMenu()])
                      , s = this.layoutModel.$services.bannersService.getMenuBanners()
                      , i = new r(this.menuContainer,n,s);
                    return i.checkMenuItemForHide(i.menuItems, null == (t = null == (e = this.$geoLocation) ? void 0 : e.location) ? void 0 : t.destinations),
                    i.relinkModel(),
                    i.onSearchImage = () => this._onMenuHide(),
                    i
                }
                _bindEvents() {
                    var e, t, r;
                    this.menuBtn.addEventListener("mousedown", this._menuOpenHandler),
                    null == (t = null == (e = this.mobileMenu) ? void 0 : e.menuLink) || t.addEventListener("mousedown", this._menuOpenHandler),
                    null == (r = wb.displayModeSettings) || r.addObserver(( () => {
                        this._onMenuHide(),
                        this._initMobileSearchbar(!this.$isDesktop)
                    }
                    )),
                    window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished && this._onMenuHide()
                    }
                    )),
                    this.$eventBus.addEventListener("HideSideMenu", ( () => {
                        this.isMenuOpened() && (document.body.classList.remove(this.bodyOverflowClass),
                        document.body.style.paddingRight = "")
                    }
                    )),
                    this.$eventBus.addEventListener("SelectedSideMenuItemUpdated", (e => {
                        const {menuId: t} = e.detail;
                        this.mainMenuItems.forEach((e => e.classList.toggle(this.mainMenuItemActiveClass, e.dataset.menuId == t)))
                    }
                    ))
                }
                _bindB2BEvent() {
                    this.$eventBus.addEventListener("B2BModeToggled", ( () => {
                        const e = document.querySelector(".j-logo");
                        e && (e.dataset.business = wb.i18n.t("header.forBusiness")),
                        this.header.classList.toggle("is-b2b-mode", wb.settings.b2bMode)
                    }
                    ))
                }
                _bindMenuCloseHandlers() {
                    document.addEventListener("mousedown", this._menuCloseHandler)
                }
                _unbindMenuCloseHandlers() {
                    document.removeEventListener("mousedown", this._menuCloseHandler)
                }
                _menuOpenHandler(e) {
                    if (this.isMenuOpened() || !this.$isDesktop && this.mobileMenu.isCatalog())
                        return;
                    e.stopPropagation(),
                    e.preventDefault();
                    const t = e.currentTarget;
                    let r = "touchstart" === e.type ? "touchend" : "mouseup";
                    const n = () => {
                        t.removeEventListener(r, n),
                        this.layoutModel.$helper.loadCssAsync(wb.settings.styles.menuBurger).then(( () => this._onMenuShow()))
                    }
                    ;
                    t.addEventListener(r, n),
                    this.visibleCertItemMenu && wb.analitics.sendEvent("Certificate_S", {
                        location: "Catalog"
                    })
                }
                _menuCloseHandler(e) {
                    var t;
                    const r = e.target
                      , n = this;
                    if (!(this.$isDesktop && r.closest(`.${this.menuActiveClass}`) || !this.$isDesktop && !this.mobileMenu.isNavbarLink(r) && !this.menuBtn.contains(r)))
                        if (this.$isDesktop) {
                            let t = function() {
                                r.removeEventListener(n, t),
                                s()
                            };
                            const r = e.currentTarget
                              , n = "touchstart" === e.type ? "touchend" : "mouseup";
                            r.addEventListener(n, t)
                        } else
                            null == (t = this.sideMenu) || t.touchHandlerHelper(e, s);
                    function s() {
                        n._onMenuHide()
                    }
                }
                refreshMenu(e) {
                    e && (wb.spa.clearCatalogMenu(),
                    this.firstLvlMenuUpdater.reloadMenu()),
                    this.isSubMenuShowerActivated = !1,
                    this.menuRendered = !1,
                    !this.$isDesktop && this.isMenuOpened() && this._onMenuShow()
                }
                async _onMenuShow() {
                    var e;
                    if (document.body.classList.add(this.bodyOverflowClass),
                    this.wrapper.style.paddingRight = `${this.widthScrollbar}px`,
                    this.header.style.paddingRight = `${this.widthScrollbar}px`,
                    this.header.style.marginRight = `-${this.widthScrollbar}px`,
                    this.fixedBlock.style.marginRight = `${this.widthScrollbar}px`,
                    "d" === wb.settings.displayMode && scrollY <= this.header.offsetHeight && document.documentElement.style.setProperty("--scroll-top", window.scrollY + "px"),
                    this.menuContainer.classList.add(this.menuContainerActiveClass),
                    this.mainMenuContainer.classList.add(this.menuActiveClass),
                    this.menuBtn.classList.add(this.menuBtnCloseClass),
                    this.menuOverlay.show(),
                    !this.$isDesktop && this.mobileMenu.setCatalog(),
                    this._bindMenuCloseHandlers(),
                    this.menuRendered)
                        null == (e = this.sideMenu) || e.clearShownBanners();
                    else {
                        const e = await this._renderInnerMenu();
                        this.sideMenu = e,
                        this.mainMenuItems.forEach((e => {
                            var t, r, n;
                            if (!this.$isDesktop && ("2192" === e.dataset.id || "4853" === e.dataset.id))
                                return;
                            const s = this.sideMenu.findItem(e.dataset.menuId);
                            s && (((null == (t = s.childs) ? void 0 : t.length) > 0 || (null == (r = s.banners) ? void 0 : r.length) > 0) && e.classList.add("menu-burger__main-list-item--subcategory"),
                            e.classList.toggle("hide", null != (n = s.hide) && n),
                            1234 === s.id && (this.visibleCertItemMenu = !0,
                            wb.analitics.sendEvent("Certificate_S", {
                                location: "Catalog"
                            })))
                        }
                        )),
                        this.menuRendered = !0
                    }
                    this._menuMainHoverHandler()
                }
                _onMenuHide() {
                    var e, t;
                    null == (e = this.sideMenu) || e.changeSelectedMenuItem(null),
                    null == (t = this.sideMenu) || t.innerMenuHide(),
                    this.wrapper.style.paddingRight = "",
                    this.header.style.marginRight = "",
                    this.header.style.paddingRight = "",
                    this.fixedBlock.style.marginRight = "",
                    document.body.classList.remove(this.bodyOverflowClass),
                    this.menuContainer.classList.remove(this.menuContainerActiveClass),
                    this.mainMenuContainer.classList.remove(this.menuActiveClass),
                    this.menuBtn.classList.remove(this.menuBtnCloseClass),
                    this.menuOverlay.hide(),
                    !this.$isDesktop && this.mobileMenu.revertActive(),
                    this._unbindMenuCloseHandlers()
                }
                _menuMainHoverHandler() {
                    !this.isSubMenuShowerActivated && this.$isDesktop && (this.layoutModel.$moduleLoader.loadModuleAsync("subMenuShower").then((e => new e(this.mainMenuItems,{
                        over: e => {
                            this.$isDesktop && this.sideMenu.onMenuSelected(e)
                        }
                        ,
                        out: () => {}
                        ,
                        timeout: 30,
                        interval: 40,
                        sensitivity: 4
                    }))),
                    this.isSubMenuShowerActivated = !0)
                }
                _getMenuOverlay(e) {
                    const t = e;
                    let r;
                    function n() {
                        r && r.remove(),
                        r = null
                    }
                    return {
                        show: function() {
                            "m" != wb.settings.displayMode ? r || (t.insertAdjacentHTML("beforebegin", '<div class="overlay overlay--menu-burger j-overlay"></div>'),
                            r = e.parentElement.querySelector(".j-overlay")) : n()
                        },
                        hide: n
                    }
                }
            }
            var B = O
              , L = Object.defineProperty
              , x = (e, t, r) => ( (e, t, r) => t in e ? L(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const R = "cookie_accepted"
              , F = "_cp";
            var j = class {
                constructor(e) {
                    x(this, "layoutModel"),
                    x(this, "cookiesWrapper"),
                    x(this, "channel"),
                    x(this, "href"),
                    this.layoutModel = e.layoutModel,
                    this.cookiesWrapper = document.querySelector(".j-fixed-block .fixed-block__cookies"),
                    this.href = this.getServiceLink(),
                    this.check()
                }
                getServiceLink() {
                    let e = "/services/politika-obrabotki-personalnyh-dannyh";
                    switch (wb.settings.currentLocale) {
                    case "ge":
                    case "tm":
                    case "tj":
                        e = "/services/politika-konfidentsialnosti";
                        break;
                    case "by":
                        e = "/services/cookies-policy"
                    }
                    return e
                }
                disable() {
                    wb.cookieHelper.deleteCookie(F),
                    window.location.reload()
                }
                async _show() {
                    var e;
                    (null == (e = this.cookiesWrapper) ? void 0 : e.classList.contains("hide")) && (await $.views.helpers.loadTemplateAsync("cookies"),
                    $.templates.cookies.link(this.cookiesWrapper, this),
                    $.link(!0, this.cookiesWrapper, this),
                    this.cookiesWrapper.classList.remove("hide"),
                    this.layoutModel.$analitic.sendEvent("Alert_S", {
                        name: "cookies_alert"
                    }),
                    window.BroadcastChannel && (this.channel = new BroadcastChannel("_cookiePolicy"),
                    this.channel.addEventListener("message", this._hide.bind(this))))
                }
                _hide() {
                    var e, t, r;
                    (null == (e = this.cookiesWrapper) ? void 0 : e.classList.contains("hide")) || (null == (t = this.cookiesWrapper) || t.classList.add("hide"),
                    $.unlink(this.cookiesWrapper),
                    null == (r = this.channel) || r.close(),
                    this.channel = null,
                    this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("CookiePolicyHide")))
                }
                check() {
                    const e = "1" === wb.cookieHelper.getCookie(F) || "true" === localStorage.getItem("wbx__cookieAccepted") || -1 !== window.navigator.userAgent.indexOf("Google-InspectionTool") || -1 !== window.navigator.userAgent.indexOf("Chrome-Lighthouse");
                    return e ? this._hide() : "false" !== sessionStorage.getItem(R) && this._show(),
                    e
                }
                ok() {
                    var e;
                    const t = this.check();
                    t || wb.cookieHelper.setCookie(F, "1", {
                        "max-age": 7776e3
                    }),
                    this.cookiesWrapper && (null == (e = this.channel) || e.postMessage("hide"),
                    this._hide(),
                    t || this.layoutModel.$analitic.sendEvent("Alert_T", {
                        name: "cookies_alert",
                        type: "ok"
                    }))
                }
                no() {
                    sessionStorage.setItem(R, "false"),
                    this._hide(),
                    this.layoutModel.$analitic.sendEvent("Alert_T", {
                        name: "cookies_alert",
                        type: "no"
                    })
                }
                cookies() {
                    this.layoutModel.$analitic.sendEvent("Alert_T", {
                        name: "cookies_alert",
                        type: "cookies"
                    })
                }
            }
              , N = Object.defineProperty
              , U = (e, t, r) => ( (e, t, r) => t in e ? N(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var W = class {
                constructor(e) {
                    U(this, "$base", null),
                    U(this, "oferta"),
                    this._enableOferta() && (this.$base = e.layoutModel,
                    this.$base.$auth.isAuth ? window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished && this._onAuthLogin()
                    }
                    ), {
                        once: !0
                    }) : this.$base.$eventBus.addEventListener("onUserAuth", this._onAuthLogin.bind(this), {
                        single: !0
                    }))
                }
                _loadResources() {
                    return this.$base.$moduleLoader.loadModuleAsync("offer0425").then((e => {
                        this.oferta || (this.oferta = new e)
                    }
                    ))
                }
                _onAuthLogin() {
                    this._loadResources().then((e => {
                        this.oferta.show()
                    }
                    ))
                }
                _enableOferta() {
                    return "am" === wb.settings.currentLocale && wb.global.settings.switches.enablePopupAcceptOffer || "tj" === wb.settings.currentLocale && wb.global.settings.switches.enablePopupAcceptOfferTj
                }
                async confirm() {
                    var e;
                    this._enableOferta() && this.$base.$auth.isAuth && (await this._loadResources(),
                    null == (e = this.oferta) || e.confirm())
                }
                async promise() {
                    var e;
                    return this._enableOferta() && this.$base.$auth.isAuth ? (await this._loadResources(),
                    (null == (e = this.oferta) ? void 0 : e.promise()) || new Promise((e => e()))) : new Promise((e => e()))
                }
            }
              , H = Object.defineProperty
              , q = (e, t, r) => ( (e, t, r) => t in e ? H(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class V extends WbSpaModel {
                constructor() {
                    super(),
                    q(this, "initTask", null),
                    q(this, "header", null),
                    q(this, "oferta", null),
                    q(this, "cookiePolicy", null),
                    q(this, "footer", null),
                    q(this, "menuTop", null),
                    this.initTask = new this.$helper.Deferred,
                    this._initWba = this._initWba.bind(this)
                }
                preInit() {
                    const e = {
                        layoutModel: this
                    };
                    this.header = new S(e),
                    this.oferta = new W(e),
                    this.cookiePolicy = new j(e),
                    ["by", "ge"].includes(wb.settings.currentLocale) ? this.cookiePolicy.check() ? this._initWba() : (this._initWba(!0),
                    this.$eventBus.addEventListener("CookiePolicyHide", ( () => {
                        var e;
                        (null == (e = this.cookiePolicy) ? void 0 : e.check()) ? this._initWba() : window.wba = function() {}
                    }
                    ), {
                        once: !0
                    })) : this._initWba()
                }
                init() {
                    var e;
                    const t = {
                        layoutModel: this
                    };
                    this.footer = new P,
                    this.menuTop = new B(t);
                    const r = this.menuTop.init()
                      , n = this.footer.init()
                      , s = null == (e = this.header) ? void 0 : e.init();
                    Promise.all([n, s, r]).then(( () => {
                        var e;
                        return null == (e = this.initTask) ? void 0 : e.resolve(void 0)
                    }
                    ))
                }
                _initWba(e=!1) {
                    var t, r, n, s, i, a, o;
                    wb.settings.secondHost && (Object.getOwnPropertyDescriptor(window, "wba-url") || Object.defineProperty(window, "wba-url", {
                        get() {
                            return this._wbaUrl
                        },
                        set() {
                            this._wbaUrl = `https://${wb.settings.secondHost}/a.wb/e`
                        }
                    })),
                    t = window,
                    r = document,
                    n = "script",
                    s = wb.settings.secondHost ? `https://${wb.settings.secondHost}/a.wb/sdk/sdk.js` : "https://a.wb.ru/sdk/sdk.js",
                    t[i = "wba"] = t[i] || function() {
                        (t[i].q = t[i].q || []).push(arguments)
                    }
                    ,
                    t[i].l = Date.now(),
                    e || (a = r.createElement(n),
                    o = r.getElementsByTagName(n)[0],
                    a.async = 1,
                    a.src = s,
                    o.parentNode.insertBefore(a, o));
                    const l = -1 === window.location.hostname.indexOf("napi") ? 4 : 35;
                    wba("init", {
                        counterId: l
                    })
                }
                updateAfterLogin() {
                    var e, t;
                    this.$user.reset(),
                    null == (e = this.header) || e.shortBasketInfo.update(),
                    this.$geoLocation.updateLocation(),
                    this.$router.clearNotActiveContainer(),
                    null == (t = this.header) || t.updateSwitcher(),
                    this.$storageHelper.removeDb("files_v2_0")
                }
            }
            Object.defineProperties(window, {
                MainLayoutSpa: {
                    value: V
                }
            });
            var z = V
        },
        14108: function(e, t) {
            "use strict";
            t.A = Object.freeze({
                main: 1,
                goods: 2,
                search: 3,
                brand: 4,
                brandConstructor: 5,
                brandConstructorCatalog: 6,
                seller: 7,
                sellerCustomMain: 9,
                promoEntry: 11,
                categoryDenyLink: 12,
                recommendationsSearch: 13
            })
        },
        39889: function(e, t) {
            "use strict";
            var r = Object.defineProperty
              , n = (e, t, n) => ( (e, t, n) => t in e ? r(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: n
            }) : e[t] = n)(e, "symbol" != typeof t ? t + "" : t, n);
            const s = 6048e5
              , i = "__catalogOptions";
            class a {
                constructor() {
                    n(this, "sort"),
                    n(this, "cardSize")
                }
                setValues(e, t) {
                    e && (this.sort = e),
                    t && (this.cardSize = t)
                }
            }
            class o {
                static updateCatalogOptions(e, t) {
                    const r = o._getCatalogOptionsFromCache(e);
                    "cardSize" === e && (r.cardSize = t),
                    "sort" === e && (r.sort = t),
                    o._updateOption(e, r)
                }
                static _updateOption(e, t) {
                    ("cardSize" == e ? localStorage : sessionStorage).putObject(i, {
                        expired: Date.now() + s,
                        data: t
                    })
                }
                static getCatalogOptionsValueByKey(e) {
                    return o._getCatalogOptionsFromCache(e)[e]
                }
                static _getCatalogOptionsFromCache(e) {
                    const t = ("cardSize" == e ? localStorage : sessionStorage).getObject(i)
                      , r = new a;
                    return null != t && t.data && t.expired > Date.now() - s ? "cardSize" == e ? r.setValues(void 0, t.data.cardSize) : r.setValues(t.data.sort, void 0) : ("cardSize" == e ? r.setValues(void 0, "c516x688") : r.setValues("popular", void 0),
                    o._updateOption(e, r)),
                    r
                }
            }
            t.A = o
        },
        59067: function(e, t) {
            "use strict";
            var r = Object.defineProperty
              , n = (e, t, n) => ( (e, t, n) => t in e ? r(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: n
            }) : e[t] = n)(e, "symbol" != typeof t ? t + "" : t, n);
            class s extends WbSpaModel {
                constructor(e) {
                    super(),
                    n(this, "func"),
                    n(this, "interval"),
                    n(this, "timerObj"),
                    this.func = e.func,
                    this.interval = e.interval,
                    this.timerObj = null
                }
                stop() {
                    return this.timerObj && (clearInterval(this.timerObj),
                    this.timerObj = null),
                    this
                }
                start() {
                    return this.timerObj || (this.stop(),
                    this.timerObj = window.setInterval(this.func, this.interval)),
                    this
                }
            }
            t.A = s
        },
        2157: function() {
            "use strict";
            let e = null;
            const t = "body>div.popup, .cascade-popup"
              , r = new class {
                constructor() {
                    this.body = document.body,
                    this.scrollY = 0
                }
                enable() {
                    this.body && (this.scrollY = window.scrollY,
                    this.addStyles())
                }
                disable() {
                    this.body && (this.removeStyles(),
                    window.scrollTo(0, this.scrollY))
                }
                addStyles() {
                    this.body && (this.body.style.position = "fixed",
                    this.body.style.top = -1 * this.scrollY + "px",
                    this.body.style.right = "0px",
                    this.body.style.bottom = "0px",
                    this.body.style.left = "0px")
                }
                removeStyles() {
                    this.body && (this.body.style.removeProperty("position"),
                    this.body.style.removeProperty("top"),
                    this.body.style.removeProperty("right"),
                    this.body.style.removeProperty("bottom"),
                    this.body.style.removeProperty("left"))
                }
            }
            ;
            function n(e, t=0) {
                return () => {
                    e.style.top = Math.max(document.documentElement.clientHeight / 2 + window.scrollY - e.clientHeight / 2 + t, window.scrollY + t) + "px",
                    e.style.left = Math.max(document.documentElement.clientWidth / 2 - e.clientWidth / 2, 0) + "px"
                }
            }
            function s(e) {
                const t = document.createElement("div");
                return t.classList.addMany(e),
                t
            }
            function i(e, t) {
                const r = document.createElement("a");
                r.href = "#",
                t.push("close"),
                r.classList.addMany(t),
                e.appendChild(r)
            }
            function a(e, t, r, n, s, i) {
                const a = document.createElement("div");
                if (null != n && Array.isArray(n) && a.classList.addMany(n),
                r)
                    a.innerHTML = t;
                else if (i) {
                    let t = document.querySelector(i)
                      , r = document.createElement("span");
                    r.id = "popup_pc",
                    t.parentElement.insertBefore(r, t),
                    e.placeholder = document.getElementById(r.id),
                    a.appendChild(t)
                } else
                    a.textContent = t;
                null != s && Object.entries(s).forEach(( ([e,t]) => a.setAttribute(e, t))),
                e.appendChild(a)
            }
            function o(e, t, r, n, s, i) {
                const a = document.createElement("div");
                if (null != n && Array.isArray(n) && a.classList.addMany(n),
                r)
                    a.innerHTML = t;
                else if (i) {
                    let t = document.querySelector(i)
                      , r = document.createElement("span");
                    r.id = "popup_pc",
                    t.parentElement.insertBefore(r, t),
                    e.placeholder = document.getElementById(r.id),
                    a.appendChild(t)
                } else
                    a.textContent = t;
                null != s && Object.entries(s).forEach(( ([e,t]) => a.setAttribute(e, t))),
                e.appendChild(a)
            }
            function l(e, t, r) {
                const n = document.createElement("button");
                n.classList.addMany(r || []),
                n.textContent = t,
                e.appendChild(n)
            }
            function c(e) {
                if (!e)
                    return 0;
                const t = document.querySelectorAll(".j-custom-overlay");
                let r = 0;
                return t.forEach((e => {
                    r = Math.max(r, e.style.zIndex)
                }
                )),
                r
            }
            function u(t, r, n, s) {
                var i, a, o;
                let l;
                const u = e => {
                    var t;
                    e instanceof Event && e.preventDefault(),
                    (null == (t = s.onBeforeHide) ? void 0 : t.call(s)) || (r.classList.remove("shown"),
                    !s.keepOpenOnTransition && window.removeEventListener("spaTransition", l),
                    window.removeEventListener("keydown", d, !0),
                    Promise.resolve().then(( () => {
                        var t;
                        null == (t = s.onHide) || t.call(s, e)
                    }
                    )))
                }
                ;
                l = () => {
                    u()
                }
                ,
                !s.keepOpenOnTransition && window.addEventListener("spaTransition", l);
                const d = e => {
                    27 == e.keyCode && (u(e),
                    window.removeEventListener("keydown", d, !0))
                }
                ;
                (s.modal || null == s.modal) && (window.addEventListener("keydown", d, !0),
                setTimeout(( () => null == n ? void 0 : n.addEventListener("click", u)))),
                (null == (i = s.closeSelector) ? void 0 : i.length) > 0 && r.addEventListener("click", this.$helper.delegator(s.closeSelector, u)),
                null != e && (e.close(),
                e = null);
                const h = c(n);
                n && (n.style.zIndex = h + 300),
                r.style.zIndex = h + 311,
                t.appendChild(r),
                n && t.appendChild(n),
                null == (a = s.onBeforeShow) || a.call(s, r),
                document.body.insertBefore(t, document.body.firstChild),
                null == (o = s.onShow) || o.call(s, r);
                const p = {
                    popup: r,
                    overlay: n,
                    close: e => u(e),
                    centered: s.centeredFunction
                };
                return s.onlyOne && (e = p),
                p
            }
            function d(e, t, r, c=!0, d=!1, h="") {
                e instanceof Error ? e = e.isCustomError && !e.isCancelled && e.message ? e.message : wb.i18n.t("common.errors.serverError") : e || (e = wb.i18n.t("common.errors.serverError"));
                const p = document.createDocumentFragment();
                let m = ["popup", "popup-alert", "shown"];
                t && (Array.isArray(t) ? m = m.concat(t) : m.push(t));
                const b = s(m);
                p.appendChild(b),
                d && i(b, ["popup__close"]),
                h && o(b, h, !1, ["title"]),
                a(b, e, !0),
                null !== r && l(b, r || wb.i18n.t("common.close"), ["popup__btn-main", "popup-alert__close"]);
                const g = document.createElement("div");
                g.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]);
                const y = n(b);
                window.addEventListener("resize", y),
                u.call(this, p, b, g, {
                    onlyOne: !0,
                    closeSelector: ".popup-alert__close, .popup__close",
                    modal: c,
                    onShow: function() {
                        b.style.display = "block",
                        y()
                    },
                    onHide: function() {
                        window.removeEventListener("resize", y),
                        b.remove(),
                        g.remove()
                    }
                })
            }
            function h(e, t={}) {
                const r = {
                    msg: e,
                    lockScroll: !0,
                    modal: !1,
                    showCloseBtn: !0,
                    useHtml: !0,
                    contentClasses: ["content"],
                    popupClassesList: ["shown", "tooltip", "tooltip--mobile", ...(null == t ? void 0 : t.classes) || []],
                    useCenteredFunction: !0,
                    onShow: e => e.classList.remove("popup")
                };
                return wb.popup.showCustomPopup(r)
            }
            function p(e, t, r, o) {
                const l = document.createDocumentFragment()
                  , c = s(t);
                i(c, ["j-close"]),
                a(c, e, !0, ["content", "quick-order-popup-content", "j-sizepicker-content"], null);
                const d = document.createElement("div");
                d.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]),
                c.id = "size-picker-popup",
                c.style.opacity = "0";
                const h = n(c);
                window.addEventListener("resize", h),
                u.call(this, l, c, d, {
                    closeSelector: ".j-close",
                    onHide: function() {
                        window.removeEventListener("resize", h),
                        c.remove(),
                        d.remove(),
                        null == o || o()
                    },
                    onShow: function() {
                        c.style.display = "block",
                        h(),
                        c.style.opacity = "1",
                        null == r || r(c)
                    }
                })
            }
            function m(e) {
                const o = this.$helper.deepMerge({}, {
                    overlay: !0,
                    showCross: !0,
                    useHtml: !1,
                    popupClassesList: [],
                    contentClasses: [],
                    overlayClasses: [],
                    contentAttributeDictionary: {},
                    msg: "",
                    closeClass: ["j-close", "popup__close"],
                    modal: !0,
                    closeSelector: ".j-close",
                    useCenteredFunction: !1,
                    lockScroll: !1,
                    lockScrollMobile: !1,
                    lockScrollPreviewProduct: !1,
                    onlyOne: !1,
                    hasAnimation: !1
                }, e)
                  , l = document.createDocumentFragment()
                  , d = s(["popup"].concat(o.popupClassesList));
                d.dataset.lockScroll = o.lockScroll ? "true" : "false";
                const h = document.querySelector(".j-fixed-block")
                  , p = document.querySelector(".j-header")
                  , m = document.querySelector(".j-wrapper");
                o.showCross && i(d, o.closeClass),
                a(d, o.msg, o.useHtml, o.contentClasses, o.contentAttributeDictionary, o.srcElem),
                o.showCloseBtn && function(e, t) {
                    const r = document.createElement("button");
                    r.innerText = wb.i18n.t("common.close"),
                    !t.length && t.push("close"),
                    r.classList.addMany(t),
                    e.appendChild(r)
                }(d, o.closeClass);
                const b = o.overlay ? document.createElement("div") : null;
                if (b) {
                    const e = ["overlay", "initially-hidden", "j-custom-overlay"].concat(o.overlayClasses);
                    b.classList.addMany(e)
                }
                let g;
                if (o.useCenteredFunction) {
                    const e = o.hasAnimation ? 40 : 0;
                    g = n(d, e),
                    window.addEventListener("resize", g)
                }
                return u.call(this, l, d, b, {
                    onBeforeHide: () => {
                        var e;
                        return null == (e = o.onBeforeHide) ? void 0 : e.call(o)
                    }
                    ,
                    onHide: function(e, n) {
                        var s, i, a, l, u;
                        if (null == (s = o.onBeforeHide) ? void 0 : s.call(o))
                            return;
                        !o.lockScroll || (null == n ? void 0 : n.keepLockScroll) || o.keepLockScroll || (document.body.classList.remove("body--overflow"),
                        m && (m.style.paddingRight = ""),
                        h && (h.style.marginRight = ""),
                        p && (p.style.paddingRight = "",
                        p.style.marginRight = "")),
                        o.lockScrollPreviewProduct && document.body.classList.remove("body--overflow-preview-kt"),
                        !o.lockScrollMobile || (null == n ? void 0 : n.keepLockScroll) || o.keepLockScroll || (document.body.classList.remove("body--overflow-mobile"),
                        WbSpaModel.prototype.$isDesktop || r.disable()),
                        o.useCenteredFunction && window.removeEventListener("resize", g),
                        o.srcElem && (null == (a = null == (i = d.placeholder) ? void 0 : i.parentElement) || a.insertBefore(document.querySelector(o.srcElem), d.placeholder),
                        null == (l = d.placeholder) || l.remove());
                        const y = 27 == (null == e ? void 0 : e.keyCode);
                        if (o.hasAnimation && !o.onlyOne && !y) {
                            document.querySelectorAll(".overlay").length > 1 && document.body.classList.add("body--overflow")
                        }
                        if (o.hasAnimation) {
                            d.classList.add("popup--disappear");
                            const r = c(b);
                            d.style.zIndex = r + 1;
                            const n = document.querySelectorAll(t);
                            setTimeout(( () => {
                                var t;
                                null == (t = o.onHide) || t.call(o, d, e),
                                d.remove(),
                                null == b || b.remove(),
                                document.querySelector("body").classList.remove("no-scroll"),
                                !o.onlyOne && n[1] && (n[1].style.visibility = "visible",
                                n[1].classList.contains("cascade-popup") || n[1].classList.add("popup--appear"))
                            }
                            ), 400)
                        } else if (null == (u = o.onHide) || u.call(o, d, e),
                        d.remove(),
                        null == b || b.remove(),
                        o.hasAnimation && !o.onlyOne) {
                            const e = document.querySelectorAll(t);
                            e[0] && (e[0].style.visibility = "visible")
                        }
                    },
                    onShow: () => {
                        var e;
                        if (document.activeElement.blur(),
                        o.lockScroll && !document.body.classList.contains("body--overflow")) {
                            const e = Math.abs(window.innerWidth - document.documentElement.clientWidth);
                            document.body.classList.add("body--overflow"),
                            m && (m.style.paddingRight = `${e}px`),
                            h && (h.style.marginRight = `${e}px`),
                            p && (p.style.paddingRight = `${e}px`,
                            p.classList.contains("header--fixed") || (p.style.marginRight = `-${e}px`))
                        }
                        o.lockScrollPreviewProduct && !document.body.classList.contains("body--overflow-preview-kt") && document.body.classList.add("body--overflow-preview-kt"),
                        o.lockScrollMobile && !document.body.classList.contains("body--overflow-mobile") && (document.body.classList.add("body--overflow-mobile"),
                        WbSpaModel.prototype.$isDesktop || r.enable());
                        const n = () => {
                            d.style.opacity = 1,
                            o.useCenteredFunction && g(),
                            o.hasAnimation && d.classList.add("popup--appear")
                        }
                          , s = this.$helper.nextTick().then(( () => (n(),
                        Promise.resolve())));
                        if (Object.defineProperty(d, "contentEl", {
                            get() {
                                return d.querySelector(".popup__content")
                            }
                        }),
                        o.onShowAsync ? o.onShowAsync(d).then(n) : null == (e = o.onShow) || e.call(o, d, s),
                        o.hasAnimation && !o.onlyOne) {
                            [...document.querySelectorAll(t)].slice(1).forEach((e => {
                                e.style.visibility = "hidden",
                                e.classList.remove("popup--appear")
                            }
                            ))
                        }
                    }
                    ,
                    onBeforeShow: function() {
                        var e;
                        d.style.opacity = 0,
                        d.style.display = "block",
                        null == (e = o.onBeforeShow) || e.call(o, d)
                    },
                    modal: o.modal,
                    closeSelector: o.closeSelector,
                    centeredFunction: g,
                    onlyOne: o.onlyOne,
                    keepOpenOnTransition: o.keepOpenOnTransition
                })
            }
            function b(e, t) {
                let r;
                const n = this.$helper
                  , s = wb.popup.showCustomPopup({
                    useHtml: !0,
                    popupClassesList: ["popup-video", "shown"],
                    contentClasses: ["content"],
                    useCenteredFunction: !0,
                    msg: $.templates('<h2 class="popup__header">{{>title}}</h2><div class="video"><video id="videoPlayer" class="video-js vjs-default-skin vjs-big-play-centered vjs-waiting" width="855" controls autoplay preload></video></div>')({
                        title: t
                    }),
                    onBeforeShow: e => {
                        e.style.opacity = 0,
                        e.style.display = "block"
                    }
                    ,
                    onShow: t => {
                        r = videojs("videoPlayer", {
                            html5: {
                                nativeAudioTracks: !1,
                                nativeVideoTracks: !1,
                                hls: {
                                    overrideNative: !0
                                }
                            }
                        }),
                        r.ready((function() {
                            this.src({
                                src: e,
                                type: "application/x-mpegURL",
                                withCredentials: !0
                            })
                        }
                        )),
                        n.nextTick().then(( () => {
                            t.style.opacity = 1,
                            s.centered()
                        }
                        ))
                    }
                    ,
                    onHide: () => {
                        r.isDisposed() || (r.isInPictureInPicture() && r.exitPictureInPicture(),
                        r.dispose())
                    }
                })
            }
            function g(e, r={}) {
                return new Promise((d => {
                    var h, p, m, b;
                    document.activeElement.blur();
                    let g = null != (h = r.hasAnimation) && h;
                    const y = document.createDocumentFragment();
                    let f = ["popup", "popup-confirm", "shown"];
                    r.classList && (f = f.concat(r.classList));
                    let v = ["popup__btn-main", "j-yes"]
                      , w = ["popup__btn-base", "j-no"];
                    r.yesBtnClassList && (v = r.yesBtnClassList),
                    r.noBtnClassList && (w = r.noBtnClassList);
                    const _ = s(f);
                    _.style.display = "block",
                    g && (_.style.opacity = "0"),
                    r.title && (r.titleClassList = r.titleClassList || [],
                    r.titleClassList.push("popup__msg-title"),
                    o(_, r.title, !0, r.titleClassList)),
                    r.contentClasses = r.contentClasses || [],
                    r.contentClasses.push("popup__msg"),
                    a(_, e, !0, r.contentClasses);
                    let S = document.createElement("div");
                    S.classList.add("popup__btn", "btn-block"),
                    _.appendChild(S);
                    const C = [];
                    if ((null == (p = r.showYesBtn) || p) && C.push(( () => l(S, r.yes || wb.i18n.t("common.yes"), v))),
                    (null == (m = r.showNoBtn) || m) && C.push(( () => l(S, r.no || wb.i18n.t("common.no"), w))),
                    r.inverseBtns && C.reverse(),
                    C.forEach((e => e())),
                    r.showCross && i(_, ["popup__close"]),
                    r.lockScroll && !document.body.classList.contains("body--overflow")) {
                        const e = Math.abs(window.innerWidth - document.documentElement.clientWidth);
                        document.body.classList.add("body--overflow"),
                        document.body.style.paddingRight = `${e}px`
                    }
                    const I = document.createElement("div");
                    let k;
                    if (I.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]),
                    r.useCenteredFunction) {
                        k = n(_, g ? 40 : 0),
                        window.addEventListener("resize", k)
                    }
                    const P = u.call(this, y, _, I, {
                        onHide: function() {
                            if (g) {
                                _.classList.add("popup--disappear");
                                const e = c(I);
                                _.style.zIndex = e + 1,
                                null == I || I.remove();
                                const r = document.querySelectorAll(t);
                                setTimeout(( () => {
                                    _.remove(),
                                    document.querySelector("body").classList.remove("no-scroll");
                                    const e = Array.from(r).slice(1).find((e => !e.classList.contains("popup--disappear")));
                                    e && (e.style.visibility = "visible",
                                    e.classList.add("popup--appear")),
                                    d(!1)
                                }
                                ), 400)
                            } else
                                _.remove(),
                                I.remove(),
                                d(!1);
                            if (r.lockScroll && (document.body.classList.remove("body--overflow"),
                            document.body.style.paddingRight = ""),
                            r.useCenteredFunction && window.removeEventListener("resize", k),
                            g && !r.onlyOne) {
                                document.querySelectorAll(".overlay").length > 1 && document.body.classList.add("body--overflow")
                            }
                        },
                        onShow: function() {
                            var e;
                            const s = _.querySelector(".popup__back");
                            if (n(_)(),
                            g) {
                                _.style.opacity = "1",
                                _.classList.add("popup--appear");
                                [...document.querySelectorAll(t)].slice(1).forEach((e => {
                                    e.style.visibility = "hidden",
                                    e.classList.remove("popup--appear")
                                }
                                ))
                            }
                            _.querySelector(v.map((e => "." + e)).join("")).addEventListener("click", (e => {
                                d(!0),
                                P.close()
                            }
                            )),
                            null == (e = _.querySelector(w.map((e => "." + e)).join(""))) || e.addEventListener("click", (e => {
                                d(!1),
                                P.close()
                            }
                            )),
                            s && s.addEventListener("click", ( () => {
                                r.backBtnCallback(),
                                P.close()
                            }
                            ))
                        },
                        modal: null != (b = r.modal) && b,
                        closeSelector: r.showCross ? ".popup__close" : null,
                        onlyOne: r.onlyOne,
                        hasAnimation: g
                    })
                }
                ))
            }
            function y(e, {width: t=600, height: r=500}={}) {
                const n = [`top=${Math.floor((window.screenY || window.screenTop || 0) + (window.outerHeight - r) / 2) || 0}`, `left=${Math.floor((window.screenX || window.screenLeft || 0) + (window.outerWidth - t) / 2) || 0}`, `width=${t}`, `height=${r}`, "status=0", "toolbar=0"];
                return null != window.open(e, "", n.join(","))
            }
            class f extends WbSpaModel {
                renderModalError() {
                    return d.apply(this, arguments)
                }
                renderModalAdaptive() {
                    return h.apply(this, arguments)
                }
                showCustomPopup() {
                    return m.apply(this, arguments)
                }
                confirm() {
                    return g.apply(this, arguments)
                }
                videoPlayer() {
                    return b.apply(this, arguments)
                }
                showSizePickerPopup() {
                    return p.apply(this, arguments)
                }
                browserPopup() {
                    return y.apply(this, arguments)
                }
                showFeedbackError(e) {
                    let t = null;
                    return e ? e.isCancelled ? t = null : ("string" == typeof e.message || e.message instanceof String) && (t = e.message) : t = null,
                    $.views.loadTemplateAsync("popupErrorUnbuy").then((e => {
                        wb.popup.showCustomPopup({
                            useHtml: !0,
                            lockScroll: !0,
                            msg: e.render({
                                errorMessage: t
                            }),
                            popupClassesList: ["popup-error-unbuy", "shown"],
                            contentClasses: ["popup__content"],
                            useCenteredFunction: !0,
                            modal: !0
                        })
                    }
                    ))
                }
            }
            wb.popup = new f
        },
        13203: function(e, t, r) {
            "use strict";
            r.d(t, {
                A: function() {
                    return n
                }
            });
            class n {
                async getAidData(e) {
                    return await WbSpaModel.prototype.$httpClient.fetchStatic(`emergency-situation/${e}.json`, {
                        timeout: 4e3,
                        nullOnError: !0
                    })
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(n.prototype, e)
                }
                static factory(e) {
                    return e && n.richPrototype(e),
                    new n
                }
            }
        },
        62145: function(e, t, r) {
            "use strict";
            r.d(t, {
                i: function() {
                    return n
                }
            });
            const n = {
                appType: {
                    desktop: 1,
                    mobile: 2,
                    desktopAndMobile: 3
                },
                locationType: {
                    main: 42,
                    small: 38,
                    strip: 39,
                    _352x428: 60,
                    _305x245: 57,
                    _770x245: 59,
                    big: 41,
                    vertical: 36,
                    promo_strip: 61,
                    _1440x168: 62,
                    _215x168: 63,
                    _705x394: 64,
                    _460x394: 65,
                    _364x668: 66,
                    menu_banners: 73,
                    footerSocial: 80,
                    mainInfo: 81,
                    special_promo: 88,
                    promo_landing_92: 92,
                    promo_landing_93: 93,
                    promo_landing_94: 94,
                    newMainBanners: 100,
                    searchBanners: 102,
                    lkBanners: 103,
                    deliveryBanners: 104,
                    thxForOrderBanners: 105,
                    newPromoBanners: 106,
                    newBottomPromoBanners: 107
                },
                urlType: {
                    main: 1024,
                    default: 0,
                    promotion: 16384,
                    cataloger: 1 << 22,
                    promotionCatalog: 62,
                    promotionLanding: 256,
                    advBanner: 1024
                },
                bannerDisplayType: {
                    forAuth: 2,
                    forNotAuth: 3
                },
                country: {
                    ru: 1,
                    by: 2,
                    kz: 3,
                    am: 4,
                    kg: 5,
                    ge: 10,
                    uz: 13,
                    tj: 25,
                    il: 11
                },
                langs: {
                    ka: "ge",
                    kk: "kz",
                    uz: "uz"
                },
                ownerType: {
                    marketing: 0,
                    supplier: 1
                }
            }
        },
        72119: function(e, t) {
            "use strict";
            t.A = class {
                static enrichGood(e, t, r) {
                    r && (e.sortPromoIdx = r.sortPromoIdx,
                    e.logs = r.logs || e.logs,
                    e.isAdv = !!e.logs,
                    e.through = {
                        zone: "wishlist",
                        adv: e.logs ? "true" : "false"
                    }),
                    e.isItemInBasket = t.includes(e.id)
                }
                static convertToFavoriteGoods(e, t) {
                    var r, n, s, i, a, o, l, c;
                    const u = null == (r = e.sizes) ? void 0 : r.find((e => e.optionId === t.characteristicId))
                      , d = null != (n = null == u ? void 0 : u.price) ? n : e.price
                      , h = d && null != (i = null == (s = null == u ? void 0 : u.stocks) ? void 0 : s.some((e => e.qty > 0))) && i
                      , p = 20624 === e.brandId || 30624 === e.siteBrandId
                      , m = h ? d.logistics : 0
                      , b = h ? d.priceToShow / 100 : 0
                      , g = !wb.settings.b2bMode && h ? d.paymentDiscountAmount : 0
                      , y = 15 & e.dtype
                      , f = !!h && (2 === y || 7 === y)
                      , v = e.logs
                      , w = {
                        nmId: e.id,
                        cod1S: e.id,
                        brandName: e.brand,
                        characteristicId: t.characteristicId,
                        meta: t.meta,
                        id: t.characteristicId,
                        goodsName: e.name,
                        colorName: null == (o = null == (a = e.colors) ? void 0 : a[0]) ? void 0 : o.name,
                        onStock: h ? 1 : 0,
                        star: e.rating,
                        price: h ? d.basic / 100 : 0,
                        priceWithSale: b,
                        priceWithCouponAndDiscount: b,
                        sale: h ? d.sale : 0,
                        totalSale: h ? d.sale : 0,
                        salePrice: b,
                        targetUrl: null != (l = t.targetUrl) ? l : "",
                        sizeName: null != (c = null == u ? void 0 : u.origName) ? c : "",
                        stocks: null == u ? void 0 : u.stocks,
                        timestamp: t.timestamp,
                        deliveryHours: h && u ? u.time1 + u.time2 : void 0,
                        isDbs: f,
                        source: t.source,
                        subjectId: e.subjectId,
                        subjectParentId: e.subjectParentId,
                        reviewRating: e.reviewRating,
                        feedbacks: e.feedbacks,
                        supplierId: e.supplierId,
                        supplier: e.supplier,
                        newlyArrived: h && (1 & t.source) > 0,
                        _rawCatalogModel: e,
                        viewFlags: e.viewFlags,
                        shouldShowOriginalMark: !p && !!(8 & e.viewFlags),
                        paymentDiscountAmount: g,
                        premiumSale: e.premiumSale,
                        showRedPrice: wb.xnm.isRedPrice(e.panelPromoId),
                        logisticsCost: m,
                        is2025LogisticCost: e.is2025LogisticCost,
                        canBeBooking: 10 === y,
                        whDtype: e.dtype,
                        isPostpaidBooking: e.isPostpaidBooking,
                        isVatRefundable: !1,
                        vatPercent: null,
                        isItemInBasket: !1,
                        sortPromoIdx: -1,
                        logs: v,
                        isAdv: !!v,
                        through: {
                            zone: "wishlist",
                            adv: v ? "true" : "false"
                        },
                        get isDeleted() {
                            return !(this.goodsName || this.brandName || this.colorName || this.sizeName)
                        },
                        get showDiscount() {
                            return (this.price > 0 || this.priceWithCouponAndDiscount > 0) && this.price != this.priceWithCouponAndDiscount
                        }
                    };
                    return wb.settings.b2bMode && (w.isVatRefundable = wb.xnm.isVatRefundable(e.viewFlags),
                    w.vatPercent = wb.xnm.getVatPercent(e.viewFlags)),
                    w
                }
                static convertFromAddModelToCacheItem(e, t) {
                    var r, n, s;
                    const i = wb.analitics.analiticsInfoToListName(e)
                      , a = {
                        characteristicId: e.characteristicId,
                        cod1S: e.cod1S,
                        id: e.characteristicId,
                        source: t,
                        targetUrl: `${null != (r = e.targetUrl) ? r : ""}|${null != (n = e.iid) ? n : 1}|${i}|${e.logs}`,
                        timestamp: Math.ceil(Date.now() / 1e3),
                        meta: e.meta
                    };
                    return (null == (s = a.meta) ? void 0 : s.shade) && delete a.meta.shade,
                    a
                }
            }
        },
        87037: function(e, t, r) {
            "use strict";
            r.d(t, {
                Y: function() {
                    return A
                }
            });
            var n = Object.freeze({
                delete: 0,
                add: 1
            })
              , s = Object.defineProperty
              , i = (e, t, r) => ( (e, t, r) => t in e ? s(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var a = class {
                constructor(e, t=!1) {
                    i(this, "items"),
                    i(this, "isEmptyCache"),
                    i(this, "_favoritesGoodsMap"),
                    i(this, "_favoritesGoodsHashMap");
                    const r = e.sort(( (e, t) => {
                        var r, n;
                        return (null != (r = t.timestamp) ? r : 0) - (null != (n = e.timestamp) ? n : 0)
                    }
                    ));
                    this.items = wb.helpers.deepClone(r),
                    this.isEmptyCache = t,
                    this._favoritesGoodsMap = null,
                    this._favoritesGoodsHashMap = null
                }
                get count() {
                    return this.items.length
                }
                get favoritesGoodsMap() {
                    return null != this._favoritesGoodsMap || (this._favoritesGoodsMap = this.items.reduce(( (e, t) => (e.set(t.characteristicId, t),
                    e)), new Map)),
                    this._favoritesGoodsMap
                }
                get favoriteGoodsHashMap() {
                    if (null != this._favoritesGoodsHashMap)
                        return this._favoritesGoodsHashMap;
                    const e = this.items.reduce(( (e, t) => t.syncType !== n.delete ? [...e, t.cod1S] : e), []);
                    return this._favoritesGoodsHashMap = new Set(e),
                    this._favoritesGoodsHashMap
                }
            }
              , o = r(39436)
              , l = Object.defineProperty
              , c = (e, t, r) => ( (e, t, r) => t in e ? l(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const u = "user_favorite_goods_{0}_v{1}";
            var d = class {
                constructor() {
                    c(this, "uid"),
                    c(this, "sort", null),
                    c(this, "cacheModel", null),
                    this._bindEvents()
                }
                get cacheKey() {
                    return u.format(this.uid, 2..toString())
                }
                get lastSyncCacheKey() {
                    return "favorite_last_sync_dt_{0}_v{1}".format(this.uid, 2..toString())
                }
                get tabsSyncCacheKey() {
                    return "favorite_tabs_sync_v{0}".format(void 0, 2..toString())
                }
                setKey(e) {
                    this.uid = e,
                    this._checkOldCache(),
                    this.cacheModel = null
                }
                async setSort(e) {
                    if (e && null != this.uid)
                        try {
                            this.sort = e;
                            const t = await this._openIDb();
                            await o.A.setItem(t, this.lastSyncCacheKey, {
                                name: "sort",
                                sortName: e
                            })
                        } catch (e) {}
                }
                async getSort() {
                    if (null == this.uid)
                        return null;
                    try {
                        const e = await this._openIDb()
                          , t = await o.A.getItem(e, this.lastSyncCacheKey, "sort");
                        return (null == t ? void 0 : t.sortName) || null
                    } catch (e) {
                        return this.sort
                    }
                }
                async getLastSyncDt() {
                    var e;
                    if (null == this.uid)
                        return -1;
                    try {
                        const t = await this._openIDb()
                          , r = await o.A.getItem(t, this.lastSyncCacheKey, "sync_dt");
                        return null != (e = null == r ? void 0 : r.lastSyncDt) ? e : -1
                    } catch (e) {
                        return this.getLastSyncDtFromLocalStorage()
                    }
                }
                getLastSyncDtFromLocalStorage() {
                    var e;
                    if (null == this.uid)
                        return -1;
                    const t = null != (e = localStorage.getItem(this.lastSyncCacheKey)) ? e : -1;
                    return parseInt(localStorage.hasItem(this.cacheKey) ? t : "-1", 10)
                }
                async setLastSyncDt(e) {
                    if (!(await this.getLastSyncDt() >= e || null == this.uid))
                        try {
                            const t = await this._openIDb();
                            await o.A.setItem(t, this.lastSyncCacheKey, {
                                name: "sync_dt",
                                lastSyncDt: e
                            })
                        } catch (t) {
                            localStorage.setItem(this.lastSyncCacheKey, e.toString())
                        }
                }
                async clearLastSyncDt() {
                    try {
                        const e = await this._openIDb();
                        await o.A.removeItem(e, this.lastSyncCacheKey, "sync_dt")
                    } catch (e) {
                        localStorage.removeItem(this.lastSyncCacheKey)
                    }
                }
                getFavoriteHashMap() {
                    var e;
                    const t = wb.analitics.checkDataInSplitterServiceV2("common", "ab_enableFavouriteSnippet", "yes");
                    return this.cacheModel ? t ? null == (e = this.cacheModel) ? void 0 : e.favoriteGoodsHashMap : null : (this.getFavoriteGoods(),
                    null)
                }
                async getFavoriteGoods(e=!1) {
                    if (null == this.uid && (this.cacheModel = new a([],!0)),
                    !this.cacheModel) {
                        let e = await this._fetchFromIDb();
                        null == e && (e = localStorage.getObject(this.cacheKey)),
                        this.cacheModel = null == e ? new a([],!0) : new a(e)
                    }
                    return e ? this.cacheModel : new a(this.cacheModel.items.filter((e => !e.needSync || e.needSync && e.syncType !== n.delete)),this.cacheModel.isEmptyCache)
                }
                async setFavoriteGoods(e) {
                    if (null == this.uid)
                        return;
                    this.cacheModel = null == e ? new a([],!0) : new a(e);
                    await this._saveToIDb(e) || localStorage.putObject(this.cacheKey, e),
                    localStorage.setItem(this.tabsSyncCacheKey, `${Date.now()}`)
                }
                contains(e) {
                    if (null == this.cacheModel)
                        return !1;
                    const t = this.cacheModel.favoritesGoodsMap.get(e);
                    return null != t && !(t.needSync && t.syncType === n.delete)
                }
                _checkOldCache() {
                    for (let e = 1; e < 2; e++)
                        localStorage.removeItem(u.format(this.uid, e.toString())),
                        o.A.removeDb(u.format(this.uid, e.toString()))
                }
                _bindEvents() {
                    window.addEventListener("storage", (e => {
                        null != e.key && e.key !== this.tabsSyncCacheKey || (this.cacheModel = null,
                        this.getFavoriteGoods())
                    }
                    ))
                }
                async _fetchFromIDb() {
                    try {
                        const e = await this._openIDb()
                          , t = await o.A.getAll(e, this.cacheKey);
                        return null != t ? t : []
                    } catch (e) {
                        return console.log(`[FAVS_STORAGE]: fetching from idb failed, reason=${e.message}`),
                        null
                    }
                }
                async _saveToIDb(e) {
                    try {
                        const t = await this._openIDb()
                          , r = null == t ? void 0 : t.transaction([this.cacheKey], "readwrite")
                          , n = null == r ? void 0 : r.objectStore(this.cacheKey);
                        null == n || n.clear();
                        for (const t of e)
                            null == n || n.put(t);
                        return !0
                    } catch (e) {
                        return console.log(`[FAVS_STORAGE]: saving to idb failed, reason=${e.message}`),
                        !1
                    }
                }
                async _openIDb() {
                    const e = await o.A.openDb(`wb_${this.cacheKey}`, {
                        onupgradeneeded: e => {
                            if (!e.objectStoreNames.contains(this.cacheKey)) {
                                e.createObjectStore(this.cacheKey, {
                                    keyPath: "characteristicId"
                                }).createIndex("timestamp", "timestamp", {
                                    unique: !1
                                })
                            }
                            e.objectStoreNames.contains(this.lastSyncCacheKey) || e.createObjectStore(this.lastSyncCacheKey, {
                                keyPath: "name"
                            })
                        }
                        ,
                        version: 2
                    });
                    if (!e)
                        throw new Error("Failed to open the IndexedDB.");
                    return e
                }
            }
              , h = r(72119)
              , p = Object.freeze({
                waitlist: 1,
                poned: 2,
                both: 3
            })
              , m = r(27473)
              , b = Object.defineProperty
              , g = (e, t, r) => ( (e, t, r) => t in e ? b(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class y {
                constructor(e, t, r, n, s) {
                    g(this, "chrt_id"),
                    g(this, "cod_1s"),
                    g(this, "client_ts"),
                    g(this, "op_type"),
                    g(this, "type"),
                    g(this, "target_url"),
                    g(this, "meta_json"),
                    g(this, "is_deleted"),
                    this.chrt_id = +t,
                    this.cod_1s = r,
                    this.client_ts = n || Math.floor(Date.now() / 1e3),
                    this.op_type = e || 1,
                    this.type = s || 2
                }
                static fromCache(e) {
                    if (0 === e.syncType)
                        return y.toDelete(e.characteristicId);
                    const t = new y(1,e.characteristicId,e.cod1S,e.timestamp,e.source);
                    return t.client_ts > 1e12 && (t.client_ts = Math.floor(t.client_ts / 1e3)),
                    t.target_url = e.targetUrl,
                    e.meta && (t.meta_json = JSON.stringify(e.meta)),
                    t
                }
                static toDelete(e) {
                    return new y(3,e,0)
                }
                static convertFromSharedModelToCacheItem(e) {
                    const t = {
                        characteristicId: e.chrt_id,
                        cod1S: e.cod_1s,
                        targetUrl: e.target_url,
                        timestamp: e.client_ts,
                        source: e.type
                    };
                    try {
                        t.meta = e.meta_json ? JSON.parse(e.meta_json) : null
                    } catch (e) {
                        t.meta = null
                    }
                    return t
                }
            }
            var f = y
              , v = Object.defineProperty
              , w = (e, t, r) => ( (e, t, r) => t in e ? v(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const {FAVS_STORAGE_URL: _} = m.A
              , S = _;
            var C = class {
                constructor(e, t) {
                    w(this, "_cacheHelper"),
                    w(this, "_syncProcess", null),
                    w(this, "debounceSync"),
                    w(this, "$wbSpa"),
                    this.$wbSpa = e,
                    this._cacheHelper = t,
                    this.debounceSync = wb.utils.debounce(this.sync.bind(this), 3e3)
                }
                async _getOperationAsync() {
                    return (await this._cacheHelper.getFavoriteGoods(!0)).items.filter((e => e.needSync)).map((e => f.fromCache(e)))
                }
                async _getAllAsync() {
                    return (await this._cacheHelper.getFavoriteGoods()).items.map((e => f.fromCache(e)))
                }
                async sync(e) {
                    var t, r;
                    if (!(null == (t = this.$wbSpa.$auth) ? void 0 : t.isAuth))
                        return !1;
                    this._syncProcess = null != (r = this._syncProcess) ? r : this._sync(e);
                    try {
                        return await this._syncProcess
                    } catch (e) {
                        return console.error(`[WB_FAVS_SYNC]: ${e}`),
                        !1
                    } finally {
                        this._syncProcess = null
                    }
                }
                async _sync(e) {
                    return await navigator.locks.request("lock-fav-sync", (async () => {
                        var t;
                        const r = await this._cacheHelper.getLastSyncDt()
                          , n = await this._getOperationAsync()
                          , s = null == (t = this.$wbSpa.$services) ? void 0 : t.sessionService.getSession();
                        try {
                            const t = await this._doSync({
                                ts: r,
                                sessionId: s,
                                operations: n,
                                timeout: e
                            });
                            if (this._sendMetrics(t.state),
                            0 === t.state && t.change_ts > 0)
                                return await this._updateProductsAsync(n, t);
                            if (1 === t.state) {
                                const e = await this._getAllAsync()
                                  , t = await this._doSync({
                                    ts: r,
                                    sessionId: s,
                                    operations: e,
                                    rememberMe: !0
                                });
                                if (0 === t.state && t.change_ts > 0)
                                    return await this._updateProductsAsync(e, t)
                            } else
                                console.error(`[WB_FAVS_SYNC]: sync state:${t.state}`, {
                                    result: t,
                                    ts: r,
                                    deviceId: s,
                                    opLen: n.length,
                                    hasJwt: !0
                                })
                        } catch (e) {
                            console.error("[WB_FAVS_SYNC]: Error during sync", e)
                        }
                        return !1
                    }
                    ))
                }
                async _updateProductsAsync(e, t) {
                    return await this._cacheHelper.setFavoriteGoods(await this.mergeUpdatedAndCacheItems(e, t.result_set)),
                    await this._cacheHelper.setLastSyncDt(t.change_ts),
                    !0
                }
                async mergeUpdatedAndCacheItems(e, t) {
                    var r;
                    const n = (null == (r = (await this._cacheHelper.getFavoriteGoods(!0)).items) ? void 0 : r.reduce(( (e, t) => e.set(t.characteristicId, t)), new Map)) || new Map;
                    return null == e || e.forEach((e => {
                        if (3 === e.op_type)
                            n.delete(e.chrt_id);
                        else {
                            const t = n.get(e.chrt_id);
                            t && (delete t.needSync,
                            delete t.syncType)
                        }
                    }
                    )),
                    null == t || t.forEach((e => {
                        const t = n.get(e.chrt_id);
                        if (null == t ? void 0 : t.needSync) {
                            if (!e.is_deleted)
                                return;
                            if (1 === t.op_type)
                                return
                        }
                        e.is_deleted ? n.delete(e.chrt_id) : n.set(e.chrt_id, f.convertFromSharedModelToCacheItem(e))
                    }
                    )),
                    Array.from(n.values()).sort(( (e, t) => t.timestamp - e.timestamp))
                }
                _doSync({ts: e, sessionId: t, operations: r, rememberMe: n=!1, timeout: s=1e4}) {
                    return this.$wbSpa.$httpClient.fetch(`${S}/sync?ts=${e}&device_id=${t}${n ? "&remember_me=true" : ""}`, {
                        method: "POST",
                        body: JSON.stringify(r),
                        headers: {
                            "Content-Type": "application/json",
                            "Wb-AppType": "site"
                        },
                        timeout: s,
                        withAuthz: !0,
                        withJwtToken: !0
                    }).then((async e => e.ok ? e.json() : {})).then((e => (e.result_set && (e.result_set = e.result_set[0] || []),
                    e)))
                }
                _sendMetrics(e) {
                    try {
                        fetch(`/webapi/logging/favs/metrics?status=${e}`, {
                            method: "POST"
                        })
                    } catch (e) {
                        console.error(`[WB_FAVS_METRICS]: ${e}`)
                    }
                }
            }
              , I = r(77762)
              , k = Object.defineProperty
              , P = Object.getOwnPropertySymbols
              , M = Object.prototype.hasOwnProperty
              , T = Object.prototype.propertyIsEnumerable
              , E = (e, t, r) => t in e ? k(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , D = (e, t, r) => E(e, "symbol" != typeof t ? t + "" : t, r);
            class A {
                constructor() {
                    D(this, "_cacheHelper"),
                    D(this, "_enrichedFavoriteItems"),
                    D(this, "dumpFav"),
                    D(this, "_initialSyncInProgress"),
                    D(this, "isSynced"),
                    D(this, "$wbSpa"),
                    this.$wbSpa = WbSpaModel.prototype,
                    this._cacheHelper = new d,
                    this._setKey(),
                    this.dumpFav = new C(this.$wbSpa,this._cacheHelper),
                    this._enrichedFavoriteItems = new Map,
                    this.isSynced = !1,
                    this._bindEvents(),
                    localStorage.clearStartsWith("_favs_synced_v3")
                }
                _setKey() {
                    this.$wbSpa.$auth.isAuth && this._cacheHelper.setKey(this.$wbSpa.$auth.um.userUid || "")
                }
                get limit() {
                    var e, t, r, n, s, i, a, o, l, c, u, d, h;
                    return "subscribed" === (null == (e = this.$wbSpa.$user.getUserGradeFromCache()) ? void 0 : e.wbClub) && "ru" === wb.settings.currentLocale && wb.global.settings.switches.enableWbLimitInCartOn1ShK ? (null == (n = null == (r = null == (t = wb.global.settings) ? void 0 : t.mobileAppVariables) ? void 0 : r.numbers) ? void 0 : n.favoritesLimitWbClub) ? null == (a = null == (i = null == (s = wb.global.settings) ? void 0 : s.mobileAppVariables) ? void 0 : i.numbers) ? void 0 : a.favoritesLimitWbClub : 4e3 : (null == (c = null == (l = null == (o = wb.global.settings) ? void 0 : o.mobileAppVariables) ? void 0 : l.numbers) ? void 0 : c.favoritesLimitDefault) ? null == (h = null == (d = null == (u = wb.global.settings) ? void 0 : u.mobileAppVariables) ? void 0 : d.numbers) ? void 0 : h.favoritesLimitDefault : 2e3
                }
                async syncFromServerAsync() {
                    if (this.isSynced || this._initialSyncInProgress)
                        return;
                    this._initialSyncInProgress = !0;
                    const e = await this._loadRawGoodsFromDumpAsync();
                    return this._initialSyncInProgress = !1,
                    e
                }
                async getWlArrivedCatalogModelAsync() {
                    window._debug && console.time("buildWlArrivedCatalogModel");
                    try {
                        const [e,t] = await Promise.all([this._loadFavoriteGoodsAsync(), (0,
                        I.m)()])
                          , r = new t(e);
                        return r.setOnlyWlArrived(!0).setSorting(1).setGoods(Number.MAX_SAFE_INTEGER).complete(),
                        {
                            goods: r.favoriteGoods
                        }
                    } catch (e) {
                        return console.error(e),
                        {
                            goods: [],
                            isEmptyCache: !0
                        }
                    } finally {
                        window._debug && console.timeEnd("buildWlArrivedCatalogModel")
                    }
                }
                async getSimplifiedModelAsync() {
                    return await this.syncFromServerAsync(),
                    await this._cacheHelper.getFavoriteGoods()
                }
                getFavoriteHashMap() {
                    return this._cacheHelper.getFavoriteHashMap()
                }
                async getFavsDataAsync(e="", t=!1, r=null, n=!1) {
                    var s, i, a, o;
                    window._debug && console.time("buildFavModel");
                    const l = new URLSearchParams(e)
                      , c = null != (i = null != (s = l.get("sort")) ? s : await this._cacheHelper.getSort()) ? i : "popular"
                      , u = null != (a = l.get("search")) ? a : ""
                      , d = "true" == (null != (o = l.get("wlArrived")) ? o : l.get("wlarrived"))
                      , h = "popular" === c;
                    this._cacheHelper.setSort(l.get("sort")),
                    t && [...this._enrichedFavoriteItems].forEach(( ([e,t]) => {
                        t.sortPromoIdx = -1
                    }
                    ));
                    try {
                        const [e,t,{FavoriteGoodsSorterModel: s}] = await Promise.all([this._loadFavoriteGoodsAsync(h, n), (0,
                        I.m)(), this.$wbSpa.$moduleLoader.loadModuleAsync("sorterModel")])
                          , i = new t(e,new s(c,window.location.href));
                        return i.setOnlyWlArrived(d).setSearch(u).setSorting().setGoods(r).complete(),
                        i
                    } catch (e) {
                        return console.error(e),
                        {
                            isEmptyCache: !0
                        }
                    } finally {
                        window._debug && console.timeEnd("buildFavModel")
                    }
                }
                async addToFavs(e, t=!1, r) {
                    if (!this.$wbSpa.$auth.isAuth)
                        throw new UnauthorizeError;
                    return this.sendToWishlistStat(e, r),
                    t ? this._addToPoned(e) : this._addToWl(e)
                }
                async sendToWishlistStat(e, t) {
                    var r, n, s, i, a, o, l, c, u, d, h, p, m;
                    if (window.wba)
                        try {
                            const b = t && t.sizes || e && e.sizes || [];
                            let g = {
                                stores: null == (r = b.find((t => t.ch == e.characteristicId))) ? void 0 : r.stocks,
                                salePrice: Number((null == t ? void 0 : t.salePrice) || (null == e ? void 0 : e.salePrice) || 0)
                            };
                            if (!g.stores) {
                                g = (await wb.xnm.getInfoForWbaStat([{
                                    nmId: e.cod1S,
                                    size: e.characteristicId
                                }])).get(e.cod1S)
                            }
                            const y = this.$wbSpa.$analitic.getAnaliticsInfoFromTargetUrl(e.targetUrl)
                              , f = () => this.$wbSpa.$analitic.analiticsInfoToListName(e.l ? e : y)
                              , v = () => this.$wbSpa.$analitic.getTailObjectFromAnalyticsInfo(e.l ? e : y)
                              , w = this.$wbSpa.$analitic.getStoreProp(null == g ? void 0 : g.stores, "dtype")
                              , _ = this.$wbSpa.$analitic.getDeliveryTypeForStat(w)
                              , S = this.$wbSpa.$analitic.getStoreProp(null == g ? void 0 : g.stores, "wh");
                            if (["CSD", "CAD", "WLC", "WLA"].includes(e.l)) {
                                const t = WbSpaModel.prototype.$analitic.getTermsFromTailObject(e.l);
                                e.t = t.category,
                                e.t1 = t.id_category,
                                e.t2 = t.discount_name
                            }
                            const C = {
                                id: e.cod1S,
                                chrt: e.characteristicId,
                                quantity: e.quantity,
                                price: null == g ? void 0 : g.salePrice,
                                affiliation: null != (n = null == t ? void 0 : t.supplierId) ? n : e.supplierId,
                                deliveryType: _,
                                inListIndex: e.iid || 1,
                                listName: f(),
                                name: null != (s = null == t ? void 0 : t.name) ? s : e.goodsName,
                                brand: null != (i = null == t ? void 0 : t.brand) ? i : e.brandName,
                                category: (null == t ? void 0 : t.isC2C) | (null == e ? void 0 : e.isC2C) ? "C2C" : void 0,
                                rating: null != (a = null == t ? void 0 : t.reviewRating) ? a : e.reviewRating,
                                storeId: null != (o = null == e ? void 0 : e.storeId) ? o : S,
                                feedbacksCount: null != (l = null == t ? void 0 : t.feedbacks) ? l : e.feedbacks,
                                subjectId: null != (c = null == t ? void 0 : t.subjectId) ? c : e.subjectId,
                                subjectParentId: null != (u = null == t ? void 0 : t.subjectParentId) ? u : e.subjectParentId,
                                logs: (null == t ? void 0 : t.logs) || (null == e ? void 0 : e.logs) || (null == y ? void 0 : y.logs) || (null == (h = null == (d = null == e ? void 0 : e.meta) ? void 0 : d.analitic) ? void 0 : h.logs),
                                tailObject: v(),
                                is_available: (null == t ? void 0 : t.soldOut) || e.soldOut ? 0 : 1,
                                actualStimulusList: e.actualStimulusList,
                                actualStimulusListFirstTwo: e.actualStimulusListFirstTwo
                            };
                            this.$wbSpa.$analitic.isSearchTerms(e.l ? e : y) && (null == (m = null == (p = null == e ? void 0 : e.meta) ? void 0 : p.analitic) ? void 0 : m.tailObject) && (C.tailObject.terms = e.meta.analitic.tailObject.terms),
                            this.$wbSpa.$analitic.sendWbaEcomStat("add_to_wishlist", [C]),
                            this.$wbSpa.$user.resetTimeForUserVector()
                        } catch (e) {
                            console.error(e)
                        }
                }
                deleteFromFavs(e, t, r) {
                    return this._removeFromPoned(e, t, r)
                }
                isAddedToFavs(e) {
                    return this.syncFromServerAsync(),
                    this._cacheHelper.contains(e)
                }
                async deleteManyFromFavsAsync(e) {
                    const t = await this._cacheHelper.getFavoriteGoods(!0);
                    e.forEach((e => {
                        const r = t.favoritesGoodsMap.get(e.characteristicId);
                        r && (r.needSync = !0,
                        r.syncType = n.delete)
                    }
                    ));
                    const r = [...t.favoritesGoodsMap.values()];
                    await this._cacheHelper.setFavoriteGoods(r);
                    const s = r.every((e => e.syncType === n.delete));
                    return this.dumpFav.debounceSync(),
                    s
                }
                async moveManyToBasketAsync(e) {
                    const t = this.$wbSpa.$services.cartService.addManyItems(e);
                    return (null == t ? void 0 : t.isSuccess) && WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, wb.i18n.t("favorites.productAddedToBasket")]),
                    t
                }
                _bindEvents() {
                    this.$wbSpa.$eventBus.addEventListener("GeoUpdated", ( () => this._enrichedFavoriteItems.clear())),
                    this.$wbSpa.$eventBus.addEventListener("onUserAuth", this._setKey.bind(this))
                }
                async _loadFavoriteGoodsAsync(e, t) {
                    try {
                        const r = await this._loadRawGoodsFromDumpAsync(4e3, t);
                        if (!r)
                            return {
                                isEmptyCache: !0,
                                items: []
                            };
                        if (r.isEmptyCache)
                            return {
                                isEmptyCache: !0,
                                items: []
                            };
                        const n = r.items;
                        return n.length < 1 ? {
                            isEmptyCache: !1,
                            items: []
                        } : this._enrichGoodsAsync(n, e)
                    } catch (e) {
                        return console.error(e),
                        wb.spa.logError(e, "[FAVS_SERVICE]: failed _loadFavoriteGoodsAsync"),
                        null
                    }
                }
                async _enrichGoodsAsync(e, t) {
                    const r = wb.xnm.show2025Logistics()
                      , n = [...this._enrichedFavoriteItems];
                    n.some(( ([e,t]) => {
                        var n;
                        return (null != (n = t.is2025LogisticCost) && n) !== r
                    }
                    )) && this._enrichedFavoriteItems.clear();
                    const s = t && n.every(( ([e,t]) => -1 === t.sortPromoIdx));
                    let i = {}
                      , a = [];
                    const o = e.filter((e => !this._enrichedFavoriteItems.has(e.characteristicId)));
                    o.length > 0 ? [i,a] = await Promise.all([wb.xnm.getCatalogCards(o.map((e => e.cod1S)), !1, !0, !0), s ? wb.xnm.getSMergerXnmProducts(e.sort(( (e, t) => t.timestamp - e.timestamp)).map((e => e.cod1S))) : Promise.resolve([])]) : s && (a = await wb.xnm.getSMergerXnmProducts(e.sort(( (e, t) => t.timestamp - e.timestamp)).map((e => e.cod1S))));
                    const l = a.reverse().map(( (e, t) => ({
                        cod1S: e.id,
                        sortPromoIdx: t,
                        logs: e.logs
                    }))).toMap((e => e.cod1S))
                      , c = this.$wbSpa.$services.cartService.getItems().map((e => e.characteristicId));
                    return {
                        isEmptyCache: !1,
                        items: e.reduce(( (e, t) => {
                            var r;
                            const n = i[t.cod1S]
                              , s = this._enrichedFavoriteItems.get(t.characteristicId);
                            if (n || s) {
                                const i = null != (r = s && ( (e, t) => {
                                    for (var r in t || (t = {}))
                                        M.call(t, r) && E(e, r, t[r]);
                                    if (P)
                                        for (var r of P(t))
                                            T.call(t, r) && E(e, r, t[r]);
                                    return e
                                }
                                )({}, s)) ? r : h.A.convertToFavoriteGoods(n, t);
                                h.A.enrichGood(i, c, l.get(t.cod1S)),
                                e.push(i),
                                (!s || l.size > 0) && this._enrichedFavoriteItems.set(i.characteristicId, i)
                            }
                            return e
                        }
                        ), [])
                    }
                }
                _addToPoned(e) {
                    return this._addThroughCache(e, p.poned)
                }
                async getFavsCount() {
                    return (await this._cacheHelper.getFavoriteGoods()).count
                }
                async _removeFromPoned(e, t, r) {
                    var s;
                    const i = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                    i.forEach((s => {
                        s.cod1S !== e || r ? s.characteristicId === t && (s.needSync = !0,
                        s.syncType = n.delete) : (s.needSync = !0,
                        s.syncType = n.delete)
                    }
                    )),
                    await this._cacheHelper.setFavoriteGoods(i),
                    null == (s = this.dumpFav) || s.debounceSync()
                }
                _addToWl(e) {
                    return this._addThroughCache(e, p.waitlist)
                }
                async _addThroughCache(e, t) {
                    var r;
                    if (!e.isFromCache) {
                        if ((await this._cacheHelper.getFavoriteGoods()).count >= this.limit)
                            throw new KnownServerError(wb.i18n.t("favorites.ponedMaxStorage").format(this.limit))
                    }
                    const s = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                    let i = s.find((t => t.characteristicId == e.characteristicId));
                    i ? i.timestamp = Math.ceil(Date.now() / 1e3) : (i = h.A.convertFromAddModelToCacheItem(e, t),
                    s.push(i)),
                    i.needSync = !0,
                    i.syncType = n.add,
                    await this._cacheHelper.setFavoriteGoods(s),
                    null == (r = this.dumpFav) || r.debounceSync()
                }
                _updateSyncStatus(e) {
                    $.observable(this).setProperty({
                        isSynced: e
                    }),
                    WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("favouritesSynced"))
                }
                async _loadRawGoodsFromDumpAsync(e, t) {
                    return t || (await this.dumpFav.sync(e),
                    this._updateSyncStatus(!0)),
                    await this._cacheHelper.getFavoriteGoods()
                }
                resetCache() {
                    this._enrichedFavoriteItems.clear()
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(A.prototype, e)
                }
                static factory(e) {
                    return e && A.richPrototype(e),
                    new A
                }
            }
        },
        5890: function(e, t, r) {
            "use strict";
            r.d(t, {
                A: function() {
                    return P
                }
            });
            var n = r(27473);
            const s = "all-poo-fr-v10.json"
              , i = 23
              , a = 29
              , o = 31
              , l = 32
              , c = [{
                dtype: 86,
                min: 1e7,
                max: 11e6
            }]
              , u = {
                dbName: "wb_allpickups_v2",
                stores: [{
                    name: "pickups_active",
                    keyPath: "id"
                }, {
                    name: "hashes",
                    keyPath: "key"
                }],
                dbVersion: 1
            };
            var d = r(76904)
              , h = r(28288)
              , p = Object.defineProperty
              , m = Object.getOwnPropertySymbols
              , b = Object.prototype.hasOwnProperty
              , g = Object.prototype.propertyIsEnumerable
              , y = (e, t, r) => t in e ? p(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , f = (e, t, r) => y(e, "symbol" != typeof t ? t + "" : t, r);
            class v {
                static async create(e) {
                    try {
                        const t = (0,
                        d.getHttpClient)()
                          , r = (0,
                        h.urlSiteStatic)("/" === e[0] ? e.slice(1) : e)
                          , n = await t.fetchText(r)
                          , s = new Blob([n],{
                            type: "application/javascript"
                        })
                          , i = URL.createObjectURL(s);
                        return new w(new Worker(i))
                    } catch (e) {
                        return null
                    }
                }
            }
            class w {
                constructor(e) {
                    f(this, "worker"),
                    f(this, "callbacks"),
                    f(this, "id"),
                    this.worker = e,
                    this.callbacks = new Map,
                    this.id = 0,
                    this.worker.onmessage = e => {
                        const {id: t, data: r, error: n} = e.data
                          , s = this.callbacks.get(t);
                        s && (n ? s.reject(n) : s.resolve(r),
                        this.callbacks.delete(t))
                    }
                }
                postMessage(e) {
                    return new Promise(( (t, r) => {
                        const n = ++this.id;
                        this.callbacks.set(n, {
                            resolve: t,
                            reject: r
                        }),
                        this.worker.postMessage(( (e, t) => {
                            for (var r in t || (t = {}))
                                b.call(t, r) && y(e, r, t[r]);
                            if (m)
                                for (var r of m(t))
                                    g.call(t, r) && y(e, r, t[r]);
                            return e
                        }
                        )({
                            id: n
                        }, e))
                    }
                    ))
                }
                terminate() {
                    this.worker.terminate()
                }
            }
            var _ = Object.defineProperty
              , S = (e, t, r) => ( (e, t, r) => t in e ? _(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const {USER_GEO_DATA_URL: C} = n.A
              , I = "wb_delivery-points-";
            class k {
                constructor() {
                    S(this, "_checkLocalePromises", {})
                }
                init() {
                    this._startJobSyncPickups()
                }
                async _startJobSyncPickups() {
                    var e;
                    this.worker = await v.create(wb.settings.workers.syncPickups),
                    null == (e = this.worker) || e.postMessage({
                        action: "startSync",
                        data: {
                            hashUrl: wb.helpers.url.urlStaticData("all-poo-v10.json.hash"),
                            pickupsUrl: wb.helpers.url.urlStaticData(s),
                            currentLocale: wb.settings.currentLocale
                        }
                    }),
                    "hidden"in document && "visibilityState"in document && document.addEventListener("visibilitychange", (e => {
                        var t;
                        null == (t = this.worker) || t.postMessage({
                            action: "visible" === document.visibilityState ? "resume" : "pause"
                        })
                    }
                    ))
                }
                _openPickupDb() {
                    return this.$storageHelper.openDb(u.dbName, {
                        version: u.dbVersion,
                        onupgradeneeded: e => u.stores.forEach((t => {
                            e.objectStoreNames.contains(t.name) || e.createObjectStore(t.name, {
                                keyPath: t.keyPath
                            })
                        }
                        ))
                    })
                }
                isPartnerPost(e) {
                    return e === i || e === o || e === l || e === a
                }
                restoreOriginalId(e) {
                    for (const {min: t, max: r, dtype: n} of c)
                        if (t <= e && e < r)
                            return {
                                id: e - t,
                                dtype: n
                            };
                    return {
                        id: e
                    }
                }
                getAddressSignData(e) {
                    const t = e.lat || e.latitude
                      , r = e.lon || e.longitude;
                    return `officeId=${"self" === e.deliveryType ? e.addressId : e.officeId}&dest=${e.dest}&sign=${e.sign}&lat=${t}&lng=${r}`
                }
                getPickupAsync(e, t) {
                    const r = [this._openPickupDb().then((t => this.$storageHelper.getItem(t, u.stores[0].name, e)))];
                    return t && r.push(this.$helper.delay(t, ( () => {
                        throw new Error("idb get office timeout")
                    }
                    ))),
                    Promise.race(r)
                }
                async _getPickupsFromDbOrStatic() {
                    var e;
                    const t = await this._openPickupDb()
                      , [r,{value: n}={}] = await Promise.all([this.$storageHelper.getAll(t, u.stores[0].name), this.$storageHelper.get(t, "hashes", "wb_allpickups_hash")]);
                    return (null == r ? void 0 : r.length) && n ? r : null == (e = this.worker) ? void 0 : e.postMessage({
                        action: "getPickupsFromStatic",
                        data: {
                            pickupsUrl: wb.helpers.url.urlStaticData(s),
                            currentLocale: wb.settings.currentLocale,
                            timeout: 15e3
                        }
                    })
                }
                async getActivePickupsAsync(e={}) {
                    const [t,r] = await Promise.all([this._getPickupsFromDbOrStatic(), this.$auth.isAuth ? this.$services.userData.getUserDataAsync() : Promise.resolve({})]);
                    return [...this._filterPickups(t, null == r ? void 0 : r.userInfo, e)]
                }
                *_filterPickups(e, {isEmployeeSynced: t, houseKeeping: r, isPickupPointOwner: n}={}, s={}) {
                    if (e && !(!Symbol.iterator in Object(e)))
                        for (const i of e) {
                            i.isHkn && !r || i.emp && !t || i.isSortCenter && !(n || t) || (null == s ? void 0 : s.dest) && i.dest3 != s.dest || "changeOffice" === (null == s ? void 0 : s.source) && (2 === i.status || i.isExternalPostamat || 31 == (null == i ? void 0 : i.typePoint)) || (null == s ? void 0 : s.filterDeliveryPoints) && !s.filterDeliveryPoints(i) || "basketC2C" === (null == s ? void 0 : s.source) && !this._allowC2C(i) || (yield i)
                        }
                }
                _allowC2C(e) {
                    return "ru" == e.country && this.isPickupPoint(e)
                }
                isPickupPoint(e) {
                    return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 14].includes(e.typePoint)
                }
                get removeUrl() {
                    return this.$services.cartService.publicBasketApiUrl + "/spa/removeaddress"
                }
                get editPooUrl() {
                    return this.$services.cartService.publicBasketApiUrl + "/spa/poos/create?version=1"
                }
                get editCourierAddressUrl() {
                    return this.$services.cartService.publicBasketApiUrl + "/spa/yandexaddress/editajax?version=2"
                }
                get deliveryPointsUrl() {
                    return this.$services.cartService.publicBasketApiUrl + "/spa/deliverypoints"
                }
                getDeliveryPointsAsync(e, t) {
                    return new Promise(( (r, n) => {
                        const s = Object.assign({
                            deliveryWay: e,
                            currency: WbSpaModel.prototype.$user.getCurrency()
                        }, t);
                        this.$httpClient.fetchJSON(this.deliveryPointsUrl, {
                            method: "POST",
                            body: this.$helper.objectSerializer(s),
                            credentials: "include"
                        }, {
                            timeout: 2e3,
                            useProccessResponse: !0
                        }).then((t => {
                            const n = this._updateDeliveryPoints(t, e);
                            r(n)
                        }
                        )).catch((t => {
                            console.log(t.message);
                            let n = this.restoreDeliveryPoints(e);
                            n && r(n)
                        }
                        ))
                    }
                    ))
                }
                _updateDeliveryPoints(e, t) {
                    const r = [...e, ...this.restoreDeliveryPoints(t).filter((e => e._local))].reduce(( (e, t) => {
                        const r = e.findIndex((e => e.addressId === t.addressId));
                        return -1 === r ? e.push(t) : e[r]._local = e[r]._local && t._local,
                        e
                    }
                    ), []);
                    return this.backupDeliveryPoints(r, t),
                    this._syncDeliveryPoints(r.filter((e => e._local)).reverse(), t),
                    r
                }
                async _syncDeliveryPoints(e, t) {
                    for (let r = 0; r < e.length; r++)
                        await this._saveAddressAsync(e[r], t)
                }
                get(e, t) {
                    var r;
                    const n = null == (r = this.restoreDeliveryPoints(t)) ? void 0 : r.find((t => t.addressId == e));
                    return this._checkLocale(n, t),
                    n
                }
                _checkLocale(e, t) {
                    if (e && e._local) {
                        if (this._checkLocalePromises[e.addressId])
                            return this._checkLocalePromises[e.addressId];
                        this._checkLocalePromises[e.addressId] = this._syncDeliveryPoints([e], t).then(( () => this._checkLocalePromises[e.addressId] = void 0))
                    }
                }
                getByCoordinates(e, t, r) {
                    return ["self", "courier"].forEach((n => {
                        var s;
                        const i = null == (s = this.restoreDeliveryPoints(n)) ? void 0 : s.find((n => n.lat == e && n.lon == t && n.address === r));
                        if (i && i._local && this._syncDeliveryPoints([i], n),
                        i)
                            return i
                    }
                    )),
                    null
                }
                get _key() {
                    const e = this.$services.sessionService.getUserUid();
                    return `${I}_${e}`
                }
                backupDeliveryPoints(e, t) {
                    this.deliveryPoints[t] = e;
                    const r = this._key;
                    localStorage.putObject(r, this.deliveryPoints),
                    Object.entries(localStorage).filter((e => e[0].startsWith(I) && e[0] !== r)).forEach((e => {
                        localStorage.removeItem(e[0])
                    }
                    ))
                }
                restoreDeliveryPoints(e) {
                    var t, r;
                    return this.deliveryPoints = null != (t = localStorage.getObject(this._key)) ? t : {},
                    this.deliveryPoints.self || (this.deliveryPoints.self = []),
                    this.deliveryPoints.courier || (this.deliveryPoints.courier = []),
                    [...this.deliveryPoints.courier, ...this.deliveryPoints.self].forEach((e => {
                        e.latitude && e.longitude || !e.lat || !e.lon || (e.latitude = e.lat,
                        e.longitude = e.lon)
                    }
                    )),
                    null != (r = this.deliveryPoints[e]) ? r : []
                }
                async add(e, t) {
                    let r = this.restoreDeliveryPoints(t);
                    const n = this._convertModel(e, t);
                    if (!r.find((e => (null == e ? void 0 : e.addressId) == n.addressId))) {
                        if ("courier" === t) {
                            const e = await WbSpaModel.prototype.$httpClient.fetchJSON(`${C}get-office?latitude=${n.lat}&longitude=${n.lon}`, {}, {
                                timeout: 3e3,
                                nullOnError: !0
                            });
                            e && Object.assign(n, e)
                        }
                        r.unshift(n),
                        this.backupDeliveryPoints(r, t)
                    }
                    return this._saveAddressAsync(n, t),
                    r
                }
                remove(e, t) {
                    let r = this.restoreDeliveryPoints(t);
                    return r = r.filter((t => t.addressId != e)),
                    this.backupDeliveryPoints(r, t),
                    this._removeAddressAsync(e, t),
                    r
                }
                _removeAddressAsync(e, t) {
                    this.$httpClient.fetchJSON(this.removeUrl, {
                        method: "POST",
                        body: this.$helper.objectSerializer({
                            addressId: e,
                            deliveryWay: t
                        }),
                        credentials: "include"
                    }, {
                        useProccessResponse: !0
                    }).then((e => {
                        this.backupDeliveryPoints(e, t)
                    }
                    ))
                }
                _saveAddressAsync(e, t) {
                    const r = "self" === t ? {
                        "Item.AddressId": e.addressId
                    } : e;
                    return this.$httpClient.fetchJSON(this._dataUrl(t), {
                        method: "POST",
                        credentials: "include",
                        body: this.$helper.objectSerializer(r, new URLSearchParams, !0)
                    }, {
                        useProccessResponse: !0
                    }).then((e => (this.backupDeliveryPoints(e, t),
                    e)))
                }
                _dataUrl(e) {
                    return "self" === e ? this.editPooUrl : this.editCourierAddressUrl
                }
                _convertModel(e, t) {
                    if ("courier" === t) {
                        let r = Object.assign({}, e);
                        return r._local = !0,
                        r.deliveryType = t,
                        r.addressId = btoa(wb.helpers.generateGuid().slice(12)),
                        r.address = `${r.city ? r.city : r.province}, `,
                        r.area && !r.city && (r.address += `${r.area}, `),
                        r.street && (r.address += `${r.street}, `),
                        r.home && (r.address += `${wb.i18n.t("userAddress.addressDetails.home", {
                            home: r.home
                        })}, `),
                        r.flat && !r.isPrivateHouse && (r.address += `${wb.i18n.t("userAddress.addressDetails.flat", {
                            flat: r.flat
                        })}, `),
                        r.entrance && "" === r.entrance.trim() ? r.entrance = null : r.entrance && (r.address += `${wb.i18n.t("userAddress.addressDetails.entrance", {
                            entrance: r.entrance
                        })}, `),
                        r.doorCode && "" === r.doorCode.trim() ? r.doorCode = null : r.doorCode && (r.address += `${wb.i18n.t("userAddress.addressDetails.doorCode", {
                            doorCode: r.doorCode
                        })}, `),
                        r.floor && "" === r.floor.trim() ? r.floor = null : r.floor && (r.address += `${wb.i18n.t("userAddress.addressDetails.floor", {
                            floor: r.floor
                        })}, `),
                        r.address = r.address.slice(0, -2),
                        r.lat || (r.lat = r.latitude),
                        r.lon || (r.lon = r.longitude),
                        r
                    }
                    if ("self" === t)
                        return {
                            _local: !0,
                            address: e.address,
                            addressId: e.id,
                            lat: e.coordinates[0],
                            lon: e.coordinates[1],
                            workTime: e.workTime,
                            deliveryType: t,
                            pointTypeName: this._getPointTypeName(e.dtype),
                            IsSortCenter: 63 === t,
                            status: e.status,
                            rate: e.rate,
                            deliveryPrice: $.views.helpers.priceFromRub(e.deliveryPrice, !0),
                            country: e.country,
                            dest: e.dest,
                            sign: e.sign
                        }
                }
                _getPointTypeName(e) {
                    switch (e) {
                    case 63:
                        return wb.i18n.t("delivery.points.scWarehouse");
                    case 31:
                        return wb.i18n.t("delivery.points.kiosk");
                    default:
                        return wb.i18n.t("delivery.points.pickupPoint")
                    }
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf(k.prototype, e)
                }
                static factory(e) {
                    return e && k.richPrototype(e),
                    new k
                }
            }
            var P = k
        },
        25322: function() {
            "use strict";
            var e = Object.defineProperty
              , t = (t, r, n) => ( (t, r, n) => r in t ? e(t, r, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: n
            }) : t[r] = n)(t, "symbol" != typeof r ? r + "" : r, n);
            class r extends Error {
                constructor(e) {
                    const {message: n, payload: s} = r.parsePayload(e);
                    super(n),
                    t(this, "isCustomError"),
                    t(this, "payload"),
                    this.isCustomError = !0,
                    this.payload = s
                }
                static parsePayload(e) {
                    var t;
                    return "string" == typeof e ? {
                        message: e,
                        payload: null
                    } : {
                        message: null != (t = null == e ? void 0 : e.message) ? t : "Unknow error",
                        payload: null == e ? void 0 : e.payload
                    }
                }
            }
            Object.defineProperties(window, {
                KnownServerError: {
                    value: r
                },
                UnauthorizeError: {
                    value: class extends r {
                        constructor({msg: e, jwtDrop: r}={}) {
                            super(e),
                            t(this, "isUnauthorize"),
                            t(this, "jwtDrop"),
                            this.isUnauthorize = !0,
                            this.jwtDrop = r
                        }
                    }
                },
                CancelledRequestError: {
                    value: class extends r {
                        constructor(e="") {
                            super(e),
                            t(this, "isCancelled"),
                            this.isCancelled = !0
                        }
                    }
                },
                NotFoundError: {
                    value: class extends r {
                        constructor(e="") {
                            super(e),
                            t(this, "isNotFound"),
                            this.isNotFound = !0
                        }
                    }
                },
                NetworkError: {
                    value: class {
                        constructor() {
                            t(this, "isNetworkError"),
                            this.isNetworkError = !0
                        }
                    }
                }
            })
        },
        39436: function(e, t, r) {
            "use strict";
            var n = Object.defineProperty
              , s = Object.getOwnPropertySymbols
              , i = Object.prototype.hasOwnProperty
              , a = Object.prototype.propertyIsEnumerable
              , o = (e, t, r) => t in e ? n(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , l = (e, t) => {
                for (var r in t || (t = {}))
                    i.call(t, r) && o(e, r, t[r]);
                if (s)
                    for (var r of s(t))
                        a.call(t, r) && o(e, r, t[r]);
                return e
            }
              , c = (e, t, r) => o(e, "symbol" != typeof t ? t + "" : t, r);
            const u = {
                short: 9e5,
                halfHour: 18e5,
                normal: 36e5
            };
            Object.freeze(u);
            class d {
                static createStorageHelperItem(e, t, r) {
                    return new h(e,t,r)
                }
                static get cacheActivityType() {
                    return u
                }
                static supportIndexedDb() {
                    return null != window.indexedDB
                }
                static metadataTableName(e) {
                    return e + "_metadata"
                }
                static openDb(e, t={}) {
                    return new Promise(( (r, n) => {
                        var s;
                        const i = indexedDB.open(e, null != (s = null == t ? void 0 : t.version) ? s : 1);
                        i.onupgradeneeded = e => {
                            var r;
                            null == (r = t.onupgradeneeded) || r.call(t, e.target.result)
                        }
                        ,
                        i.onsuccess = e => {
                            r(e.target.result)
                        }
                        ,
                        i.onerror = () => {
                            n(new Error(`[StorageHelper]: Database cannot be opened db_name=${e} error=${i.error}`))
                        }
                    }
                    ))
                }
                static setItem(e, t, r) {
                    return new Promise(( (n, s) => {
                        const i = e.transaction([t], "readwrite").objectStore(t).put(r);
                        i.onsuccess = n,
                        i.onerror = e => {
                            var t;
                            console.error(null == (t = e.target.error) ? void 0 : t.message),
                            s("Error while setting item from indexedDb")
                        }
                    }
                    ))
                }
                static addItem(e, t, r, n) {
                    return new Promise(( (s, i) => {
                        const a = e.transaction([t], "readwrite").objectStore(t).add(r);
                        a.onsuccess = e => s(e.target.result),
                        a.onerror = e => {
                            var t;
                            !n && console.error(null == (t = e.target.error) ? void 0 : t.message),
                            i("Error while setting item from indexedDb")
                        }
                    }
                    ))
                }
                static addItems(e, t, r, n=0) {
                    const s = [];
                    if (n && r.length > n)
                        for (let a = 0; a < Math.ceil(r.length / n); a++) {
                            const o = r.slice(a * n, (a + 1) * n);
                            s.push(i(e, t, o))
                        }
                    else
                        s.push(i(e, t, r));
                    return Promise.all(s);
                    function i(e, t, r) {
                        return new Promise(( (n, s) => {
                            const i = e.transaction([t], "readwrite")
                              , a = i.objectStore(t);
                            i.onerror = e => {
                                var t;
                                console.error(null == (t = e.target.error) ? void 0 : t.message),
                                s("Error while setting items to indexedDb")
                            }
                            ,
                            i.oncomplete = n;
                            for (const e of r) {
                                a.put(e).onerror = e => console.error(e)
                            }
                        }
                        ))
                    }
                }
                static setItems(e, t, r, n) {
                    return new Promise(( (s, i) => {
                        let a = e.transaction([t], "readwrite")
                          , o = a.objectStore(t);
                        o.clear(),
                        n.forEach((e => {
                            e.__expiredAt__ = r,
                            o.add(e)
                        }
                        )),
                        a.oncomplete = s,
                        a.onerror = e => {
                            var t;
                            console.error(null == (t = e.target.error) ? void 0 : t.message),
                            i("Error while setting item from indexedDb")
                        }
                    }
                    ))
                }
                static getAll(e, t) {
                    return new Promise(( (r, n) => {
                        const s = e.transaction([t]).objectStore(t).getAll();
                        s.onsuccess = e => r(e.target.result),
                        s.onerror = () => n("Error while getting item from indexedDb")
                    }
                    ))
                }
                static get(e, t, r) {
                    return new Promise(( (n, s) => {
                        const i = e.transaction([t]).objectStore(t).get(r);
                        i.onsuccess = e => n(e.target.result),
                        i.onerror = () => s("Error while getting item from indexedDb")
                    }
                    ))
                }
                static getItem(e, t, r) {
                    return new Promise(( (n, s) => {
                        const i = e.transaction([t]).objectStore(t).get(r);
                        i.onsuccess = s => {
                            const i = s.target.result;
                            return i && i.__expiredAt__ <= Date.now() ? (d.removeItem(e, t, r),
                            n(null)) : n(s.target.result)
                        }
                        ,
                        i.onerror = () => s("Error while getting item from indexedDb")
                    }
                    ))
                }
                static removeItem(e, t, r) {
                    return new Promise(( (n, s) => {
                        const i = e.transaction([t], "readwrite").objectStore(t).delete(r);
                        i.onsuccess = n,
                        i.onerror = () => s("Error while removing item from indexedDb")
                    }
                    ))
                }
                static updateItem(e, t, r, n) {
                    return new Promise(( (s, i) => {
                        const a = e.transaction([t], "readwrite").objectStore(t).put(r, n);
                        a.onsuccess = s,
                        a.onerror = e => {
                            var t;
                            console.error(null == (t = e.target.error) ? void 0 : t.message),
                            i("Error while updating item in indexedDb")
                        }
                    }
                    ))
                }
                static clear(e, t) {
                    return new Promise(( (r, n) => {
                        const s = e.transaction([t], "readwrite").objectStore(t).clear();
                        s.onsuccess = r,
                        s.onerror = () => n("Error while removing item from indexedDb")
                    }
                    ))
                }
                static removeDb(e) {
                    return new Promise(( (t, r) => {
                        const n = indexedDB.deleteDatabase(e);
                        n.onsuccess = t,
                        n.onerror = () => r("Error while removing database")
                    }
                    ))
                }
                static exec(e, t, r) {
                    if ("function" == typeof r)
                        return new Promise(( (n, s) => {
                            const i = e.transaction([t]).objectStore(t)
                              , a = r(i);
                            a.onsuccess = e => n(e.target.result),
                            a.onerror = () => s("Error while getting item from indexedDb")
                        }
                        ))
                }
                static withCursor(e, t, r, n) {
                    return new Promise(( (s, i) => {
                        let a = e.transaction([t], "readwrite").objectStore(t);
                        r && (a = a.index(r));
                        const o = a.openCursor();
                        o.onsuccess = e => {
                            const t = e.target.result;
                            t ? (n(t.key, t.value, t),
                            t.continue()) : s(void 0)
                        }
                        ,
                        o.onerror = () => i("Error while getting item from indexedDb")
                    }
                    ))
                }
                static objectStorePromise(e, t, r) {
                    return new Promise(( (n, s) => {
                        const i = e.objectStore(t)
                          , a = r(i);
                        a.onsuccess = e => n(e.target.result),
                        a.onerror = () => s("Error while work on objectStore from indexedDb")
                    }
                    ))
                }
                static withTransaction(e, t, r) {
                    return new Promise(( (n, s) => {
                        const i = e.transaction(t, "readwrite");
                        r(i).then((e => {}
                        )),
                        i.oncomplete = () => n(i),
                        i.onerror = () => s("Error while open transaction in indexedDb on :" + t.join(","))
                    }
                    ))
                }
            }
            class h {
                constructor(e, t, r=1) {
                    if (c(this, "databaseName"),
                    c(this, "databaseVersion"),
                    c(this, "onupgradeneeded"),
                    null == e || "" == e)
                        throw new Error("creating database without name is impossible");
                    this.databaseName = e,
                    this.databaseVersion = r,
                    this.onupgradeneeded = t
                }
                updateCacheAsync(e, t, r, n, s) {
                    return s = l(l({}, {
                        saveAllDb: !1,
                        getResultFunc: e => e
                    }), s),
                    d.supportIndexedDb() ? this._getItemFromDb(e, t, r, n, s) : this._getItemFromLocalStorage(e, t, r, n, s)
                }
                _getItemFromDb(e, t, r, n, s) {
                    let i;
                    return d.openDb(this.databaseName, {
                        version: this.databaseVersion,
                        onupgradeneeded: this.onupgradeneeded
                    }).then((r => (i = r,
                    d.getItem(i, e, t)))).then((t => null != t ? Promise.resolve(t) : n().then((t => {
                        null != t && (s.saveAllDb ? d.setItems(i, e, Date.now() + r, t) : d.setItem(i, e, l({
                            __expiredAt__: Date.now() + r
                        }, t)));
                        const n = s.getResultFunc(t);
                        return Promise.resolve(n)
                    }
                    ))))
                }
                _getItemFromLocalStorage(e, t, r, n, s) {
                    var i;
                    const a = s.saveAllDb ? `${this.databaseName};${this.databaseVersion};${e}` : `${this.databaseName};${this.databaseVersion};${e};${t}`
                      , o = localStorage.getItem(a)
                      , l = o ? JSON.parse(o) : null;
                    if (l && (null == l ? void 0 : l.__expiredAt__) >= Date.now() && (!s.saveAllDb || !!(null == (i = l.items) ? void 0 : i.length))) {
                        const e = s.getResultFunc(s.saveAllDb ? l.items : l);
                        return Promise.resolve(e)
                    }
                    return n().then((e => {
                        const t = s.saveAllDb ? {
                            items: e,
                            __expiredAt__: 0
                        } : e;
                        return t.__expiredAt__ = Date.now() + r,
                        localStorage.setItem(a, JSON.stringify(t)),
                        Promise.resolve(s.getResultFunc(e))
                    }
                    ))
                }
            }
            t.A = d
        },
        37046: function(e, t, r) {
            "use strict";
            r.d(t, {
                A: function() {
                    return P
                }
            });
            var n = r(27473)
              , s = r(29991);
            wb.currencies = s.Q2,
            $.views.helpers({
                wbCurrencies: s.dt,
                getIsoCode: s.BD
            }),
            $.views.converters({
                isoCode: s.BD,
                currencySign: s.lD
            });
            var i = r(23565)
              , a = r(28288)
              , o = r(85556)
              , l = Object.defineProperty
              , c = Object.defineProperties
              , u = Object.getOwnPropertyDescriptors
              , d = Object.getOwnPropertySymbols
              , h = Object.prototype.hasOwnProperty
              , p = Object.prototype.propertyIsEnumerable
              , m = (e, t, r) => t in e ? l(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , b = (e, t) => {
                for (var r in t || (t = {}))
                    h.call(t, r) && m(e, r, t[r]);
                if (d)
                    for (var r of d(t))
                        p.call(t, r) && m(e, r, t[r]);
                return e
            }
              , g = (e, t) => c(e, u(t))
              , y = (e, t, r) => m(e, "symbol" != typeof t ? t + "" : t, r);
            const {USER_GEO_DATA_URL: f, FIN_PERSON_INSTALLMENT_URL: v} = n.A
              , w = "_sys_auth"
              , _ = "user-balance"
              , S = v
              , C = ["16809639", "34125211", "19089801"]
              , I = [i.s8.Rejected, i.s8.Closed, i.s8.Blocked, i.s8.BlockedSystem, i.s8.BlockedSystemClose, i.s8.BlockedUser]
              , k = class e {
                constructor() {
                    var t;
                    y(this, "balance"),
                    y(this, "brokerInstallmentConfig"),
                    y(this, "brokerInstallmentStatus"),
                    y(this, "userInfo"),
                    y(this, "_balanceTs"),
                    y(this, "_brokerInstStatusTs"),
                    y(this, "_resetBrokerInstStatusTs"),
                    y(this, "_savedBalance"),
                    y(this, "_userGrade"),
                    y(this, "_customsData"),
                    y(this, "getUserSettings", ( () => {
                        let e, t = 0;
                        return function() {
                            const r = Date.now();
                            return e && r - t < 3e5 ? Promise.resolve(e) : WbSpaModel.prototype.$httpClient.fetchJSON("/webapi/lk/account/userinfo/settings").then((n => (e = n.value.settings,
                            t = r,
                            e)))
                        }
                    }
                    )());
                    for (const t in e.syncData)
                        e.syncData[t].init();
                    this.balance = localStorage.getObject(e.storageKey(_)),
                    this.balance && (this._savedBalance = Object.assign(this.balance)),
                    this._balanceTs = (null == (t = this.balance) ? void 0 : t.balanceTs) || 0,
                    this.getUserGrade = WbSpaModel.prototype.$helper.lockPromise(this.getUserGrade),
                    this.getCustomsDuty = WbSpaModel.prototype.$helper.lockPromise(this.getCustomsDuty),
                    window.addEventListener("storage", this._onSync.bind(this))
                }
                getUid() {
                    return e._getUserUid()
                }
                getId() {
                    return WbSpaModel.prototype.$auth.jwtData.user || "0"
                }
                getShard() {
                    return WbSpaModel.prototype.$auth.shard || ""
                }
                getUserInfo() {
                    return this.userInfo
                }
                initUser() {
                    const t = WbSpaModel.prototype.$auth.jwtData
                      , r = WbSpaModel.prototype.$auth.isAuth
                      , n = WbSpaModel.prototype.$services.sessionService.getBasketUid()
                      , s = r ? e._getUserUid() : "";
                    localStorage.setItem(w, r ? t.user || "" : "unauth"),
                    this.userInfo = r ? {
                        uid: s,
                        basketUid: void 0,
                        isAuth: r,
                        t: t.user
                    } : {
                        uid: 0,
                        basketUid: n,
                        isAuth: r
                    },
                    wb.analitics.sendUserEvent(s, r ? t.user : ""),
                    wb.analitics.sendSessionStartEvent(),
                    r ? this.getUserGrade(this.getCurrency()) : this._setDiscountForUnAuth(),
                    wb.spa && wb.spa.setUserStatus({
                        userIsAuth: r,
                        userUid: r ? s : n,
                        userId: parseInt(String(t.user), 10)
                    })
                }
                async getBalance({force: t, timeout: r}={}) {
                    var n;
                    let s = !1;
                    if (t || (null == (n = this._savedBalance) ? void 0 : n.balanceCurrency) && this._savedBalance.balanceCurrency !== this.getCurrency() || !this.balance || this._balanceTs < (new Date).getTime()) {
                        this._balanceTs = (new Date).getTime() + 3e4;
                        try {
                            this.balance = await WbSpaModel.prototype.$httpClient.fetchJSON("/webapi/account/getsignedbalance", {
                                method: "POST"
                            }, r ? {
                                timeout: r,
                                useProccessResponse: !0
                            } : {
                                useProccessResponse: !0
                            }),
                            this.balance.balanceCurrency = this.getCurrency(),
                            this.balance.walletRidLimit = this._getWalletRidLimit(),
                            this.balance.walletTypeCode = ["ge", "tj"].includes(wb.settings.currentLocale) ? 0 : this._getWalletTypeCode(this.balance.walletType, this.balance.walletStatus),
                            this._savedBalance = Object.assign(this.balance),
                            this.balance.balanceTs = this._balanceTs,
                            localStorage.putObject(e.storageKey(_), this.balance),
                            s = !0
                        } catch (e) {
                            if (!this._savedBalance)
                                throw this._balanceTs = (new Date).getTime() + 15e3,
                                e;
                            this.balance = Object.assign(this._savedBalance)
                        }
                    }
                    return null === this.balance ? {
                        walletLimit: 0,
                        moneyBalanceRUB: 0,
                        walletBalance: 0,
                        cashbackBalance: 0,
                        totalBalanceRub: 0,
                        totalBalance: 0,
                        balanceCurrency: this.getCurrency()
                    } : (this.handleTotalBalanceSetting(),
                    this.handleWalletUnblocking(),
                    s && WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("BalanceUpdated",{
                        detail: this.balance
                    })),
                    s && WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("LocaleUpdated")),
                    this.balance)
                }
                _handleWalletUnblocking() {
                    const e = localStorage.getItem("wb__wallet_unblocking_started_at");
                    e && !isNaN(Number(e)) && (Date.now() - Number(e) > 3e5 ? this.resetWalletUnblockStatus() : this.balance.isWalletUnblocking = !0)
                }
                resetWalletUnblockStatus() {
                    localStorage.removeItem("wb__wallet_unblocking_started_at"),
                    this.balance.isWalletUnblocking = void 0
                }
                _getWalletTypeCode(e=i.bD.Unknown, t=i.s8.Unknown) {
                    return I.includes(t) ? 0 : e === i.bD.Verified ? 2 : e === i.bD.Anonymous ? 1 : 0
                }
                resetBalance() {
                    this.balance = null,
                    WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("BalanceReset"))
                }
                async getBrokerInstallmentConfig() {
                    if ("ru" !== wb.settings.currentLocale || !WbSpaModel.prototype.$auth.isAuth)
                        return null;
                    if (this.brokerInstallmentConfig)
                        return this.brokerInstallmentConfig;
                    if (this.brokerInstallmentConfig = localStorage.getObject("wbx_br_inst_config"),
                    !this.brokerInstallmentConfig || this.brokerInstallmentConfig.expire < Date.now())
                        try {
                            const e = await WbSpaModel.prototype.$httpClient.fetch(`${S}/v2/config`, {
                                method: "GET",
                                headers: {
                                    "wb-apptype": "web"
                                },
                                timeout: 1e3,
                                withJwtToken: !0,
                                withAuthz: !0
                            })
                              , t = await e.json();
                            t.expire = Date.now() + 36e5,
                            localStorage.putObject("wbx_br_inst_config", t),
                            this.brokerInstallmentConfig = t
                        } catch (e) {
                            wb.spa.logError(e, "[WBX_BR_INST_CONFIG]: failed to fetch broker installment config")
                        }
                    return this.brokerInstallmentConfig
                }
                resetBrokerInstStatusTs() {
                    this._resetBrokerInstStatusTs = !0
                }
                isCryptoReplenishEnable(e) {
                    if ("by" !== wb.settings.currentLocale)
                        return !1;
                    const t = WbSpaModel.prototype.$auth.jwtData.user;
                    return t && C.includes(t) || !!wb.global.settings.switches[e]
                }
                async getBrokerInstallmentStatus(e=!1) {
                    if ("ru" !== wb.settings.currentLocale)
                        return null;
                    if (e && this.resetBrokerInstStatusTs(),
                    this._brokerInstStatusTs = this._resetBrokerInstStatusTs ? 0 : Date.now() + 3e5,
                    !this.brokerInstallmentStatus || this._brokerInstStatusTs < Date.now())
                        try {
                            const e = await WbSpaModel.prototype.$httpClient.fetch(`${S}/v1/status`, {
                                method: "GET",
                                credentials: "include",
                                headers: {
                                    "wb-apptype": "web"
                                },
                                timeout: 1e3,
                                withJwtToken: !0,
                                withAuthz: !0
                            });
                            this.brokerInstallmentStatus = await e.json(),
                            ["186199515"].includes(String(WbSpaModel.prototype.$auth.jwtData.user)) && (this.brokerInstallmentStatus = {
                                maxInstallmentSum: 15e5,
                                status: "completed",
                                availableSum: 15e5
                            }),
                            this._resetBrokerInstStatusTs = !1
                        } catch (e) {
                            this.brokerInstallmentStatus = null
                        }
                    return this.brokerInstallmentStatus
                }
                async getUserGrade(e="RUB") {
                    var t, r, n, s, a, l;
                    if (!WbSpaModel.prototype.$auth.isAuth)
                        return null;
                    let c = this._userGrade || localStorage.getObject("wbx_user_grade");
                    if (WbSpaModel.prototype.$auth.jwtData.user !== (null == c ? void 0 : c.user_id) && (c = null),
                    null == c || c.expire < Date.now() || WbSpaModel.prototype.$auth.jwtData.user !== c.user_id || c.currency !== e)
                        try {
                            const i = await WbSpaModel.prototype.$httpClient.fetch(`https://user-grade.wildberries.ru/api/v5/grade?curr=${e}`, {
                                withJwtToken: !0,
                                withAuthz: !0
                            });
                            if (!i.ok)
                                throw new Error(`resp_status=${i.status}`);
                            const a = await i.json();
                            if (null == a.payload || 0 !== a.state)
                                throw new Error(`resp_data=${JSON.stringify(a || {})}`);
                            c = a.payload,
                            c.sign = a.sign,
                            c.sign_version = a.sign_version,
                            c.expire = Date.now() + 3e5,
                            c.fraud && (null == (t = JSON.parse(c.fraud)) ? void 0 : t.is_trust) ? (c.premiumIsAvailable = !0,
                            c.wbClub = "available") : c.premiumIsAvailable = !1,
                            (null == (r = c.subscription_features) ? void 0 : r.length) && (c.wbClub = "subscribed"),
                            (null == c ? void 0 : c.payments) && (c.priceAdjustmentPercent = -(null != (s = null == (n = c.payments.find((e => 2 === e.wctype_id))) ? void 0 : n.price_discount) ? s : 0)),
                            localStorage.putObject("wbx_user_grade", c),
                            this._userGrade = c,
                            WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("UserGradeUpdated"))
                        } catch (e) {
                            wb.spa.logError(e, "[WBX_USER_GRADE]: failed to fetch user grade data")
                        }
                    const u = (0,
                    o.Z1)().userData.getMaskedInfo()
                      , d = "ru" == wb.settings.currentLocale && (null == u ? void 0 : u.phone.startsWith("79")) || "by" == wb.settings.currentLocale && (null == u ? void 0 : u.phone.startsWith("375"));
                    if ((null == u ? void 0 : u.phone) && c && !c.isPremium) {
                        let e = (null == (a = c.subscription_features) ? void 0 : a.indexOf("extra_discount")) > -1 && d;
                        this._userGrade && c.isPremium !== e && (this._userGrade.isPremium = e,
                        c.isPremium = e,
                        localStorage.putObject("wbx_user_grade", c))
                    }
                    if (null == c ? void 0 : c.payments) {
                        const e = c.payments.find((e => 1 === e.wctype_id));
                        wb.settings.wlt1DiscountPercent = c.isPremium && (null == e ? void 0 : e.wb_club_anonymous_discount) > 0 ? e.wb_club_anonymous_discount : (null == e ? void 0 : e.anonymous_discount) || 0,
                        wb.settings.wlt2DiscountPercent = c.isPremium && (null == e ? void 0 : e.wb_club_uprid_discount) > 0 ? e.wb_club_uprid_discount : (null == e ? void 0 : e.uprid_discount) || 0;
                        let t = (null == e ? void 0 : e.wb_club_anonymous_discount) - (null == e ? void 0 : e.anonymous_discount);
                        wb.settings.premium1DiscountPercent = t > 0 ? t : 0,
                        wb.settings.premium1DiscountPercentFull = null == e ? void 0 : e.wb_club_anonymous_discount;
                        let r = (null == e ? void 0 : e.wb_club_uprid_discount) - (null == e ? void 0 : e.uprid_discount);
                        if (wb.settings.premium2DiscountPercent = r > 0 ? r : 0,
                        wb.settings.premium2DiscountPercentFull = null == e ? void 0 : e.wb_club_uprid_discount,
                        (null == (l = c.wallet) ? void 0 : l.wallet_type) === i.bD.Account) {
                            let t = (null == e ? void 0 : e.wb_club_invoice_discount) - (null == e ? void 0 : e.invoice_discount);
                            wb.settings.wlt2DiscountPercent = (null == e ? void 0 : e.invoice_discount) || 0,
                            wb.settings.premium2DiscountPercent = t > 0 ? t : 0,
                            wb.settings.premium2DiscountPercentFull = null == e ? void 0 : e.wb_club_invoice_discount,
                            c.isPremium && (wb.settings.wlt2DiscountPercent = wb.settings.premium2DiscountPercentFull)
                        }
                    } else
                        wb.settings.wlt1DiscountPercent = 0,
                        wb.settings.wlt2DiscountPercent = 0;
                    return c || {
                        spp: 0,
                        postpaid_limit: 0,
                        currency: e
                    }
                }
                getUserGradeFromCache() {
                    return WbSpaModel.prototype.$auth.isAuth ? this._userGrade || localStorage.getObject("wbx_user_grade") : null
                }
                resetUserGrade() {
                    const e = this.getUserGradeFromCache();
                    e && (e.expire = 0,
                    localStorage.putObject("wbx_user_grade", e))
                }
                async _setDiscountForUnAuth() {
                    var e, t;
                    let r = localStorage.getObject("wbx_default_discounts");
                    if (null == r || r.expire < Date.now()) {
                        const t = await WbSpaModel.prototype.$httpClient.fetchStatic("global-payment/default-payment.json", {}, a.urlStaticBasket, 1);
                        if (0 === (null == t ? void 0 : t.state)) {
                            const n = null == (e = t.data) ? void 0 : e.find((e => 1 === e.wctype_id));
                            r = {
                                wctype_id: (null == n ? void 0 : n.wctype_id) || 1,
                                discount_value: (null == n ? void 0 : n.discount_value) || 0,
                                expire: Date.now() + 3e5
                            },
                            r.expire = Date.now() + 3e5,
                            localStorage.putObject("wbx_default_discounts", r)
                        }
                    }
                    wb.settings.wlt1DiscountPercent = null != (t = null == r ? void 0 : r.discount_value) ? t : 0
                }
                async getCustomsDuty(e) {
                    var t, r, n, s, i, o, l, c;
                    if (!(null == (r = null == (t = wb.global.settings) ? void 0 : t.switches) ? void 0 : r.enableCustomsDuty))
                        return null;
                    let u = this._customsData || localStorage.getObject("customs_duty");
                    const d = (null == (s = null == (n = wb.global.settings) ? void 0 : n.switches) ? void 0 : s.enableNewDutyCalculation) ? "v2" : "v1"
                      , h = null != (i = null == u ? void 0 : u.version) ? i : "";
                    try {
                        if (!u || !u.dutyForImportedGoods || u.dutyForImportedGoods.find((e => new Date(1e3 * e.timestamp).addDays(1) < new Date)) || d !== h) {
                            const e = (null == (l = null == (o = wb.global.settings) ? void 0 : o.switches) ? void 0 : l.enableNewDutyCalculation) ? "duty/duty_v2.json" : "duty/duty.json"
                              , t = await WbSpaModel.prototype.$httpClient.fetchStatic(e, {
                                timeout: 5e3
                            }, a.urlStaticBasket, 44).catch((e => (wb.spa.logError(e, "[CUSTOMS_DUTY]: failed to fetch customs duty data"),
                            this._customsData)));
                            t && (t.version = d,
                            localStorage.putObject("customs_duty", t),
                            this._customsData = u = t)
                        }
                        return null == (c = null == u ? void 0 : u.dutyForImportedGoods) ? void 0 : c.find((t => t.curr == e))
                    } catch (e) {
                        return wb.spa.logError(e, "[CUSTOMS_DUTY]: customs duty exception"),
                        null
                    }
                }
                reset() {
                    this.resetUserGrade(),
                    wb.cookieHelper.deleteCookie("access_token"),
                    this.initUser(),
                    this.resetBalance(),
                    this.clearXInfo(),
                    WbSpaModel.prototype.$services.userData.clear(),
                    WbSpaModel.prototype.$getServiceOf("groupedDeliveriesService").then((e => e.resetCache()))
                }
                clearLocalUserData() {
                    WbSpaModel.prototype.$services.userData.clearLocalUserInfo(),
                    localStorage.removeItem(e.storageKey(_)),
                    localStorage.removeItem("offerRateMain"),
                    localStorage.removeItem(i.if),
                    localStorage.removeItem("_useServiceFee")
                }
                static _getUserUid() {
                    return WbSpaModel.prototype.$auth.um.userUid || "0"
                }
                async _getUserData() {
                    return null != e.syncData.userData.time && e.syncData.userData.time <= Date.now() && !e.syncData.userData.updateInProgress && await this._xInfoUpdate(),
                    e.syncData.userData.data
                }
                static storageKey(t) {
                    return `${t}-${e._getUserUid()}`
                }
                async _xInfoUpdate() {
                    const t = e.syncData.userData;
                    t.data && (t.data.xinfo = this.createXinfo(t.data)),
                    t.updateInProgress = !0;
                    const r = e.storageKey(t.prefix);
                    await navigator.locks.request(`lock-${r}`, (async n => {
                        var s, i;
                        const a = e.syncData.userData;
                        if (!a || null != a.time && a.time < Date.now()) {
                            const e = null == t ? void 0 : t.data;
                            let n = new URLSearchParams;
                            (null == e ? void 0 : e.currency) && n.set("currency", e.currency),
                            e && (n.set("latitude", e.latitude.toString()),
                            n.set("longitude", e.longitude.toString()),
                            n.set("locale", e.locale),
                            n.set("address", e.address),
                            n.set("dt", (e.dt || "0").toString()),
                            n.set("currentLocale", wb.settings.currentLocale.toString()),
                            n.set("b2bMode", null != (s = wb.settings.b2bMode) && s),
                            e.addressId && n.set("addressId", e.addressId),
                            e.addressType && n.set("addressType", e.addressType));
                            const a = t.fetchParam.url(n)
                              , o = await WbSpaModel.prototype.$httpClient.fetchJSON(a, {
                                credentials: "include"
                            }, {
                                timeout: t.fetchParam.timeout,
                                nullOnError: !0,
                                addAuthHeader: !0
                            });
                            if (o) {
                                o.xinfo = this.createXinfo(o);
                                const e = null == (i = localStorage.getObject(r)) ? void 0 : i.data
                                  , n = {
                                    time: Date.now() + t.interval,
                                    data: b(b({}, e), o)
                                };
                                localStorage.putObject(r, n),
                                Object.assign(t, n),
                                this._checkForRefresh(e, o)
                            } else
                                e && (e.time = Date.now() + 1e4)
                        } else
                            a && a.time !== t.time && Object.assign(t, a);
                        t.updateInProgress = !1
                    }
                    ))
                }
                createXinfo(t) {
                    var r, n;
                    if (!(null == (r = t.destinations) ? void 0 : r.length))
                        return e._getFallbackData().xinfo;
                    const s = [];
                    WbSpaModel.prototype.$isSupportBooking() || s.push("10"),
                    WbSpaModel.prototype.isResaleEnabled({
                        isSeller: !1
                    }) || s.push("13"),
                    WbSpaModel.prototype.$isSupportDbsp() || s.push("14");
                    const i = ["appType=1", `curr=${(null == (n = t.currency) ? void 0 : n.toLowerCase()) || e._getDefaultCurrency(wb.settings.currentLocale || "ru").toLowerCase()}`, `dest=${t.destinations.last()}`, "spp=30"];
                    return s.length > 0 && i.push(`hide_dtype=${s.join(";")}`),
                    wb.settings.b2bMode && i.push("b2b=true"),
                    i.join("&")
                }
                getXinfo() {
                    return this._getUserData().then((e => Promise.resolve(null == e ? void 0 : e.xinfo)))
                }
                getXinfoWithClustersAndVectors(t) {
                    return this._checkNeedUpdateData(e.syncData.userClusters),
                    this._checkNeedUpdateData(e.syncData.userVector),
                    this._getUserData().then((r => {
                        var n, s, i, a;
                        let o = e.syncData.userClusters.data && (null == (n = e.syncData.userClusters.data) ? void 0 : n.length) > 0 ? (null == r ? void 0 : r.xinfo) + `&uclusters=${e.syncData.userClusters.data.join(",")}` : null == r ? void 0 : r.xinfo;
                        if ((wb.global.settings.switches.addUserVector && "search" === t || wb.global.settings.switches.addUserVectorCatalog && "catalog" === t || wb.global.settings.switches.addUserVectorRecommend && "new_recom" === t || "suggests" === t) && (null == (s = e.syncData.userVector) ? void 0 : s.data) && (null == (a = null == (i = e.syncData.userVector) ? void 0 : i.data[t]) ? void 0 : a.value)) {
                            const r = e.syncData.userVector.data[t];
                            o += `&uv=${r.value}&uiv=${r.version}`
                        }
                        return Promise.resolve(o)
                    }
                    ))
                }
                getUserClusters() {
                    var t;
                    return this._checkNeedUpdateData(e.syncData.userClusters),
                    null == (t = e.syncData.userClusters.data) ? void 0 : t.join(",")
                }
                getXinfoSignedV1() {
                    return this._getUserData().then((e => {
                        var t;
                        return Promise.resolve({
                            xinfo: null == e ? void 0 : e.xinfo,
                            userDataSign: null == e ? void 0 : e.userDataSign,
                            addressDataSign: null == e ? void 0 : e.addressDataSign,
                            shard: null == e ? void 0 : e.shard,
                            latitude: null == e ? void 0 : e.latitude,
                            longitude: null == e ? void 0 : e.longitude,
                            address: null == e ? void 0 : e.address,
                            dest: null == (t = null == e ? void 0 : e.destinations) ? void 0 : t.last(),
                            addressId: null == e ? void 0 : e.addressId
                        })
                    }
                    ))
                }
                async getLocationData() {
                    const e = await this._getUserData();
                    return {
                        latitude: null == e ? void 0 : e.latitude,
                        longitude: null == e ? void 0 : e.longitude,
                        address: null == e ? void 0 : e.address,
                        addressId: null == e ? void 0 : e.addressId,
                        destinations: null == e ? void 0 : e.destinations,
                        locale: null == e ? void 0 : e.locale
                    }
                }
                async setGeo(t) {
                    var r, n, s;
                    const i = null != (r = t.lat) ? r : t.latitude
                      , a = null != (n = t.lon) ? n : t.longitude
                      , o = t.address;
                    if (i && a && o) {
                        const r = e.syncData.userData
                          , n = e.storageKey(r.prefix)
                          , l = WbSpaModel.prototype.$services.userAddressService.getAddressSignData(t)
                          , c = g(b(b({}, null == r ? void 0 : r.data), null == (s = localStorage.getObject(n)) ? void 0 : s.data), {
                            latitude: i,
                            longitude: a,
                            address: o,
                            addressId: t.addressId,
                            addressType: t.deliveryType,
                            addressDataSign: l,
                            dt: Date.now() / 1e3 | 0,
                            relevant: !1
                        });
                        c.xinfo = this._changeXDest(c.xinfo, t.dest);
                        const u = {
                            data: c,
                            time: e._timeInPast(r.interval)
                        };
                        Object.assign(r, u),
                        localStorage.putObject(n, u),
                        WbSpaModel.prototype.$geoLocation.setCityName(o),
                        await this._xInfoUpdate()
                    }
                }
                async setCurrency(t) {
                    var r;
                    if (t) {
                        const n = e.syncData.userData
                          , s = e.storageKey(n.prefix)
                          , i = g(b(b({}, null == n ? void 0 : n.data), null == (r = localStorage.getObject(s)) ? void 0 : r.data), {
                            currency: t,
                            relevant: !1
                        });
                        i.xinfo = this._changeXCurrency(i.xinfo, t),
                        Object.assign(n, {
                            data: i,
                            time: e._timeInPast(n.interval)
                        }),
                        await this._xInfoUpdate()
                    }
                }
                clearXInfo() {
                    for (const t in e.syncData)
                        e.syncData[t].time = e._timeInPast(e.syncData[t].interval);
                    Object.keys(localStorage).forEach((t => {
                        for (const r in e.syncData)
                            -1 !== t.indexOf(e.syncData[r].prefix) && localStorage.removeItem(t)
                    }
                    ))
                }
                clearUserData(t) {
                    const r = e.syncData[t];
                    r.time = e._timeInPast(r.interval),
                    Object.keys(localStorage).forEach((e => {
                        -1 !== e.indexOf(r.prefix) && localStorage.removeItem(e)
                    }
                    ))
                }
                resetTimeForUserVector(t) {
                    t && (e.syncData.userVector.countViewItem += 1,
                    e.syncData.userVector.countViewItem < 5) || (e.syncData.userVector.time = e._timeInPast(e.syncData.userVector.interval),
                    e.syncData.userVector.countViewItem = 0)
                }
                async getShardAsync() {
                    const e = await this._getUserData();
                    return null == e ? void 0 : e.shard
                }
                async check2FAEnabled() {
                    var e, t, r, n;
                    const {userInfo: s} = await WbSpaModel.prototype.$services.userData.getUserDataAsync()
                      , i = WbSpaModel.prototype.checkMobileRange(Number(this.getId()), (null == (t = null == (e = wb.global.settings.mobileAppVariables) ? void 0 : e.objects) ? void 0 : t["2FARange"]) || [])
                      , a = s.isEmployeeSynced || s.isEmp
                      , o = wb.global.settings.switches.enable2faForEmployee;
                    return (null != (n = null == (r = this.balance) ? void 0 : r.walletTypeCode) ? n : 0) > 0 && "ru" === wb.settings.currentLocale && (i || a && o)
                }
                checkEnabledUnitedWbCourierDelivery() {
                    var e, t;
                    const r = WbSpaModel.prototype.checkMobileRange(Number(this.getId()), (null == (t = null == (e = wb.global.settings.mobileAppVariables) ? void 0 : e.objects) ? void 0 : t.unitedWBCourierDeliveryRange) || []);
                    return wb.global.settings.switches.enableUnitedWBCourierDelivery && r
                }
                getIp() {
                    var t;
                    return null == (t = e.syncData.userData.data) ? void 0 : t.ip
                }
                getCurrency() {
                    var t;
                    return null == (t = e.syncData.userData.data) ? void 0 : t.currency
                }
                async getCurrencyAsync() {
                    const e = await this._getUserData();
                    return null == e ? void 0 : e.currency
                }
                getLocale() {
                    var t;
                    return null == (t = e.syncData.userData.data) ? void 0 : t.locale
                }
                getDest() {
                    var t, r;
                    return null == (r = null == (t = e.syncData.userData.data) ? void 0 : t.destinations) ? void 0 : r.last()
                }
                getCurrentCoordinates() {
                    var t, r;
                    return [null == (t = e.syncData.userData.data) ? void 0 : t.longitude, null == (r = e.syncData.userData.data) ? void 0 : r.latitude]
                }
                _changeXCurrency(e, t) {
                    const r = `$1${t.toLowerCase()}$3`;
                    return e.replace(/(&curr=)(.*?)(&)/, r)
                }
                _changeXDest(e, t) {
                    const r = `$1${t}$3`;
                    return e.replace(/(&dest=)(.*?)(&)/, r)
                }
                static getXCurrency(e) {
                    var t;
                    return null == (t = /curr=(.*?)&/.exec(e)) ? void 0 : t[1]
                }
                _checkForRefresh(t, r, n) {
                    var s, i, a, o, l, c, u, d, h;
                    let p = !1;
                    (null == t ? void 0 : t.currency) !== (null == r ? void 0 : r.currency) && (e._checkCurrencyInvalid(r) && location.reload(),
                    null == (s = wb.spa.getMainLayout().header) || s.changeSettings.refresh(r.currency),
                    p = !0),
                    (null == t ? void 0 : t.destinations[t.destinations.length - 1]) !== (null == r ? void 0 : r.destinations[r.destinations.length - 1]) && (p = !0),
                    (null == r ? void 0 : r.address) && (null == (i = WbSpaModel.prototype.$geoLocation.location) ? void 0 : i.address) !== (null == r ? void 0 : r.address) && WbSpaModel.prototype.$geoLocation.updateLocation(),
                    p && (WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("GeoUpdated")),
                    null == (l = null == (o = null == (a = wb.spa) ? void 0 : a.getMainLayout()) ? void 0 : o.menuTop) || l.refreshMenu((null == t ? void 0 : t.locale) !== (null == r ? void 0 : r.locale)),
                    WbSpaModel.prototype.$router.clearNotActiveContainer(),
                    "error404" === (null == (c = WbSpaModel.prototype.$router.currentRoute) ? void 0 : c.name) && "SpaWalletPurchaseEntrypoint" === WbSpaModel.prototype.$router.targetRoute ? WbSpaModel.prototype.$router.moveTo("/lk/mywallet/purchases", !1, !0) : (n || WbSpaModel.prototype.$router.currentRoute && "SpaBasketEntrypoint" !== (null == (u = WbSpaModel.prototype.$router.currentRoute) ? void 0 : u.name) && "SpaBasketBuyItNowEntrypoint" !== (null == (d = WbSpaModel.prototype.$router.currentRoute) ? void 0 : d.name)) && (null == (h = wb.spa) || h.refresh()))
                }
                _onSync(t) {
                    const {key: r, oldValue: n, newValue: s} = t;
                    if (r === w && s)
                        n !== s && (s && "unauth" !== s && !WbSpaModel.prototype.$auth.isAuth ? wb.spa.getMainLayout().updateAfterLogin() : location.reload());
                    else if (r === e.storageKey(e.syncData.userData.prefix)) {
                        if (s) {
                            const t = JSON.parse(n)
                              , r = JSON.parse(s);
                            Object.assign(e.syncData.userData, r),
                            setTimeout(( () => this._checkForRefresh(null == t ? void 0 : t.data, r.data, !0)), 1e3)
                        }
                    } else {
                        if (r === e.storageKey(_)) {
                            if (this.balance = localStorage.getObject(r),
                            null === this.balance)
                                return;
                            return this.handleTotalBalanceSetting(),
                            this.handleWalletUnblocking(),
                            WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("BalanceUpdated",{
                                detail: this.balance
                            })),
                            this.balance
                        }
                        for (const t in e.syncData)
                            if (r === e.storageKey(e.syncData[t].prefix)) {
                                const r = JSON.parse(s);
                                Object.assign(e.syncData[t], r)
                            }
                    }
                }
                handleTotalBalanceSetting() {
                    var e;
                    const t = null != (e = this.balance[`moneyBalance${this.balance.balanceCurrency}`]) ? e : "RUB" === this.balance.balanceCurrency ? this.balance.moneyBalance : 0;
                    this.balance.totalBalance = t + ("RUB" === this.balance.balanceCurrency ? this.balance.bonusBalance + this.balance.walletBalance : 0),
                    "RUB" === this.balance.balanceCurrency && (this.balance.totalBalance = Math.floor(Math.abs(this.balance.totalBalance) < 1 ? 0 : this.balance.totalBalance)),
                    this.balance.totalBalanceRub = (this.balance.moneyBalanceRUB || 0) + (this.balance.bonusBalance || 0) + (this.balance.walletBalance || 0),
                    this.balance.totalBalanceRub = Math.floor(Math.abs(this.balance.totalBalanceRub) < 1 ? 0 : this.balance.totalBalanceRub)
                }
                handleWalletUnblocking() {
                    this.balance.isWalletBlocked = this.balance.walletStatus === i.s8.BlockedSystem,
                    (this.balance.isWalletBlocked || this.balance.walletStatus === i.s8.Active) && this._handleWalletUnblocking()
                }
                static _getFallbackData() {
                    const t = wb.settings.currentLocale || "ru"
                      , r = e._getDefaultCurrency(t);
                    let n = {
                        xinfo: `appType=1&curr=${null == r ? void 0 : r.toLowerCase()}&dest=-1257786&locale=${t}&spp=30&lang=${wb.currentLanguage}`,
                        address: "Москва",
                        latitude: 55.753737,
                        longitude: 37.6201,
                        currency: r,
                        locale: "ru",
                        destinations: [-1029256, -102269, -2162196, -1257786]
                    };
                    switch (t) {
                    case "ru":
                        break;
                    case "by":
                        n = {
                            xinfo: `appType=1&curr=${null == r ? void 0 : r.toLowerCase()}&dest=-8139704&locale=by&spp=30&lang=${wb.currentLanguage}`,
                            address: "Минск",
                            latitude: 53.901328,
                            longitude: 27.549044,
                            currency: r,
                            locale: "by",
                            destinations: [12358386, 12358403, -70563, -8139704]
                        };
                        break;
                    case "global":
                    case "kz":
                        n = {
                            xinfo: `appType=1&curr=${null == r ? void 0 : r.toLowerCase()}&dest=85&locale=kz&spp=30&lang=${wb.currentLanguage}`,
                            address: "Астана",
                            latitude: 51.129669,
                            longitude: 71.495475,
                            currency: r,
                            locale: "kz",
                            destinations: [12358388, 12358412, -3479876, 85]
                        };
                        break;
                    case "kg":
                        n = {
                            xinfo: `appType=1&curr=${null == r ? void 0 : r.toLowerCase()}&dest=28&locale=kg&spp=30&lang=${wb.currentLanguage}`,
                            address: "Бишкек",
                            latitude: 42.8618,
                            longitude: 74.5831,
                            currency: r,
                            locale: "kg",
                            destinations: [12358387, 12358395, -10860151, 28]
                        };
                        break;
                    case "am":
                        n = {
                            xinfo: `appType=1&curr=${null == r ? void 0 : r.toLowerCase()}&dest=36&locale=am&spp=30&lang=${wb.currentLanguage}`,
                            address: "Ереван",
                            latitude: 40.177628,
                            longitude: 44.512547,
                            currency: r,
                            locale: "am",
                            destinations: [12358387, 12358400, -13404218, 36]
                        };
                        break;
                    case "uz":
                        n = {
                            xinfo: `appType=1&curr=${null == r ? void 0 : r.toLowerCase()}&dest=491&locale=uz&spp=30&lang=${wb.currentLanguage}`,
                            address: "Ташкент",
                            latitude: 41.311158,
                            longitude: 69.279737,
                            currency: r,
                            locale: "uz",
                            destinations: [12358390, 12358442, -2448072, 491]
                        };
                        break;
                    case "tj":
                        n = {
                            xinfo: `appType=1&curr=${null == r ? void 0 : r.toLowerCase()}&dest=123589607&locale=tj&spp=30&lang=${wb.currentLanguage}`,
                            address: "Душанбе",
                            latitude: 38.576271,
                            longitude: 68.779716,
                            currency: r,
                            locale: "tj",
                            destinations: [-214626, -7328360, -11018181, 123589607]
                        };
                        break;
                    case "ge":
                        n = {
                            xinfo: `appType=1&curr=${null == r ? void 0 : r.toLowerCase()}&dest=123586302&locale=ge&spp=30&lang=${wb.currentLanguage}`,
                            address: "Тбилиси",
                            latitude: 41.693083,
                            longitude: 44.801561,
                            currency: r,
                            locale: "ge",
                            destinations: [-28699, -1996871, -13438811, 123586302]
                        }
                    }
                    return n.shard = 0,
                    n
                }
                static _getDefaultCurrency(e) {
                    return wb.currencies.getDefaultForLocale(e)
                }
                static _timeInPast(e) {
                    return Date.now() - e
                }
                static _checkCurrencyInvalid(t) {
                    var r;
                    const n = null == (r = e.getXCurrency(t.xinfo)) ? void 0 : r.toUpperCase();
                    return !t || !wb.currencies.info[t.currency] || n && !wb.currencies.info[n]
                }
                _checkNeedUpdateData(t) {
                    if (null != t.time && t.time >= Date.now() || t.updateInProgress)
                        return;
                    t.updateInProgress = !0;
                    const r = e.storageKey(t.prefix);
                    navigator.locks.request(`lock-${r}`, (async n => {
                        let s;
                        if ("0" !== e._getUserUid())
                            if (t.disableFetch && await t.disableFetch())
                                s = [];
                            else {
                                const r = t.fetchParam.url(e._getUserUid())
                                  , n = await WbSpaModel.prototype.$httpClient.fetchJSON(r, {
                                    credentials: "omit"
                                }, {
                                    timeout: t.fetchParam.timeout,
                                    nullOnError: !0,
                                    addAuthHeader: t.fetchParam.jwt
                                });
                                s = t.processData && t.processData(n)
                            }
                        else
                            s = [];
                        if (s) {
                            const e = {
                                time: Date.now() + t.interval,
                                data: s
                            };
                            localStorage.putObject(r, e),
                            Object.assign(t, e)
                        } else
                            t.time = Date.now() - t.interval + 6e4;
                        t.updateInProgress = !1
                    }
                    ))
                }
                checkAccountLimitsEnabled() {
                    var e;
                    return "account" === (null == (e = this.balance) ? void 0 : e.originalWalletType)
                }
                getWalletAccountLimits() {
                    var e, t, r, n, s, i, a, o, l, c, u, d, h, p, m, b, g, y, f;
                    return {
                        maxOrderPrice: "active" === (null == (e = this.balance.discountsConditions) ? void 0 : e.rids_and_total_amount) ? Math.floor((null != (r = null == (t = this.balance.discount) ? void 0 : t.max_order_price) ? r : 0) / 100) : null,
                        walletLimit: "active" === (null == (n = this.balance.discountsConditions) ? void 0 : n.monthly) ? Math.floor((null != (i = null == (s = this.balance.discount) ? void 0 : s.monthly_limit) ? i : 0) / 100) : null,
                        walletVolumeLimit: "active" === (null == (a = this.balance.discountsConditions) ? void 0 : a.max_amount) ? Math.floor((null != (l = null == (o = this.balance.discount) ? void 0 : o.volume_monthly_limit) ? l : 0) / 100) : null,
                        remainingWalletLimit: "active" === (null == (c = this.balance.discountsConditions) ? void 0 : c.monthly) ? Math.max(Math.floor(((null != (d = null == (u = this.balance.discount) ? void 0 : u.monthly_limit) ? d : 0) - (null != (p = null == (h = this.balance.discount) ? void 0 : h.expenses) ? p : 0)) / 100), 0) : null,
                        remainingWalletVolumeLimit: "active" === (null == (m = this.balance.discountsConditions) ? void 0 : m.max_amount) ? Math.max(Math.floor(((null != (g = null == (b = this.balance.discount) ? void 0 : b.volume_monthly_limit) ? g : 0) - (null != (f = null == (y = this.balance.discount) ? void 0 : y.volume_expenses) ? f : 0)) / 100), 0) : null
                    }
                }
                getExceededWalletLimit(e, t) {
                    var r;
                    if (!this.balance || !this.checkAccountLimitsEnabled()) {
                        return e > ((null == (r = this.balance) ? void 0 : r.walletLimit) || (wb.settings.walletTypeCode > 1 ? wb.global.settings.variables.wlt2DiscountDisplayMaxPrice : wb.global.settings.variables.wlt1DiscountDisplayMaxPrice)) ? i.Hl.walletOrderLimit : null
                    }
                    if (0 === this.balance.walletTypeCode)
                        return null;
                    const {maxOrderPrice: n, remainingWalletLimit: s, remainingWalletVolumeLimit: a} = this.getWalletAccountLimits();
                    return null != n && e + t > n ? i.Hl.walletOrderLimit : null != s && e > s ? i.Hl.walletLimit : null != a && t > a ? i.Hl.walletVolumeLimit : null
                }
                getWalletOrderLimit() {
                    var e;
                    return this.checkAccountLimitsEnabled() ? this.getWalletAccountLimits().maxOrderPrice : (null == (e = this.balance) ? void 0 : e.walletTypeCode) && this.balance.walletTypeCode > 0 ? this.balance.walletLimit : wb.settings.wallet.limitAnon
                }
                _getWalletRidLimit() {
                    var e, t, r;
                    return this.checkAccountLimitsEnabled() ? "active" === (null == (e = this.balance.discountsConditions) ? void 0 : e.rids_and_total_amount) ? Math.floor((null != (r = null == (t = this.balance.discount) ? void 0 : t.max_rid_price) ? r : 0) / 100) : -1 : null
                }
                static richPrototype({prototype: t}) {
                    Object.setPrototypeOf(e.prototype, t)
                }
                static factory(t) {
                    return t && e.richPrototype(t),
                    new e
                }
            }
            ;
            y(k, "syncData", {
                userData: {
                    prefix: "geo-data-v1",
                    data: null,
                    interval: 18e4,
                    fetchParam: {
                        url: e => `${f}get-geo-info?${e}`,
                        timeout: 3e3
                    },
                    init: function() {
                        const e = {
                            data: k._getFallbackData(),
                            time: k._timeInPast(Date.now())
                        }
                          , t = localStorage.getObject(k.storageKey(this.prefix));
                        (null == t ? void 0 : t.data) && k._checkCurrencyInvalid(t.data) && (t.time = k._timeInPast(this.interval)),
                        Object.assign(this, b(b({}, e), t))
                    }
                },
                userClusters: {
                    prefix: "user-clusters",
                    data: null,
                    processData: function(e) {
                        return this.fetchParam.dataField ? e[this.fetchParam.dataField] : e
                    },
                    interval: 432e5,
                    fetchParam: {
                        url: e => `https://personal-clusters.wildberries.ru/api/v1/clusters?id=${e}`,
                        dataField: "uclusters",
                        timeout: 2e4
                    },
                    init: function() {
                        Object.assign(this, b(b({}, {
                            data: [],
                            time: k._timeInPast(this.interval)
                        }), localStorage.getObject(k.storageKey(this.prefix))))
                    },
                    disableFetch: async function() {
                        const e = await WbSpaModel.prototype.$services.userData.getUserDataAsync();
                        return !e || !e.userInfo.enableUserPersonalization
                    }
                },
                userVector: {
                    prefix: "user-vector",
                    data: null,
                    processData: function(e) {
                        if (e) {
                            const t = {};
                            for (const r of Object.keys(e))
                                if (e[r].length > 0) {
                                    const n = e[r][0];
                                    t[r] = {
                                        value: n.value,
                                        version: n.version
                                    }
                                }
                            return t
                        }
                        return this.data
                    },
                    countViewItem: 0,
                    interval: 432e5,
                    fetchParam: {
                        url: () => "https://user-vector-info.wb.ru/api/v2/vector",
                        timeout: 2e4,
                        jwt: !0
                    },
                    init: function() {
                        Object.assign(this, b(b({}, {
                            data: [],
                            time: k._timeInPast(this.interval)
                        }), localStorage.getObject(k.storageKey(this.prefix))))
                    },
                    disableFetch: async function() {
                        const e = await WbSpaModel.prototype.$services.userData.getUserDataAsync();
                        return !e || !e.userInfo.enableUserPersonalization
                    }
                }
            });
            var P = k
        },
        31226: function(e, t, r) {
            "use strict";
            var n = r(19109);
            $.processResponse = n.p,
            wb.quickNav = function(e) {
                var t = e || {}
                  , r = document.querySelector(".j-quicknav");
                if (null === r)
                    return;
                r.addEventListener("click", (function() {
                    return window.scrollTo({
                        top: 0,
                        behavior: "smooth"
                    }),
                    !1
                }
                ));
                let n;
                function s() {
                    null !== r && (r.style.display = "block")
                }
                function i() {
                    null !== r && (r.style.display = "none")
                }
                window.addEventListener("scroll", (function() {
                    if (r) {
                        document.documentElement.clientWidth >= 768 ? function() {
                            const e = t.bottomPx || function() {
                                const e = document.querySelector("#app");
                                return e ? e.offsetTop + parseFloat(getComputedStyle(e, null).height.replace("px", "")) : 0
                            }();
                            (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0) > e ? s() : i()
                        }() : function() {
                            const e = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
                            n || (n = e),
                            function() {
                                if (e >= n)
                                    return !1;
                                const t = document.documentElement.clientHeight;
                                return !(e < 1.5 * t)
                            }() ? s() : i(),
                            n = e
                        }()
                    }
                }
                ))
            }
            ,
            wb.namespace("displayModeSettings", function() {
                const e = "displayMode";
                let t;
                var r = new Map;
                return {
                    init: function() {
                        function r() {
                            const r = wb.settings.breakponts
                              , n = window.innerWidth;
                            for (var s in t = "d",
                            r)
                                n < Number(s) && (t = r[s]);
                            let i = "desktop";
                            n <= 767.98 && (i = "phone"),
                            n >= 768 && n <= 1023.98 && (i = "tablet");
                            const a = window.innerWidth > 1023.98 ? "desktop" : /iPhone|iPad|iPod|Mac OS/i.test(navigator.userAgent) ? "ios" : /Android/i.test(navigator.userAgent) ? "android" : "unknown";
                            $.observable(wb.settings).setProperty(e, t),
                            $.observable(wb.settings).setProperty({
                                displayType: i
                            }),
                            $.observable(wb.settings).setProperty({
                                deviceType: a
                            })
                        }
                        r(),
                        window.addEventListener("resize", r)
                    },
                    addObserver: function(n, s) {
                        if ("function" == typeof n) {
                            s && n(t);
                            var i = () => n(t);
                            $.observe(wb.settings, e, i),
                            $.observe(wb.settings, "displayType", i),
                            r.set(n, i)
                        }
                    },
                    removeObserver: function(t) {
                        let n = r.get(t);
                        n && ($.unobserve(wb.settings, e, n),
                        $.unobserve(wb.settings, "displayType", n))
                    }
                }
            }()),
            wb.namespace("network", function() {
                return {
                    init: function() {
                        function e() {
                            $.observable(wb.settings).setProperty("isOffline", !window.navigator.onLine)
                        }
                        e(),
                        window.addEventListener("online", e),
                        window.addEventListener("offline", e)
                    }
                }
            }())
        },
        37324: function() {
            "use strict";
            wb.stat = function() {
                let e, t = [];
                const r = () => {
                    const e = t;
                    return t = [],
                    e
                }
                  , n = () => {
                    if (!t.length || window._debug)
                        return;
                    const n = r()
                      , s = {
                        pageViewGuid: e,
                        path: window.location.pathname,
                        queryString: window.location.search,
                        urlReferrer: null != wb.spa ? wb.spa.getReferrer() : document.referrer,
                        deviceId: wb.cookieHelper.getCookie("_wbauid"),
                        statisticEvents: n
                    };
                    WbSpaModel.prototype.$httpClient.fetch("/webapi/stats/events", {
                        method: "POST",
                        body: JSON.stringify(s),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    }).catch((e => {
                        t = t.concat(n)
                    }
                    ))
                }
                ;
                return setInterval(( () => {
                    n()
                }
                ), 3e3),
                {
                    sendEvent: (e, r, s) => {
                        const i = r.slice();
                        t.push({
                            EventName: e,
                            EventParams: i
                        }),
                        s && n()
                    }
                    ,
                    wrapParam: (e, t) => ({
                        ParamName: e,
                        ParamValue: void 0 === t ? null : t.toString().replace(/"/g, "\\x22")
                    }),
                    sendPageView: () => {
                        if (window._debug)
                            return;
                        let n;
                        const s = {
                            statusCode: 200,
                            path: window.location.pathname,
                            queryString: window.location.search,
                            urlReferrer: document.referrer,
                            deviceId: wb.cookieHelper.getCookie("_wbauid")
                        };
                        t.length > 0 && (n = r(),
                        s.statisticEvents = n),
                        WbSpaModel.prototype.$user.getLocationData().then((e => (e && (s.address = e.address,
                        s.latitude = e.latitude,
                        s.longitude = e.longitude),
                        WbSpaModel.prototype.$httpClient.fetch("/webapi/stats/pageview", {
                            method: "POST",
                            body: JSON.stringify(s),
                            headers: {
                                "Content-Type": "application/json"
                            }
                        })))).then((e => e.json())).then((t => {
                            e = t
                        }
                        )).catch((e => {
                            n && (t = t.concat(n))
                        }
                        ))
                    }
                }
            }(),
            wb.stat.banners = function() {
                const e = "j-banner"
                  , t = {
                    cl: {
                        banner: e
                    },
                    sl: {
                        shownStat: ".j-banner-shown-stat",
                        clickStat: ".j-banner-click-stat",
                        banner: "." + e
                    }
                }
                  , r = function(e) {
                    const t = []
                      , r = e.data("banner-id")
                      , n = e.data("section")
                      , s = e.data("statistic-fields");
                    return "" === r ? null : (t.push(wb.stat.wrapParam("BID", r)),
                    t.push(wb.stat.wrapParam("SCTN", n)),
                    s && (t.push(wb.stat.wrapParam("BUT", s.urlType)),
                    t.push(wb.stat.wrapParam("BLT", s.locationType)),
                    t.push(wb.stat.wrapParam("BDT", s.displayType)),
                    t.push(wb.stat.wrapParam("SORT", s.sort))),
                    t)
                }
                  , n = function(e) {
                    e instanceof jQuery || (e = $(e));
                    if (e.data("shown-stat-sent"))
                        return;
                    const t = r(e);
                    if (!t)
                        return;
                    const n = e[0].classList.contains("j-banner-stat-send");
                    wb.stat.sendEvent("BSE", t, n),
                    e.attr("data-shown-stat-sent", String(!0))
                }
                  , s = (e, t) => {
                    var n, s;
                    if ((null == e ? void 0 : e.length) > 0) {
                        const t = e[0];
                        if (t.classList.contains("j-banner-wba")) {
                            let {data: e} = $.view(t);
                            e = e.length > 0 ? e[0] : e,
                            e.banner && (e = e.banner);
                            const r = Boolean(e.ordBannerMark)
                              , i = (null == (n = e.bannerSelections) ? void 0 : n.length) > 0 ? e.bannerSelections.map((e => e.href)).toString() : e.link
                              , a = e.isVideo || e.isHtml5
                              , o = {
                                eventName: "Banner_T",
                                bannerName: e.alt,
                                location: t.dataset.analiticsCode,
                                link: i,
                                ind: t.dataset.bannerIndex,
                                bid: e.id,
                                withPromoMark: r,
                                pixelSrc: e.pixelSrc,
                                adv_params: a ? (null == (s = e.htmlData) ? void 0 : s.data) || "" : void 0,
                                banner_load_time: a ? e.loadTime : void 0
                            };
                            wb.analitics.sendBannersWbaEventByData(o)
                        }
                    }
                    if (t)
                        return;
                    if (e.data("click-stat-sent"))
                        return;
                    const i = r(e);
                    i && (wb.stat.sendEvent("BCE", i, !0),
                    e.attr("data-click-stat-sent", String(!0)))
                }
                ;
                return {
                    initClickEvent: e => {
                        $("body").off("mousedown", t.sl.clickStat).on("mousedown", t.sl.clickStat, (r => {
                            if (3 === r.which)
                                return;
                            const n = r.currentTarget.classList.contains(t.cl.banner);
                            let i = $(r.currentTarget);
                            var a;
                            n || (a = i.data("banner-id"),
                            i = $(t.sl.banner).filter(( (e, t) => $(t).data("banner-id") === a)).first()),
                            s(i, e)
                        }
                        ))
                    }
                    ,
                    sendShownStatistic: n,
                    sendAllShownStatistic: () => {
                        const e = $(t.sl.shownStat);
                        wb.scrollListener.addElements(e, (e => {
                            n($(e))
                        }
                        ), !1, .6),
                        wb.scrollListener.start()
                    }
                    ,
                    sendStatisticNow: () => {
                        $.each($(t.sl.shownStat), ( (e, t) => {
                            wb.stat.banners.sendShownStatistic($(t))
                        }
                        ))
                    }
                    ,
                    sendShownCarousel: e => {
                        const t = e.find("li:not(.jc-clone)").find(".j-banner");
                        $.each(t, ( (e, t) => {
                            wb.stat.banners.sendShownStatistic($(t))
                        }
                        ))
                    }
                    ,
                    callShownVisibleHandlerForCarousel: (e, t) => {
                        const r = e.find("li").find(".j-banner:not(.j-banner-section)");
                        wb.scrollListener.addElements(r, (e => {
                            wb.stat.banners.sendShownStatistic($(e))
                        }
                        ), !1, t),
                        wb.scrollListener.start()
                    }
                    ,
                    getShownAfterSetActiveEvent: e => t => {
                        const r = t.find(".j-banner").first();
                        wb.scrollListener.checkRatio(r, e) && wb.stat.banners.sendShownStatistic(r)
                    }
                    ,
                    sendClickStatistic: s,
                    sendClickStatisticForBannerReact: (e, t, r, n) => {
                        var s;
                        (null == e ? void 0 : e.banner) && (e = e.banner);
                        const i = Boolean(e.ordBannerMark)
                          , a = (null == (s = e.bannerSelections) ? void 0 : s.length) > 0 ? e.bannerSelections.map((e => e.href)).toString() : e.link;
                        if (wb.analitics.sendBannersWbaEvent("Banner_T", e.alt, r, a, t, e.id, i),
                        n)
                            return;
                        const o = function(e) {
                            const t = [];
                            if (t.push(wb.stat.wrapParam("BID", e.id)),
                            t.push(wb.stat.wrapParam("SCTN", e.section)),
                            e.statisticFields) {
                                const {urlType: r, locationType: n, displayType: s, sort: i} = e.statisticFields;
                                t.push(wb.stat.wrapParam("BUT", r)),
                                t.push(wb.stat.wrapParam("BLT", n)),
                                t.push(wb.stat.wrapParam("BDT", s)),
                                t.push(wb.stat.wrapParam("SORT", i))
                            }
                            return t
                        }(e);
                        wb.stat.sendEvent("BCE", o, !0)
                    }
                    ,
                    destroyClickEvent: () => {
                        $("body").off("mousedown", t.sl.clickStat)
                    }
                    ,
                    bannerBlockShownStatWba: e => {
                        const t = (e => {
                            if (!e)
                                return;
                            const t = document.querySelectorAll(".j-banners-block")
                              , r = []
                              , n = t => {
                                const n = Array.from(t.querySelectorAll(".j-banner-wba"))
                                  , s = e.$observerHelper.getVerticalObserver(n, {
                                    threshold: .5
                                });
                                r.push(s);
                                const i = t => {
                                    const r = t.target
                                      , {data: n} = $.view(r)
                                      , a = Boolean(n.ordBannerMark);
                                    e.$analitic.sendBannersWbaEvent("Banner_S", r.title, r.dataset.analiticsCode, r.href, r.dataset.bannerIndex, r.dataset.bannerId, a, n.pixelSrc),
                                    e.$stat.banners.sendShownStatistic(r),
                                    r.removeEventListener(s.elementInViewportEventName, i)
                                }
                                ;
                                n.forEach((e => {
                                    e.addEventListener(s.elementInViewportEventName, i)
                                }
                                )),
                                s.observe()
                            }
                            ;
                            return t.forEach((e => {
                                n(e)
                            }
                            )),
                            {
                                destroy: () => {
                                    r.forEach((e => {
                                        e.destroy()
                                    }
                                    ))
                                }
                                ,
                                addBlocks: e => {
                                    (null == e ? void 0 : e.length) && e.filter((e => e.classList.contains("j-banners-block"))).forEach((e => {
                                        n(e)
                                    }
                                    ))
                                }
                            }
                        }
                        )(e);
                        return {
                            destroy: () => {
                                t && t.destroy()
                            }
                            ,
                            addBlocks: e => {
                                t && t.addBlocks(e)
                            }
                        }
                    }
                }
            }();
            ( () => {
                const e = document.createElement("a");
                if (e.href = document.referrer,
                !(e => {
                    let t = !0;
                    return ["wb.", "wildberries."].forEach((r => {
                        e.indexOf(r) < 0 || -1 === $.inArray(e.split(".")[0], ["style", "blog", "lookshop"]) && (t = !1)
                    }
                    )),
                    t
                }
                )(e.hostname))
                    return;
                const t = wb.helpers.getParamsFromUrlQuery(location.search)
                  , r = [];
                if (!(e.hostname || t.utm_medium || t.utm_campaign || t.utm_source))
                    return r.push(wb.stat.wrapParam("Rfr", "direct")),
                    void wb.stat.sendEvent("RFR", r);
                r.push(wb.stat.wrapParam("UTMM", t.utm_medium ? t.utm_medium : "not_set")),
                r.push(wb.stat.wrapParam("UTMC", t.utm_campaign ? t.utm_campaign : "not_set")),
                r.push(wb.stat.wrapParam("UTMS", t.utm_source ? t.utm_source : e.hostname ? e.hostname : "not_set")),
                t.gclid && r.push(wb.stat.wrapParam("GCID", "adwords")),
                e.hostname && r.push(wb.stat.wrapParam("Rfr", e.hostname)),
                wb.stat.sendEvent("RFR", r)
            }
            )(),
            ( () => {
                const e = wb.getURLparam("wb_tp")
                  , t = wb.getURLparam("wb_bnd")
                  , r = [];
                e && t && (r.push(wb.stat.wrapParam("Btp", e)),
                r.push(wb.stat.wrapParam("Bbnd", t)),
                wb.stat.sendEvent("BV", r))
            }
            )()
        },
        68387: function(e, t, r) {
            "use strict";
            var n = r(4668);
            var s = class {
                getFullEcomInfoHtml(e) {
                    return this.getFullEcomInfo(e, null)
                }
                _tryGetTargetItem(e) {
                    var t, r, n;
                    let s = null == e ? void 0 : e.closest(".j-analitics-item");
                    return s ? $.view(s).data : (s = null == e ? void 0 : e.closest(".j-menu-main-item"),
                    s ? {
                        getFullEcomInfo: (null == (n = null == (r = null == (t = wb.spa.getMainLayout().menuTop) ? void 0 : t.sideMenu) ? void 0 : r.statisticManager) ? void 0 : n.getFullEcomInfoMenuItem) || null
                    } : null)
                }
                getFullEcomInfo(e, t) {
                    var r;
                    if (t || (t = this._tryGetTargetItem(e)),
                    !t)
                        return null;
                    return (null == (r = null == t ? void 0 : t.getFullEcomInfo) ? void 0 : r.call(t, e, t)) || null
                }
            }
            ;
            const i = "onw_handler_key"
              , a = 3e5;
            var o = class {
                saveStatInfo(e, t) {
                    if (!e || !t)
                        return;
                    const r = document.location.pathname;
                    this._saveStatInfo({
                        targetUrl: e,
                        pathname: r,
                        analiticsData: t
                    })
                }
                getStatInfo() {
                    const e = this._getStatInfo();
                    return (null == e ? void 0 : e.analiticsData) || null
                }
                _getStatInfo() {
                    var e;
                    const t = JSON.parse(null != (e = localStorage.getItem(i)) ? e : "{}");
                    if (!(null == t ? void 0 : t.expired) || t.expired < Date.now() - a)
                        return null;
                    const r = t.data
                      , n = document.location.href
                      , s = document.referrer ? new URL(document.referrer).pathname : "";
                    return r.targetUrl == n && r.pathname == s ? r : null
                }
                _saveStatInfo(e) {
                    try {
                        if (!e)
                            return;
                        localStorage.putObject(i, {
                            expired: Date.now() + a,
                            data: e
                        })
                    } catch (e) {}
                }
            }
              , l = Object.defineProperty
              , c = Object.defineProperties
              , u = Object.getOwnPropertyDescriptors
              , d = Object.getOwnPropertySymbols
              , h = Object.prototype.hasOwnProperty
              , p = Object.prototype.propertyIsEnumerable
              , m = (e, t, r) => t in e ? l(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , b = (e, t) => {
                for (var r in t || (t = {}))
                    h.call(t, r) && m(e, r, t[r]);
                if (d)
                    for (var r of d(t))
                        p.call(t, r) && m(e, r, t[r]);
                return e
            }
              , g = (e, t) => c(e, u(t));
            const y = "tail_object_data"
              , f = ["SNT", "SNH", "SNS", "SST", "SHT"]
              , v = ["SNS", "ANS", "SNH", "ANH", "SHT"]
              , w = ["SAB", "ANH", "ANS", "AST"]
              , _ = ["MBB", "MBM", "MBS", "BBB", "BBA", "CBB", "CBA", "CBU", "CBS", "SBE", "SAE", "PBG", "PBF", "LKB", "LKA", "DLB", "DLA", "TBB", "TAB"]
              , S = ["SAR", "SAA"];
            var C = class {
                getTermsFromTailObject(e, t) {
                    var r, n, s, i, a, o, l, c, u, d, h, p, m, y, C, I;
                    const k = this.getTailObjectData()
                      , P = {
                        filters: null != (r = k.filters) ? r : "",
                        filters_entry_point: null != (n = k.filters_entry_point) ? n : "default"
                    }
                      , M = {
                        bid: k.bid,
                        bid_index: k.bid_index
                    }
                      , T = {
                        category: k.category,
                        id_category: k.id_category
                    }
                      , E = {
                        parent_item_id: k.parent_item_id,
                        brand: k.brand
                    }
                      , D = {
                        entry_point: k.entry_point,
                        entry_point_info: k.entry_point_info
                    };
                    if ("AAA" === e || "ADI" === e) {
                        const e = this.getTailObjectData();
                        let t;
                        switch (e.page_type) {
                        case "brand":
                            t = null != (s = e.brand) ? s : "";
                            break;
                        case "catalog":
                            t = null != (i = e.id_category) ? i : "";
                            break;
                        case "search":
                            t = null != (a = e.search_text) ? a : "";
                            break;
                        case "seller":
                            t = null != (o = e.page_info) ? o : "";
                            break;
                        case "promo":
                            t = null != (l = e.page_info) ? l : "";
                            break;
                        default:
                            t = ""
                        }
                        return {
                            page_type: e.page_type,
                            page_info: t,
                            link: e.link
                        }
                    }
                    if ("AHT" === e) {
                        const e = this.getTailObjectData();
                        return {
                            catalog_type: e.catalog_type,
                            catalog_value: e.catalog_value,
                            normquery: e.normquery,
                            query_id: e.query_id,
                            filters: e.filters,
                            filters_entry_point: e.filters_entry_point,
                            rs: e.rs,
                            search_text: e.search_text,
                            text_typed: e.text_typed,
                            meta_preset_id: e.meta_preset_id
                        }
                    }
                    if ("SCL" === e) {
                        const e = this.getTailObjectData();
                        return {
                            catalog_type: e.catalog_type,
                            catalog_value: e.catalog_value,
                            query_id: e.query_id,
                            rs: e.rs
                        }
                    }
                    if ("SCM" === e) {
                        const e = this.getTailObjectData()
                          , t = wb.analitics.checkDataInSplitterServiceV2("common", "ab_sp_search", "true")
                          , r = wb.global.settings.switches.enableSearchInSeller || t;
                        return {
                            catalog_type: e.catalog_type,
                            catalog_value: e.catalog_value,
                            query_id: e.query_id,
                            rs: e.rs,
                            recid: r && L(e.filters) ? e.recid : void 0,
                            entry_point: r && L(e.filters) ? e.entry_point : void 0
                        }
                    }
                    function A() {
                        return b(b({}, M), P)
                    }
                    function O() {
                        return b(b({}, P), T)
                    }
                    function B() {
                        return {
                            project_name: k.project_name,
                            entry_point: k.entry_point,
                            vendor_name: k.vendor_name,
                            bid_index: k.bid_index,
                            banner_block: k.banner_block,
                            link: k.link
                        }
                    }
                    if (_.includes(e))
                        return ["BBB", "BBA"].includes(e) ? b(b({}, A()), D) : ["DLB", "DLA"].includes(e) ? g(b({}, A()), {
                            qty_block_delivery_before: k.qty_block_delivery_before
                        }) : ["TBB", "TAB"].includes(e) ? g(b({}, A()), {
                            name: k.name
                        }) : A();
                    if ("BWA" === e || "BQA" === e)
                        return g(b(b(b({}, P), M), D), {
                            page_type: k.page_type,
                            page_info: k.page_info
                        });
                    function L(e) {
                        var t;
                        if (!e)
                            return;
                        const r = e.trim().split(/,|;/).filter((e => e))
                          , n = localStorage.getItem("sellerFilterInfo") ? JSON.parse(null != (t = localStorage.getItem("sellerFilterInfo")) ? t : "") : null;
                        return n && n.id && -1 !== r.indexOf("fsupplier") ? n.id : void 0
                    }
                    if (f.includes(e) || w.includes(e)) {
                        const r = function() {
                            var e;
                            const r = b({
                                catalog_type: k.catalog_type,
                                catalog_value: k.catalog_value,
                                normquery: k.normquery,
                                query_id: k.query_id,
                                rs: k.rs,
                                search_text: k.search_text,
                                meta_preset_id: k.meta_preset_id,
                                entry_point: null != (e = null == k ? void 0 : k.entry_point) ? e : ""
                            }, P)
                              , n = Object.keys(t || {}).filter((e => e in r)).reduce(( (e, r) => (e[r] = t[r],
                            e)), {});
                            return b(b({}, r), n)
                        }()
                          , n = wb.analitics.checkDataInSplitterServiceV2("common", "ab_sp_search", "true");
                        return (wb.global.settings.switches.enableSearchInSeller || n) && L(k.filters) && (r.supplier_id = L(k.filters),
                        r.entry_point = k.entry_point,
                        r.grid_type = k.grid_type),
                        v.includes(e) && (r.text_typed = null != (c = k.text_typed) ? c : "",
                        r.meta_preset_id = k.meta_preset_id),
                        "SNH" !== e && "SNT" !== e || (r.article = k.article),
                        r
                    }
                    return "STB" === e ? {
                        filters: k.filters,
                        filters_entry_point: k.filters_entry_point,
                        brand: k.brand,
                        query_id: k.query_id,
                        text_typed: null != ($ = k.text_typed) ? $ : "",
                        search_text: null != (x = k.search_text) ? x : "",
                        meta_preset_id: null != (R = k.meta_preset_id) ? R : ""
                    } : "ATB" === e ? g(b({}, P), {
                        brand: k.brand,
                        query_id: k.query_id,
                        catalog_value: k.catalog_value,
                        catalog_type: k.catalog_type,
                        search_text: k.search_text,
                        text_typed: k.text_typed
                    }) : "SCF" === e ? {
                        search_text: k.search_text
                    } : "SPA" === e ? b({
                        query_id: k.query_id,
                        grid_type: "Small",
                        crop_category: k.crop_category
                    }, P) : "ATB" === e ? b({
                        brand: k.brand,
                        query_id: k.query_id,
                        meta_preset_id: k.meta_preset_id
                    }, P) : S.includes(e) ? b({
                        catalog_type: k.catalog_type,
                        catalog_value: k.catalog_value,
                        type_auto: k.type_auto,
                        query_id: k.query_id,
                        search_text: k.search_text,
                        normquery: k.normquery,
                        rs: k.rs,
                        form_fields: k.form_fields,
                        grid_type: k.grid_type,
                        meta_preset_id: k.meta_preset_id
                    }, P) : "MAB" === e || "MCS" === e ? b({
                        catalog_type: k.catalog_type,
                        catalog_value: k.catalog_value,
                        preset_type: k.preset_type,
                        recid: k.recid
                    }, t) : "MBL" === e ? b({
                        bid: k.bid
                    }, P) : "MBT" === e ? g(b(b({}, M), P), {
                        tv_block: "1"
                    }) : "IBC" === e ? P : "BCR" === e ? b({
                        filters: null != (d = null != (u = null == t ? void 0 : t.filters) ? u : k.filters) ? d : "",
                        filters_entry_point: null != (p = null != (h = null == t ? void 0 : t.filters_entry_point) ? h : k.filters_entry_point) ? p : "default"
                    }, D) : "BTA" === e ? b(b({
                        carousel_name: k.carousel_name,
                        carousel_index: k.carousel_index,
                        type_of_block: null != (m = null == t ? void 0 : t.type_of_block) ? m : "FullsizeBlock"
                    }, P), D) : "BCA" === e || "BEA" === e ? b(b({}, O()), D) : "BOL" === e || "BOA" === e ? g(b({}, P), {
                        letter: k.text_typed,
                        place: k.search_text
                    }) : "SBB" === e ? g(b({
                        bid_index: 1
                    }, P), {
                        grid_type: k.grid_type
                    }) : "CCT" === e || "CCR" === e ? {} : ["CCC", "CTC", "CAB"].includes(e) ? O() : "ICC" === e ? P : "PCH" === e || "PAH" === e ? b({
                        promo_name: k.category,
                        promo_id: k.promo_id,
                        cluster_name: k.cluster_name,
                        cluster_index: 1,
                        type_of_block: "PreviewBlock"
                    }, P) : "IAB" === e ? g(b({}, P), {
                        banner_name: k.banner_name
                    }) : ["ABN", "ABC"].includes(e) ? b(b({}, P), E) : "IBA" === e ? g(b({}, P), {
                        parent_item_id: k.parent_item_id
                    }) : "ISC" === e ? g(b({}, P), {
                        parent_item_id: k.parent_item_id,
                        entry_point: null != (y = k.entry_point) ? y : "default"
                    }) : ["IAC", "IBN", "ISC", "IBB"].includes(e) ? g(b({}, P), {
                        parent_item_id: k.parent_item_id
                    }) : ["ICO", "ICV", "ICR", "IPT", "ISR"].includes(e) ? {
                        parent_item_id: k.parent_item_id
                    } : ["ISP", "ISA"].includes(e) ? {
                        photo_index: k.photo_index,
                        parent_item_id: k.parent_item_id
                    } : ["ITO", "IBS", "IAS"].includes(e) ? {
                        parent_item_id: k.parent_item_id,
                        type_of_block: k.type_of_block
                    } : "IPT" === e ? {
                        parent_item_id: k.parent_item_id
                    } : "ICS" === e || "ICA" === e ? {
                        catalog_type: k.catalog_type,
                        catalog_value: k.catalog_value,
                        preset_type: k.preset_type,
                        parent_item_id: k.parent_item_id
                    } : ["CCB", "CCM", "CPF"].includes(e) ? {
                        item_ids: k.item_ids
                    } : "CRV" === e ? {
                        empty_cart: k.empty_cart
                    } : ["CSI", "TCM"].includes(e) ? {
                        parent_item_id: k.parent_item_id,
                        type_of_block: k.type_of_block || ""
                    } : "CCS" === e || "CSA" === e ? {
                        recid: k.recid,
                        preset_type: k.preset_type
                    } : ["CSD", "CAD", "WLC", "WLA"].includes(e) ? b(b({
                        discount_name: "Скидка WB клуба"
                    }, P), T) : "PBC" === e || "PBB" === e ? M : "PCB" === e || "PAP" === e ? T : ["PSA", "PBA", "PAP", "AMB", "PPA", "PCS", "DLV", "DCV", "DRE"].includes(e) ? {} : "FBR" === e || "FBA" === e ? P : "FSA" === e || "FAA" === e ? {
                        parent_item_id: null != (C = null == t ? void 0 : t.parent_item_id) ? C : k.parent_item_id,
                        parent_loc: ""
                    } : "FCA" === e ? {
                        parent_item_id: null != (I = null == t ? void 0 : t.parent_item_id) ? I : k.parent_item_id
                    } : "LLI" === e || "AIL" === e ? {
                        special_project: k.special_project
                    } : "ICB" === e ? {
                        type_of_block: k.type_of_block,
                        parent_item_id: k.parent_item_id
                    } : "PVC" === e || "PAC" === e ? b({
                        type_of_block: k.type_of_block,
                        filters: k.filters,
                        filters_entry_point: k.filters_entry_point,
                        vendor_index: k.vendor_index,
                        promo_name: k.promo_name,
                        promo_id: k.promo_id,
                        vendor_rate: k.vendor_rate,
                        vendor_id: k.vendor_id
                    }, t) : "LKL" === e || "LLA" === e ? {
                        chance: k.chance,
                        sum_next_chance: k.sum_next_chance,
                        currency: k.currency
                    } : "LCV" === e || "LVA" === e ? {
                        type_of_block: k.type_of_block
                    } : "LSP" === e ? b({}, B()) : "UAA" === e ? g(b({}, B()), {
                        parent_loc: k.parent_loc
                    }) : "SCC" === e || "SAC" === e ? g(b({}, O()), {
                        grid_type: "Line",
                        index: k.index
                    }) : "SBS" === e || "SSA" === e ? b({
                        id_brand: k.id_brand,
                        grid_type: "Line",
                        index: k.index
                    }, P) : "CSB" === e || "CAS" === e ? {
                        preset_type: k.preset_type,
                        recid: k.recid
                    } : "LKS" === e || "LAB" === e ? b({
                        catalog_type: k.catalog_type,
                        catalog_value: k.catalog_value,
                        preset_type: k.preset_type,
                        recid: k.recid
                    }, t) : "NCN" === e ? {
                        title: k.title,
                        link: k.link
                    } : void 0;
                    var $, x, R
                }
                getTailObjectData() {
                    const e = sessionStorage.getItem(y);
                    let t = JSON.parse(null != e ? e : "{}");
                    const r = t.query_id;
                    if ("terms"in t && "object" == typeof t.terms && null !== t.terms) {
                        const e = t.terms
                          , {query_id: r} = e
                          , n = ( (e, t) => {
                            var r = {};
                            for (var n in e)
                                h.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                            if (null != e && d)
                                for (var n of d(e))
                                    t.indexOf(n) < 0 && p.call(e, n) && (r[n] = e[n]);
                            return r
                        }
                        )(e, ["query_id"]);
                        t = b(b({}, t), n)
                    }
                    return void 0 !== r && (t.query_id = r),
                    t
                }
                updateTailObjectDataFromHtml(e) {
                    if (e)
                        if ([..._, "MBL", "MBT"].includes(e.l)) {
                            const t = {
                                bid: e.t,
                                bid_index: e.t2
                            };
                            this.updateTailObjectData(t)
                        } else if ("IAB" === e.l) {
                            const t = {
                                banner_name: e.t
                            };
                            this.updateTailObjectData(t)
                        } else if (["ICO", "ICV", "ICR", "ICS", "ISC", "IBN", "IBB"].includes(e.l)) {
                            const t = {
                                parent_item_id: e.t,
                                entry_point: String(e.t1)
                            };
                            this.updateTailObjectData(t)
                        } else if ("ISP" === e.l || "ISA" === e.l) {
                            const t = {
                                photo_index: e.t,
                                parent_item_id: e.t3
                            };
                            this.updateTailObjectData(t)
                        }
                }
                updateTailObjectData(e, t=!1) {
                    if (!e)
                        return;
                    const r = this.getTailObjectData();
                    t && delete r.terms,
                    e.terms && (e.terms = b(b({}, r.terms), e.terms));
                    const n = g(b(b({}, r), e), {
                        through: e.through
                    });
                    return this._saveTailObjectData(n),
                    n
                }
                _saveTailObjectData(e) {
                    try {
                        if (!e)
                            return;
                        sessionStorage.setItem(y, JSON.stringify(e))
                    } catch (e) {}
                }
                isSearchTail(e) {
                    if (e)
                        return (null == e ? void 0 : e.l) && (f.includes(e.l) || w.includes(e.l))
                }
                isAutoTail(e) {
                    if (e)
                        return (null == e ? void 0 : e.l) && S.includes(e.l)
                }
            }
              , I = Object.defineProperty
              , k = Object.defineProperties
              , P = Object.getOwnPropertyDescriptors
              , M = Object.getOwnPropertySymbols
              , T = Object.prototype.hasOwnProperty
              , E = Object.prototype.propertyIsEnumerable
              , D = (e, t, r) => t in e ? I(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , A = (e, t) => {
                for (var r in t || (t = {}))
                    T.call(t, r) && D(e, r, t[r]);
                if (M)
                    for (var r of M(t))
                        E.call(t, r) && D(e, r, t[r]);
                return e
            }
              , O = (e, t) => k(e, P(t))
              , B = (e, t, r) => D(e, "symbol" != typeof t ? t + "" : t, r);
            const L = "wbAnalitic"
              , x = "__wba_s"
              , R = "last_search_type"
              , F = "search_suggest"
              , j = "purchase_checkout"
              , N = "stat_helper"
              , U = "query_id_search"
              , W = {
                l: "AAA",
                iid: 1
            }
              , H = 3e5
              , q = "temp_analytic_object_for_state";
            class V {
                constructor() {
                    B(this, "_currentAddress"),
                    B(this, "ecomStatHandler"),
                    B(this, "moveFromTemp"),
                    B(this, "openInNewWindowHandler"),
                    B(this, "tailObjectModule"),
                    B(this, "_statHelper"),
                    this.tailObjectModule = new C,
                    this.openInNewWindowHandler = new o,
                    this.ecomStatHandler = new s,
                    this._statHelper = {
                        moveFrom: ""
                    },
                    this.moveFromTemp = "",
                    this._currentAddress = ""
                }
                init() {
                    var e, t;
                    if (null == sessionStorage.getItem(L)) {
                        const t = JSON.parse(null != (e = localStorage.getItem(L)) ? e : "{}");
                        (null == t ? void 0 : t.expired) > Date.now() - H && sessionStorage.setItem(L, JSON.stringify(t.payload)),
                        this._updateFromDataForNewWindow()
                    }
                    const r = JSON.parse(null != (t = localStorage.getItem(N)) ? t : "{}");
                    (null == r ? void 0 : r.expired) > Date.now() - H && (this._statHelper = r.info)
                }
                _updateFromDataForNewWindow() {
                    const e = this.openInNewWindowHandler.getStatInfo();
                    if (!e)
                        return;
                    if (!e.analiticsCode)
                        return;
                    const t = this.ecomInfoToAnaliticsState(e);
                    this.saveState(t),
                    e.tailObjectTerms && this.updateTailObjectData(e.tailObjectTerms)
                }
                _getSort(e) {
                    var t, r;
                    return ["BCR", "CCR", "CEB", "CSA", "CCB", "CCS", "CRV", "DRE", "DLV", "DCV", "ICA", "ICV", "ICS", "LCV", "MCS", "NCB", "NCM", "SCF", "SCM", "TCM", "LCV", "LKS", "LAB", "FBF"].includes(null != (t = e.l) ? t : "") ? "" : null != (r = e.s) ? r : "popular"
                }
                savePurchaseCheckout(e) {
                    sessionStorage.setItem(j, e)
                }
                getPurchaseCheckout() {
                    var e;
                    return null != (e = sessionStorage.getItem(j)) ? e : "not_found"
                }
                sendWbaEcomStat(e, t, r, n) {
                    var s, i;
                    try {
                        if (!window.wba || !n && 0 === (null != (s = null == t ? void 0 : t.length) ? s : 0))
                            return;
                        if ((r = null != r ? r : {}).hasOwnProperty("cookies_alert") || (r.cookies_alert = wb.spa.getMainLayout().cookiePolicy.check() ? 1 : 0),
                        r.hasOwnProperty("country") || (r.country = wb.settings.currentLocale),
                        !r.hasOwnProperty("cluster")) {
                            const e = WbSpaModel.prototype.$user.getUserClusters();
                            e && (r.cluster = e)
                        }
                        r.address = null != (i = this._currentAddress) ? i : "not_selected",
                        r.lang = wb.currentLanguage;
                        const a = (new Date).format("yyyy-MM-dd HH:mm:ss");
                        t.length && !n ? t.forEach((t => {
                            var n, s, i, o, l, c, u, d, h, p, m, b, g, y, f, v;
                            let w = {
                                utcTime: a,
                                id: null == (n = t.id) ? void 0 : n.toString(),
                                nm: Number(t.id),
                                chrt: Number(t.chrt),
                                rid: null == (s = t.rid) ? void 0 : s.toString(),
                                name: t.name,
                                brand: t.brand,
                                price: Number(t.price),
                                inListIndex: Number(t.inListIndex) || 1,
                                listName: t.listName,
                                variant: null != (i = t.variant) ? i : "",
                                quantity: 1,
                                affiliation: `${null != (o = t.affiliation) ? o : ""}|${null != (l = t.storeId) ? l : ""}|${null != (c = t.deliveryType) ? c : ""}`,
                                category: null != (u = t.category) ? u : "regular",
                                category2: t.subjectId && t.subjectId > 0 ? t.subjectId.toString() : "",
                                category3: t.subjectParentId && t.subjectParentId > 0 ? t.subjectParentId.toString() : "",
                                coupon: `${null != (d = t.feedbacksCount) ? d : ""}|${null != (h = t.rating) ? h : ""}`,
                                currency: t.currency,
                                country_code: wb.settings.currentLocale,
                                logs: null != (p = t.logs) ? p : "",
                                tailObject: t.tailObject,
                                is_available: t.is_available,
                                mark: t.mark,
                                shippingItem: t.shippingItem
                            };
                            if ("remove_from_cart" === e || "purchase" === e || "add_to_wishlist" === e) {
                                const e = {
                                    showed_motivations: null != (b = null == (m = t.actualStimulusListFirstTwo) ? void 0 : m.map((e => e.type))) ? b : [],
                                    motivations_array: null != (y = null == (g = t.actualStimulusList) ? void 0 : g.map((e => e.type))) ? y : []
                                };
                                w.motivations = JSON.stringify(e)
                            }
                            if ("cart_del" === (null == r ? void 0 : r.type_remove) || "after_check_data" === (null == r ? void 0 : r.type_remove) || "card" === (null == r ? void 0 : r.type_add))
                                return w.quantity = null != (f = t.quantity) ? f : 1,
                                void window.wba("ec:addProduct", w);
                            if (window.wba("ec:setCurrency", WbSpaModel.prototype.$user.getCurrency()),
                            "add_to_wishlist" === e)
                                window.wba("ec:addProduct", w);
                            else {
                                const e = parseInt(String(t.quantity)) || 1
                                  , r = !!t.rid && e > 1 && (null == (v = w.rid) ? void 0 : v.split(",")) || [];
                                for (let t = 0; t < e; t++)
                                    (null == r ? void 0 : r.length) > t && (w = Object.assign({}, w),
                                    w.rid = r[t]),
                                    window.wba("ec:addProduct", w)
                            }
                        }
                        )) : window.wba("ec:setCurrency", WbSpaModel.prototype.$user.getCurrency()),
                        window.wba("ec:setAction", e),
                        window.wba("ec:send", r)
                    } catch (e) {
                        console.log("wba exception", e)
                    }
                }
                async sendAddToCartEvent(e, t) {
                    const r = e.map((e => ({
                        nmId: e.cod1S ? e.cod1S : e.code1S,
                        size: e.characteristicId
                    })))
                      , n = await wb.xnm.getInfoForWbaStat(r)
                      , s = e.map((e => {
                        var r, s, i, a, o, l, c, u, d;
                        const h = t.find((t => t.cod1S == e.cod1S)) || t.find((t => t.code1S == e.cod1S))
                          , p = this.getStoreProp(e.stocks, "wh")
                          , m = this.getStoreProp(e.stocks, "dtype")
                          , b = null == (a = null == (i = null == (s = null == (r = null == e ? void 0 : e.meta) ? void 0 : r.analitic) ? void 0 : s.tailObject) ? void 0 : i.terms) ? void 0 : a.query_id;
                        let g = this.getTailObjectFromAnalyticsInfo(e.targetInfo.analiticsInfo);
                        b && (g.terms = O(A({}, g.terms || {}), {
                            query_id: b
                        })),
                        g.through = null == h ? void 0 : h.through;
                        return {
                            id: e.cod1S,
                            chrt: e.characteristicId,
                            price: null != (l = null == (o = n.get(e.code1S || e.cod1S)) ? void 0 : o.salePrice) ? l : 0,
                            inListIndex: parseInt(e.targetInfo.analiticsInfo.iid || 1),
                            listName: this.analiticsInfoToListName(e.targetInfo.analiticsInfo),
                            variant: (null == h ? void 0 : h.colorName) || (null == h ? void 0 : h.color),
                            quantity: e.quantity,
                            affiliation: (null == h ? void 0 : h.supplierId) || (null == h ? void 0 : h.sellerId) || 0,
                            storeId: p || (null == h ? void 0 : h.wh),
                            deliveryType: (null == h ? void 0 : h.whDtype) || this.getDeliveryTypeForStat(m),
                            name: (null == h ? void 0 : h.goodsName) || (null == h ? void 0 : h.name) || "",
                            brand: (null == h ? void 0 : h.brandName) || (null == h ? void 0 : h.brand) || "",
                            subjectId: null != (c = null == h ? void 0 : h.subjectId) ? c : 0,
                            subjectParentId: null != (u = null == h ? void 0 : h.subjectParentId) ? u : 0,
                            feedbacksCount: null != (d = null == h ? void 0 : h.feedbacks) ? d : 0,
                            rating: (null == h ? void 0 : h.reviewRating) || (null == h ? void 0 : h.rating) || 0,
                            rid: null == h ? void 0 : h.rId,
                            logs: e.targetInfo.analiticsInfo.logs,
                            tailObject: g,
                            is_available: 1
                        }
                    }
                    ));
                    this.sendWbaEcomStat("add_to_cart", s, {
                        type_add: "list"
                    })
                }
                sendEvent(e, t={}) {
                    var r;
                    if (!window.wba)
                        return;
                    t.country = wb.settings.currentLocale,
                    t.lang = wb.currentLanguage;
                    const n = WbSpaModel.prototype.$user.getUserClusters();
                    n && (t.cluster = n),
                    e.startsWith("DLV_") || (t.address = null != (r = this._currentAddress) ? r : "not_selected"),
                    "Header_T" === e && (t.type = "d" === wb.settings.displayMode ? "desktop" : "mobile"),
                    window.wba(e, t)
                }
                sendAddressSelection({source: e, deliveryType: t, addressId: r, address: n, isChanged: s}) {
                    const i = s ? "DLV_Address_Add_Ok" : "DLV_Address_Slt"
                      , a = {
                        location: e
                    };
                    "courier" === t ? (a.type = "CRR",
                    a.address_CRR = n) : (a.type = "PUP",
                    a.pup_id = r.toString()),
                    this.sendEvent(i, a)
                }
                sendCarouselWbaEvent(e, t, r, n, s, i) {
                    "Carousel_All" === e && (this.moveFromTemp = "carousel");
                    let a = {
                        location: t = t || this.getState().l,
                        index: null == r ? void 0 : r.toString(),
                        item_id: null == n ? void 0 : n.toString(),
                        name: s
                    };
                    i && (a = Object.assign(a, i)),
                    this.sendEvent(e, a)
                }
                sendBannersWbaEventByData(e) {
                    this.sendBannersWbaEvent(e.eventName, e.bannerName, e.location, e.link, e.ind, e.bid, e.withPromoMark, e.pixelSrc, e.noPromoStat, e.banner_load_time, e.adv_params)
                }
                sendBannersWbaEvent(e, t, r, n, s="0", i, a, o=null, l=!1, c, u) {
                    r = r || this.getState().l,
                    "Banner_T" === e && (this.moveFromTemp = "banner");
                    const d = {
                        name: null != t ? t : "",
                        location: r,
                        link: n,
                        index: (parseInt(s) + 1).toString(),
                        id: i
                    };
                    l || (d.promo = a ? "yes" : "no"),
                    "MBT" === r && (d.tv_block = 1),
                    c && (d.banner_load_time = c),
                    (u || "" === u) && (d.adv_params = u),
                    this.sendEvent(e, d),
                    o && this.sendTrackingPixel(o)
                }
                getStatInfo() {
                    return this._statHelper
                }
                setStatInfo(e, t) {
                    try {
                        null == localStorage || localStorage.putObject(N, {
                            info: e,
                            expired: Date.now() + H
                        }),
                        t || (this._statHelper = e)
                    } catch (e) {
                        console.warn("Saving analitics state has failed"),
                        console.error(e.message)
                    }
                }
                updateStatInfo(e) {
                    const t = this.getStatInfo();
                    t.moveFrom = this.moveFromTemp ? this.moveFromTemp : "",
                    this.moveFromTemp = "",
                    this.setStatInfo(t, e)
                }
                sendSessionStartEvent() {
                    const e = localStorage.getItem(x)
                      , t = Date.now();
                    localStorage.setItem(x, (t + 18e5).toString()),
                    e && Number(e) > t || this.sendEvent("session_start")
                }
                async getSplitInfo() {
                    return WbSpaModel.prototype.$services.splitterService.getSplitInfo()
                }
                getSplitInfoV2(e) {
                    return WbSpaModel.prototype.$services.splitterService.getSplitInfoV2(e)
                }
                appendSplitInfoV2(e, t) {
                    return WbSpaModel.prototype.$services.splitterService.appendSplitInfoV2(e, t)
                }
                getSplitterHeadersV2(e) {
                    var t;
                    const r = this.getSplitInfoV2(e)
                      , n = WbSpaModel.prototype.$user.getUserInfo()
                      , s = (null != (t = null == n ? void 0 : n.uid) ? t : 0).toString();
                    let i = "";
                    (null == r ? void 0 : r.length) && r.forEach((e => {
                        i += `${e.key}=${e.value};`
                    }
                    ));
                    const a = new Headers;
                    return a.set("UserID", s),
                    a.set("Test-Properties", (null == i ? void 0 : i.substring(0, i.length - 1)) || ""),
                    a
                }
                getRecommendationsSplitterHeaders() {
                    return this.getSplitterHeadersV2("rec")
                }
                checkDataInSplitterServiceV2(e, t, r) {
                    let n = !1;
                    if (e) {
                        const s = this.getSplitInfoV2(e);
                        for (let e = 0; e < s.length; e++)
                            s[e].key === t && s[e].value === r && (n = !0,
                            e = s.length)
                    }
                    return n
                }
                tryGetAnaliticsCodeForSearchAdvert(e) {
                    switch (e) {
                    case "SNH":
                        return "ANH";
                    case "SNS":
                        return "ANS";
                    case "SHT":
                        return "AHT";
                    case "SNT":
                        return "SAB";
                    case "SST":
                        return "AST";
                    case "AAA":
                        return "ADI";
                    case "MBB":
                        return "AMB";
                    case "PBC":
                        return "PBA";
                    case "PBB":
                        return "PPA";
                    case "PCB":
                        return "PAP";
                    case "CSD":
                        return "CAD";
                    case "WLC":
                        return "WLA";
                    case "PVC":
                        return "PAC";
                    case "WCI":
                        return "WCD";
                    case "IBN":
                        return "ABN";
                    case "IBB":
                        return "IBA";
                    case "IBC":
                        return "ABC";
                    case "ICC":
                        return "IAC";
                    case "LSP":
                        return "UAA";
                    case "SAR":
                        return "SAA";
                    case "SCC":
                        return "SAC";
                    case "SBS":
                        return "SSA";
                    case "STB":
                        return "ATB";
                    case "FBR":
                        return "FBA";
                    case "BBB":
                        return "BQA";
                    case "BBA":
                        return "BWA";
                    case "BCA":
                        return "BEA";
                    case "BCR":
                        return "BTA";
                    case "BOL":
                        return "BOA";
                    case "ISP":
                        return "ISA";
                    case "FCS":
                        return "FCA";
                    case "FSA":
                        return "FAA";
                    case "LKB":
                        return "LKA";
                    case "DLB":
                        return "DLA";
                    case "TBB":
                        return "TAB";
                    case "SBE":
                        return "SAE";
                    case "LCV":
                        return "LVA";
                    case "PBG":
                        return "PBF";
                    case "LKS":
                        return "LAB";
                    default:
                        return null
                    }
                }
                tryGetAdvertCode(e) {
                    switch (e) {
                    case "ANH":
                        return "SNH";
                    case "ANS":
                        return "SNS";
                    case "AHT":
                        return "SHT";
                    case "SAB":
                        return "SNT";
                    case "AST":
                        return "SST";
                    case "ADI":
                        return "AAA";
                    case "SAA":
                        return "SAR";
                    case "SAC":
                        return "SCC";
                    case "SSA":
                        return "SBS";
                    case "ATB":
                        return "STB";
                    case "FBA":
                        return "FBR";
                    case "BQA":
                        return "BBB";
                    case "BWA":
                        return "BBA";
                    case "BEA":
                        return "BCA";
                    case "BTA":
                        return "BCR";
                    case "BOA":
                        return "BOL";
                    case "FCS":
                        return "FCA";
                    case "FSA":
                        return "FAA";
                    case "LKA":
                        return "LKB";
                    case "DLA":
                        return "DLB";
                    case "TAB":
                        return "TBB";
                    case "SAE":
                        return "SBE";
                    case "LCV":
                        return "LVA";
                    case "PBF":
                        return "PBG";
                    case "PPA":
                        return "PBB";
                    case "LAB":
                        return "LKS";
                    case "IBS":
                        return "IAS";
                    default:
                        return null
                    }
                }
                getTermByTermName(e) {
                    const t = wb.cookieHelper.getCookie("_wbauid")
                      , r = (new Date).format("yyyyMMddHHmmss", !0)
                      , n = {
                        qid: "qid",
                        recid: "recid"
                    };
                    return n[e] ? `${n[e]}${t}${r}` : void 0
                }
                updateTailObjectData(e, t) {
                    this.tailObjectModule.updateTailObjectData(e, t)
                }
                getTailObjectData() {
                    return this.tailObjectModule.getTailObjectData()
                }
                getTempAnalyticForState() {
                    const e = sessionStorage.getItem(q);
                    if (e) {
                        const t = JSON.parse(e);
                        return sessionStorage.removeItem(q),
                        t
                    }
                    return null
                }
                saveTempAnalyticForState(e, t) {
                    try {
                        if (!e)
                            return;
                        sessionStorage.setItem(q, JSON.stringify({
                            list: e,
                            tail: t
                        }))
                    } catch (e) {}
                }
                getTermsFromTailObject(e, t) {
                    return this.tailObjectModule.getTermsFromTailObject(e, t)
                }
                getAnaliticsInfoFromTargetUrl(e, t=null, r="", n=!1) {
                    var s;
                    e || (e = "");
                    const i = ["targetUrl", "iid", "l", "lw", "s", "t", "t1", "t2", "t3", "t4", "t5", "t6", "logs"]
                      , a = (e, n) => {
                        var s;
                        return null != (s = null != e ? e : t && (null == t ? void 0 : t[n])) ? s : r
                    }
                      , o = {}
                      , l = e.split("|");
                    for (let e = n ? 2 : 0; e < i.length; e++) {
                        const t = null != (s = l[e]) ? s : null
                          , r = i[e];
                        if (!r)
                            return;
                        o[r] = a(t, r)
                    }
                    return o
                }
                analiticsInfoToListName(e={}, t={}) {
                    const r = A(A({}, e), t)
                      , {l: n="", lw: s="", s: i="", t: a="", t1: o="", t2: l="", t3: c="", t4: u="", t5: d="", t6: h=""} = r;
                    return `${n}|${s}|${i}|${a}|${o}|${l}|${c}|${u}|${d}|${h}`
                }
                getDeliveryTypeForStat(e=null) {
                    switch (15 & (null != e ? e : 0)) {
                    case 2:
                        return "DBS";
                    case 7:
                        return "eDBS";
                    case 13:
                        return "C2C";
                    default:
                        return "WB"
                    }
                }
                getStoreProp(e=null, t=null) {
                    var r;
                    return (null == e ? void 0 : e.length) && t ? null == (r = e.sort(( (e, t) => e.time1 + e.time2 - t.time1 - t.time2))[0]) ? void 0 : r[t] : null
                }
                getTailObjectFromAnalyticsInfo(e, t, r) {
                    var n;
                    t = t || this.tailObjectModule.getTermsFromTailObject(null != (n = null == e ? void 0 : e.l) ? n : "", null != r ? r : {});
                    const s = this.tailObjectModule.getTailObjectData().through;
                    return this._getTailObjectFromAnalyticsInfo(e, t, s)
                }
                _getTailObjectFromAnalyticsInfo({l: e="", lw: t="", s: r="", t: n="", t1: s="", t2: i="", t3: a="", t4: o="", t5: l="", t6: c="", t7: u="", t8: d=""}={}, h=null, p=null) {
                    const m = {
                        loc: e,
                        loc_way: t,
                        sort: r
                    };
                    if (p && (m.through = p),
                    h)
                        return m.terms = h,
                        m;
                    const b = {
                        banner_block: o,
                        bid_index_t2: i,
                        bid_index_t3: a,
                        bid_index_t6: c,
                        bid_t: n,
                        bid_t5: l,
                        brand_index: i,
                        brand_t: n,
                        brand_t3: a,
                        carousel_index_t3: a,
                        carousel_name: n,
                        carousel_type: o,
                        catalog_type: i,
                        catalog_value: s,
                        category_t: n,
                        category_t5: l,
                        cluster_index_t4: o,
                        cluster_name_t2: i,
                        empty_cart: n,
                        entry_point: s,
                        filters_entry_point: d,
                        filters_t2: i,
                        filters_t7: u,
                        id_category_t1: s,
                        id_category_t3: a,
                        id_category_t6: c,
                        item_ids: n,
                        letter_t3: a,
                        link: i,
                        name_t: n,
                        name_t1: s,
                        parent_item_id_t: n,
                        parent_item_id_t1: s,
                        position: i,
                        place: n,
                        project_name: n,
                        promo_id_t1: s,
                        promo_id_t3: a,
                        promo_name: n,
                        query_id: l,
                        search_text_t: n,
                        search_text_t3: a,
                        subject_id: i,
                        subject_parent_id: a,
                        supplier_name: n,
                        supplier_type: s,
                        tag_index: s,
                        tag_text: n,
                        tv_block: s,
                        type_of_block_t1: s,
                        type_of_block_t5: l,
                        type: n,
                        vendor_id: a,
                        vendor_index: o,
                        vendor_name: i,
                        vendor_rate: i,
                        type_of_block: a
                    }
                      , g = Object.keys(b).reduce(( (e, t) => (e[t] = String(b[t]),
                    e)), {})
                      , {banner_block: y, bid_index_t2: f, bid_index_t3: v, bid_index_t6: w, bid_t: _, bid_t5: S, brand_index: C, brand_t: I, brand_t3: k, carousel_index_t3: P, carousel_name: M, carousel_type: T, catalog_type: E, catalog_value: D, category_t: B, category_t5: L, cluster_index_t4: $, cluster_name_t2: x, empty_cart: R, entry_point: F, filters_entry_point: j, filters_t2: N, filters_t7: U, id_category_t1: W, id_category_t3: H, id_category_t6: q, item_ids: V, letter_t3: z, link: G, name_t: K, name_t1: Q, parent_item_id_t: J, parent_item_id_t1: Y, position: X, place: Z, project_name: ee, promo_id_t1: te, promo_id_t3: re, promo_name: ne, query_id: se, search_text_t: ie, search_text_t3: ae, subject_id: oe, subject_parent_id: le, supplier_type: ce, tv_block: ue, type_of_block_t1: de, type_of_block_t5: he, type: pe, vendor_id: me, vendor_index: be, vendor_name: ge, vendor_rate: ye, type_of_block: fe} = g
                      , ve = {
                        catalog_type: E,
                        catalog_value: D,
                        normquery: ""
                    }
                      , we = {
                        catalog_type: "",
                        catalog_value: "",
                        normquery: ""
                    }
                      , _e = {
                        filters: "",
                        filters_entry_point: ""
                    }
                      , Se = {}
                      , Ce = {
                        category: B,
                        id_category: W
                    }
                      , Ie = {
                        bid: _,
                        bid_index: f
                    }
                      , ke = {
                        supplier_type: ce
                    };
                    return ["SNT", "SNH", "SNS", "SHT", "SCF", "STB"].includes(e) ? O(A({}, m), {
                        terms: O(A(A({}, ve), _e), {
                            search_text: ie,
                            query_id: se
                        })
                    }) : ["SST"].includes(e) ? O(A({}, m), {
                        terms: {
                            search_text: ie,
                            catalog_value: D,
                            catalog_type: E
                        }
                    }) : ["SAB", "ANH", "ANS", "AST", "AHT"].includes(e) ? O(A({}, m), {
                        terms: O(A({}, Se), {
                            search_text: ae,
                            query_id: se
                        })
                    }) : "STB" === e ? O(A({}, m), {
                        terms: {
                            brand: I,
                            catalog_value: D,
                            catalog_type: E,
                            query_id: se
                        }
                    }) : "ATB" === e ? O(A({}, m), {
                        terms: O(A(A({}, _e), we), {
                            brand: k
                        })
                    }) : ["SCM", "SCR", "SPA"].includes(e) ? O(A({}, m), {
                        terms: {
                            query_id: se
                        }
                    }) : ["MBB", "MBH", "MBM", "MBS", "MBV"].includes(e) ? O(A({}, m), {
                        terms: A(A({}, Ie), _e)
                    }) : "MBT" === e ? O(A({}, m), {
                        terms: O(A(A({}, Ie), _e), {
                            tv_block: ue
                        })
                    }) : ["MBG", "MBF"].includes(e) ? O(A({}, m), {
                        terms: A({}, Ie)
                    }) : ["MAB", "AMB"].includes(e) ? O(A({}, m), {
                        terms: A({}, Se)
                    }) : ["MCS", "MCB", "MCP", "MCV", "MCO", "MPF", "MCM", "MCN", "MSA"].includes(e) ? A({}, m) : "MCD" === e || "MAD" === e ? O(A({}, m), {
                        terms: {
                            promo_name: ne,
                            promo_id: te,
                            type_of_block: he
                        }
                    }) : ["BBB", "BBA", "BBD"].includes(e) ? O(A({}, m), {
                        terms: A(A({}, _e), Ie)
                    }) : ["BQA", "BWA"].includes(e) ? O(A({}, m), {
                        terms: O(A({}, _e), {
                            bid: _,
                            bid_index: v
                        })
                    }) : "BCA" === e ? O(A({}, m), {
                        terms: A({
                            filters: N
                        }, Ce)
                    }) : "BEA" === e ? O(A({}, m), {
                        terms: {
                            category: B,
                            id_category: H
                        }
                    }) : "BPA" === e ? O(A({}, m), {
                        terms: O(A({}, Se), {
                            brand: k,
                            filters: U
                        })
                    }) : ["BCR", "BCB", "BCP"].includes(e) ? O(A({}, m), {
                        terms: A({}, _e)
                    }) : "BTA" === e ? O(A({}, m), {
                        terms: O(A({}, _e), {
                            carousel_name: M,
                            carousel_index: P
                        })
                    }) : "BOL" === e || "BOA" === e ? O(A({}, m), {
                        terms: O(A({}, _e), {
                            place: Z,
                            letter: z
                        })
                    }) : ["CCC", "CTC"].includes(e) ? O(A({}, m), {
                        terms: O(A({}, Ce), {
                            filters: N,
                            filters_entry_point: ""
                        })
                    }) : "CAB" === e ? O(A({}, m), {
                        terms: O(A(A({}, _e), Se), {
                            id_category: H
                        })
                    }) : "SAA" === e ? O(A({}, m), {
                        terms: O(A(A({}, _e), Se), {
                            search_text: ae,
                            query_id: se,
                            filters: U
                        })
                    }) : ["CBB", "CBA", "CBS", "CBU"].includes(e) ? O(A({}, m), {
                        terms: A(A({}, Ie), _e)
                    }) : ["CCA", "CCR", "CCT", "CBP", "CPA"].includes(e) ? A({}, m) : "SAR" === e ? O(A({}, m), {
                        terms: {
                            search_text: ie,
                            catalog_value: D,
                            catalog_type: E,
                            query_id: se,
                            filters: U
                        }
                    }) : "PCH" === e ? O(A({}, m), {
                        terms: {
                            promo_name: ne,
                            promo_id: te,
                            cluster_name: x,
                            cluster_index: $
                        }
                    }) : "PAH" === e ? O(A({}, m), {
                        terms: {
                            promo_name: ne,
                            promo_id: re
                        }
                    }) : "SPL" === e ? O(A({}, m), {
                        terms: A({}, ke)
                    }) : ["SBB", "SBT", "SBC"].includes(e) ? O(A({}, m), {
                        terms: A(A({}, ke), Ie)
                    }) : "SCA" === e ? O(A({}, m), {
                        terms: O(A({}, ke), {
                            category: B
                        })
                    }) : "SBR" === e ? O(A({}, m), {
                        terms: O(A({}, ke), {
                            brand_index: C
                        })
                    }) : ["SCB", "SCO", "SCP"].includes(e) ? O(A({}, m), {
                        terms: A({}, ke)
                    }) : "SSB" === e ? O(A({}, m), {
                        terms: {
                            name: K,
                            type_of_block: de,
                            position: X
                        }
                    }) : "ABP" === e ? O(A({}, m), {
                        terms: O(A({
                            parent_item_id: null == n ? void 0 : n.toString()
                        }, Se), {
                            brand: k,
                            filters: U,
                            filters_entry_point: j
                        })
                    }) : ["ABC", "ABN"].includes(e) ? O(A({}, m), {
                        terms: O(A({}, _e), {
                            parent_item_id: null == n ? void 0 : n.toString(),
                            brand: k
                        })
                    }) : "IBA" === e ? O(A({}, m), {
                        terms: O(A({}, _e), {
                            parent_item_id: null == n ? void 0 : n.toString()
                        })
                    }) : "IAC" === e ? O(A({}, m), {
                        terms: O(A({
                            parent_item_id: J
                        }, Se), {
                            filters: U,
                            filters_entry_point: j
                        })
                    }) : ["ICO", "ICB", "ICF", "ICV", "ICD", "ICR", "ICE", "ICS", "IBS", "IAS", "ICL", "ICI", "ISC", "IAD"].includes(e) ? O(A({}, m), {
                        terms: A({
                            parent_item_id: J
                        }, _e)
                    }) : "ICA" === e ? O(A({}, m), {
                        terms: O(A({}, Se), {
                            parent_item_id: J
                        })
                    }) : "IAB" === e ? O(A({}, m), {
                        terms: A(A({}, Ie), _e)
                    }) : ["IBP", "IBC", "ICC", "IRC", "ISP", "ISA", "ITA"].includes(e) ? O(A({}, m), {
                        terms: A({}, _e)
                    }) : ["IBN", "IBB"].includes(e) ? O(A({}, m), {
                        terms: {
                            parent_item_id: J,
                            filters: U,
                            filters_entry_point: j
                        }
                    }) : ["CCM", "CPF", "CRA"].includes(e) ? O(A({}, m), {
                        terms: {
                            item_ids: V
                        }
                    }) : "CSI" === e ? O(A({}, m), {
                        terms: {
                            parent_item_id: J
                        }
                    }) : "CRV" === e ? O(A({}, m), {
                        terms: {
                            empty_cart: R
                        }
                    }) : ["CCS", "CSA"].includes(e) ? O(A({}, m), {
                        terms: {}
                    }) : ["CRT", "CER", "CEB"].includes(e) ? A({}, m) : "CCB" === e ? O(A({}, m), {
                        terms: {
                            item_ids: V,
                            parent_item_id: Y,
                            subject_id: oe,
                            subject_parent_id: le,
                            carousel_type: T
                        }
                    }) : ["DLV", "DCR", "DCV", "DRC", "DRE"].includes(e) ? O(A({}, m), {
                        terms: A({}, _e)
                    }) : "TCB" === e ? O(A({}, m), {
                        terms: {
                            parent_item_id: J
                        }
                    }) : "TCM" === e ? A({}, m) : ["FCS", "FCA", "FSA", "FAA", "FRP", "FCV", "FBF"].includes(e) ? O(A({}, m), {
                        terms: {}
                    }) : ["VRW", "VCV"].includes(e) || ["AAA", "ADI", "AAB", "AAC", "AAS"].includes(e) || ["LCS", "LCR", "WTL"].includes(e) || ["WSH", "WCA", "WCV", "WCS", "WCR", "WAB"].includes(e) ? A({}, m) : ["RWA", "LCV", "LVA"].includes(e) ? O(A({}, m), {
                        terms: {
                            type_of_block: fe
                        }
                    }) : ["NCV", "NCB", "NCM", "NCR"].includes(e) || "NIA" === e || ["PRC", "PCV"].includes(e) || ["FEW", "FEQ", "FEF"].includes(e) || "PPM" === e ? A({}, m) : ["FBR", "FBV"].includes(e) || "FBA" === e || "LBA" === e ? O(A({}, m), {
                        terms: A({}, _e)
                    }) : "PCA" === e ? O(A({}, m), {
                        terms: O(A({}, _e), {
                            type: pe,
                            name: Q,
                            link: G
                        })
                    }) : "ITO" === e ? O(A({}, m), {
                        terms: {
                            parent_item_id: J,
                            type_of_block: de
                        }
                    }) : "LSP" === e ? O(A({}, m), {
                        sort: "default",
                        terms: {
                            project_name: ee
                        }
                    }) : ["PBC", "PBB"].includes(e) ? O(A({}, m), {
                        terms: A({}, Ie)
                    }) : ["PSA", "PBA", "PPA"].includes(e) ? O(A({}, m), {
                        terms: O(A({}, Se), {
                            bid: S,
                            bid_index: w
                        })
                    }) : "PAP" === e ? O(A({}, m), {
                        terms: O(A({}, Se), {
                            category: L,
                            id_category: q
                        })
                    }) : "PCB" === e ? O(A({}, m), {
                        terms: A({}, Ce)
                    }) : "PSP" === e ? O(A({}, m), {
                        terms: {
                            parent_item_id: J
                        }
                    }) : "PCS" === e || ["WCI", "WCD"].includes(e) ? A({}, m) : "LCV" === e ? O(A({}, m), {
                        sort: "popular"
                    }) : ["TBV", "TBN", "TBC", "TBA", "TBP", "TBT"].includes(e) ? O(A({}, m), {
                        terms: A({}, Ie)
                    }) : "PVC" === e ? O(A({}, m), {
                        terms: {
                            promo_name: ne,
                            promo_id: te,
                            vendor_rate: ye,
                            vendor_id: me,
                            vendor_index: be
                        }
                    }) : "PAC" === e ? O(A({}, m), {
                        terms: {
                            promo_name: ne,
                            promo_id: re
                        }
                    }) : "LSP" === e ? O(A({}, m), {
                        terms: {
                            project_name: ee
                        }
                    }) : "UAA" === e ? O(A({}, m), {
                        terms: {
                            project_name: ee,
                            entry_point: F,
                            vendor_name: ge,
                            bid_index: v,
                            banner_block: y
                        }
                    }) : ["LKS", "LAB"].includes(e) ? O(A({}, m), {
                        terms: O(A({}, Se), {
                            catalog_value: D,
                            catalog_type: E
                        })
                    }) : {}
                }
                saveEcomInfo(e) {
                    let t = this.ecomStatHandler.getFullEcomInfo(e, null);
                    t && this.openInNewWindowHandler.saveStatInfo(e.href, t)
                }
                getEcomInfoFromHtmlItem(e) {
                    return this.ecomStatHandler.getFullEcomInfoHtml(e)
                }
                getEcomInfoFromItem(e, t) {
                    return this.ecomStatHandler.getFullEcomInfo(e, t)
                }
                analiticsStateToEcomInfo(e) {
                    const {l: t="", iid: r="", logs: n="", lw: s="", s: i="", t: a="", t1: o="", t2: l="", t3: c="", t4: u="", t5: d="", t6: h=""} = e
                      , p = {
                        analiticsCode: t,
                        locationWay: s,
                        sort: i,
                        index: r,
                        termsForListName: {
                            t: a,
                            t1: o,
                            t2: l,
                            t3: c,
                            t4: u,
                            t5: d,
                            t6: h
                        }
                    };
                    return n && (p.logs = n),
                    p
                }
                convertToAnaliticsState(e, t, r, n, s, i, a, o, l, c, u) {
                    if ("string" != typeof e)
                        return;
                    "string" != typeof t && "number" != typeof t && (t = null),
                    "string" != typeof r && "number" != typeof r && (r = null),
                    "string" != typeof n && "number" != typeof n && (n = null),
                    "string" != typeof s && "number" != typeof s && (s = null),
                    "string" != typeof i && "number" != typeof i && (i = null),
                    "string" != typeof a && "number" != typeof a && (a = null),
                    "string" != typeof o && "number" != typeof o && (o = null),
                    "string" != typeof l && "number" != typeof l && (l = null),
                    "string" != typeof c && "number" != typeof c && (c = null),
                    "string" != typeof u && (u = null);
                    const d = {
                        l: e
                    };
                    let h = parseInt(String(t));
                    return null == t || isNaN(h) || (d.iid = Math.max(1, h)),
                    null != r && (d.opt = r),
                    null != n && (d.t = n),
                    null != s && (d.t1 = s),
                    null != i && (d.t2 = i),
                    null != a && (d.t3 = a),
                    null != o && (d.t4 = o),
                    null != l && (d.t5 = l),
                    null != c && (d.t6 = c),
                    null != u && (d.logs = u),
                    d
                }
                ecomInfoToAnaliticsState(e) {
                    var t, r, n, s, i, a, o, l, c;
                    ["Item", "Feedback", "Question"].includes(null == e ? void 0 : e.termsForListName.t1) && (e.termsForListName.t1 = void 0);
                    const u = this.convertToAnaliticsState(null == e ? void 0 : e.analiticsCode, null == e ? void 0 : e.index, null != (t = null == e ? void 0 : e.sort) ? t : "", null != (r = null == e ? void 0 : e.termsForListName.t) ? r : "", null != (n = null == e ? void 0 : e.termsForListName.t1) ? n : "", null != (s = null == e ? void 0 : e.termsForListName.t2) ? s : "", null != (i = null == e ? void 0 : e.termsForListName.t3) ? i : "", null != (a = null == e ? void 0 : e.termsForListName.t4) ? a : "", null != (o = null == e ? void 0 : e.termsForListName.t5) ? o : "", null != (l = null == e ? void 0 : e.termsForListName.t6) ? l : "", null != (c = null == e ? void 0 : e.logs) ? c : "");
                    return u && e.sort && (u.s = e.sort),
                    u
                }
                saveState(e, t=!1, r=!1) {
                    try {
                        "string" == typeof e && (e = this.getAnaliticsInfoFromTargetUrl(`||${e}`));
                        const n = JSON.stringify({
                            payload: e,
                            expired: Date.now() + H
                        });
                        r || "object" != typeof e || null == e || (e.s = this._getSort(e));
                        const s = JSON.stringify(e);
                        sessionStorage.setItem(L, s),
                        t || localStorage.setItem(L, n)
                    } catch (e) {
                        console.warn("Saving analitics state has failed"),
                        console.error(e.message)
                    }
                }
                trySaveStateV2(e) {
                    const t = this.getEcomInfoFromHtmlItem(e);
                    if (!t)
                        return !1;
                    const r = this.ecomInfoToAnaliticsState(t);
                    return this.saveState(r),
                    this.updateTailObjectData(t.tailObjectTerms),
                    !0
                }
                saveStateFromReact(e) {
                    const t = this.getEcomInfoFromItem(null, e);
                    if (!t)
                        return !1;
                    const r = this.ecomInfoToAnaliticsState(t);
                    return this.saveState(r),
                    this.updateTailObjectData(t.tailObjectTerms),
                    !0
                }
                mapPaymentSystemToWbaName(e) {
                    var t;
                    if (!e)
                        return "";
                    const r = "_newcardid" === e.id
                      , n = "qrc" === e.codeLower && e.createNew
                      , s = null != (t = e.system) ? t : e.codeLower;
                    if (r)
                        return "Add_Card";
                    if (n)
                        return "Add_SBP";
                    switch (s) {
                    case "mir":
                        return "MIR";
                    case "visa":
                        return "Visa";
                    case "mastercard":
                        return "Mastercard";
                    case "belcard":
                        return "Belcard";
                    case "arca":
                        return "Arca";
                    case "humo":
                        return "Humo";
                    case "union_pay":
                        return "UnionPay";
                    case "elcard":
                        return "Elcard";
                    case "maestro":
                        return "Maestro";
                    case "uzcard":
                        return "Uzcard";
                    case "american_express":
                        return "AmericanExpress";
                    case "drm":
                        return "Idram";
                    case "sbp":
                        return "SberPay";
                    case "qrc":
                        return "Selected_SBP";
                    case "wlt":
                        return "Wallet";
                    case "ebl":
                        return "Balance";
                    case "cre":
                        return "credit";
                    case "cin":
                        return "cin_installment";
                    case "cwb":
                        return "wb_installment"
                    }
                    return ""
                }
                getNameForPaymentType(e) {
                    var t, r;
                    return e ? e.isWallet ? "Wallet" : e.isSberPay ? "Sber_pay" : e.isCredit ? "Credit" : e.isWbComInst ? "Paid_installment" : e.isBalance ? "Balance" : e.isBplInst || e.isInst ? "Installment" : e.isCwbInst ? "Wb_installment" : e.isCreditCard ? "sbp" === (null == (t = null == e ? void 0 : e.selectedBankCard) ? void 0 : t.system) ? "Sber_pay" : "qrc" === (null == (r = null == e ? void 0 : e.selectedBankCard) ? void 0 : r.system) ? "Sbp" : "Card" : "" : ""
                }
                sendUserEvent(e, t) {
                    this.sendEvent("user_id", {
                        clientId: e,
                        account_id: t
                    })
                }
                proceedAndSave(e, t, r, n, s, i, a, o, l, c, u) {
                    if ("string" != typeof e)
                        return;
                    const d = this.convertToAnaliticsState(e, t, r, n, s, i, a, o, l, c, u);
                    this.tailObjectModule.updateTailObjectDataFromHtml(d),
                    this.saveState(d)
                }
                _escape(e) {
                    return e ? "string" != typeof e ? e : e.replace(/'/g, " ") : ""
                }
                _validateAndFix(e) {
                    return (null == e.iid || isNaN(e.iid) || e.iid < 1) && (e.iid = 1),
                    e.t = this._escape(e.t),
                    e.t1 = this._escape(e.t1),
                    e.t2 = this._escape(e.t2),
                    e
                }
                getState(e=!0) {
                    var t;
                    let r = null != (t = sessionStorage.getObject(L)) ? t : W;
                    return e && r.extraL && (r.l = r.extraL,
                    r.extraTerms && (r = A(A({}, r), r.extraTerms))),
                    this._validateAndFix(r)
                }
                updateState(e, t) {
                    const r = this.getState(!1);
                    let n = A(A({}, r), e);
                    !e.extraTerms && t && t[r.l] && (n = A(A({}, n), t[r.l])),
                    this.saveState(n)
                }
                updateAnalyticsFromQuery() {
                    var e;
                    const t = new URL(window.location.href);
                    if (document.referrer.indexOf("guru.wildberries.ru") > 0 && t.searchParams.has("externalSource") && t.searchParams.has("analyticsCode")) {
                        const r = null != (e = t.searchParams.get("analyticsCode")) ? e : "";
                        this.saveState(r, !1, !0)
                    } else if (t.searchParams.has("listName")) {
                        const e = t.searchParams.get("listName")
                          , r = this.getAnaliticsInfoFromTargetUrl(`||${e}`);
                        this.saveState(r);
                        const n = null == r ? void 0 : r.l;
                        n && ["LLI", "AIL"].includes(n) && this.updateTailObjectData({
                            special_project: null == r ? void 0 : r.t
                        })
                    } else
                        t.searchParams.has("analiticsCode") && this.saveState({
                            l: t.searchParams.get("analiticsCode")
                        }, !0)
                }
                saveLastSearchAnaliticsData(e) {
                    sessionStorage.putObject(R, e)
                }
                saveLastSearchAnalyticsDataForSuggest(e) {
                    sessionStorage.setItem(F, e)
                }
                saveQueryIdForSearch(e) {
                    sessionStorage.setItem(U, e)
                }
                retrieveQueryIdForSearch() {
                    const e = sessionStorage.getItem(U);
                    if (e)
                        return e;
                    {
                        const e = this.getTermByTermName("qid");
                        return e && this.saveQueryIdForSearch(e),
                        e
                    }
                }
                getLastSearchAnaliticsData() {
                    var e;
                    const t = null != (e = sessionStorage.getObject(R)) ? e : null;
                    return t && sessionStorage.removeItem(R),
                    t
                }
                getLastSearchAnalyticsDataForSuggest() {
                    var e;
                    return null != (e = sessionStorage.getItem(F)) ? e : ""
                }
                async isAbTest155Approved() {
                    const {splitId: e, title: t} = await this.getSplitInfo();
                    return "155" === e && "test_1" === t
                }
                setCurrentAddress(e, t) {
                    this._currentAddress = `${"courier" === e ? "CRR" : ""}${t}`
                }
                saveLastViewedNm(e) {
                    sessionStorage.putObject("LAST_VIEWED_NM", e)
                }
                getLastViewedNm() {
                    return sessionStorage.getObject("LAST_VIEWED_NM")
                }
                updateAnalyticsSource(e) {
                    this.updateState({
                        source: e
                    })
                }
                sendTrackingPixel(e) {
                    document.createElement("img").src = e
                }
                isSearchTerms(e) {
                    return this.tailObjectModule.isSearchTail(e)
                }
                isAutoTerms(e) {
                    return this.tailObjectModule.isAutoTail(e)
                }
                getLocationFromEntrypoint(e) {
                    let t = "";
                    switch (e) {
                    case "SpaHomeEntrypoint":
                        t = "Main";
                        break;
                    case "SpaCatalogEntrypoint":
                    case "SpaSearchEntrypoint":
                        t = "Catalog";
                        break;
                    case "SpaBrandsEntrypoint":
                        t = "Brand";
                        break;
                    case "SpaSellerCatalogEntrypoint":
                        t = "Supplier";
                        break;
                    case "SpaPersonalCabinetEntrypoint":
                        t = "LK";
                        break;
                    case "SpaActiveOrdersEntrypoint":
                        t = "Delivery";
                        break;
                    case "SpaArchivePositionsEntrypoint":
                        t = "Purchases";
                        break;
                    case "SpaFavoritesEntrypoint":
                        t = "Favorites";
                        break;
                    case "SpaBasketEntrypoint":
                        t = "Cart";
                        break;
                    case "SpaPromotionsEntrypoint":
                        t = "Promotions";
                        break;
                    case "SpaPromotionCatalogEntrypoint":
                    case "Apple2024Entrypoint":
                        t = "SalePage"
                    }
                    return t
                }
                getTypeInfoFromEntrypoint(e) {
                    var t, r, n, s, i, a;
                    const o = this.getTailObjectData();
                    let l = "";
                    switch (e) {
                    case "SpaCatalogEntrypoint":
                        l = null != (t = null == o ? void 0 : o.id_category) ? t : "";
                        break;
                    case "SpaSearchEntrypoint":
                        l = null != (r = null == o ? void 0 : o.search_text) ? r : "";
                        break;
                    case "SpaBrandsEntrypoint":
                        l = null != (n = null == o ? void 0 : o.brand) ? n : "";
                        break;
                    case "SpaPromotionCatalogEntrypoint":
                        l = (null == o ? void 0 : o.bid) ? null == (s = null == o ? void 0 : o.bid) ? void 0 : s.toString() : "";
                        break;
                    case "SpaSellerCatalogEntrypoint":
                        l = null != (i = null == o ? void 0 : o.page_info) ? i : "";
                        break;
                    case "Apple2024Entrypoint":
                        l = (null == o ? void 0 : o.bid) ? null == (a = null == o ? void 0 : o.bid) ? void 0 : a.toString() : ""
                    }
                    return l
                }
                defineDeliveryMethod(e, t) {
                    return WbSpaModel.prototype.$services.storeService.storesMap.isDbs(t) ? "CRR_Seller" : n.fR.includes(e) ? "CRR" : n._S.includes(e) ? "CRR_lift" : "PUP"
                }
            }
            wb.namespace("analitics", ( () => {
                const e = new V;
                return e.init(),
                e
            }
            )())
        },
        27473: function(e, t) {
            "use strict";
            const r = {
                DBS_CODES_API_URL: "https://dbs-codes.wildberries.ru",
                NNSZ_API_URL: "https://wbxoofex.wildberries.ru",
                USERGRADE_API_URL: "https://user-grade.wildberries.ru/api",
                STIMULUS_API_URL: "https://napi.wildberries.ru/api/basket/stimulus",
                ALL_PICKUPS_NAME: "all-poo-fr-v9.json",
                ALL_PICKUPS_HASH_NAME: "all-poo-v9.json.hash",
                PROXY_HTTPS: "http://webappx-proxy.wbx-site-utility.k8s.stage-xc/https/",
                CARDS_LIST: "https://card.wb.ru/cards/v2/list",
                CARDS_DETAIL: "https://card.wb.ru/cards/v2/detail",
                CARDS_SLIST: "https://card.wb.ru/smerger/v1/slist",
                CATALOG_URL: "https://catalog.wb.ru/",
                SEARCH_URL: "https://search.wb.ru/",
                RECOM_URL: "https://recom.wb.ru/",
                USER_GEO_DATA_URL: "https://user-geo-data.wildberries.ru/",
                CART_STORAGE_URL: "https://cart-storage-api.wildberries.ru/api/basket",
                CHAT_SELLERS_URL: "https://chat.wildberries.ru/api/sellers-chat-1/",
                FAVS_STORAGE_URL: "https://favs-storage-api.wildberries.ru/api/favs",
                INSTALLMENTS_AGGREGATOR_URL: "https://installments-aggregator-bt.wildberries.ru/installments-aggregator",
                CUSTOMER_SUBSCRIPTIONS_URL: "https://customer-subscriptions-gateway.wildberries.ru",
                HIGHLIGHT_URL: "https://highlight.wildberries.ru",
                PIN_USER_URL: "https://pin.wb.ru/pin-user-api/api/v1/pin/w/card/",
                AUTH_URL: "https://wbx-auth.wildberries.",
                OAUTH_URL: "https://oauth.wildberries.ru",
                BASKET_RU_API_URL: "https://ru-basket-api.wildberries.ru",
                BASKET_API_URL: "https://basket-api.wildberries.",
                CHAT_RU_URL: "https://chat-prod.wildberries.ru",
                WBX_BELL_URL: "https://wbx-bell-v3.wildberries.ru",
                SHOPPER_BT_URL: "https://shopper-bt.wb.ru",
                FIN_PERSON_INSTALLMENT_URL: "https://fin-person-installment.wildberries.ru",
                CUSTOMS_URL: "https://customs.wb.ru",
                POINTS_USERS_URL: "https://points.wb.ru/points-users-api/api/",
                FEEDBACKS_URL: "https://feedbacks{0}.wb.ru",
                FEEDBACK_SERVICE_NEW_URL: "https://feedbacks3-api.wb.ru/api/user/feedback/",
                FEEDBACK_SERVICE_RESALE_NEW_URL: "https://feedback-c2c-fbapi.wildberries.ru/api/user/feedback/",
                QUESTIONS_URL: "https://questions.wildberries.ru/api/v1",
                BASE_BADREASONS_URL: "https://reviews-reasons.wb.ru/reviews-reasons",
                BPL_URL: "https://bnpl-gateway.wildberries.ru",
                DELIVERY_CODE_URL: "https://delivery-code.wildberries.ru/delivery-code/api/v1",
                GIFTCARDS_URL: "https://giftcards.wildberries.ru",
                CRYPTO_URL: "https://dfa.wildberries.by",
                ASTRO_URL: "https://astro.wildberries.ru",
                SELLER_RECOM_URL: "https://rec-ins.wildberries.ru/api/v1/recommendations",
                GENERATIVE_FEEDBACKS_URL: "https://reviews-sum.wildberries.",
                TRAVEL_PROMO_URL: "https://travel.wildberries.ru/stream/api/avia-service/v1",
                TRACKER_URL: "https://wbx-status-tracker.wildberries.ru/api/v2",
                KING_PROXY_URL: "api.wildberries.ge",
                WALLET_AUTH_URL: "https://finance.wildberries.ru",
                C2C_URL: "https://resale-api.wildberries.ru",
                C2C_QUESTIONS_URL: "https://feedback-bt.wildberries.ru",
                WB_GEOCODING_URL: "https://wb-maps.wb.ru/geocoding/api",
                SEARCH_BY_IMAGE_URL: "https://search-by-photo.wb.ru",
                PATHFINDER_URL: "https://pathfinder-bt.wildberries.ru",
                JOURNAL_HOST: "https://journal-bt.wildberries.ru/journal",
                FEEDBACKS_C2C_URL: "https://feedback-c2c-view.wildberries.ru",
                QUESTIONS_C2C_URL: "https://question-c2c.wildberries.ru/api/v1",
                BANNERS_URL: "https://banners-website.wildberries.ru/public/v2/banners",
                SESSION_URL: "https://auth-gateway.wildberries.ru",
                WBX_API_GATEWAY: "https://wbx-api-gateway.wildberries.ru",
                DELIVERY_ASSIST_URL: "https://delivery-assist.wildberries.ru",
                WB_COURIER_TIME_SLOTS_URL: "https://delivery-assist.wildberries.ru/delivery-assist/api/v1/orders/courier/conditions",
                ENV: "release"
            };
            t.A = r
        },
        64852: function(e, t, r) {
            "use strict";
            r.d(t, {
                V: function() {
                    return n
                }
            });
            const n = () => Promise.all([r.e(63946), r.e(89362), r.e(81774), r.e(93148), r.e(31887), r.e(96042), r.e(48829), r.e(22342), r.e(25020), r.e(43685), r.e(20395), r.e(13808), r.e(35746), r.e(28288), r.e(60486), r.e(76904), r.e(90568), r.e(69203), r.e(64210)]).then(r.bind(r, 40560))
        },
        82746: function(e, t, r) {
            "use strict";
            r.d(t, {
                M: function() {
                    return a
                },
                z: function() {
                    return i
                }
            });
            var n = r(90568);
            const s = "adultHelper"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        47363: function(e, t, r) {
            "use strict";
            r.d(t, {
                B: function() {
                    return a
                },
                C: function() {
                    return i
                }
            });
            var n = r(90568);
            const s = "apiSupport"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        55757: function(e, t, r) {
            "use strict";
            r.d(t, {
                M: function() {
                    return i
                },
                Z: function() {
                    return a
                }
            });
            var n = r(90568);
            const s = "businessHelpers"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        59054: function(e, t, r) {
            "use strict";
            r.d(t, {
                J: function() {
                    return i
                },
                O: function() {
                    return a
                }
            });
            var n = r(90568);
            const s = "eventBus"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        81499: function(e, t, r) {
            "use strict";
            r.d(t, {
                d: function() {
                    return i
                },
                v: function() {
                    return a
                }
            });
            var n = r(90568);
            const s = "utilsHelpers"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        17746: function(e, t, r) {
            "use strict";
            r.d(t, {
                V: function() {
                    return i
                },
                w: function() {
                    return a
                }
            });
            var n = r(90568);
            const s = "loadingErrorHelper"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        2363: function(e, t, r) {
            "use strict";
            r.d(t, {
                n: function() {
                    return a
                },
                s: function() {
                    return i
                }
            });
            var n = r(90568);
            const s = "moduleLoader"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        22882: function(e, t, r) {
            "use strict";
            r.d(t, {
                G: function() {
                    return a
                },
                Z: function() {
                    return i
                }
            });
            var n = r(90568);
            const s = "observerHelper"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        31413: function(e, t, r) {
            "use strict";
            r.d(t, {
                Y: function() {
                    return a
                },
                w: function() {
                    return i
                }
            });
            var n = r(90568);
            const s = "productCardPopupHelper"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        91341: function(e, t, r) {
            "use strict";
            r.d(t, {
                c: function() {
                    return i
                },
                r: function() {
                    return a
                }
            });
            var n = r(90568);
            const s = "router"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        52988: function(e, t, r) {
            "use strict";
            r.d(t, {
                M: function() {
                    return a
                },
                V: function() {
                    return i
                }
            });
            var n = r(90568);
            const s = "routerHelpers"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        18091: function(e, t, r) {
            "use strict";
            r.d(t, {
                D: function() {
                    return a
                },
                s: function() {
                    return i
                }
            });
            var n = r(90568);
            const s = "seoHelper"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        7518: function(e, t, r) {
            "use strict";
            r.d(t, {
                D: function() {
                    return i
                },
                e: function() {
                    return a
                }
            });
            var n = r(90568);
            const s = "serviceLoader"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        85556: function(e, t, r) {
            "use strict";
            r.d(t, {
                DQ: function() {
                    return o
                },
                Z1: function() {
                    return i
                },
                cQ: function() {
                    return l
                },
                u: function() {
                    return a
                }
            });
            var n = r(90568);
            const s = "spaServices"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
              , o = (e, t) => {
                (0,
                n.getSaveInstance)(s)[e] = t
            }
              , l = e => {
                const t = (0,
                n.getSaveInstance)(s);
                if (!t[e])
                    throw new Error(`Can't fine service ${e}`);
                return t[e]
            }
        },
        31332: function(e, t, r) {
            "use strict";
            r.d(t, {
                U: function() {
                    return a
                },
                x: function() {
                    return i
                }
            });
            var n = r(90568);
            const s = "userEnv"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        89687: function(e, t, r) {
            "use strict";
            r.d(t, {
                f: function() {
                    return a
                },
                u: function() {
                    return i
                }
            });
            var n = r(90568);
            const s = "userHelper"
              , i = () => (0,
            n.getSaveInstance)(s)
              , a = e => {
                (0,
                n.setInstance)(s, e)
            }
        },
        31753: function(e, t, r) {
            "use strict";
            r.d(t, {
                Cv: function() {
                    return o
                },
                Fq: function() {
                    return n
                },
                LR: function() {
                    return a
                },
                Rg: function() {
                    return i
                },
                tR: function() {
                    return s
                }
            });
            const n = Object.freeze({
                prepearing: 0,
                readyToInstall: 1,
                installed: 2,
                destroyed: 3
            })
              , s = Object.freeze(["vmeste.wildberries.ru", "vmeste-stage.wildberries.ru", "digital.wildberries.ru", "vsemrabota.ru", "guru.wildberries.ru", "guru-stage.wildberries.ru", "travel.wildberries.ru", "digital.wb.ru", "seller.wildberries.ru", "career.wb.ru"])
              , i = "preview_General"
              , a = Object.freeze([{
                containerId: 0,
                viewModel: null
            }, {
                containerId: 1,
                viewModel: null
            }, {
                containerId: 2,
                viewModel: null
            }])
              , o = "error404"
        },
        88294: function(e, t, r) {
            "use strict";
            r.d(t, {
                A: function() {
                    return p
                }
            });
            var n = r(55757)
              , s = Object.defineProperty
              , i = (e, t, r) => ( (e, t, r) => t in e ? s(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class a {
                constructor(e, t) {
                    i(this, "state"),
                    i(this, "previous"),
                    i(this, "next"),
                    this.state = e,
                    this.previous = t,
                    this.next = null
                }
                updateNext(e) {
                    this.next = e
                }
                updatePrevious(e) {
                    this.previous = e
                }
                update(e) {
                    this.state = e
                }
            }
            var o = Object.defineProperty
              , l = (e, t, r) => ( (e, t, r) => t in e ? o(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class c {
                constructor() {
                    l(this, "head"),
                    l(this, "current"),
                    this.head = null,
                    this.current = null
                }
                push(e) {
                    const t = new a(e,this.current);
                    null == this.head || null == this.current ? this.head = t : this.current.updateNext(t),
                    this.current = t
                }
                tryUpdateCurrrent(e) {
                    return null != this.current && (this.current.update(e),
                    !0)
                }
                findCurrent(e) {
                    const {id: t} = e;
                    let r = this.head;
                    for (; r; ) {
                        if (r.state.id == t) {
                            this.current = r;
                            break
                        }
                        r = r.next
                    }
                }
                tryRevokeFromCache(e) {
                    const t = e.reduce(( (e, t) => (e.set(t.state, new a(t.state,null)),
                    e)), new Map);
                    e.forEach((e => {
                        const r = t.get(e.state);
                        if (e.next) {
                            const n = t.find((t => t.state.id == e.next));
                            null == r || r.updateNext(n)
                        }
                        if (e.previous) {
                            const n = t.find((t => t.state.id == e.previous));
                            null == r || r.updatePrevious(n)
                        }
                    }
                    ));
                    const r = t.find((e => null == e.previous));
                    return !!r && (this.head = r,
                    !0)
                }
                toJSON() {
                    var e, t;
                    let r = this.head;
                    const n = [];
                    for (; r; )
                        n.push({
                            state: r.state,
                            next: null == (e = r.next) ? void 0 : e.state.id,
                            previous: null == (t = r.previous) ? void 0 : t.state.id
                        }),
                        r = r.next;
                    return n
                }
                canMove(e) {
                    let t = this.current
                      , r = e > 0 ? -1 : 1
                      , n = e > 0 ? "next" : "previous"
                      , s = e;
                    for (; 0 != s; ) {
                        if (null == t)
                            return;
                        t = t[n],
                        s += r
                    }
                    return !0
                }
            }
            var u = Object.defineProperty
              , d = (e, t, r) => ( (e, t, r) => t in e ? u(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const h = "spa_history";
            var p = class {
                constructor() {
                    d(this, "history"),
                    this.history = new c
                }
                addItem(e) {
                    this.history.push(e),
                    this._updateCache()
                }
                tryInitFromCache(e) {
                    const t = sessionStorage.getObject(h);
                    return t && e && this.history.tryRevokeFromCache(t) && this.history.findCurrent(e),
                    this
                }
                updateCurrent(e) {
                    this.history.findCurrent(e)
                }
                updateCurrentItem(e) {
                    this.history.tryUpdateCurrrent(e) || this.history.push(e),
                    this._updateCache()
                }
                canMove(e) {
                    return this.history.canMove(e)
                }
                _updateCache() {
                    sessionStorage.putObject(h, this.history)
                }
                static generateId() {
                    return (0,
                    n.M)().generateGuid()
                }
            }
        },
        29595: function(e, t, r) {
            "use strict";
            r.d(t, {
                A: function() {
                    return xt
                }
            });
            var n = r(91341)
              , s = r(85556)
              , i = r(89687);
            var a = class {
                async onActionExecuting() {
                    const e = (0,
                    s.Z1)()
                      , t = (0,
                    i.u)().getUid();
                    e.userData.setKey("0" !== t, t),
                    await e.userData.getUserDataAsync()
                }
            }
            ;
            var o = class {
                async onBeforeActionExecuting(e) {
                    var t;
                    const r = (0,
                    i.u)()
                      , n = await r.getLocationData();
                    e.searchParams.set("country", null != (t = n.locale) ? t : "")
                }
            }
              , l = Object.defineProperty
              , c = (e, t, r) => ( (e, t, r) => t in e ? l(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var u = class {
                constructor(e) {
                    c(this, "checkFunction"),
                    this.checkFunction = null != e ? e : () => !0
                }
                onBeforeActionExecuting(e, t, r) {
                    r.cancelRequest = this.checkFunction()
                }
            }
            ;
            var d = class {
                onBeforeActionExecuting(e, t, r) {
                    const s = (0,
                    n.c)();
                    t.body || (t.body = new URLSearchParams),
                    t.body.set("changeEmail", "SpaChangeEmailEntrypoint" == s.targetRoute)
                }
            }
              , h = r(74929)
              , p = r(2363)
              , m = r(7518)
              , b = r(81499)
              , g = Object.defineProperty
              , y = (e, t, r) => ( (e, t, r) => t in e ? g(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var f = class {
                constructor() {
                    y(this, "bplOffers"),
                    y(this, "customsDutySigned"),
                    y(this, "getBalanceTask"),
                    y(this, "isBuyItNowMode"),
                    y(this, "pdlInstOptions"),
                    y(this, "userBalanceSigned"),
                    y(this, "userBrokerInstConfig"),
                    y(this, "userBrokerInstStatus"),
                    y(this, "userGradeSigned"),
                    y(this, "promoDeliveryPoint"),
                    y(this, "promoBasketTitle"),
                    y(this, "queryParams")
                }
                async onBeforeActionExecuting(e, t, r) {
                    var n, a, o, l, c, u;
                    const d = (0,
                    s.Z1)()
                      , g = (0,
                    h.c)()
                      , y = (0,
                    i.u)()
                      , f = (0,
                    p.s)()
                      , v = (0,
                    m.D)()
                      , w = (0,
                    b.d)();
                    d.favsService.syncFromServerAsync();
                    const _ = d.cartService
                      , S = g.isAuth;
                    this.queryParams = Object.fromEntries(e.searchParams),
                    this.isBuyItNowMode = this.queryParams.includeInOrderStr || this.queryParams.sellerId || this.queryParams.promoId,
                    this.getBalanceTask = S ? y.getBalance({
                        timeout: 1e3
                    }).catch((e => Promise.resolve())) : Promise.resolve();
                    const C = this.queryParams.promoId ? d.aidService.getAidData(this.queryParams.promoId) : Promise.resolve(null)
                      , [I] = await Promise.all([y.getCurrencyAsync(), _.sync({
                        timeout: 3e3,
                        syncPromo: this.queryParams.promoId
                    }).catch((e => {
                        wb.spa.logError(e, {
                            customMsg: "BasketDataPipeline sync"
                        }, !0)
                    }
                    )), f.loadServiceAsync("installmentAggregatorService")])
                      , k = _.publicBasketApiUrl
                      , P = new URL(k,window.location.origin);
                    e.port = P.port,
                    e.pathname = (P.pathname + e.pathname).replace("//", ""),
                    e.host = P.host,
                    t.credentials = "include",
                    t.body || (t.body = new URLSearchParams);
                    const [M,T,E,D,A,O,B,L] = await Promise.all([y.getXinfoSignedV1(), this.getBalanceTask, y.getUserGrade(I), d.installmentAggregatorService.getAvailableInstallment(), y.getBrokerInstallmentStatus(), y.getBrokerInstallmentConfig(), y.getCustomsDuty(I), C]);
                    if (this.userBalanceSigned = T,
                    this.userGradeSigned = E,
                    this.pdlInstOptions = null,
                    "pdl" === (null == D ? void 0 : D.type))
                        this.pdlInstOptions = await d.installmentAggregatorService.getLimit("pdl");
                    else if ("cwb" === (null == D ? void 0 : D.type)) {
                        const [e,t] = await Promise.all([y.getBrokerInstallmentStatus(), y.getBrokerInstallmentConfig()]);
                        this.userBrokerInstStatus = e,
                        this.userBrokerInstConfig = t
                    }
                    let $;
                    this.customsDutySigned = B,
                    d.userAddressService.getByCoordinates(M.latitude, M.longitude, M.address);
                    let x = M.addressDataSign
                      , R = M.address;
                    if (S) {
                        const e = await v.getServiceOf("groupedDeliveriesService").then((e => e.getPurchaseInfo()));
                        $ = null == e ? void 0 : e.unpaid
                    }
                    let F = _.getItems(this.queryParams);
                    "aid" === (this.queryParams.promoId ? "aid" : "main") && ((null == L ? void 0 : L.isActive) ? (this.promoDeliveryPoint = {
                        country: L.pickupOffice.country,
                        address: L.pickupOffice.address,
                        addressId: L.pickupOffice.id.toString(),
                        officeId: L.pickupOffice.id,
                        dest: L.pickupOffice.dest,
                        sign: L.pickupOffice.sign,
                        lat: L.pickupOffice.lat.toString(),
                        lon: L.pickupOffice.lon.toString()
                    },
                    this.promoBasketTitle = L.basketTitle,
                    x = d.userAddressService.getAddressSignData(this.promoDeliveryPoint),
                    R = "aid") : F = []),
                    0 === F.length && (r.cancelRequest = () => !0);
                    const j = (null == (n = this.userBrokerInstConfig) ? void 0 : n.productPlans) && this.userBrokerInstStatus && "completed" === this.userBrokerInstStatus.status ? Math.floor(this.userBrokerInstStatus.availableSum / 100) : 0;
                    t.body = w.objectSerializer({
                        items: F,
                        currency: I,
                        xInfo: M.xinfo,
                        cityLatitude: (null == (a = this.promoDeliveryPoint) ? void 0 : a.lat) || M.latitude,
                        cityLongitude: (null == (o = this.promoDeliveryPoint) ? void 0 : o.lon) || M.longitude,
                        address: R,
                        userBalanceSigned: this.userBalanceSigned,
                        unpaidAmount: $,
                        userDataSigned: M.userDataSign,
                        addressDataSign: x,
                        userGradeSigned: E,
                        customsDutySigned: B,
                        iwcNetLimit: (null == (c = null == (l = this.pdlInstOptions) ? void 0 : l.productTypes) ? void 0 : c.length) ? this.pdlInstOptions.limit : -1,
                        cwbLimit: j,
                        bplOffers: this.bplOffers,
                        instType: null == D ? void 0 : D.type,
                        b2bSellerId: wb.settings.b2bMode ? null == (u = wb.settings.selectedCompany) ? void 0 : u.id : null,
                        isBuyItNowMode: !!this.isBuyItNowMode,
                        includeInOrderStr: F.filter((e => e.includeInOrder)).map((e => e.characteristicId)).join(";") || "1",
                        currentLocale: wb.settings.currentLocale
                    }, t.body, !0, !0)
                }
                async onActionExecuted(e) {
                    var t, r;
                    const n = (0,
                    s.Z1)();
                    e.responseData || (e.responseData = {}),
                    e.responseData.isNetworkError ? await (null == (t = n.cartService.localBasket) ? void 0 : t.enrichProductsIfNeedAsync()) : (null == (r = e.responseData.data) ? void 0 : r.basket) && (n.cartService.enrichItemsLocalInfo(this.queryParams, e.responseData.data.basket.basketItems),
                    this.isBuyItNowMode || n.cartService.save(e.responseData.data.basket)),
                    e.responseData.userBalanceSigned = this.userBalanceSigned,
                    e.responseData.pdlInstOptions = this.pdlInstOptions,
                    e.responseData.userGradeSigned = this.userGradeSigned,
                    e.responseData.customsDutySigned = this.customsDutySigned,
                    e.responseData.promoDeliveryPoint = this.promoDeliveryPoint,
                    e.responseData.promoBasketTitle = this.promoBasketTitle
                }
            }
              , v = r(51799);
            var w = class {
                async onBeforeActionExecuting(e) {
                    const t = (0,
                    s.Z1)()
                      , r = (0,
                    n.c)()
                      , a = (0,
                    p.s)()
                      , o = (0,
                    i.u)();
                    try {
                        const n = (0,
                        v.a)();
                        if (!!e.searchParams.get("bc")) {
                            const s = e.searchParams.get("status") || ""
                              , i = e.searchParams.get("failReason") || ""
                              , l = new URL(location.href);
                            if (l.searchParams.delete("bc"),
                            window.history.replaceState({}, document.title, l.href),
                            "failed" === s) {
                                const e = new URLSearchParams({
                                    status: s,
                                    failReason: i
                                });
                                return void r.moveTo(`/lk/payment/fail?${e}`)
                            }
                            t.cartService.getBankCards(2e3, o.getCurrency(), !0),
                            a.execModule("bottomNotificationPanel", "showNotification", [0, wb.i18n.t("basket.cardIsSuccessfullyLinked")]),
                            wb.settings.cardBindSuccess = !0,
                            n.sendEvent("Checkout_PayMethod_AddCard_Ok", {
                                name: "not_defined"
                            })
                        } else
                            wb.settings.cardBindSuccess = !1
                    } catch (e) {}
                }
            }
              , _ = Object.defineProperty
              , S = (e, t, r) => ( (e, t, r) => t in e ? _(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var C = class {
                constructor() {
                    S(this, "data")
                }
                async onActionExecuting(e, t, r) {
                    var i;
                    const a = (0,
                    n.c)()
                      , o = (0,
                    m.D)()
                      , l = (0,
                    s.Z1)();
                    await o.getService("clientActionsHelper"),
                    l.clientActionsHelper.beforeAddAction();
                    const c = parseInt(a.routeParameters.cod1S)
                      , u = (null == (i = a.queryParams) ? void 0 : i.has("size")) && parseInt(a.queryParams.get("size") || "") || null
                      , d = await l.productCard.loadProductCardAsync(c, u);
                    if (null === d)
                        return r.redirected = !0,
                        a.moveTo404Async();
                    this.data = d,
                    l.clientActionsHelper.addAction({
                        nm: c,
                        name: d.selectedNomenclature.goodsName
                    })
                }
                async onActionExecuted(e) {
                    e.responseData ? Object.assign(e.responseData, this.data) : e.responseData = this.data
                }
            }
              , I = Object.defineProperty
              , k = Object.defineProperties
              , P = Object.getOwnPropertyDescriptors
              , M = Object.getOwnPropertySymbols
              , T = Object.prototype.hasOwnProperty
              , E = Object.prototype.propertyIsEnumerable
              , D = (e, t, r) => t in e ? I(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r;
            var A = class {
                constructor() {
                    var e, t;
                    D(this, "symbol" != typeof (e = "data") ? e + "" : e, t),
                    this.data = null
                }
                get $services() {
                    return (0,
                    s.Z1)()
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                onBeforeActionExecuting() {
                    this.data = null
                }
                async onActionExecuting(e, t, r) {
                    var n;
                    const s = await this.$services.favsService.getWlArrivedCatalogModelAsync();
                    if (0 == (null != (n = null == s ? void 0 : s.goods) ? n : []).length)
                        return r.redirected = !0,
                        this.$router.moveTo404Async();
                    this.data = s
                }
                onActionExecuted(e) {
                    var t;
                    if (null == this.data)
                        return;
                    const r = this._adaptGoods(null != (t = this.data.goods) ? t : []);
                    e.responseData = {
                        goods: r,
                        goodsCount: r.length
                    }
                }
                _adaptGoods(e) {
                    return e.map((e => {
                        var t, r, n;
                        return r = ( (e, t) => {
                            for (var r in t || (t = {}))
                                T.call(t, r) && D(e, r, t[r]);
                            if (M)
                                for (var r of M(t))
                                    E.call(t, r) && D(e, r, t[r]);
                            return e
                        }
                        )({}, e),
                        n = {
                            pics: 1,
                            brand: e.brandName,
                            name: e.goodsName,
                            canQuickOrder: !e.digitalGood,
                            sale: Math.max(e.sale, null != (t = null == e ? void 0 : e.personalSale) ? t : 0)
                        },
                        k(r, P(n))
                    }
                    ))
                }
            }
              , O = Object.defineProperty
              , B = (e, t, r) => ( (e, t, r) => t in e ? O(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var L = class {
                constructor() {
                    B(this, "data"),
                    this.data = {
                        isEmptyCache: !0
                    }
                }
                async onActionExecuting(e) {
                    const t = (0,
                    s.Z1)();
                    this.data = await t.favsService.getFavsDataAsync(e.searchParams.toString(), !0)
                }
                onActionExecuted(e) {
                    null != this.data && (e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, this.data))
                }
            }
              , x = r(14108)
              , R = r(39889);
            var F = class {
                async getSeoTags(e) {
                    e = e.replace("/catalogdata/", "/catalog/");
                    const t = `seo-catalog-tags-by-url-${wb.settings.currentLocale}-${e}.json`
                      , r = await WbSpaModel.prototype.$httpClient.fetchStatic(t, {
                        timeout: 3e3
                    });
                    return (null == r ? void 0 : r.link) && (r.link = r.link.replace("/catalog/", "/catalogdata/")),
                    r
                }
            }
              , j = r(55757)
              , N = Object.defineProperty
              , U = Object.getOwnPropertySymbols
              , W = Object.prototype.hasOwnProperty
              , H = Object.prototype.propertyIsEnumerable
              , q = (e, t, r) => ( (e, t, r) => t in e ? N(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var V = class {
                constructor() {
                    q(this, "cancelled"),
                    q(this, "catalogMenu"),
                    q(this, "currentMenuItem"),
                    q(this, "initialized"),
                    q(this, "modules"),
                    q(this, "products"),
                    q(this, "searchSeoTag"),
                    q(this, "seoTagsService"),
                    q(this, "sort"),
                    q(this, "xData"),
                    q(this, "xInfo"),
                    q(this, "isSnippetHasSizes"),
                    this.initialized = !1,
                    this.cancelled = !1,
                    this.catalogMenu = null,
                    this.currentMenuItem = null,
                    this.modules = {}
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                get $moduleLoader() {
                    return (0,
                    p.s)()
                }
                get $services() {
                    return (0,
                    s.Z1)()
                }
                async onBeforeActionExecuting(e, t, r) {
                    var n, s;
                    const i = (0,
                    j.M)();
                    this.xData = this.xInfo = this.products = this.sort = null,
                    this.cancelled = !1,
                    this.searchSeoTag = !1,
                    this.initialized || await this._initAsync();
                    const a = new URL(e);
                    if (a.pathname = a.pathname.replace("/webapi", ""),
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(a),
                    (null == (n = this.currentMenuItem) ? void 0 : n.landing) || (null == (s = this.currentMenuItem) ? void 0 : s.isDenyLink))
                        return void (this.cancelled = !0);
                    this.currentMenuItem ? this.currentMenuItem.seoTagInfo = null : this.currentMenuItem = await this._tryGetMenuItemFromTags(a);
                    const [o,l] = await Promise.all([this._getXDataAsync(), i.getCurrentXInfoWithClustersAndVectorsAsync()]);
                    this.xData = o,
                    this.xInfo = l,
                    r.cancelRequest = null != this.xData,
                    r.cancelRequest || (t.body = this.xInfo)
                }
                async _tryGetMenuItemFromTags(e) {
                    var t;
                    const r = e.pathname
                      , n = await (null == (t = this.seoTagsService) ? void 0 : t.getSeoTags(r));
                    if (!n)
                        return null;
                    this.searchSeoTag = !!n.searchQuery,
                    e.pathname = n.link;
                    const s = this.searchSeoTag ? this.catalogMenu.getCurrentMenuItem(e) : this._selectedMenuItemFinder(e);
                    return s ? (this.searchSeoTag || (n.xQuery = 0 === s.query.indexOf("preset") ? `${s.query}&${n.parameters}` : n.parameters),
                    s.seoTagInfo = n,
                    s) : null
                }
                _selectedMenuItemFinder(e) {
                    let t, r = null;
                    for (; 0 !== (t = e.pathname.lastIndexOf("/")) && null == r; )
                        r = this.catalogMenu.getCurrentMenuItem(e),
                        e.pathname = e.pathname.substring(0, t);
                    return r
                }
                async onActionExecuting() {
                    var e;
                    const t = (0,
                    v.a)();
                    if (this.xData && this.xInfo && !this.cancelled) {
                        let r = this.modules.QueryHelper.getInitialParams()
                          , {sort: n=this.modules.SorterModel.getSortFromCache, page: s=1} = r
                          , i = ( (e, t) => {
                            var r = {};
                            for (var n in e)
                                W.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                            if (null != e && U)
                                for (var n of U(e))
                                    t.indexOf(n) < 0 && H.call(e, n) && (r[n] = e[n]);
                            return r
                        }
                        )(r, ["sort", "page"]);
                        n !== this.modules.SorterModel.getSortFromCache && R.A.updateCatalogOptions("sort", n);
                        const a = new this.modules.QueryHelper({
                            sort: n,
                            page: s,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(i)
                        }).getQueryStringForCatalog()
                          , o = wb.global.settings.switches.enableInfiniteScroll || t.checkDataInSplitterServiceV2("common", "ab_enableAutoNextPage", "yes")
                          , l = new URLSearchParams(a);
                        l.delete("page");
                        const c = this.modules.CatalogProvider.createGoodsProvider(this.xData)
                          , {goods: u=[], resp: d} = await this._loadGoodsAsync(c, o ? l : a);
                        this.products = u,
                        this.sort = n,
                        this.isSnippetHasSizes = "sizes" === (null == (e = this.currentMenuItem) ? void 0 : e.snippet),
                        this.searchSeoTag && (this.xData = this._updateXDataIfSearchTag(this.xData, d))
                    }
                }
                _updateXDataIfSearchTag(e, t) {
                    var r;
                    const n = (null == t ? void 0 : t.metadata) ? null == t ? void 0 : t.metadata : t;
                    return (null == n ? void 0 : n.name) || (e.gender = null),
                    (null == n ? void 0 : n.name) && e.search !== (null == n ? void 0 : n.name) && (e.search = n.name),
                    (null == n ? void 0 : n.catalog_value) && (e.xcatalogQuery = n.catalog_value),
                    (null == n ? void 0 : n.catalog_type) && (e.xcatalogShard = n.catalog_type),
                    (null == n ? void 0 : n.context) && (e.xcatalogContext = n.context),
                    e.originalSearch = null != (r = null == n ? void 0 : n.original) ? r : null,
                    e
                }
                async _loadGoodsAsync(e, t) {
                    try {
                        const {goods: r=[], resp: n} = await e.loadGoodsAsync(t);
                        return {
                            goods: r,
                            resp: n
                        }
                    } catch (e) {
                        return {
                            goods: [],
                            resp: null
                        }
                    }
                }
                onActionExecuted(e) {
                    var t, r, n, s, i, a, o, l, c, u;
                    if (null == this.xData || this.cancelled)
                        return;
                    e.responseData || (e.responseData = {});
                    const d = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , h = {
                        xData: this.xData,
                        menuId: null == (t = this.currentMenuItem) ? void 0 : t.id,
                        currentMenuItem: this.currentMenuItem,
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        hasSelectedChild: !!(null == (r = this.currentMenuItem) ? void 0 : r.childs),
                        sitePathItems: d,
                        emptyCatalogLink: null == (n = this.currentMenuItem) ? void 0 : n.url,
                        tagsUrl: null == (s = this.currentMenuItem) ? void 0 : s.url,
                        products: this.products,
                        targetUrl: "GP",
                        title: null != (o = null == (i = this.currentMenuItem) ? void 0 : i.seo) ? o : null == (a = this.currentMenuItem) ? void 0 : a.name,
                        containerClass: "catalog-page",
                        isAdultProtection: !wb.adult.isConfirmed,
                        sorterModel: new this.modules.SorterModel(this.sort,null == (l = this.currentMenuItem) ? void 0 : l.url),
                        isSnippetHasSizes: this.isSnippetHasSizes
                    };
                    (null == (c = this.currentMenuItem) ? void 0 : c.seoTagInfo) && this._updateModelIfSeoTagUrl(h, null == (u = this.currentMenuItem) ? void 0 : u.seoTagInfo);
                    const p = {
                        mainVersion: 0,
                        type: x.A.goods,
                        model: h
                    };
                    Object.assign(e.responseData, {
                        data: p
                    })
                }
                async _updateModelIfSeoTagUrl(e, t) {
                    var r;
                    (t.seo || t.name) && (e.title = null != (r = t.seo) ? r : t.name),
                    e.tagsUrl = t.url
                }
                async _initAsync() {
                    const [e,t,r,n,s] = await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"), this.$moduleLoader.loadModuleAsync("queryHelper"), this.$moduleLoader.loadModuleAsync("xCatalogProvider"), this.$moduleLoader.loadModuleAsync("sorterModel"), wb.spa.getCatalogMenu()]);
                    this.modules = {
                        XCatalogData: e.XCatalogData,
                        XSearchCatalogData: e.XSeachData,
                        QueryHelper: t,
                        CatalogProvider: r,
                        SorterModel: n.CatalogSorterModel
                    },
                    this.catalogMenu = s,
                    this.seoTagsService = new F
                }
                async _getXDataAsync() {
                    var e;
                    const t = null == (e = this.currentMenuItem) ? void 0 : e.seoTagInfo;
                    if (this.searchSeoTag && t)
                        return new this.modules.XSearchCatalogData(t.searchQuery,t.searchQuery);
                    const r = this.currentMenuItem && ((null == t ? void 0 : t.xQuery) || this.currentMenuItem.query);
                    return this.currentMenuItem && this.currentMenuItem.shard ? new this.modules.XCatalogData(r,this.currentMenuItem.shard) : null
                }
            }
              , z = Object.defineProperty
              , G = (e, t, r) => ( (e, t, r) => t in e ? z(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var K = class {
                constructor() {
                    G(this, "cancelled"),
                    G(this, "catalogMenu"),
                    G(this, "currentMenuItem"),
                    G(this, "initialized"),
                    G(this, "requestCancelled"),
                    this.initialized = !1,
                    this.requestCancelled = !1,
                    this.cancelled = !1,
                    this.catalogMenu = null,
                    this.currentMenuItem = null
                }
                get $services() {
                    return (0,
                    s.Z1)()
                }
                get $moduleLoader() {
                    return (0,
                    p.s)()
                }
                get $isDesktop() {
                    return "d" === wb.settings.displayMode
                }
                async onBeforeActionExecuting(e, t, r) {
                    var n;
                    this.requestCancelled = this.cancelled = !1,
                    await this._initAsync();
                    const s = new URL(e);
                    s.pathname = s.pathname.replace("/webapi", ""),
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(s),
                    (null == (n = this.currentMenuItem) ? void 0 : n.isDenyLink) ? r.cancelRequest = this.requestCancelled = null != this.currentMenuItem : this.cancelled = !0
                }
                async onActionExecuted(e) {
                    var t, r, n, s, i;
                    if (this.cancelled)
                        return;
                    e.responseData || (e.responseData = {});
                    const a = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , o = {
                        mainVersion: 0,
                        type: x.A.categoryDenyLink,
                        model: {
                            menuId: null == (t = this.currentMenuItem) ? void 0 : t.id,
                            currentMenuItem: this.currentMenuItem,
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            children: null == (r = this.currentMenuItem) ? void 0 : r.childs,
                            sitePathItems: a,
                            title: null != (i = null == (n = this.currentMenuItem) ? void 0 : n.seo) ? i : null == (s = this.currentMenuItem) ? void 0 : s.name,
                            isAdultProtection: !wb.adult.isConfirmed,
                            catalogMenu: this.catalogMenu,
                            catalogPromoLeftMenu: this.catalogMenu.getCatalogDenyMenu(this.currentMenuItem, a)
                        }
                    };
                    Object.assign(e.responseData, {
                        data: o
                    })
                }
                async _initAsync() {
                    this.catalogMenu = await wb.spa.getCatalogMenu(),
                    this.initialized = this.catalogMenu.isInited
                }
            }
              , Q = r(76904)
              , J = Object.defineProperty
              , Y = Object.getOwnPropertySymbols
              , X = Object.prototype.hasOwnProperty
              , Z = Object.prototype.propertyIsEnumerable
              , ee = (e, t, r) => ( (e, t, r) => t in e ? J(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var te = class {
                constructor() {
                    ee(this, "catalogMenu"),
                    ee(this, "emptySearch"),
                    ee(this, "emptySearchRecom"),
                    ee(this, "initialized"),
                    ee(this, "isEmpty"),
                    ee(this, "isNetworkError"),
                    ee(this, "modules"),
                    ee(this, "products"),
                    ee(this, "sort"),
                    ee(this, "targetUrl"),
                    ee(this, "xData"),
                    ee(this, "xInfo"),
                    ee(this, "isSnippetHasSizes")
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                get $moduleLoader() {
                    return (0,
                    p.s)()
                }
                get $getService() {
                    return (0,
                    m.D)().getService
                }
                get $services() {
                    return (0,
                    s.Z1)()
                }
                get $httpClient() {
                    return (0,
                    Q.getHttpClient)()
                }
                get $helper() {
                    return (0,
                    b.d)()
                }
                async onBeforeActionExecuting(e, t, r) {
                    r.cancelRequest = !0,
                    this.initialized || await this._initAsync(),
                    this.$services.clientActionsHelper.beforeAddAction()
                }
                async onActionExecuting(e, t, r) {
                    var n, s, i;
                    const a = (0,
                    j.M)()
                      , o = (0,
                    v.a)()
                      , l = this.modules.QueryHelper.getInitialParams();
                    this.catalogMenu = this.xData = this.products = this.targetUrl = this.isEmpty = null,
                    this.isNetworkError = !1;
                    let c = l
                      , {brand: u, page: d=1, sort: h="popular", cardsize: p, search: m, targeturl: b, nocorrection: g, ssubject: y} = c
                      , f = ( (e, t) => {
                        var r = {};
                        for (var n in e)
                            X.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                        if (null != e && Y)
                            for (var n of Y(e))
                                t.indexOf(n) < 0 && Z.call(e, n) && (r[n] = e[n]);
                        return r
                    }
                    )(c, ["brand", "page", "sort", "cardsize", "search", "targeturl", "nocorrection", "ssubject"]);
                    const w = new this.modules.QueryHelper({
                        sort: h,
                        page: d,
                        ssubject: y,
                        filters: this.modules.QueryHelper.checkOnlyFilterParams(f)
                    })
                      , _ = w.getQueryStringForCatalog()
                      , S = wb.global.settings.switches.enableInfiniteScroll || o.checkDataInSplitterServiceV2("common", "ab_enableAutoNextPage", "yes")
                      , C = new URLSearchParams(_);
                    C.delete("page");
                    const I = await this._getXDataAsync(l);
                    if (null == I.search || "" === I.search.toSafeString())
                        return this._sendSearchEventForNonSearchPages(I),
                        r.redirected = !0,
                        this.$router.moveTo404Async();
                    const k = await a.getCurrentXInfoWithClustersAndVectorsAsync()
                      , P = this.modules.CatalogProvider.createGoodsProvider(I)
                      , {goods: M=[], resp: T, isNetworkError: E=!1} = await this._loadGoodsAsync(P, S ? C : _)
                      , D = (null == T ? void 0 : T.metadata) ? null == T ? void 0 : T.metadata : T;
                    if (this.isEmpty = void 0 !== (null == D ? void 0 : D.is_empty) ? D.is_empty : null,
                    this.isSnippetHasSizes = "sizes" === (null == D ? void 0 : D.snippet),
                    (null == D ? void 0 : D.name) || (I.gender = null),
                    "redirect" === (null == D ? void 0 : D.catalog_type) && (null == D ? void 0 : D.catalog_value)) {
                        const e = await this._checkRedirectUrl(D.catalog_value);
                        if (e)
                            return this._sendSearchEventForNonSearchPages(I),
                            r.redirected = !0,
                            this.$router.moveTo(e, !0)
                    } else if ("product-redirect" === (null == D ? void 0 : D.catalog_type)) {
                        const e = await this._getUrlToProductCard(D);
                        if (e)
                            return this._sendSearchEventForNonSearchPages(I),
                            r.redirected = !0,
                            this.$services.clientActionsHelper.onSearchRedirectToProduct(),
                            this.$services.productCard.updateAnalyticsForProductRedirect(I),
                            this.$router.moveTo(e, !0)
                    }
                    (null == D ? void 0 : D.title) && (I.title = D.title),
                    (null == D ? void 0 : D.name) && (null == D ? void 0 : D.change_input) && (I.search = D.name),
                    (null == D ? void 0 : D.catalog_value) && (I.xcatalogQuery = D.catalog_value),
                    (null == D ? void 0 : D.catalog_type) && (I.xcatalogShard = D.catalog_type),
                    (null == D ? void 0 : D.context) && (I.xcatalogContext = D.context),
                    (null == D ? void 0 : D.normquery) && (I.normQuery = D.normquery),
                    (null == D ? void 0 : D.rs) && (I.rs = D.rs),
                    I.originalSearch = null != (n = null == D ? void 0 : D.original) ? n : null,
                    I.change_input = null != (s = null == D ? void 0 : D.change_input) && s,
                    this.products = E ? [] : M,
                    this.emptySearch = 0 === (null == (i = this.products) ? void 0 : i.length) && (0 === w.getFiltersQuery().toString().length || w.getFiltersQuery().has("fsupplier")),
                    this.isNetworkError = E,
                    this.emptySearchRecom = [],
                    this.emptySearch && (this.emptySearchRecom = await this._getEmptySearchRecommendations(I)),
                    this._needChangeEmptyUserSearch(this, I) && (I.userSearch = I.search),
                    this.xData = I,
                    this.targetUrl = b,
                    this.xInfo = k,
                    this.sort = h
                }
                _sendSearchEventForNonSearchPages(e) {
                    const t = (0,
                    v.a)()
                      , r = t.getLastSearchAnaliticsData();
                    r && e.search === r.text && t.sendEvent("Search_Request_Send", r)
                }
                onActionExecuted(e) {
                    var t;
                    const r = (0,
                    i.u)();
                    e.responseData || (e.responseData = {});
                    const n = null != (t = this.xData.title) ? t : this.xData.search
                      , s = {
                        type: x.A.search,
                        model: {
                            title: n,
                            xData: this.xData,
                            tagsUrl: "" === this.xData.search.toSafeString() ? null : `${this.xData.search.toSafeString()}&lang=ru&${this.xInfo}&locale=${r.getLocale()}`,
                            emptySearch: this.emptySearch,
                            products: this.products,
                            emptySearchRecom: this.emptySearchRecom,
                            targetUrl: this.targetUrl,
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,window.location.href),
                            currentMenuItem: null,
                            rootMenuItem: null,
                            isNetworkError: this.isNetworkError,
                            isEmpty: this.isEmpty,
                            hasSelectedChild: !1,
                            isSnippetHasSizes: this.isSnippetHasSizes
                        }
                    };
                    Object.assign(e.responseData, {
                        data: s
                    })
                }
                async _loadGoodsAsync(e, t) {
                    try {
                        const {goods: r=[], resp: n} = await e.loadGoodsAsync(t);
                        return {
                            goods: r,
                            resp: n
                        }
                    } catch (e) {
                        return {
                            goods: [],
                            resp: null,
                            isNetworkError: !0
                        }
                    }
                }
                async _initAsync() {
                    const [e,t,r,n] = await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"), this.$moduleLoader.loadModuleAsync("queryHelper"), this.$moduleLoader.loadModuleAsync("xCatalogProvider"), this.$moduleLoader.loadModuleAsync("sorterModel"), this.$getService("clientActionsHelper")]);
                    this.modules = {
                        XCatalogData: e.XSeachData,
                        QueryHelper: t,
                        CatalogProvider: r,
                        SorterModel: n.CatalogSorterModel
                    },
                    this.initialized = !0
                }
                async _getXDataAsync(e) {
                    return new this.modules.XCatalogData(e.search,e.search,e.nocorrection,e.ssubject)
                }
                async _checkRedirectUrl(e) {
                    var t;
                    try {
                        const r = new URL(e.startsWith("http") ? e : "https://" + e);
                        if (r.host.endsWith(".wildberries.ru")) {
                            const e = !r.pathname.startsWith("/recent") && r.pathname.startsWith("/catalog");
                            if ("/lk/communications" === r.pathname)
                                return r.pathname;
                            if (e && (null == (t = await wb.spa.getCatalogMenu()) ? void 0 : t.menuByUrl.get(r.pathname)) || !e)
                                return r.toString()
                        }
                        return r.toString()
                    } catch (e) {
                        return null
                    }
                }
                async _getUrlToProductCard(e) {
                    var t;
                    const r = Number(e.name);
                    if (!this.$helper.isNumber(r))
                        return null;
                    if (r <= 1e3 || r >= 1e9)
                        return null;
                    try {
                        const e = await wb.xnm.getXnmProducts([r], !1, !0);
                        if (!((null == (t = null == e ? void 0 : e[r]) ? void 0 : t.pics) > 0))
                            return null;
                        const n = new URL(`/catalog/${r}/detail.aspx`,window.location.origin);
                        return n.searchParams.set("targetUrl", "SP"),
                        n
                    } catch (e) {
                        return null
                    }
                }
                async _getEmptySearchRecommendations(e) {
                    const t = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e.search)}`;
                    try {
                        const e = await this.$httpClient.fetchJSON(t, {}, {
                            timeout: 2e3
                        });
                        if (!(Array.isArray(e) && e.length > 0))
                            return [];
                        const r = await wb.xnm.getCatalogCards(e, !1, !1);
                        return Object.values(r).reduce(( (e, t) => (t.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t)),
                        e)), [])
                    } catch (e) {
                        return console.error(e.message),
                        []
                    }
                }
                _notShowTecDoc(e) {
                    var t, r;
                    return !(null == (t = null == e ? void 0 : e.xcatalogContext) ? void 0 : t.includes("autoproduct")) || wb.settings.isIE || !(null == (r = wb.global.settings.switches) ? void 0 : r.tecDocEnable)
                }
                _needChangeEmptyUserSearch(e, t) {
                    var r;
                    if (!e.emptySearch)
                        return !1;
                    if (this._notShowTecDoc(t))
                        return !1;
                    return -1 !== (null == (r = t.userSearch) ? void 0 : r.indexOf("automodel:"))
                }
            }
            ;
            const re = ["wide", "mini"];
            var ne = class {
                constructor() {
                    this.fullMenu = null,
                    this.menuByUrl = new Map,
                    this.menuById = new Map,
                    this.brandsMenuList = {
                        items: null
                    },
                    this.promoId = null,
                    this.isSpecial = null,
                    this.isTrend = !1
                }
                async initMenu(e) {
                    var t, r, n, s;
                    if (!e)
                        return;
                    const i = null == (t = e.promo.shelves) ? void 0 : t.reduce(( (e, t) => {
                        const r = t.type;
                        return e[r] || (e[r] = []),
                        e[r].push(t),
                        e
                    }
                    ), {});
                    this.promoId = null != (r = e.promo.id) ? r : 0,
                    this.isSpecial = e.promo.isSpecial,
                    this.isTrend = e.isTrend,
                    this.promoShelf = null != (n = null == i ? void 0 : i.promo) ? n : null,
                    this.brandShelves = null != (s = null == i ? void 0 : i.brand) ? s : null,
                    this.shelves = e.promo.shelves,
                    this.isExtended = e.promo.isExtended,
                    this._createMenuMap(e),
                    this._generateImg(e)
                }
                getCurrentMenuItem(e) {
                    if (!e)
                        return null;
                    const t = e.pathname.replace("promotionscatalogdata", "promotions");
                    return this.menuByUrl.get(t)
                }
                getSitePathItems(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url
                    });
                    let r = this.menuById.get(e.id).parentId;
                    for (; null != r; ) {
                        const e = this.menuById.get(r);
                        t.push({
                            id: r,
                            name: e.name,
                            pageUrl: e.url
                        }),
                        r = e.parentId
                    }
                    return t.push({
                        id: 2192,
                        name: wb.i18n.t("catalog.promotions"),
                        pageUrl: "/promotions"
                    }),
                    t.reverse()
                }
                getCatalogMenu(e, t) {
                    var r, n, s, i, a, o;
                    if (!e)
                        return;
                    if (e.landing || 2 === t.length)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [],
                            parent: {},
                            parents: [],
                            tagsMenu: null != (n = null == (r = e.childNodes) ? void 0 : r.map((e => ({
                                name: e.name,
                                link: e.url
                            })))) ? n : []
                        };
                    const l = t[t.length - 2]
                      , c = t.slice(1).map((e => ({
                        name: e.name,
                        link: e.pageUrl
                    })));
                    c[c.length - 1].lastSelected = !0;
                    const u = null == (s = e.childNodes) ? void 0 : s.map((e => ({
                        name: e.name,
                        link: e.url,
                        anc: !0
                    })));
                    if ((null == (i = e.childNodes) ? void 0 : i.length) > 0)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [...c, ...u],
                            parent: {
                                name: l.name,
                                link: l.pageUrl
                            },
                            parents: this.getParents(e.id),
                            tagsMenu: null != u ? u : []
                        };
                    const d = this.menuByUrl.get(l.pageUrl);
                    return {
                        current: {
                            name: e.name,
                            link: e.url,
                            isTop: e.isTop,
                            lastSelected: !0
                        },
                        sideMenu: c,
                        parent: {
                            name: l.name,
                            link: l.pageUrl
                        },
                        parents: this.getParents(e.id),
                        tagsMenu: null != (o = null == (a = d.childNodes) ? void 0 : a.map((e => ({
                            name: e.name,
                            link: e.url
                        })))) ? o : []
                    }
                }
                hasItem(e) {
                    return !!e && this.menuById.has(e)
                }
                getCatalogLink(e) {
                    return this.menuById.get(e).url
                }
                getParents(e) {
                    const t = [];
                    let r = this.menuById.get(e).parentId;
                    for (; null != r; ) {
                        const e = this.menuById.get(r);
                        t.push({
                            name: e.name,
                            link: e.url,
                            isLanding: e.landing
                        }),
                        r = e.parentId
                    }
                    return t.reverse()
                }
                getRootNode(e) {
                    let t = this.menuById.get(e.id);
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return this._adaptMenu(t)
                }
                _createMenuMap(e) {
                    this.brandsMenuList.items = e.promo.brands,
                    this.fullMenu = e.menu,
                    e.extraMenu && this.fullMenu.unshift(...e.extraMenu),
                    this.fullMenu.forEach((t => {
                        var r;
                        return this._setNode(t, null, 1, null == (r = e.promo.categories) ? void 0 : r.imgPath)
                    }
                    ))
                }
                _setNode(e, t, r, n) {
                    var s;
                    2 === r && n && (e.imgPath = n),
                    this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, {
                        id: e.id,
                        parentId: t,
                        url: e.url,
                        name: e.name,
                        landing: e.landing,
                        childs: e.childNodes,
                        promoId: this.promoId
                    }),
                    null == (s = e.childNodes) || s.forEach((t => this._setNode(t, e.id, r + 1, n)))
                }
                _adaptMenu(e) {
                    var t;
                    const r = this.menuById.get(e.id);
                    return r.childs = null == (t = r.childs) ? void 0 : t.map((e => this._adaptMenu(e))),
                    r
                }
                _generateImg(e) {
                    var t;
                    const r = e.promo;
                    r.poster && (this._generatePoster(r.poster),
                    (null == (t = r.categories) ? void 0 : t.background) && this._generateCategoryImgBackground(r.categories.background))
                }
                _generatePoster(e) {
                    e && re.forEach((t => {
                        const r = `no-repeat url('${e[t]}'), ${e.background}`;
                        document.documentElement.style.setProperty(`--custom-promo-poster-${t}`, r)
                    }
                    ))
                }
                _generateCategoryImgBackground(e) {
                    document.documentElement.style.setProperty("--custom-promo-image-background", e)
                }
            }
              , se = Object.defineProperty
              , ie = Object.getOwnPropertySymbols
              , ae = Object.prototype.hasOwnProperty
              , oe = Object.prototype.propertyIsEnumerable
              , le = (e, t, r) => ( (e, t, r) => t in e ? se(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var ce = class {
                constructor() {
                    le(this, "bannersTask"),
                    le(this, "catalogMenu"),
                    le(this, "currentMenuItem"),
                    le(this, "enableEntryPromoPage"),
                    le(this, "initialized"),
                    le(this, "modules"),
                    le(this, "products"),
                    le(this, "promoKey"),
                    le(this, "promotionsService"),
                    le(this, "rewriteDestTo"),
                    le(this, "showCategories"),
                    le(this, "sort"),
                    le(this, "type"),
                    le(this, "xData"),
                    le(this, "xInfo"),
                    le(this, "isNewPromoBanners"),
                    this.initialized = !1,
                    this.catalogMenu = null,
                    this.modules = {},
                    this.isNewPromoBanners = !0
                }
                async onBeforeActionExecuting(e, t, r) {
                    var s;
                    const a = (0,
                    n.c)()
                      , o = (0,
                    i.u)()
                      , l = (0,
                    m.D)()
                      , c = (0,
                    j.M)();
                    if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.type = this.sort = null,
                    r.cancelRequest)
                        return;
                    if (this.promotionsService = await l.getService("promotionsService"),
                    this.promotionsService.isTrendPathname(window.location.pathname) && !(0,
                    j.M)().isTrendEnabledMenu())
                        return this.promotionsService.leaveFromTrendPage(!1),
                        r.redirected = !0,
                        a.moveTo404Async();
                    this.initialized || await this._initAsync();
                    const u = new URL(e);
                    u.pathname = u.pathname.replace("/webapi", "");
                    const d = u.pathname.split("/")[2]
                      , h = this._promoKey(d, o.getLocale(), wb.currentLanguage);
                    if (this.promoKey !== h) {
                        const e = await this.promotionsService.getPromoDataByUrl(d, o.getLocale(), wb.currentLanguage);
                        await this._loadPromoMenu(e, d)
                    }
                    if (!(this.catalogMenu.promoId > 0 && (this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(u))))
                        return r.redirected = !0,
                        a.moveTo404Async();
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(u),
                    this.showCategories = null == (s = this.currentMenuItem) ? void 0 : s.isTop,
                    this.xData = this.currentMenuItem ? new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shardKey) : null,
                    this.xData.isPromo = !0,
                    this.enableEntryPromoPage = this.showCategories,
                    this.bannersTask = this.showCategories ? this._bannersTask(this.catalogMenu.promoId) : Promise.resolve(null),
                    this.xInfo = await c.getCurrentXInfoWithClustersAndVectorsAsync(),
                    r.cancelRequest = null != this.xData
                }
                async onActionExecuting() {
                    const e = (0,
                    v.a)();
                    if (this.xData && this.xInfo && !this.enableEntryPromoPage) {
                        let t = this.modules.QueryHelper.getInitialParams()
                          , {sort: r=this.modules.SorterModel.getSortFromCache, page: n=1} = t
                          , s = ( (e, t) => {
                            var r = {};
                            for (var n in e)
                                ae.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                            if (null != e && ie)
                                for (var n of ie(e))
                                    t.indexOf(n) < 0 && oe.call(e, n) && (r[n] = e[n]);
                            return r
                        }
                        )(t, ["sort", "page"]);
                        const i = new this.modules.QueryHelper({
                            sort: r,
                            page: n,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(s)
                        }).getQueryStringForCatalog()
                          , a = wb.global.settings.switches.enableInfiniteScroll || e.checkDataInSplitterServiceV2("common", "ab_enableAutoNextPage", "yes")
                          , o = new URLSearchParams(i);
                        o.delete("page");
                        const l = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: c=[]} = await l.loadGoodsAsync(a ? o : i);
                        this.products = c,
                        this.sort = r
                    }
                }
                onActionExecuted(e) {
                    var t;
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const r = null == (t = this.catalogMenu) ? void 0 : t.getSitePathItems(this.currentMenuItem)
                      , n = this.enableEntryPromoPage ? this._getEntryModel(r) : this._getCatalogModel(r);
                    Object.assign(e.responseData, {
                        data: n
                    })
                }
                async _initAsync() {
                    const e = (0,
                    p.s)()
                      , [t,r,n,s] = await Promise.all([e.loadModuleAsync("xCatalogData"), e.loadModuleAsync("queryHelper"), e.loadModuleAsync("xCatalogProvider"), e.loadModuleAsync("sorterModel")]);
                    this.modules = {
                        XCatalogData: t.XCatalogData,
                        QueryHelper: r,
                        xCatalogProvider: n,
                        SorterModel: s.CatalogSorterModel
                    },
                    this.catalogMenu = new ne,
                    this.initialized = !0
                }
                async _loadPromoMenu(e, t) {
                    const r = (0,
                    i.u)();
                    await this.catalogMenu.initMenu(e),
                    this.promoKey = this.catalogMenu ? this._promoKey(t, r.getLocale(), wb.currentLanguage) : null
                }
                _promoKey(e, t="ru", r) {
                    return `${e}-${t}-${r}`
                }
                _getEntryModel(e) {
                    var t, r, s, i, a, o;
                    const l = (0,
                    n.c)();
                    if (this.catalogMenu.isTrend) {
                        const e = new URL(window.location.href);
                        e.pathname = this.catalogMenu.getRootNode(this.catalogMenu.getCurrentMenuItem(e)).url,
                        this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(e),
                        l.replaceState(window.history.state, document.title, e)
                    }
                    return {
                        mainVersion: 0,
                        type: x.A.promoEntry,
                        model: {
                            xData: this.xData,
                            menuId: null == (t = this.currentMenuItem) ? void 0 : t.id,
                            currentMenuItem: this.catalogMenu.menuById.get(null == (r = this.currentMenuItem) ? void 0 : r.id),
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            children: null == (s = this.currentMenuItem) ? void 0 : s.childNodes,
                            sitePathItems: e,
                            title: null != (o = null == (i = this.currentMenuItem) ? void 0 : i.seo) ? o : null == (a = this.currentMenuItem) ? void 0 : a.name,
                            needAdultProtection: !wb.adult.isConfirmed,
                            catalogMenu: this.catalogMenu,
                            promoId: this.catalogMenu.promoId,
                            catalogPromoLeftMenu: this.catalogMenu.getCatalogMenu(this.currentMenuItem, e),
                            bannersTask: this.bannersTask,
                            isSpecial: this.catalogMenu.isSpecial,
                            catalogType: x.A.promoEntry,
                            promoShelf: this.catalogMenu.promoShelf,
                            brandShelves: this.catalogMenu.brandShelves,
                            isExtended: this.catalogMenu.isExtended
                        }
                    }
                }
                _getCatalogModel(e) {
                    var t, r, n, s, i, a, o, l, c;
                    return {
                        mainVersion: 0,
                        type: x.A.goods,
                        model: {
                            xData: this.xData,
                            menuId: null == (t = this.currentMenuItem) ? void 0 : t.id,
                            currentMenuItem: this.catalogMenu.menuById.get(null == (r = this.currentMenuItem) ? void 0 : r.id),
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            hasSelectedChild: !!(null == (n = this.currentMenuItem) ? void 0 : n.childs),
                            sitePathItems: e,
                            promoMenuV2: !0,
                            catalogPromoLeftMenu: this.catalogMenu.getCatalogMenu(this.currentMenuItem, e),
                            emptyCatalogLink: null == (s = this.currentMenuItem) ? void 0 : s.url,
                            tagsUrl: null == (i = this.currentMenuItem) ? void 0 : i.url,
                            products: this.products,
                            targetUrl: "GP",
                            title: null != (l = null == (a = this.currentMenuItem) ? void 0 : a.seo) ? l : null == (o = this.currentMenuItem) ? void 0 : o.name,
                            containerClass: "catalog-page",
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,null == (c = this.currentMenuItem) ? void 0 : c.url),
                            promoId: this.catalogMenu.promoId,
                            isSpecial: this.catalogMenu.isSpecial,
                            shelves: this.catalogMenu.shelves,
                            isExtended: this.catalogMenu.isExtended,
                            isTrend: this.catalogMenu.isTrend
                        }
                    }
                }
                async _bannersTask(e) {
                    const t = (0,
                    s.Z1)()
                      , r = this.isNewPromoBanners ? "phone" === wb.settings.displayType : "m" === wb.settings.displayMode;
                    return this.catalogMenu.isExtended ? t.bannersService.getPromotionSpecialBanners(r) : t.bannersService.getPromoCatalogBanners(r, e)
                }
            }
            ;
            class ue {
                get menuBase() {
                    return ue.prototype.menuBaseData
                }
                set menuBase(e) {
                    ue.prototype.menuBaseData = e
                }
                static get menuById() {
                    return ue.prototype.menuByIdData
                }
                static async init() {
                    var e;
                    if (ue.prototype.menuBaseData || ue.prototype.currentLanguage === wb.currentLanguage)
                        return;
                    const t = wb.currentLanguage
                      , r = ["ka"].includes(t) ? `subject-base-${t}.json` : "subject-base.json";
                    ue.prototype.menuBaseData = null != (e = await WbSpaModel.prototype.$httpClient.fetchStatic(r, {
                        timeout: 1e4
                    })) ? e : [],
                    ue.prototype.currentLanguage = t,
                    ue.prototype.menuByIdData = new Map,
                    ue.prototype._createMenuMap()
                }
                _createMenuMap() {
                    ue.prototype.menuBase.forEach((e => ue.prototype._setNode(e, null)))
                }
                _setNode(e, t) {
                    var r;
                    t && (e.parentId = t),
                    ue.prototype.menuByIdData.set(e.id, e),
                    null == (r = e.childs) || r.forEach((t => ue.prototype._setNode(t, e.id)))
                }
            }
            var de = ue;
            var he = class extends de {
                constructor(e, t) {
                    super(),
                    this.modules = e,
                    this.brandConstructorService = t,
                    this.brandData = null,
                    this.fullMenu = null,
                    this.menuByUrl = new Map,
                    this.menuById = new Map
                }
                async initMenu(e, t, r, n) {
                    var s;
                    let i = await WbSpaModel.prototype.$httpClient.fetchStatic(`brands/${e}.json`, {}, wb.helpers.url.urlStaticData);
                    if (!i) {
                        const t = null == (s = e.split("-")) ? void 0 : s[0];
                        t && (i = await WbSpaModel.prototype.$httpClient.fetchStatic(`brands-by-id/${t}.json`, {}, wb.helpers.url.urlStaticData)),
                        i && (location.href = $.views.helpers.brandUrl(i.url))
                    }
                    if (!i)
                        return null;
                    super.menuBase || await de.init(),
                    this.isConstructor = t.indexOf(i.id) >= 0,
                    this.brandData = i;
                    const a = $.views.helpers.brandUrl(i.url)
                      , o = await this._getMenuItems(i, r, a, n);
                    this.fullMenu = this._getFullMenu(i, a, o, this.infoMenu),
                    this._createMenuMap(),
                    this.isInited = !0
                }
                _getFullMenu(e, t, r, n=[]) {
                    return [{
                        id: e.id + "b",
                        name: e.name,
                        url: t,
                        shard: this.isConstructor ? "" : this._brandToShard(e.name),
                        query: this.isConstructor ? "" : this._brandToQuery(e.id),
                        childs: r.concat(n)
                    }]
                }
                async _getMenuItems(e, t, r, n) {
                    var s, i, a;
                    if (!this.isConstructor)
                        return await this._getChildsFromSubjects(e, t, r);
                    const o = this.brandConstructorService.getPageInfo(n)
                      , l = await this.brandConstructorService.getMenus(e, o.pageType, o.infoUrl, o.previewMode);
                    if (this.previewMode = o.previewMode,
                    this.hasCustomMenu = (null == (s = null == l ? void 0 : l.menu) ? void 0 : s.length) > 0,
                    (null == (a = null == (i = null == l ? void 0 : l.infoMenu) ? void 0 : i.menuInfoItems) ? void 0 : a.length) > 0 && (this.infoMenu = l.infoMenu.menuInfoItems.map((t => (t.id = `${t.id}info`,
                    t.url = `${r}/info/${t.href}`,
                    t.isInfo = !0,
                    this._convertBrandScemeItemToMenuItemDTO(t, e))))),
                    this.hasCustomMenu)
                        return await this._getChildsFromCustomMenu(e, l.menu);
                    const c = await this._getChildsFromSubjects(e, t, r)
                      , u = {
                        id: e.id + "b-all",
                        name: wb.i18n.t("catalog.wholeRange"),
                        url: `${r}/all`,
                        seo: wb.i18n.t("catalog.wholeRangeOfBrand", {
                            brandName: e.name
                        }),
                        shard: this._brandToShard(e.name),
                        query: this._brandToQuery(e.id),
                        childs: []
                    };
                    return c.push(u),
                    c
                }
                async _getChildsFromCustomMenu(e, t) {
                    const r = t.map((t => this._convertBrandScemeItemToMenuItemDTO(t, e, !0)));
                    return r.sort(( (e, t) => e - t)),
                    r
                }
                async _getChildsFromSubjects(e, t, r) {
                    var n, s, i, a;
                    const o = this._brandToShard(e.name)
                      , l = this._brandToQuery(e.id)
                      , c = new this.modules.XCatalogData(l,o,"Brand")
                      , u = this.modules.xCatalogProvider.createGoodsProvider(c)
                      , d = await u.loadSubjectsAsync(t, c)
                      , h = null != (i = null == (s = null == (n = null == d ? void 0 : d.data) ? void 0 : n.filters.find((e => "xsubject" === e.key))) ? void 0 : s.items.map((e => e.id))) ? i : []
                      , p = [];
                    for (const t of this.menuBase) {
                        let n = !1;
                        const s = [];
                        for (const i of null != (a = null == t ? void 0 : t.childs) ? a : [])
                            if (h.indexOf(i.id) >= 0) {
                                n = !0;
                                const t = Object.assign({}, i);
                                t.seo = `${e.name} ${i.name}`,
                                t.url = `${r}/${t.url}`,
                                t.shard = this._brandToShard(e.name),
                                t.query = this._brandToQuery(e.id, t.id),
                                s.push(t)
                            }
                        if (n) {
                            const n = Object.assign({}, t);
                            n.seo = `${e.name} ${t.name}`,
                            n.url = `${r}/${t.url}`,
                            n.shard = this._brandToShard(e.name),
                            n.query = this._brandToQuery(e.id, n.id),
                            n.childs = s,
                            n.parent = e.id + "b",
                            p.push(n)
                        }
                    }
                    return p
                }
                _convertBrandScemeItemToMenuItemDTO(e, t, r) {
                    const n = this._getXQueryForMenuItem(t, e.query)
                      , s = {
                        id: e.id,
                        name: e.title,
                        url: e.url.toLowerCase(),
                        seo: `${t.name} ${e.title}`,
                        sort: e.sort,
                        shard: this._brandToShard(t.name),
                        query: n
                    };
                    return r && (s.isCustom = r,
                    s.parentId = t.id + "b"),
                    e.isInfo && (s.isInfo = !0),
                    s
                }
                _getXQueryForMenuItem(e, t) {
                    const r = new URLSearchParams(t);
                    return r.has("type") && r.delete("type"),
                    r.set("brand", e.id),
                    decodeURIComponent(r)
                }
                getBrandInfo() {
                    return {
                        id: this.brandData.siteId,
                        brandCod: this.brandData.id,
                        name: this.brandData.name,
                        brandLink: $.views.helpers.brandUrl(this.brandData.url),
                        hash: this.brandData.hash
                    }
                }
                getCurrentMenuItem(e) {
                    var t;
                    if (!(e = null != (t = null == e ? void 0 : e.pathname) ? t : e))
                        return null;
                    const r = e.replace("/data", "").replace("/preview", "");
                    let n = this.menuByUrl.get(r);
                    return !n && this.hasCustomMenu && this.menuByUrl.forEach((e => {
                        e.url.split("?")[0] == r && (n = e)
                    }
                    )),
                    null != n ? n : this.menuByUrl.get(r.slice(0, r.lastIndexOf("/")))
                }
                getSitePathItems(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url,
                        isInfo: e.isInfo,
                        analytic: ["BCA", null, null, e.id]
                    });
                    let r = this.menuById.get(e.id).parentId;
                    for (; null != r; ) {
                        const e = this.menuById.get(r);
                        t.push({
                            id: r,
                            name: e.name,
                            pageUrl: e.url,
                            analytic: ["BCA", null, null, r]
                        }),
                        r = e.parentId
                    }
                    const n = this._brandLetterToSitePathParam(this.brandData.letter);
                    return t.push({
                        id: 0,
                        name: wb.i18n.t("brands.brandByLetter", {
                            currentLetterName: n.toUpperCase()
                        }),
                        pageUrl: `/wildberries/brandlist.aspx?letter=${n}`
                    }),
                    t.reverse()
                }
                getCatalogMenu(e) {
                    var t, r, n, s;
                    const i = [];
                    if ((e = null == e ? void 0 : e.filter((e => !e.isInfo))) && 0 !== e.length)
                        if (1 === e.length) {
                            const n = {
                                name: "",
                                link: ""
                            }
                              , s = null != (r = null == (t = this.menuByUrl.get(e[0].pageUrl).childs) ? void 0 : t.filter((e => !e.isInfo)).map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) ? r : [];
                            i.push({
                                node: n,
                                children: s
                            })
                        } else {
                            const t = this.menuByUrl.get(e[1].pageUrl)
                              , r = {
                                id: t.id,
                                isOpen: !0,
                                lastSelected: e[e.length - 1].id === t.id,
                                link: t.isDenyLink ? null : t.url,
                                name: t.name
                            }
                              , a = r.lastSelected ? null != (s = null == (n = t.childs) ? void 0 : n.filter((e => !e.isInfo)).map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) ? s : [] : this.getCatalogMenu(e.slice(1));
                            i.push({
                                node: r,
                                children: a
                            })
                        }
                    else
                        i.push({
                            node: {
                                name: "",
                                link: ""
                            },
                            children: []
                        });
                    return i
                }
                hasItem(e) {
                    return !!e && this.menuById.has(e)
                }
                getCatalogLink(e) {
                    return this.menuById.get(e).url
                }
                getParents(e) {
                    const t = [];
                    let r = this.menuById.get(e).parentId;
                    for (; null != r; ) {
                        const e = this.menuById.get(r);
                        t.push(e.name),
                        r = e.parentId
                    }
                    return t.reverse()
                }
                getRootNode(e) {
                    let t = this.menuById.get(e.id);
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return this._adaptMenu(t)
                }
                _createMenuMap() {
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                _setNode(e, t, r) {
                    var n;
                    e.hasHardSort = e.query.includes("sort"),
                    this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, {
                        parentId: t,
                        url: e.url,
                        name: e.name,
                        childs: e.childs,
                        id: e.id,
                        hasHardSort: e.hasHardSort
                    }),
                    null == (n = e.childs) || n.forEach((t => this._setNode(t, e.id, r)))
                }
                _brandToShard(e) {
                    const t = e ? e.toLowerCase() : " "
                      , r = t.charCodeAt(0);
                    return 48 <= r && r <= 57 || 97 <= r && r <= 122 || 1072 <= r && r <= 1105 ? `brands/${t[0]}` : "brands/special"
                }
                _brandToQuery(e, t) {
                    return t ? `brand=${e}&subject=${t}` : `brand=${e}`
                }
                _brandLetterToSitePathParam(e) {
                    const t = e.charCodeAt(0);
                    return 1072 <= t && t <= 1105 ? "а-я" : 97 <= t && t <= 122 ? e : "123"
                }
                _adaptMenu(e) {
                    var t;
                    const r = this.menuById.get(e.id);
                    return r.childs = null == (t = r.childs) ? void 0 : t.map((e => this._adaptMenu(e))),
                    r
                }
            }
              , pe = Object.defineProperty
              , me = Object.getOwnPropertySymbols
              , be = Object.prototype.hasOwnProperty
              , ge = Object.prototype.propertyIsEnumerable
              , ye = (e, t, r) => ( (e, t, r) => t in e ? pe(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var fe = class {
                constructor(e) {
                    ye(this, "brand"),
                    ye(this, "catalogMenu"),
                    ye(this, "currentMenuItem"),
                    ye(this, "modules"),
                    ye(this, "products"),
                    ye(this, "sort"),
                    ye(this, "xData"),
                    ye(this, "xInfo"),
                    Object.assign(this, e)
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                async onBeforeActionExecuting(e, t, r) {
                    var n, s;
                    this.xData = this.modules && new this.modules.XCatalogData(null == (n = this.currentMenuItem) ? void 0 : n.query,null == (s = this.currentMenuItem) ? void 0 : s.shard,"Brand"),
                    r.cancelRequest = null != this.xData
                }
                async onActionExecuting(e, t, r) {
                    var n, s, i;
                    const a = (0,
                    v.a)();
                    if (this.xData && this.xInfo) {
                        let e = null == (n = this.modules) ? void 0 : n.QueryHelper.getInitialParams()
                          , {sort: t=(null == (s = this.modules) ? void 0 : s.SorterModel.getSortFromCache), page: o=1, sle: l} = e
                          , c = ( (e, t) => {
                            var r = {};
                            for (var n in e)
                                be.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                            if (null != e && me)
                                for (var n of me(e))
                                    t.indexOf(n) < 0 && ge.call(e, n) && (r[n] = e[n]);
                            return r
                        }
                        )(e, ["sort", "page", "sle"]);
                        if ("adidas" === this.brand && l)
                            return r.redirected = !0,
                            void this.$router.moveTo404Async();
                        const u = (this.modules && new this.modules.QueryHelper({
                            sort: t,
                            page: o,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(c)
                        })).getQueryStringForCatalog()
                          , d = wb.global.settings.switches.enableInfiniteScroll || a.checkDataInSplitterServiceV2("common", "ab_enableAutoNextPage", "yes")
                          , h = new URLSearchParams(u);
                        h.delete("page");
                        const p = null == (i = this.modules) ? void 0 : i.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: m=[]} = await p.loadGoodsAsync(d ? h : u);
                        this.products = m,
                        this.sort = t
                    }
                }
                onActionExecuted(e) {
                    var t, r, n, s, i, a;
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const o = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , l = {
                        mainVersion: 0,
                        type: x.A.brand,
                        model: {
                            brandInfo: this.catalogMenu.getBrandInfo(),
                            xData: this.xData,
                            currentMenuItem: this.currentMenuItem,
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            hasSelectedChild: !1,
                            sitePathItems: o,
                            catalogMenu: this.catalogMenu.getCatalogMenu(null == o ? void 0 : o.slice(1)),
                            emptyCatalogLink: null == (t = this.currentMenuItem) ? void 0 : t.url,
                            tagsUrl: null == (r = this.currentMenuItem) ? void 0 : r.url,
                            products: this.products,
                            promoMenuV2: !1,
                            targetUrl: "BP",
                            title: null != (i = null == (n = this.currentMenuItem) ? void 0 : n.seo) ? i : null == (s = this.currentMenuItem) ? void 0 : s.name,
                            containerClass: "catalog-page",
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: this.modules && new this.modules.SorterModel(this.sort,null == (a = this.currentMenuItem) ? void 0 : a.url)
                        }
                    };
                    Object.assign(e.responseData, {
                        data: l
                    })
                }
            }
              , ve = Object.defineProperty
              , we = Object.getOwnPropertySymbols
              , _e = Object.prototype.hasOwnProperty
              , Se = Object.prototype.propertyIsEnumerable
              , Ce = (e, t, r) => ( (e, t, r) => t in e ? ve(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var Ie = class {
                constructor(e) {
                    Ce(this, "xData"),
                    Ce(this, "xInfo"),
                    Ce(this, "brand"),
                    Ce(this, "products"),
                    Ce(this, "sort"),
                    Ce(this, "currentMenuItem"),
                    Ce(this, "catalogMenu"),
                    Ce(this, "brandConstructorService"),
                    Ce(this, "modules"),
                    Ce(this, "brandScheme"),
                    Object.assign(this, e)
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                async onBeforeActionExecuting(e, t, r) {
                    var n, s;
                    this.xData = this.modules && new this.modules.XCatalogData(null == (n = this.currentMenuItem) ? void 0 : n.query,null == (s = this.currentMenuItem) ? void 0 : s.shard,"Brand"),
                    r.cancelRequest = null != this.xData
                }
                async onActionExecuting(e, t, r) {
                    var n, s, i;
                    if (this.xData && this.xData.xcatalogShard && this.xInfo) {
                        let e = null == (n = this.modules) ? void 0 : n.QueryHelper.getInitialParams()
                          , {sort: t=(null == (s = this.modules) ? void 0 : s.SorterModel.getSortFromCache), page: a=1, sle: o} = e
                          , l = ( (e, t) => {
                            var r = {};
                            for (var n in e)
                                _e.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                            if (null != e && we)
                                for (var n of we(e))
                                    t.indexOf(n) < 0 && Se.call(e, n) && (r[n] = e[n]);
                            return r
                        }
                        )(e, ["sort", "page", "sle"]);
                        if ("adidas" === this.brand && o)
                            return r.redirected = !0,
                            void this.$router.moveTo404Async();
                        const c = this.modules && new this.modules.QueryHelper({
                            sort: t,
                            page: a,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(l)
                        })
                          , u = "sort";
                        this.xData.xcatalogQuery.includes(u) && c.queryDictionary.hasOwnProperty(u) && delete c.queryDictionary[u];
                        const d = c.getQueryStringForCatalog()
                          , h = null == (i = this.modules) ? void 0 : i.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: p=[]} = await h.loadGoodsAsync(d);
                        this.products = p,
                        this.sort = t
                    }
                }
                async onActionExecuted(e) {
                    var t, r, n, s;
                    const i = (0,
                    p.s)();
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const a = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , o = this.catalogMenu.getCatalogMenu(null == a ? void 0 : a.slice(1))
                      , l = this.brandConstructorService.convertSchemeToViewModel(this.brandScheme, this.catalogMenu, this.currentMenuItem);
                    await i.loadModuleAsync("brandConstructorConfig");
                    const c = await this._getMetaTags(this.currentMenuItem)
                      , u = {
                        mainVersion: 0,
                        type: x.A.brandConstructorCatalog,
                        model: {
                            brandInfo: this.catalogMenu.getBrandInfo(),
                            currentMenuItem: this.currentMenuItem,
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            containerClass: "brand-constructor-catalog",
                            isCatalog: !0,
                            needAdultProtection: !wb.adult.isConfirmed,
                            sitePathItems: a,
                            catalogMenu: o,
                            brandScheme: l,
                            title: null == (t = this.currentMenuItem) ? void 0 : t.seo,
                            metaTags: c,
                            tagsUrl: null == (r = this.currentMenuItem) ? void 0 : r.url,
                            sorterModel: this.modules && new this.modules.SorterModel(this.sort,null == (n = this.currentMenuItem) ? void 0 : n.url),
                            products: this.products,
                            xData: this.xData,
                            targetUrl: "BP",
                            emptyCatalogLink: null == (s = this.currentMenuItem) ? void 0 : s.url
                        }
                    };
                    Object.assign(e.responseData, {
                        data: u
                    })
                }
                async _getMetaTags(e) {
                    var t;
                    const r = (0,
                    Q.getHttpClient)();
                    try {
                        const n = null == e ? void 0 : e.url.split("?")[0].replace("brands/", "brands/metatags/")
                          , s = await r.fetchJSON(`/webapi/spa${n}?${new URLSearchParams({
                            name: (null == e ? void 0 : e.name) || ""
                        })}`, {}, {
                            timeout: 3e3,
                            nullOnError: !0,
                            useProccessResponse: !0
                        });
                        return null != (t = null == s ? void 0 : s.metaTags) ? t : []
                    } catch (e) {
                        return []
                    }
                }
            }
              , ke = Object.defineProperty
              , Pe = (e, t, r) => ( (e, t, r) => t in e ? ke(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var Me = class {
                constructor(e) {
                    Pe(this, "currentMenuItem"),
                    Pe(this, "catalogMenu"),
                    Pe(this, "brandConstructorService"),
                    Pe(this, "brandScheme"),
                    Object.assign(this, e)
                }
                async onBeforeActionExecuting(e, t, r) {
                    r.cancelRequest = null != this.currentMenuItem
                }
                async onActionExecuting() {}
                async onActionExecuted(e) {
                    const t = (0,
                    p.s)();
                    e.responseData || (e.responseData = {});
                    const r = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = this.catalogMenu.getCatalogMenu(null == r ? void 0 : r.slice(1))
                      , s = this.brandConstructorService.convertSchemeToViewModel(this.brandScheme, this.catalogMenu, this.currentMenuItem)
                      , i = await this.brandConstructorService.getMainBanners(this.catalogMenu);
                    await t.loadModuleAsync("brandConstructorConfig");
                    const a = {
                        brandInfo: this.catalogMenu.getBrandInfo(),
                        brandDirections: {},
                        containerClass: "brand-constructor-ordinary",
                        isCatalog: !1,
                        needAdultProtection: !wb.adult.isConfirmed,
                        sitePathItems: r,
                        catalogMenu: n,
                        brandScheme: s,
                        mainBanners: i
                    }
                      , o = {
                        mainVersion: 0,
                        type: x.A.brandConstructor,
                        model: a
                    };
                    Object.assign(e.responseData, {
                        data: o
                    })
                }
            }
              , Te = Object.defineProperty
              , Ee = (e, t, r) => ( (e, t, r) => t in e ? Te(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var De = class {
                constructor(e) {
                    Ee(this, "brand"),
                    Ee(this, "brandConstructorService"),
                    Ee(this, "brandScheme"),
                    Ee(this, "catalogMenu"),
                    Ee(this, "currentMenuItem"),
                    Ee(this, "ids"),
                    Ee(this, "initialized"),
                    Ee(this, "modules"),
                    Ee(this, "pipeline"),
                    Ee(this, "preview"),
                    Ee(this, "products"),
                    Ee(this, "sort"),
                    Ee(this, "xData"),
                    Ee(this, "xInfo"),
                    this.initialized = !1,
                    this.catalogMenu = null,
                    this.modules = {},
                    this.preview = e,
                    this.pipeline = null
                }
                async onBeforeActionExecuting(e, t, r) {
                    var n, s, i, a, o, l, c, u, d;
                    const h = (0,
                    j.M)();
                    if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.sort = this.pipeline = this.brandScheme = null,
                    r.cancelRequest)
                        return;
                    let p = new URL(e);
                    p.pathname = p.pathname.replace("/webapi", "").toLowerCase();
                    const m = p.pathname.split("/")[this.preview ? 4 : 3];
                    if (this.brand !== m && (this.initialized = !1,
                    this.brand = this.catalogMenu = null),
                    this.brand === m && this.initialized || await this._initAsync(this.preview),
                    this.xInfo = await h.getCurrentXInfoWithClustersAndVectorsAsync(),
                    this.brand !== m && await this._loadBrandMenu(m, p.pathname),
                    this.brand) {
                        if (this.preview && !(null == (n = this.catalogMenu) ? void 0 : n.isConstructor) && (p = new URL(e.href.replace("/preview", "")),
                        p.pathname = p.pathname.replace("/webapi", "").toLowerCase()),
                        this.currentMenuItem = null == (s = this.catalogMenu) ? void 0 : s.getCurrentMenuItem(p),
                        !this.currentMenuItem)
                            return r.cancelRequest = !1,
                            void (r.cancelRequest || (t.body = await h.getCurrentXInfoWithClustersAndVectorsAsync()));
                        if (null == (i = this.catalogMenu) ? void 0 : i.isConstructor) {
                            const e = null == (a = this.brandConstructorService) ? void 0 : a.getPageInfo(p.pathname)
                              , t = null == e ? void 0 : e.pageType
                              , r = null == e ? void 0 : e.infoUrl;
                            this.brandScheme = await (null == (o = this.brandConstructorService) ? void 0 : o.getBrandSchemeAsync(this.catalogMenu.brandData, t, r, null == e ? void 0 : e.previewMode)),
                            this.brandScheme || (this.ids = [],
                            await this._loadBrandMenu(m, p.pathname))
                        }
                        return (null == (l = this.catalogMenu) ? void 0 : l.isConstructor) ? this.brandScheme.pageType == (null == (c = this.brandConstructorService) ? void 0 : c.enums.pageType.catalog) ? this.pipeline = new Ie(this) : this.pipeline = new Me(this) : this.pipeline = new fe(this),
                        null == (d = (u = this.pipeline).onBeforeActionExecuting) ? void 0 : d.call(u, e, t, r)
                    }
                    r.cancelRequest = !1
                }
                async onActionExecuting(e, t, r) {
                    var n, s;
                    return null == (s = null == (n = this.pipeline) ? void 0 : n.onActionExecuting) ? void 0 : s.call(n, e, t, r)
                }
                onActionExecuted(e) {
                    var t, r;
                    return null == (r = null == (t = this.pipeline) ? void 0 : t.onActionExecuted) ? void 0 : r.call(t, e)
                }
                async _initAsync(e) {
                    const t = (0,
                    p.s)()
                      , r = (0,
                    m.D)()
                      , n = this._initConstructorServiceAndGetBrands(e)
                      , [s,i,a,o,l] = await Promise.all([t.loadModuleAsync("xCatalogData"), t.loadModuleAsync("queryHelper"), t.loadModuleAsync("xCatalogProvider"), t.loadModuleAsync("sorterModel"), r.getService("promotionsService")]);
                    this.modules = {
                        XCatalogData: s.XCatalogData,
                        QueryHelper: i,
                        xCatalogProvider: a,
                        SorterModel: o.CatalogSorterModel
                    },
                    this.ids = await n,
                    this.catalogMenu = new he(this.modules,this.brandConstructorService),
                    this.initialized = !0
                }
                async _initConstructorServiceAndGetBrands(e) {
                    var t, r;
                    const n = (0,
                    p.s)();
                    await n.loadServiceAsync("brandConstructorService");
                    const i = (0,
                    s.cQ)("brandConstructorService");
                    return this.brandConstructorService = i,
                    null != (r = await (null == (t = this.brandConstructorService) ? void 0 : t.getConstructorBrands(e))) ? r : []
                }
                async _loadBrandMenu(e, t) {
                    var r, n;
                    await (null == (r = this.catalogMenu) ? void 0 : r.initMenu(e, this.ids, this.xInfo, t)),
                    this.brand = (null == (n = this.catalogMenu) ? void 0 : n.brandData) ? e : null
                }
            }
            ;
            var Ae = class extends de {
                constructor(e) {
                    super(),
                    this.modules = e,
                    this.sellerData = null,
                    this.fullMenu = null,
                    this.menuByUrl = new Map,
                    this.menuById = new Map,
                    this.shard = "sellers"
                }
                async initMenu(e, t) {
                    var r, n, s, i, a, o, l;
                    super.menuBase || await de.init();
                    const c = this.shard
                      , u = this._sellerToQuery(e, null)
                      , d = new this.modules.XCatalogData(u,c,"Seller")
                      , h = this.modules.xCatalogProvider.createGoodsProvider(d)
                      , p = await h.loadSubjectsAsync(t, d)
                      , m = await this._getSellerData(e);
                    this.sellerData = m,
                    this.fullMenu = [{
                        id: m.id + "s",
                        name: this._trimSellerOrgForms(null != (n = null != (r = m.trademark) ? r : m.fineName) ? n : m.name, m.orgForms),
                        url: "/seller/" + m.id,
                        shard: this.shard,
                        query: this._sellerToQuery(m.id, null),
                        childs: [],
                        title: wb.i18n.t("catalog.allProducts")
                    }];
                    const b = null != (a = null == (i = null == (s = null == p ? void 0 : p.data) ? void 0 : s.filters.find((e => "xsubject" === e.key))) ? void 0 : i.items.toHashSet((e => e.id))) ? a : new Set;
                    for (const e of this.menuBase) {
                        let t = !1;
                        const r = [];
                        for (const n of null != (o = null == e ? void 0 : e.childs) ? o : [])
                            if (b.has(n.id)) {
                                t = !0;
                                const e = Object.assign({}, n);
                                e.url = `/seller/${m.id}/${e.url}`,
                                e.shard = this.shard,
                                e.query = this._sellerToQuery(m.id, e.id),
                                e.parentId = null != (l = e.parentId) ? l : m.id + "s",
                                e.title = e.name,
                                r.push(e)
                            }
                        if (t) {
                            const t = Object.assign({}, e);
                            t.url = `/seller/${m.id}/${e.url}`,
                            t.shard = this.shard,
                            t.query = this._sellerToQuery(m.id, t.id),
                            t.childs = r,
                            t.parentId = m.id + "s",
                            t.title = t.name,
                            this.fullMenu[0].childs.push(t)
                        }
                    }
                    this._createMenuMap(),
                    this.isInited = !0
                }
                getSellerInfo() {
                    return this.sellerData
                }
                getCurrentMenuItem(e) {
                    var t;
                    if (!e)
                        return null;
                    const r = e.pathname.replace("/data", "");
                    return null != (t = this.menuByUrl.get(r)) ? t : this.menuByUrl.get(r.slice(0, r.lastIndexOf("/")))
                }
                getSitePathItems(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url
                    });
                    let r = this.menuById.get(e.id).parentId;
                    for (; null != r; ) {
                        const e = this.menuById.get(r);
                        t.push({
                            id: r,
                            name: e.name,
                            pageUrl: e.url
                        }),
                        r = e.parentId
                    }
                    return t.reverse()
                }
                getCatalogMenu(e) {
                    var t, r, n, s;
                    const i = [];
                    if (e && 0 !== e.length)
                        if (1 === e.length) {
                            const n = {
                                name: "",
                                link: ""
                            }
                              , s = null != (r = null == (t = this.menuByUrl.get(e[0].pageUrl).childs) ? void 0 : t.map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) ? r : [];
                            i.push({
                                node: n,
                                children: s
                            })
                        } else {
                            const t = this.menuByUrl.get(e[1].pageUrl)
                              , r = {
                                id: t.id,
                                isOpen: !0,
                                lastSelected: e[e.length - 1].id === t.id,
                                link: t.url,
                                name: t.name
                            }
                              , a = r.lastSelected ? null != (s = null == (n = t.childs) ? void 0 : n.map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) ? s : [] : this.getCatalogMenu(e.slice(1));
                            i.push({
                                node: r,
                                children: a
                            })
                        }
                    else
                        i.push({
                            node: {
                                name: "",
                                link: ""
                            },
                            children: []
                        });
                    return i
                }
                hasItem(e) {
                    return !!e && this.menuById.has(e)
                }
                getCatalogLink(e) {
                    return this.menuById.get(e).url
                }
                getParents(e) {
                    const t = [];
                    let r = this.menuById.get(e).parentId;
                    for (; null != r; ) {
                        const e = this.menuById.get(r);
                        t.push(e.name),
                        r = e.parentId
                    }
                    return t.reverse()
                }
                getRootNode(e) {
                    let t = this.menuById.get(e.id);
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return this._adaptMenu(t)
                }
                async _getSellerData(e) {
                    var t;
                    const r = {
                        id: e,
                        isUnknown: !0,
                        name: wb.i18n.t("common.seller")
                    }
                      , n = await WbSpaModel.prototype.$httpClient.fetchStatic(`supplier-by-id/${e}.json`, {}, wb.helpers.url.urlStaticData);
                    if (!n)
                        return r;
                    const s = WbSpaModel.prototype.$services.suppliersService.setSupplierInfo(n);
                    return {
                        id: s.supplierId,
                        name: null != (t = s.supplierFullName) ? t : s.supplierName,
                        fineName: this._trimSellerOrgForms(s.supplierName, s.orgForms),
                        ogrn: s.ogrn,
                        ogrnip: s.ogrnip,
                        taxpayerCode: s.taxpayerCode,
                        inn: s.inn,
                        kpp: s.kpp,
                        unp: s.unp,
                        bin: s.bin,
                        unn: s.unn,
                        trademark: s.trademark,
                        legalAddress: s.legalAddress,
                        isUnknown: !1,
                        orgForms: s.orgForms
                    }
                }
                _trimSellerOrgForms(e, t=[]) {
                    return $.views.converters.trimWord(e, t)
                }
                _createMenuMap() {
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                _setNode(e, t) {
                    var r;
                    this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, {
                        parentId: t,
                        url: e.url,
                        name: e.name,
                        id: e.id,
                        childs: e.childs
                    }),
                    null == (r = e.childs) || r.forEach((t => this._setNode(t, e.id)))
                }
                _sellerToQuery(e, t) {
                    return t ? `supplier=${e}&subject=${t}` : `supplier=${e}`
                }
                _adaptMenu(e) {
                    var t;
                    const r = this.menuById.get(e.id);
                    return r.childs = null == (t = r.childs) ? void 0 : t.map((e => this._adaptMenu(e))),
                    r
                }
            }
              , Oe = r(28288)
              , Be = Object.defineProperty
              , Le = Object.getOwnPropertySymbols
              , $e = Object.prototype.hasOwnProperty
              , xe = Object.prototype.propertyIsEnumerable
              , Re = (e, t, r) => ( (e, t, r) => t in e ? Be(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var Fe = class {
                constructor() {
                    Re(this, "catalogMenu"),
                    Re(this, "constructorData"),
                    Re(this, "currentMenuItem"),
                    Re(this, "initialized"),
                    Re(this, "isPreview"),
                    Re(this, "modules"),
                    Re(this, "products"),
                    Re(this, "seller"),
                    Re(this, "sort"),
                    Re(this, "type"),
                    Re(this, "xData"),
                    Re(this, "xInfo"),
                    Re(this, "isEapteka", !1),
                    Re(this, "isSquareLogo", !1),
                    this.initialized = !1,
                    this.catalogMenu = null,
                    this.modules = {}
                }
                async onBeforeActionExecuting(e, t, r) {
                    var s, i, a, o, l, c, u, d, h, p;
                    const m = (0,
                    Q.getHttpClient)()
                      , b = (0,
                    n.c)()
                      , g = (0,
                    j.M)();
                    if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.type = this.sort = null,
                    r.cancelRequest)
                        return;
                    this.initialized || await this._initAsync();
                    let y = new URL(e);
                    y.pathname = y.pathname.replace("/webapi", "");
                    let f = y.pathname.split("/")[3];
                    if (wb.global.settings.switches.enableNewShopWindow) {
                        const {mobileAppVariables: e} = wb.global.settings
                          , t = () => {
                            const e = n ? `v2/${f}` : f;
                            return (0,
                            Oe.urlStaticBasket)(`constructor-api/shops/${e}.json`, 0)
                        }
                          , r = null == e ? void 0 : e.objects.eaptekaIds
                          , n = !!("eapteka" === f || (null == r ? void 0 : r.includes(Number(f))));
                        if (this.isEapteka = n,
                        this.constructorData = await m.fetchStatic("", {}, t),
                        this.constructorData && isNaN(Number(f)))
                            y.pathname = `/seller/data/${this.constructorData.supplierID}`,
                            f = this.constructorData.supplierID;
                        else if (this.constructorData && !isNaN(Number(f)) && (null == (s = this.constructorData.urlPath) ? void 0 : s.length) > 0) {
                            const e = window.location.pathname.replace(f, this.constructorData.urlPath).replace("/data", "") + y.search;
                            b.replaceState(window.history.state, document.title, e)
                        }
                        const d = new URLSearchParams(y.search);
                        if (this.isPreview = d.get("preview"),
                        this.isPreview) {
                            let e = function() {
                                return (0,
                                Oe.urlStaticBasket)(`constructor-api/shops/moderation/${f}.json`, 0)
                            };
                            document.body.classList.add("body--no-click");
                            const t = await m.fetchStatic("", {}, e);
                            this.constructorData = t
                        }
                        if ((null == (a = null == (i = this.constructorData) ? void 0 : i.logo) ? void 0 : a.url) && ((null == (o = wb.global) ? void 0 : o.settings.switches.newAndOldSellerLogo) || (null == (l = wb.global) ? void 0 : l.settings.switches.newSellerLogo))) {
                            const e = new Image;
                            e.src = null == (u = null == (c = this.constructorData) ? void 0 : c.logo) ? void 0 : u.url,
                            e.onload = () => {
                                this.isSquareLogo = !0
                            }
                            ,
                            e.onerror = () => {
                                this.isSquareLogo = !1
                            }
                        } else
                            this.isSquareLogo = !1
                    }
                    this.xInfo = await g.getCurrentXInfoWithClustersAndVectorsAsync();
                    const v = Number(f);
                    if (isNaN(v))
                        return r.redirected = !0,
                        b.moveTo404Async();
                    this.seller !== v && await this._loadBrandMenu(v),
                    this.seller && (this.currentMenuItem = null == (d = this.catalogMenu) ? void 0 : d.getCurrentMenuItem(y),
                    this.xData = new this.modules.XCatalogData(null == (h = this.currentMenuItem) ? void 0 : h.query,null == (p = this.currentMenuItem) ? void 0 : p.shard,"Seller")),
                    r.cancelRequest = null != this.xData
                }
                async onActionExecuting() {
                    if (this.xData && this.xInfo) {
                        let e = this.modules.QueryHelper.getInitialParams()
                          , {sort: t=this.modules.SorterModel.getSortFromCache, page: r=1} = e
                          , n = ( (e, t) => {
                            var r = {};
                            for (var n in e)
                                $e.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                            if (null != e && Le)
                                for (var n of Le(e))
                                    t.indexOf(n) < 0 && xe.call(e, n) && (r[n] = e[n]);
                            return r
                        }
                        )(e, ["sort", "page"]);
                        const s = new this.modules.QueryHelper({
                            sort: t,
                            page: r,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(n)
                        }).getQueryStringForCatalog()
                          , i = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: a} = await i.loadGoodsAsync(s);
                        this.products = a,
                        this.sort = t
                    }
                }
                async onActionExecuted(e) {
                    var t, r, n, s, i, a, o, l, c, u;
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const d = null == (t = this.catalogMenu) ? void 0 : t.getSitePathItems(this.currentMenuItem)
                      , h = {
                        mainVersion: 0,
                        type: x.A.seller,
                        model: {
                            sellerId: null == (n = null == (r = this.catalogMenu) ? void 0 : r.sellerData) ? void 0 : n.id,
                            sellerInfo: null == (s = this.catalogMenu) ? void 0 : s.getSellerInfo(),
                            xData: this.xData,
                            rootMenuItem: null == (i = this.catalogMenu) ? void 0 : i.getRootNode(this.currentMenuItem),
                            currentMenuItem: this.currentMenuItem,
                            hasSelectedChild: !1,
                            sitePathItems: d,
                            catalogMenu: null == (a = this.catalogMenu) ? void 0 : a.getCatalogMenu(d),
                            emptyCatalogLink: null == (o = this.currentMenuItem) ? void 0 : o.url,
                            tagsUrl: null == (l = this.currentMenuItem) ? void 0 : l.url,
                            products: this.products,
                            promoMenuV2: !1,
                            title: null == (c = this.currentMenuItem) ? void 0 : c.title,
                            containerClass: "catalog-page catalog-page--brand",
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,null == (u = this.currentMenuItem) ? void 0 : u.url),
                            constructorData: this.constructorData,
                            isPreview: this.isPreview,
                            isEapteka: this.isEapteka,
                            isSquareLogo: this.isSquareLogo
                        }
                    };
                    Object.assign(e.responseData, {
                        data: h
                    })
                }
                async _initAsync() {
                    const e = (0,
                    p.s)()
                      , [t,r,n,s,i] = await Promise.all([e.loadModuleAsync("xCatalogData"), e.loadModuleAsync("queryHelper"), e.loadModuleAsync("xCatalogProvider"), e.loadModuleAsync("sorterModel"), e.loadServiceAsync("suppliersService")]);
                    this.modules = {
                        XCatalogData: t.XCatalogData,
                        QueryHelper: r,
                        xCatalogProvider: n,
                        SorterModel: s.CatalogSorterModel
                    },
                    this.catalogMenu = new Ae(this.modules),
                    this.initialized = !0
                }
                async _loadBrandMenu(e) {
                    var t, r;
                    await (null == (t = this.catalogMenu) ? void 0 : t.initMenu(e, this.xInfo)),
                    this.seller = (null == (r = this.catalogMenu) ? void 0 : r.sellerData) ? e : void 0
                }
            }
              , je = Object.defineProperty
              , Ne = (e, t, r) => ( (e, t, r) => t in e ? je(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var Ue = class {
                constructor(e) {
                    Ne(this, "timeout"),
                    this.timeout = e
                }
                onBeforeActionExecuting(e, t, r) {
                    r.timeout = this.timeout
                }
            }
              , We = Object.defineProperty
              , He = (e, t, r) => ( (e, t, r) => t in e ? We(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var qe = class {
                constructor() {
                    He(this, "model")
                }
                get $getService() {
                    return (0,
                    m.D)().getService
                }
                get $services() {
                    return (0,
                    s.Z1)()
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                onBeforeActionExecuting() {
                    this.model = void 0
                }
                async onActionExecuting() {
                    await Promise.all([await this.$getService("searchByImageService"), await this.$getService("searchByImageFilters")]);
                    const e = this.$router.routeParameters.imageId;
                    this.model = await this.$services.searchByImageService.getSearchResult(e)
                }
                onActionExecuted(e) {
                    e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, this.model)
                }
            }
            ;
            var Ve = class {
                get $httpClient() {
                    return (0,
                    Q.getHttpClient)()
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                get $user() {
                    return (0,
                    i.u)()
                }
                async onActionExecuted(e) {
                    var t;
                    const r = (0,
                    n.c)();
                    e.responseData || (e.responseData = {});
                    const s = null == (t = r.queryParams) ? void 0 : t.get("searchQuery");
                    if (s) {
                        const t = this._getSearchCatalogLink(s)
                          , r = `/recommendationssearch?searchQuery=${new URLSearchParams({
                            searchQuery: s
                        })}`
                          , n = await this._loadGoods(s);
                        if (!Array.isArray(n) || 0 == n.length)
                            return this.$router.moveTo404Async();
                        const i = {
                            type: x.A.recommendationsSearch,
                            searchQuery: s,
                            targetUrl: "IM",
                            linkToSearchCatalog: t,
                            originalUrl: r,
                            products: n
                        };
                        Object.assign(e.responseData, i)
                    }
                }
                _getSearchCatalogLink(e) {
                    let t = e && encodeURIComponent(e.replace(/<\/?[^>]+>/gi, "").trim()) || "";
                    return `${wb.urlHelper.xSearchBase}?search=${t}`
                }
                async _loadGoods(e) {
                    try {
                        const t = (0,
                        v.a)()
                          , r = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e)}`
                          , n = t.getRecommendationsSplitterHeaders()
                          , s = await this.$httpClient.fetchJSON(r, {
                            credentials: "omit",
                            headers: n
                        }, {
                            timeout: 5e3
                        });
                        if (!((null == s ? void 0 : s.length) > 0))
                            return null;
                        const i = await wb.xnm.getCatalogCards(s, !1, !1);
                        return s.reduce(( (e, t) => {
                            var r;
                            return (null == (r = i[t]) ? void 0 : r.id) && e.push(wb.xnm.convertXProductToSpaCatalogProduct(i[t])),
                            e
                        }
                        ), [])
                    } catch (e) {
                        return null
                    }
                }
            }
              , ze = Object.defineProperty
              , Ge = (e, t, r) => ( (e, t, r) => t in e ? ze(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var Ke = class {
                constructor() {
                    Ge(this, "goods"),
                    Ge(this, "type"),
                    Ge(this, "forproduct"),
                    Ge(this, "result")
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                async onActionExecuting(e, t, r) {
                    var n, s, i, a, o, l;
                    this.goods = this.type = this.forproduct = this.result = void 0;
                    const c = (0,
                    m.D)()
                      , u = await c.getServiceOf("recommendationsCatalogService")
                      , d = null == (n = this.$router.queryParams) ? void 0 : n.get("type")
                      , h = null != (a = null == (i = null == (s = this.$router.queryParams) ? void 0 : s.get("forproduct")) ? void 0 : i.parseIntOrDefault()) ? a : 0
                      , p = u.getType(d);
                    if (p) {
                        const e = await u.getRecommendations(p.id, h);
                        if (e) {
                            let t;
                            if ((null == (o = e.goods) ? void 0 : o.length) ? t = e.goods : (null == (l = e.nms) ? void 0 : l.length) && (t = await this._loadGoods(e.nms)),
                            Array.isArray(t) && t.length > 0)
                                return this.type = p,
                                this.goods = t,
                                this.result = e,
                                void (this.forproduct = h)
                        }
                    }
                    r.redirected = !0,
                    this.$router.moveTo404Async()
                }
                async onActionExecuted(e) {
                    var t, r, n, s;
                    e.responseData || (e.responseData = {});
                    const {type: i, goods: a, result: o, forproduct: l} = this
                      , c = (null == i ? void 0 : i.id) || 0
                      , u = {
                        type: c,
                        targetInfo: {
                            targetUrl: (null == i ? void 0 : i.targetUrl) || ""
                        },
                        products: a,
                        statistic: {
                            type: c,
                            source: null == o ? void 0 : o.source,
                            recommendationsCount: null != (s = null != (n = null == (t = null == o ? void 0 : o.goods) ? void 0 : t.length) ? n : null == (r = null == o ? void 0 : o.nms) ? void 0 : r.length) ? s : 0,
                            productsCount: (null == a ? void 0 : a.length) || 0,
                            parentProduct: Number(l),
                            isVisualSimilarFromRecService: null == o ? void 0 : o.isVisualSimilarFromRecService
                        },
                        nmId: Number(l),
                        title: (null == i ? void 0 : i.title) || ""
                    };
                    Object.assign(e.responseData, u)
                }
                async _loadGoods(e) {
                    try {
                        const t = await wb.xnm.getCatalogCards(e, !1, !1);
                        return e.reduce(( (e, r) => {
                            var n;
                            return (null == (n = t[r]) ? void 0 : n.id) && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[r])),
                            e
                        }
                        ), [])
                    } catch (e) {
                        return []
                    }
                }
            }
              , Qe = r(56284);
            var Je = class {
                get $recentViews() {
                    return (0,
                    j.M)().recentViews
                }
                get $httpClient() {
                    return (0,
                    Q.getHttpClient)()
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                get $auth() {
                    return (0,
                    h.c)()
                }
                async onActionExecuted(e) {
                    e.responseData || (e.responseData = {});
                    const t = await this._loadNms();
                    if (0 == t.length)
                        return this.$router.moveTo404Async();
                    const r = await this._loadGoods(t);
                    if (0 == r.length)
                        return this.$router.moveTo404Async();
                    const n = {
                        title: wb.i18n.t("recommendations.viewed"),
                        products: r,
                        type: Qe.x.RECENT,
                        targetInfo: {
                            targetUrl: "RG"
                        },
                        statistic: {
                            recommendationsCount: t.length,
                            productsCount: r.length
                        }
                    };
                    Object.assign(e.responseData, n)
                }
                async _loadNms() {
                    var e, t, r, n;
                    let s = null != (t = null == (e = this.$recentViews.get()) ? void 0 : e.nm) ? t : [];
                    if (this.$auth.isAuth)
                        try {
                            const e = await this.$httpClient.fetchJSON("/webapi/goods/visited-nm", {
                                method: "POST",
                                body: null
                            }, {
                                timeout: 2e3
                            });
                            (null == (n = null == (r = null == e ? void 0 : e.value) ? void 0 : r.nmsArr) ? void 0 : n.length) > 0 && (s = e.value.nmsArr)
                        } catch (e) {
                            console.error(e)
                        }
                    return s
                }
                async _loadGoods(e) {
                    try {
                        const [t,r] = await Promise.all([wb.xnm.getCatalogCards(e, !0, !0), wb.xnm.getSMergerXnmProducts(e)])
                          , n = r.reduce(( (e, t) => (e[t.id] = t.logs,
                        e)), {})
                          , s = r.reverse().map((e => e.id));
                        return e.reduce(( (e, r) => {
                            var s;
                            if (null == (s = t[r]) ? void 0 : s.id) {
                                const s = wb.xnm.convertXProductToSpaCatalogProduct(t[r]);
                                s.logs = n[r],
                                s.isAdv = !!s.logs,
                                e.push(s)
                            }
                            return e
                        }
                        ), []).sort(( (e, t) => s.indexOf(t.cod1S) - s.indexOf(e.cod1S)))
                    } catch (e) {
                        return []
                    }
                }
            }
              , Ye = Object.defineProperty
              , Xe = (e, t, r) => ( (e, t, r) => t in e ? Ye(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var Ze = class {
                constructor(e) {
                    Xe(this, "defaultValue"),
                    this.defaultValue = e
                }
                onBeforeActionExecuting(e, t, r) {
                    r.defaultValue = this.defaultValue
                }
            }
            ;
            var et = class {
                get $router() {
                    return (0,
                    n.c)()
                }
                get $services() {
                    return (0,
                    s.Z1)()
                }
                async onActionExecuting(e, t, r) {
                    const {userInfo: n} = await this.$services.userData.getUserDataAsync();
                    n.isAuthenticated || (r.redirected = !0,
                    this.$router.moveToSignIn({
                        query: {
                            returnUrl: window.location.href
                        }
                    }, !0))
                }
            }
              , tt = r(31332)
              , rt = Object.defineProperty
              , nt = (e, t, r) => ( (e, t, r) => t in e ? rt(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var st = class {
                constructor(e=[], t=[], r=[]) {
                    nt(this, "exceptionLocales"),
                    nt(this, "checkBalanceLocales"),
                    nt(this, "checkCurrencyLocales"),
                    nt(this, "currentLocale", wb.settings.currentLocale),
                    nt(this, "isInvalidLocale", !1),
                    this.exceptionLocales = e,
                    this.checkBalanceLocales = t,
                    this.checkCurrencyLocales = r
                }
                get $router() {
                    return (0,
                    n.c)()
                }
                get $user() {
                    return (0,
                    i.u)()
                }
                get $userEnv() {
                    return (0,
                    tt.x)()
                }
                get isWalletPurchaseRoute() {
                    return "SpaWalletPurchaseEntrypoint" === this.$router.currentRoute.name
                }
                async onBeforeActionExecuting() {
                    this.isInvalidLocale = !1
                }
                async onActionExecuting() {
                    if (window.location.pathname.includes("b2b") && "ru" !== this.currentLocale)
                        throw new NotFoundError;
                    if (this.exceptionLocales.includes(this.currentLocale)) {
                        if (!this.isWalletPurchaseRoute)
                            throw new NotFoundError;
                        if (wb.settings.walletTypeCode > 0 && "RUB" === this.$userEnv.currency)
                            return void (this.isInvalidLocale = !0);
                        if (this.checkBalanceLocales.includes(this.currentLocale)) {
                            const e = await this.$user.getBalance({
                                timeout: 2e3
                            });
                            if (0 === (null == e ? void 0 : e.totalBalance))
                                throw new NotFoundError
                        }
                        if (this.checkCurrencyLocales.includes(this.currentLocale)) {
                            const e = this.$user.getCurrency();
                            if (!e || "USD" === e)
                                throw new NotFoundError
                        }
                    }
                }
                async onActionExecuted(e) {
                    e.responseData && (e.responseData.isInvalidLocale = this.isInvalidLocale)
                }
            }
            ;
            var it = class {
                async onBeforeActionExecuting(e, t) {
                    const r = (0,
                    s.Z1)().cartService.publicBasketApiUrl;
                    t.credentials = "include";
                    const n = new URL(r,window.location.origin);
                    e.port = n.port,
                    e.pathname = (n.pathname + e.pathname).replace("//", ""),
                    e.host = n.host
                }
            }
            ;
            var at = class {
                onBeforeActionExecuting(e, t) {
                    const r = (0,
                    i.u)();
                    t.body || (t.body = new URLSearchParams),
                    t.body.append("currency", r.getCurrency())
                }
            }
            ;
            var ot = class {
                get $router() {
                    return (0,
                    n.c)()
                }
                get $services() {
                    return (0,
                    s.Z1)()
                }
                async onActionExecuting(e, t, r) {
                    var n, s, i;
                    const a = (0,
                    h.c)();
                    if (a.isAuth && a.jwt) {
                        let e, t = null != (i = (null == (n = this.$router.queryParams) ? void 0 : n.get("ReturnUrl")) || (null == (s = this.$router.queryParams) ? void 0 : s.get("returnUrl"))) ? i : "/lk";
                        try {
                            e = new URL(t,window.location.origin)
                        } catch (e) {}
                        (null == e ? void 0 : e.hostname) !== window.location.hostname && (t = "/lk"),
                        r.redirected = !0,
                        this.$router.moveTo(t)
                    }
                }
            }
              , lt = Object.defineProperty
              , ct = (e, t, r) => ( (e, t, r) => t in e ? lt(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var ut = class {
                constructor() {
                    ct(this, "getSavedOptionsTask")
                }
                async onActionExecuting(e) {
                    const t = (0,
                    s.Z1)()
                      , r = (0,
                    n.c)()
                      , i = (0,
                    h.c)();
                    if (!(e.searchParams.get("redirect_uri") && e.searchParams.get("client_id") && e.searchParams.get("scope") && e.searchParams.get("code_challenge") && (e => {
                        const t = e.searchParams.get("redirect_uri");
                        return /^((http|https):\/\/)/.test(null != t ? t : "")
                    }
                    )(e)))
                        throw new NotFoundError;
                    this.toggleHideClass(!0),
                    i.isAuth ? e.searchParams.get("reauth") ? this.getSavedOptionsTask = Promise.resolve([]) : this.getSavedOptionsTask = t.apiUserStorage.getData([{
                        path: "wb_oauth_saved_options"
                    }], {
                        timeout: 1200
                    }) : r.moveToSignIn({
                        query: {
                            returnUrl: window.location.href
                        }
                    }, !1)
                }
                async onActionExecuted(e) {
                    var t;
                    const r = (0,
                    h.c)()
                      , n = (0,
                    b.d)();
                    if (!r.isAuth)
                        return;
                    const s = await this.getSavedOptionsTask;
                    if (s) {
                        if (null == s ? void 0 : s.length)
                            try {
                                return void (e.responseData = JSON.parse(null != (t = n.base64.decode(s[0].file)) ? t : "[]"))
                            } catch (e) {}
                        e.responseData = []
                    }
                }
                toggleHideClass(e) {
                    const t = document.querySelector("header")
                      , r = document.querySelector("footer")
                      , n = document.querySelector(".j-navbar-mobile")
                      , s = document.querySelector(".j-fixed-block")
                      , i = document.querySelector("body");
                    t && r && n && (e ? t.classList.add("hide") : t.classList.remove("hide"),
                    e ? r.classList.add("hide") : r.classList.remove("hide"),
                    e ? n.classList.add("hide") : n.classList.remove("hide"),
                    window.self !== window.top && (null == s || s.classList.toggle("hide", e),
                    null == i || i.classList.toggle("body--empty-center", e)))
                }
            }
            ;
            var dt = class {
                constructor(e) {
                    this.redirectTo = e
                }
                async onBeforeActionExecuting(e, t, r) {
                    const s = (0,
                    n.c)();
                    r.redirected = !0,
                    s.moveTo(this.redirectTo)
                }
            }
            ;
            var ht = class {
                async onBeforeActionExecuting(e) {
                    e.searchParams.set("cultureUI", wb.currentLanguage)
                }
            }
              , pt = r(13808)
              , mt = r(2358)
              , bt = Object.defineProperty
              , gt = (e, t, r) => ( (e, t, r) => t in e ? bt(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            var yt = class {
                constructor() {
                    gt(this, "path"),
                    this.path = ""
                }
                async onBeforeActionExecuting(e) {
                    this.path = e.pathname.replace("/webapi/servicesdata", "/services");
                    const t = pt.m.legalRedirectUrl(this.path);
                    mt.Xd[this.path] && wb.spa.redirect(t)
                }
            }
              , ft = Object.defineProperty
              , vt = (e, t, r) => ( (e, t, r) => t in e ? ft(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const wt = {
                ge: ["pravila-polzovaniya-torgovoy-ploshchadkoy", "user-agreement-for-wb-services"],
                tj: ["pravila-polzovaniya-torgovoy-ploshchadkoy", "politika-konfidentsialnosti", "account-linking-terms"],
                tm: ["politika-konfidentsialnosti"]
            };
            var _t = class {
                constructor() {
                    vt(this, "pageName"),
                    vt(this, "includeUrl"),
                    this.pageName = ""
                }
                async onBeforeActionExecuting(e, t, r) {
                    this.includeUrl = !1,
                    this._checkCurrentPage(e),
                    this.includeUrl && (r.cancelRequest = () => !0)
                }
                async onActionExecuted(e) {
                    this.includeUrl && (e.responseData = {
                        useLegalApi: !0,
                        servicePage: this.pageName
                    })
                }
                _checkCurrentPage(e) {
                    for (const t of wt[wb.settings.currentLocale] || [])
                        if (-1 !== e.pathname.indexOf(t)) {
                            this.includeUrl = !0,
                            this.pageName = t;
                            break
                        }
                }
            }
            ;
            const St = "OK";
            var Ct = class {
                get $router() {
                    return (0,
                    n.c)()
                }
                get $helper() {
                    return (0,
                    b.d)()
                }
                get $userEnv() {
                    return (0,
                    tt.x)()
                }
                get $user() {
                    return (0,
                    i.u)()
                }
                get $moduleLoader() {
                    return (0,
                    p.s)()
                }
                get $services() {
                    return (0,
                    s.Z1)()
                }
                get $auth() {
                    return (0,
                    h.c)()
                }
                async onBeforeActionExecuting(e, t, r) {
                    if ("SpaWalletPurchaseEntrypoint" !== this.$router.currentRoute.name)
                        return;
                    try {
                        await this.$user.getBalance({
                            force: !0,
                            timeout: 2e3
                        })
                    } catch (e) {
                        if ("object" == typeof e && null !== e && "isUnauthorize"in e && e.isUnauthorize || !this.$auth.isAuth)
                            return;
                        throw new NotFoundError
                    }
                    if (0 !== wb.settings.walletTypeCode && (await wb.spa.restoreB2BState(!0),
                    wb.settings.b2bMode))
                        return r.redirected = !0,
                        void this.$router.moveTo("/lk#no-wallet-for-b2b", !0);
                    if (!await wb.user.check2FAEnabled())
                        return;
                    await this.$moduleLoader.loadServiceAsync("walletAuthService"),
                    await this.$services.walletAuthService.initAsync();
                    const n = await this.$services.walletAuthService.checkToken();
                    (null == n ? void 0 : n.status) !== St && (r.redirected = !0,
                    this.$router.moveTo("/lk#check2fa", !0))
                }
            }
            ;
            var It = class {
                get $router() {
                    return (0,
                    n.c)()
                }
                async onActionExecuting(e, t, r) {
                    (0,
                    j.M)().isResaleEnabled({
                        isSeller: !0
                    }) || (r.redirected = !0,
                    this.$router.moveTo("/lk"))
                }
            }
            ;
            var kt = class {
                get $router() {
                    return (0,
                    n.c)()
                }
                async onActionExecuting(e, t, r) {
                    (0,
                    j.M)().isResaleSupplierLKQuestionsEnabled() || (r.redirected = !0,
                    this.$router.moveTo("/lk"))
                }
            }
              , Pt = Object.defineProperty
              , Mt = (e, t, r) => ( (e, t, r) => t in e ? Pt(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const Tt = new a
              , Et = new u
              , Dt = new Ze({
                isNetworkError: !0
            })
              , At = new et
              , Ot = new Ct
              , Bt = new It
              , Lt = new kt;
            class $t {
                constructor() {
                    Mt(this, "globalPipelines"),
                    Mt(this, "map");
                    const e = (0,
                    n.c)()
                      , t = new Map;
                    this.globalPipelines = [new w],
                    t.set("SpaHomeData", {
                        pipelines: [Et]
                    }),
                    t.set("SpaSignInData", {
                        pipelines: [Et, new ot]
                    }),
                    t.set("SpaRefundData", {
                        pipelines: [At, Dt]
                    }),
                    t.set("SpaProductCardData", {
                        pipelines: [Et, new C]
                    }),
                    t.set("SpaGetGroupedDeliveries", {
                        pipelines: [At, Et, new Ue(1e3)],
                        fallback: () => ({
                            options: {}
                        })
                    }),
                    t.set("SpaHeadArchivePositions", {
                        pipelines: [At, Dt],
                        fallback: () => ({
                            limit: 150,
                            filters: {
                                type: "all",
                                status: 0
                            }
                        })
                    }),
                    t.set("SpaBasketData", {
                        maxTriesCount: 0,
                        pipelines: [Dt, Tt, new f, new Ue(4e3)]
                    }),
                    t.set("SpaEmailedConfirmData", {
                        pipelines: [new d, new u(( () => {
                            const {targetRoute: t} = e;
                            return "SpaConfirmEmailedEntrypoint" != t && "SpaChangeEmailEntrypoint" != t
                        }
                        ))]
                    }),
                    t.set("SpaWalletPurchaseData", {
                        pipelines: [At, Ot, Tt, new st(["by", "kz", "kg", "am", "uz", "ge", "tj", "global"],["ge"],["global", "tj"]), Dt, new at]
                    }),
                    t.set("SpaCustomerReceiptData", {
                        pipelines: [Et, Tt, new st(["ge", "tj"]), Dt]
                    }),
                    t.set("SpaPersonalCabinetData", {
                        pipelines: [Dt, Tt, At]
                    }),
                    t.set("SpaTravelLkData", {
                        pipelines: [Et]
                    }),
                    t.set("SpaBasketBuyItNowData", {
                        maxTriesCount: 0,
                        pipelines: [Tt, new f, Dt, new Ue(3e3)]
                    }),
                    t.set("SpaSearchData", {
                        pipelines: [new te]
                    }),
                    t.set("SpaRecommendationsSearchCatalogData", {
                        pipelines: [Et, new Ve]
                    }),
                    t.set("SpaRecommendationsCatalogData", {
                        pipelines: [Et, new Ke]
                    }),
                    t.set("SpaRecentCatalogData", {
                        pipelines: [Et, new Je]
                    }),
                    t.set("SpaWlArrivedData", {
                        pipelines: [Et, new A, At]
                    }),
                    t.set("SpaCatalogData", {
                        pipelines: [new V, new K]
                    }),
                    t.set("SpaPromotionsCatalogData", {
                        pipelines: [new ce]
                    }),
                    t.set("SpaSellerCatalogData", {
                        pipelines: [new Fe]
                    }),
                    t.set("SpaBrandsData", {
                        pipelines: [new De]
                    }),
                    t.set("SpaBrandsPreviewData", {
                        pipelines: [new De(!0)]
                    }),
                    t.set("SpaFavoritesData", {
                        pipelines: [Et, new L, At]
                    }),
                    t.set("SpaSearchByImageData", {
                        pipelines: [Et, new qe]
                    }),
                    t.set("SpaOrderConfirmedData", {
                        fallback: e => {
                            if (e) {
                                const t = e.url.searchParams.get("orderId");
                                if (t) {
                                    const e = sessionStorage.getItem(`confirmed_order_${t}`);
                                    if (e)
                                        return {
                                            data: JSON.parse(e)
                                        }
                                }
                            }
                            return {
                                data: {
                                    broken: !0,
                                    order: {}
                                }
                            }
                        }
                        ,
                        pipelines: [Tt, new it]
                    }),
                    t.set("SpaOrderThankYouEntrypoint", {
                        fallback: () => ({})
                    }),
                    t.set("SpaPaymentFailData", {
                        fallback: () => ({})
                    }),
                    t.set("SpaFavoriteBrandsData", {
                        pipelines: [At, Dt]
                    }),
                    t.set("SpaHistoryRefundsData", {
                        pipelines: [At, Dt]
                    }),
                    t.set("SpaMyCommunicationsData", {
                        pipelines: [At, Dt, Et, new dt("/#wbchat")]
                    }),
                    t.set("SpaMyClaimsData", {
                        pipelines: [At, Dt]
                    }),
                    t.set("SpaMyFeedbacksData", {
                        pipelines: [At, Dt]
                    }),
                    t.set("SpaC2CAdData", {
                        pipelines: [At, Dt, Et, Bt]
                    }),
                    t.set("SpaC2COrdersData", {
                        pipelines: [At, Dt, Et, Bt]
                    }),
                    t.set("SpaC2CProductData", {
                        pipelines: [At, Dt, Et, Bt]
                    }),
                    t.set("SpaC2CQuestionsData", {
                        pipelines: [At, Dt, Et, Bt, Lt]
                    }),
                    t.set("SpaNotificationsData", {
                        pipelines: [At, new dt("/lk#notifications"), Dt]
                    }),
                    t.set("SpaOAuthSignInData", {
                        pipelines: [Et, new ut, Tt]
                    }),
                    t.set("SubscriptionPageData", {
                        pipelines: [Et, Tt, new st(["ge", "tj"])]
                    }),
                    t.set("ServicePagesData", {
                        pipelines: [new st, new _t, new o, new ht, new yt]
                    }),
                    t.set("PressCenterData", {
                        pipelines: [new o, new ht]
                    }),
                    t.set("SpaGiftCertificatesData", {
                        pipelines: [Dt, new Ue(2e3)]
                    }),
                    this.map = t
                }
                extend(e) {
                    var t;
                    const r = e && this.map.get(e) || {};
                    return r.pipelines = (null != (t = r.pipelines) ? t : []).concat(this.globalPipelines),
                    r
                }
                static richPrototype({prototype: e}) {
                    Object.setPrototypeOf($t.prototype, e)
                }
                static factory() {
                    return new $t
                }
            }
            var xt = $t
        },
        2427: function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            "use strict";
            var _wildberries_http_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(76904)
              , _wildberries_http_client__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_wildberries_http_client__WEBPACK_IMPORTED_MODULE_0__)
              , _wildberries_analytics__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(51799)
              , app_loadReactApp__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(64852)
              , features_core_helpers_seoHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18091)
              , features_core_helpers_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(81499)
              , features_core_helpers_businessHelpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(55757)
              , shared_utils_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(5977)
              , _helpers_routerHelpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(52988)
              , _constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(31753)
              , _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(95449)
              , _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(88294)
              , _extensions_routeExtensions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(29595)
              , _routerState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(88846)
              , __defProp = Object.defineProperty
              , __defProps = Object.defineProperties
              , __getOwnPropDescs = Object.getOwnPropertyDescriptors
              , __getOwnPropSymbols = Object.getOwnPropertySymbols
              , __hasOwnProp = Object.prototype.hasOwnProperty
              , __propIsEnum = Object.prototype.propertyIsEnumerable
              , __defNormalProp = (e, t, r) => t in e ? __defProp(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , __spreadValues = (e, t) => {
                for (var r in t || (t = {}))
                    __hasOwnProp.call(t, r) && __defNormalProp(e, r, t[r]);
                if (__getOwnPropSymbols)
                    for (var r of __getOwnPropSymbols(t))
                        __propIsEnum.call(t, r) && __defNormalProp(e, r, t[r]);
                return e
            }
              , __spreadProps = (e, t) => __defProps(e, __getOwnPropDescs(t))
              , __objRest = (e, t) => {
                var r = {};
                for (var n in e)
                    __hasOwnProp.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
                if (null != e && __getOwnPropSymbols)
                    for (var n of __getOwnPropSymbols(e))
                        t.indexOf(n) < 0 && __propIsEnum.call(e, n) && (r[n] = e[n]);
                return r
            }
              , __publicField = (e, t, r) => __defNormalProp(e, "symbol" != typeof t ? t + "" : t, r);
            class Router {
                constructor() {
                    __publicField(this, "$localziation"),
                    __publicField(this, "abortController"),
                    __publicField(this, "activeContainer"),
                    __publicField(this, "clientRenderInited"),
                    __publicField(this, "current"),
                    __publicField(this, "currentRoute"),
                    __publicField(this, "customHistory"),
                    __publicField(this, "initTask", new shared_utils_core__WEBPACK_IMPORTED_MODULE_4__.Deferred),
                    __publicField(this, "isLeaving"),
                    __publicField(this, "loadingTemplate"),
                    __publicField(this, "queryParams"),
                    __publicField(this, "referrer"),
                    __publicField(this, "routeParameters"),
                    __publicField(this, "routesDictionary"),
                    __publicField(this, "state", _routerState__WEBPACK_IMPORTED_MODULE_10__.Z.factory()),
                    __publicField(this, "targetRoute"),
                    __publicField(this, "tmplHashes"),
                    __publicField(this, "userIsAuth"),
                    __publicField(this, "viewModelReact"),
                    __publicField(this, "routeExtensions"),
                    __publicField(this, "onHistoryMethodCall", (e => {
                        const {state: t} = e.detail;
                        this.updateLocation(t)
                    }
                    ))
                }
                async init(e) {
                    var t, r, n, s;
                    this.routeExtensions = _extensions_routeExtensions__WEBPACK_IMPORTED_MODULE_9__.A.factory();
                    const {moveTo404: i, moveTo500: a} = (0,
                    _helpers_routerHelpers__WEBPACK_IMPORTED_MODULE_5__.V)();
                    this.customHistory = (new _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_8__.A).tryInitFromCache(window.history.state),
                    this.abortController = new AbortController,
                    this.routeParameters = {},
                    this.clientRenderInited = !1,
                    this.referrer = window.originReferer,
                    this.updateLocation(window.history.state);
                    let o = null == (t = this.findRoute(window.location.pathname)) ? void 0 : t.name;
                    if (!o) {
                        try {
                            const e = (0,
                            _wildberries_http_client__WEBPACK_IMPORTED_MODULE_0__.getHttpClient)()
                              , t = await e.fetchJSON(`/webapi/check-redirect${window.location.pathname}${window.location.search}`, {}, {
                                useProccessResponse: !0
                            });
                            (null == t ? void 0 : t.redirect) && (o = null == (r = this.findRoute(window.location.pathname)) ? void 0 : r.name)
                        } catch (e) {}
                        if (!o)
                            return this.bindEvents(),
                            i()
                    }
                    this.currentRoute = this.routesDictionary[o],
                    this.targetRoute = o,
                    this.bindEvents();
                    const l = this.routesDictionary[o].useSSR;
                    return l || (this.current = $.templates["preview_" + o] ? "preview_" + o : _constants__WEBPACK_IMPORTED_MODULE_6__.Rg),
                    (null == (n = window.history.state) ? void 0 : n.name) || this._replaceState({
                        name: o
                    }, document.title, window.location.href),
                    this.loadingTemplate = o,
                    null == (s = this.initTask) || s.resolve(null),
                    l && null != e ? this.initSSR(e, o) : this.routerTransitionAsync(o, window.location, !0).then((e => Promise.resolve(e))).catch((e => {
                        var t;
                        return console.log(e),
                        e.isCancelled || a(),
                        null == (t = this.initTask) || t.resolve(null),
                        Promise.resolve()
                    }
                    ))
                }
                setData(e, t) {
                    this.routesDictionary = e,
                    this.tmplHashes = t
                }
                get appContainers() {
                    return _constants__WEBPACK_IMPORTED_MODULE_6__.LR
                }
                get previewTemplate() {
                    return _constants__WEBPACK_IMPORTED_MODULE_6__.Rg
                }
                get viewModel() {
                    var e;
                    return null == (e = this.appContainers.find((e => e.containerId == this.activeContainer))) ? void 0 : e.viewModel
                }
                clearNotActiveContainer() {
                    this.appContainers.filter((e => e.containerId !== this.activeContainer)).forEach((e => {
                        var t, r;
                        null !== e.viewModel && ((null == (t = e.viewModel) ? void 0 : t.__modelStatus__) != _constants__WEBPACK_IMPORTED_MODULE_6__.Fq.destroyed && (null == (r = e.viewModel) || r.onBeforeUnrender()),
                        e.viewModel = null)
                    }
                    ))
                }
                move(e, t) {
                    const {move: r} = (0,
                    _helpers_routerHelpers__WEBPACK_IMPORTED_MODULE_5__.V)();
                    r({
                        steps: e,
                        event: t
                    })
                }
                moveTo(e, t=!1, r=!1, n=!1) {
                    const {moveTo: s} = (0,
                    _helpers_routerHelpers__WEBPACK_IMPORTED_MODULE_5__.V)();
                    s({
                        targetLink: e,
                        replaceState: t,
                        forceTransition: r,
                        forceUpdate: n
                    })
                }
                goToRoute(e, t, r=!1) {
                    return window.dispatchEvent(new CustomEvent("spaTransition",{
                        detail: {
                            isFinished: !1,
                            dest: e
                        }
                    })),
                    this.routerTransitionAsync(null == e ? void 0 : e.name, t, !1, r, !0)
                }
                getAppliedEntries() {
                    var e;
                    const t = document && (null == (e = document.currentScript) ? void 0 : e.src);
                    let r;
                    return r = "currentScript"in document ? t.substring(t.indexOf("/j/")) : this.routesDictionary[this.loadingTemplate].requiredModel,
                    Object.keys(this.routesDictionary).filter((e => this.routesDictionary[e].requiredModel === r))
                }
                addState(e, t, r) {
                    var n;
                    this.pushState(__spreadValues({
                        isLocalHandler: !0,
                        name: (null == (n = this.currentRoute) ? void 0 : n.name) || ""
                    }, e), null != t ? t : "", null != r ? r : "")
                }
                replaceState(e, t, r) {
                    var n;
                    this._replaceState(__spreadValues({
                        isLocalHandler: !0,
                        name: (null == (n = this.currentRoute) ? void 0 : n.name) || ""
                    }, e), null != t ? t : "", null != r ? r : "")
                }
                pushState(e, t, r) {
                    var n;
                    const s = _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_8__.A.generateId();
                    e.id = s,
                    window.history.pushState(e, t, r),
                    null == (n = this.customHistory) || n.addItem(e)
                }
                _replaceState(e, t, r) {
                    var n;
                    e.id = _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_8__.A.generateId(),
                    e.title = t,
                    window.history.replaceState(e, "", r),
                    null == (n = this.customHistory) || n.updateCurrentItem(e)
                }
                updateLocation(e) {
                    this.state.location = {
                        pathname: window.location.pathname,
                        search: window.location.search,
                        hash: window.location.hash,
                        state: e
                    }
                }
                initCSR() {
                    const e = Object.create(WbSpaModel.prototype, {
                        router: {
                            value: this
                        }
                    });
                    $.link.appTemplate("#app", e),
                    this.clientRenderInited = !0
                }
                async updateRouteDataExternal(e, t) {
                    var r;
                    t = t || (null == (r = this.currentRoute) ? void 0 : r.name) || "",
                    await this.updateRouteData(t, e)
                }
                async loadRouteDataAsync(e, t=0, r=!1, n=!1) {
                    var s, i, a, o, l, c, u, d, h, p, m;
                    const b = (0,
                    _wildberries_http_client__WEBPACK_IMPORTED_MODULE_0__.getHttpClient)()
                      , g = this.routeExtensions.extend(null == e ? void 0 : e.name);
                    let y = {};
                    try {
                        if (!e) {
                            return {
                                viewData: {},
                                needStateUpdate: !1
                            }
                        }
                        y = {
                            url: new URL(`${(0,
                            _utils__WEBPACK_IMPORTED_MODULE_7__.N)(e, this.routeParameters)}?${null == (s = this.queryParams) ? void 0 : s.toString()}`,window.location.origin),
                            params: {
                                method: "POST"
                            },
                            options: {
                                redirectUnauth: !0,
                                replaceState: !0,
                                includeResponse: !0,
                                timeout: 1e4
                            }
                        },
                        await Promise.all((null != (i = null == g ? void 0 : g.pipelines) ? i : []).map((e => {
                            var r;
                            return null == (r = e.onBeforeActionExecuting) ? void 0 : r.call(e, y.url, y.params, y.options, n, t)
                        }
                        )));
                        const r = [];
                        (null == (a = y.options) ? void 0 : a.cancelRequest) || (null == (o = y.options) ? void 0 : o.redirected) ? r.push(Promise.resolve({})) : r.push(b.fetchJSON(String(y.url), y.params, __spreadProps(__spreadValues({}, y.options), {
                            useProccessResponse: !0
                        }))),
                        r.push(...(null != (l = null == g ? void 0 : g.pipelines) ? l : []).map((e => {
                            var r;
                            return null == (r = e.onActionExecuting) ? void 0 : r.call(e, y.url, y.params, y.options, n, t)
                        }
                        )));
                        const [m] = await Promise.all(r);
                        (null == (c = y.options) ? void 0 : c.redirected) || await Promise.all((null != (u = null == g ? void 0 : g.pipelines) ? u : []).map((e => {
                            var t;
                            return null == (t = e.onActionExecuted) ? void 0 : t.call(e, m, n)
                        }
                        )));
                        let f = m.responseData;
                        (null == (d = y.options) ? void 0 : d.cancelRequest) && (null == g ? void 0 : g.fallback) && (f = null == g ? void 0 : g.fallback(y));
                        return {
                            viewData: f,
                            needStateUpdate: !1,
                            needRouteUpdate: !(null != (p = null == (h = y.options) ? void 0 : h.redirected) && p)
                        }
                    } catch (n) {
                        const s = null != (m = g.maxTriesCount) ? m : 3;
                        if (n.isNotFound || n.isUnauthorize || n.isCancelled || t >= s || r) {
                            if ((null == g ? void 0 : g.fallback) && (n.isCancelled || t >= s)) {
                                return {
                                    viewData: null == g ? void 0 : g.fallback(y),
                                    needStateUpdate: !1
                                }
                            }
                            throw n
                        }
                        return await this.loadRouteDataAsync(e, ++t)
                    }
                }
                async moveTo500Async(e, t) {
                    const {moveTo500: r} = (0,
                    _helpers_routerHelpers__WEBPACK_IMPORTED_MODULE_5__.V)();
                    await r({
                        error: e,
                        payload: t
                    })
                }
                async moveTo404Async() {
                    const {moveTo404: e} = (0,
                    _helpers_routerHelpers__WEBPACK_IMPORTED_MODULE_5__.V)();
                    await e()
                }
                refresh() {
                    const {refresh: e} = (0,
                    _helpers_routerHelpers__WEBPACK_IMPORTED_MODULE_5__.V)();
                    e()
                }
                moveToSignIn(e, t) {
                    const {moveToSignIn: r} = (0,
                    _helpers_routerHelpers__WEBPACK_IMPORTED_MODULE_5__.V)();
                    r({
                        p: e,
                        replaceState: t
                    })
                }
                bindEvents() {
                    const e = (0,
                    _wildberries_analytics__WEBPACK_IMPORTED_MODULE_11__.a)();
                    window.addEventListener("popstate", (t => {
                        var r, n, s, i, a, o;
                        e.updateStatInfo(!1);
                        const {name: l, isLocalHandler: c, title: u} = history.state;
                        if (u && (document.title = u),
                        null != this.routesDictionary[l]) {
                            if (null == (r = this.customHistory) || r.updateCurrent(history.state),
                            window.dispatchEvent(new CustomEvent("spaTransition",{
                                detail: {
                                    isFinished: !1,
                                    dest: {
                                        name: l
                                    }
                                }
                            })),
                            c && (null == (n = this.currentRoute) ? void 0 : n.name) === l)
                                return this.updateRouteParametres(window.location.pathname.substring(1), this.currentRoute),
                                this.updateQueryModel(),
                                null == (i = null == (s = this.viewModel) ? void 0 : s.onHistoryChange) || i.call(s, history.state, null, {
                                    fromPopstate: !0
                                }, this.abortController.signal),
                                null == (o = null == (a = this.viewModelReact) ? void 0 : a.onHistoryChange) || o.call(a, history.state, !0, {
                                    fromPopstate: !0
                                }, this.abortController.signal),
                                void window.dispatchEvent(new CustomEvent("spaTransition",{
                                    detail: {
                                        isFinished: !0,
                                        dest: {
                                            name: l
                                        }
                                    }
                                }));
                            this.targetRoute = l,
                            this.routerTransitionAsync(l)
                        } else
                            window.location.reload()
                    }
                    )),
                    window.addEventListener("mouseup", (t => {
                        const r = t.target.closest("a");
                        if (!r)
                            return !1;
                        return 0 == t.button || 1 == t.which || (e.saveEcomInfo(r),
                        e.updateStatInfo(!0)),
                        !0
                    }
                    )),
                    window.addEventListener("click", (t => {
                        const r = t.target.closest("a");
                        return !((null == r ? void 0 : r.classList.contains("BDC_ReloadLink")) || t.defaultPrevented || t.ctrlKey || t.metaKey) && (null != r && (e.saveEcomInfo(r),
                        r.hasAttribute("target") && "_blank" === r.getAttribute("target") ? e.updateStatInfo(!0) : (e.updateStatInfo(!1),
                        t.preventDefault(),
                        this.moveTo(r.href))),
                        !0)
                    }
                    )),
                    window.addEventListener("pushState", this.onHistoryMethodCall),
                    window.addEventListener("replaceState", this.onHistoryMethodCall),
                    window.addEventListener("popstate", (e => {
                        this.updateLocation(e.state)
                    }
                    ))
                }
                async unmountReact() {
                    const {unmountReactPage: e} = await Promise.all([__webpack_require__.e(63946), __webpack_require__.e(89362), __webpack_require__.e(81774), __webpack_require__.e(93148), __webpack_require__.e(31887), __webpack_require__.e(96042), __webpack_require__.e(48829), __webpack_require__.e(22342), __webpack_require__.e(25020), __webpack_require__.e(43685), __webpack_require__.e(20395), __webpack_require__.e(13808), __webpack_require__.e(35746), __webpack_require__.e(28288), __webpack_require__.e(60486), __webpack_require__.e(76904), __webpack_require__.e(90568), __webpack_require__.e(69203), __webpack_require__.e(64210)]).then(__webpack_require__.bind(__webpack_require__, 40560));
                    e();
                    const t = document.getElementById("app");
                    t && (t.style.display = "")
                }
                async routerTransitionAsync(e, t=window.location, r=!1, n=!1, s=!1) {
                    var i;
                    const {moveTo404: a, moveTo500: o} = (0,
                    _helpers_routerHelpers__WEBPACK_IMPORTED_MODULE_5__.V)()
                      , l = (0,
                    _wildberries_analytics__WEBPACK_IMPORTED_MODULE_11__.a)();
                    this.abortController.abort(),
                    this.abortController = new AbortController;
                    const c = this.abortController.signal
                      , u = this.currentRoute;
                    this.currentRoute = this.routesDictionary[e],
                    e === _constants__WEBPACK_IMPORTED_MODULE_6__.Cv && await a(),
                    (null == u ? void 0 : u.useReact) && !(null == (i = this.currentRoute) ? void 0 : i.useReact) && this.unmountReact(),
                    wb.stat.sendPageView(),
                    l.sendEvent("pageview", {
                        cookies_alert: wb.spa.getMainLayout().cookiePolicy.check() ? 1 : 0
                    });
                    try {
                        if (e === _constants__WEBPACK_IMPORTED_MODULE_6__.Cv)
                            return window.dispatchEvent(new CustomEvent("spaTransition",{
                                detail: {
                                    isFinished: !0,
                                    dest: this.currentRoute
                                }
                            })),
                            window.scrollTo(0, 0),
                            !0;
                        const {viewData: i, needStateUpdate: a, needRouteUpdate: o} = await this.loadRouteData(e, t, r, n, c);
                        return o && this.updateRouteData(e, i, c, s),
                        window.dispatchEvent(new CustomEvent("spaTransition",{
                            detail: {
                                isFinished: !0,
                                dest: this.currentRoute
                            }
                        })),
                        window.scrollTo(0, 0),
                        a
                    } catch (t) {
                        if (t.isNotFound)
                            return a(),
                            !1;
                        if (!t.isCancelled && !t.isUnauthorize && null != t.message && "" != t.message)
                            return console.log(t.message, t),
                            o({
                                error: t,
                                payload: {
                                    method: "routerTransitionAsync",
                                    destRoute: e,
                                    current: window.location.toString(),
                                    initial: r,
                                    forced: n
                                }
                            }),
                            !1;
                        throw t
                    }
                }
                findRoute(e) {
                    var t;
                    const r = e.substring(1).split("/")
                      , n = e.substring(1);
                    let s = null != (t = Object.keys(this.routesDictionary).filter((e => {
                        const t = this.routesDictionary[e];
                        return null == t.routePathSegments ? t.path === n : ("SpaCatalogEntrypoint" !== t.name || ".aspx" !== n.slice(-5)) && t.routePathSegments.every(( (e, t) => {
                            var n;
                            return e.isParameter ? !(null != (n = null == e ? void 0 : e.isOptional) && !n) || r[t] : e.content === r[t]
                        }
                        ))
                    }
                    )).map((e => this.routesDictionary[e]))) ? t : [];
                    if (s.length > 1) {
                        const e = e => {
                            var t, r;
                            return null != (r = null == (t = e.routePathSegments) ? void 0 : t.some((e => e.isCatchAll))) && r
                        }
                        ;
                        s.sort(( (t, r) => Number(e(t)) - Number(e(r)))),
                        s = s.filter((e => "SpaCatalogEntrypoint" !== e.name))
                    }
                    return s[0]
                }
                async initSSR(e, t) {
                    var r, n, s, i, a, o, l, c;
                    const u = (0,
                    _wildberries_analytics__WEBPACK_IMPORTED_MODULE_11__.a)()
                      , d = (0,
                    features_core_helpers_helpers__WEBPACK_IMPORTED_MODULE_2__.d)();
                    this.currentRoute = this.routesDictionary[t];
                    const h = this.currentRoute.requiredModel ? d.loadJsAsync(this.currentRoute.requiredModel) : Promise.resolve()
                      , p = this.loadTemplateAsync(t);
                    this.updateQueryModel(),
                    this.updateRouteParametres(window.location.pathname.substring(1), this.routesDictionary[t]);
                    try {
                        await Promise.all([p, h]);
                        const m = wb.spa.getViewModelByName(t)
                          , b = m ? new m(e,t) : Object.create(WbSpaModel.prototype, {});
                        b.fromSSR = !0;
                        const g = null != (n = null == (r = this.currentRoute) ? void 0 : r.targetContainer) ? n : 0
                          , y = this.appContainers.find((e => e.containerId == g));
                        $.observable(y).setProperty({
                            viewModel: b
                        }),
                        $.observable(this).setProperty({
                            activeContainer: g
                        });
                        const f = new d.Deferred;
                        await (null == (i = (s = this.viewModel).onBeforeRender) ? void 0 : i.call(s, e, f.promise)),
                        $.link(!0, "#app", this.viewModel),
                        await d.nextTick(),
                        null == (o = (a = this.viewModel).onAfterRender) || o.call(a, {
                            data: e
                        }),
                        wb.stat.sendPageView();
                        const v = null == (c = (l = this.viewModel).getScreenName) ? void 0 : c.call(l);
                        v && u.sendEvent("Screen_V", {
                            name: v
                        })
                    } catch (e) {
                        console.error(e.message)
                    }
                }
                async loadRouteData(e, t, r, n, s) {
                    var i, a, o, l, c, u;
                    const d = (0,
                    features_core_helpers_businessHelpers__WEBPACK_IMPORTED_MODULE_3__.M)()
                      , h = (0,
                    features_core_helpers_seoHelper__WEBPACK_IMPORTED_MODULE_1__.s)();
                    this.updateRouteParametres(t.pathname.substring(1), this.routesDictionary[e]),
                    this.updateQueryModel(t);
                    const p = (0,
                    _utils__WEBPACK_IMPORTED_MODULE_7__.N)(this.currentRoute, this.routeParameters);
                    d.menuLk().then((e => {
                        e.updateMenu(p, this.currentRoute.lkMenuOptions, this.userIsAuth)
                    }
                    ));
                    const m = null != (a = null == (i = this.currentRoute) ? void 0 : i.targetContainer) ? a : 0
                      , b = null == (o = this.appContainers.find((e => e.containerId == m))) ? void 0 : o.viewModel
                      , g = !n && null != b && b.__modelStatus__ != _constants__WEBPACK_IMPORTED_MODULE_6__.Fq.destroyed && b.__routeName__ == e && null != b.onHistoryChange;
                    if (this.clientRenderInited || g)
                        if (g || r) {
                            if (g) {
                                const e = this.activeContainer == m;
                                return e || ($.observable(this).setProperty({
                                    showPreview: !0
                                }),
                                this.state.showPreview = !0),
                                null == (c = null == (l = this.viewModel) ? void 0 : l.onActiveViewChanged) || c.call(l, !1, {
                                    sameContainer: e
                                }),
                                await (null == (u = b.onHistoryChange) ? void 0 : u.call(b, window.history.state, n, {}, s)),
                                s.aborted || ($.observable(this).setProperty({
                                    activeContainer: m,
                                    showPreview: !1
                                }),
                                this.state.showPreview = !1),
                                {
                                    viewData: null,
                                    needStateUpdate: !1,
                                    needRouteUpdate: !1
                                }
                            }
                        } else
                            $.observable(this).setProperty({
                                showPreview: !0
                            }),
                            this.state.showPreview = !0;
                    else
                        !r && (this.current = $.templates["preview_" + e] ? "preview_" + e : _constants__WEBPACK_IMPORTED_MODULE_6__.Rg);
                    !this.currentRoute.metaTagsUrl && h.update(p, null);
                    const y = await this.loadRequiredResoursesAsync(e);
                    return __spreadValues({
                        needRouteUpdate: !s.aborted
                    }, y)
                }
                loadRequiredResoursesAsync(e, t=0) {
                    const r = (0,
                    features_core_helpers_helpers__WEBPACK_IMPORTED_MODULE_2__.d)();
                    this.loadingTemplate = e;
                    const n = this.routesDictionary[e]
                      , s = null == $.templates[e] && n.tmpl ? this.loadTemplateAsync(e, n.tmpl) : Promise.resolve()
                      , i = this.loadRouteDataAsync(n.requiredData, t, !0)
                      , a = n.requiredCss ? Promise.all(n.requiredCss.map(r.loadCssAsync)) : Promise.resolve()
                      , o = n.requiredJs ? Promise.all(n.requiredJs.map(r.loadJsAsync)) : Promise.resolve()
                      , l = n.requiredModel ? r.loadJsAsync(n.requiredModel) : Promise.resolve();
                    return Promise.all([i, o, a, l, s]).then(( ([e]) => Promise.resolve(e))).catch((r => r.isNotFound || r.isUnauthorize || r.isCancelled || t >= 3 ? Promise.reject(r) : this.loadRequiredResoursesAsync(e, ++t)))
                }
                async updateRouteData(e, t, r, n) {
                    var s, i, a, o, l, c, u, d, h, p, m, b;
                    const g = (0,
                    features_core_helpers_helpers__WEBPACK_IMPORTED_MODULE_2__.d)()
                      , y = (0,
                    _wildberries_analytics__WEBPACK_IMPORTED_MODULE_11__.a)()
                      , f = r || this.abortController.signal
                      , v = n || !1;
                    if (f.aborted)
                        return;
                    const w = this.routesDictionary[e];
                    if (this.viewModelReact = void 0,
                    null == w ? void 0 : w.useReact) {
                        if (w.needAuth && !this.userIsAuth)
                            return void this.moveToSignIn({
                                query: {
                                    returnUrl: window.location.href
                                }
                            }, !0);
                        const e = w.reactPageName
                          , {renderReactPage: r} = await (0,
                        app_loadReactApp__WEBPACK_IMPORTED_MODULE_12__.V)()
                          , n = await r({
                            reactPageName: e,
                            viewData: t,
                            routerState: this.state,
                            abortSignal: f
                        });
                        if (this.viewModelReact = n,
                        f.aborted || !n)
                            return;
                        const s = document.getElementById("app");
                        s && (s.style.display = "none")
                    } else
                        requestIdleCallback(( () => {
                            (0,
                            app_loadReactApp__WEBPACK_IMPORTED_MODULE_12__.V)()
                        }
                        ));
                    if (e.indexOf("preview_") > -1)
                        return this.state.showPreview = !0,
                        $.observable(this).setProperty({
                            showPreview: !0
                        });
                    const _ = wb.spa.getViewModelByName(e);
                    let S = _ ? new _(t,e) : Object.assign(Object.create(WbSpaModel.prototype), null != t ? t : {});
                    const C = null != (i = null == (s = this.currentRoute) ? void 0 : s.targetContainer) ? i : 0;
                    S = (0,
                    _utils__WEBPACK_IMPORTED_MODULE_7__.M)(e, S, f, C);
                    const I = null == this ? void 0 : this.viewModel;
                    if (null == I || I.__targetContainer__ != C && null != I.onHistoryChange ? null == (c = null == (l = null == this ? void 0 : this.viewModel) ? void 0 : l.onActiveViewChanged) || c.call(l, !1) : await (null == (o = null == (a = null == this ? void 0 : this.viewModel) ? void 0 : a.onBeforeUnrender) ? void 0 : o.call(a)),
                    f.aborted)
                        return;
                    const k = new g.Deferred;
                    await (null == (u = S.onBeforeRender) ? void 0 : u.call(S, t, k.promise));
                    let P = window._debug && performance.now();
                    const M = this.appContainers.find((e => e.containerId == C));
                    (null == (d = null == M ? void 0 : M.viewModel) ? void 0 : d.__modelStatus__) != _constants__WEBPACK_IMPORTED_MODULE_6__.Fq.destroyed && (null == (h = null == M ? void 0 : M.viewModel) || h.onBeforeUnrender(t)),
                    f.aborted || ($.observable(M).setProperty({
                        viewModel: S
                    }),
                    $.observable(this).setProperty({
                        showPreview: !1,
                        activeContainer: C
                    }),
                    this.state.showPreview = !1),
                    this.clientRenderInited || this.initCSR(),
                    P && console.log("[INITIAL MODEL RENDER]: ", performance.now() - P, e),
                    await g.nextTick(),
                    k.resolve(null),
                    null == (p = S.onAfterRender) || p.call(S, t, f),
                    v && (null == (m = S.onSpaTransition) || m.call(S));
                    const T = null == (b = S.getScreenName) ? void 0 : b.call(S);
                    T && y.sendEvent("Screen_V", {
                        name: T
                    })
                }
                updateRouteParametres(e, t) {
                    if (null == t.routePathSegments)
                        return void (this.routeParameters = {});
                    const r = e.split("/")
                      , n = t.routePathSegments.reduce(( (e, t, n) => (t.isParameter && t.name && (t.isCatchAll ? e[t.name] = r.slice(n).join("/") : e[t.name] = r[n]),
                    e)), {});
                    this.routeParameters = n
                }
                updateQueryModel(e) {
                    this.queryParams = new URLSearchParams((null != e ? e : window.location).search)
                }
                loadTemplateAsync(routeName, tmplNameInput) {
                    const httpClient = (0,
                    _wildberries_http_client__WEBPACK_IMPORTED_MODULE_0__.getHttpClient)()
                      , tmplName = ("string" == typeof tmplNameInput ? tmplNameInput : `${routeName.replace("Entrypoint", "")}`).toLowerCase()
                      , tmplFullName = (window._debug,
                    `${tmplName}.json`)
                      , hash = this.tmplHashes[tmplFullName]
                      , path = window._debug ? `${tmplFullName}?${hash}` : tmplFullName.replace(".json", `.${hash}.json`);
                    return httpClient.fetchStatic(path, {}, wb.helpers.url.urlForJsTmpl).then((tmpl => {
                        const _a = tmpl
                          , {main: main, localization: localization} = _a
                          , templates = __objRest(_a, ["main", "localization"]);
                        if (localization)
                            try {
                                Object.assign(this.$localziation, {
                                    [routeName]: eval(localization)
                                })
                            } catch (e) {}
                        return $.templates(__spreadValues({
                            [routeName]: main
                        }, templates)),
                        Promise.resolve()
                    }
                    )).catch((e => Promise.reject(e)))
                }
                static factory() {
                    return new Router
                }
            }
            __webpack_exports__.A = Router
        },
        88846: function(e, t, r) {
            "use strict";
            r.d(t, {
                Z: function() {
                    return a
                }
            });
            var n = r(58602)
              , s = Object.defineProperty
              , i = (e, t, r) => ( (e, t, r) => t in e ? s(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class a extends n.Observable {
                constructor() {
                    super(...arguments),
                    i(this, "showPreview", !1),
                    i(this, "location", {
                        pathname: window.location.pathname,
                        search: window.location.search,
                        hash: window.location.hash,
                        state: window.history.state
                    })
                }
                static factory() {
                    return new a
                }
            }
        },
        95449: function(e, t, r) {
            "use strict";
            r.d(t, {
                M: function() {
                    return s
                },
                N: function() {
                    return i
                }
            });
            var n = r(31753);
            const s = (e, t, r, s) => {
                const i = t.onBeforeRender
                  , a = t.onAfterRender
                  , o = t.onBeforeUnrender;
                return Object.defineProperties(t, {
                    __routeName__: {
                        value: e
                    },
                    __targetContainer__: {
                        value: s
                    },
                    __modelStatus__: {
                        value: n.Fq.prepearing,
                        writable: !0
                    },
                    routeTemplate: {
                        value: e
                    },
                    onBeforeRender: {
                        value: async function(e, s) {
                            (null == r ? void 0 : r.aborted) || (await (null == i ? void 0 : i.call(t, e, s)),
                            this.__modelStatus__ = n.Fq.readyToInstall)
                        }
                    },
                    onAfterRender: {
                        value: async function(e, s) {
                            (null == r ? void 0 : r.aborted) || (await (null == a ? void 0 : a.call(t, e, r, s)),
                            this.__modelStatus__ = n.Fq.installed)
                        }
                    },
                    onBeforeUnrender: {
                        value: async function(e) {
                            await (null == o ? void 0 : o.call(t, e)),
                            this.__modelStatus__ = n.Fq.destroyed
                        }
                    }
                }),
                t
            }
              , i = (e, t) => {
                if (null == e.routePathSegments)
                    return e.path;
                const r = e.routePathSegments.reduce(( (e, r) => {
                    e += "/";
                    const n = r.name;
                    return r.isParameter && n ? (!r.isOptional || r.isOptional && null != t[n]) && (e += t[n]) : e += r.content,
                    e
                }
                ), "").replace(/[\/\?]$/, "");
                return e.externalPath ? e.externalPath + r : r
            }
        },
        29991: function(e, t, r) {
            "use strict";
            r.d(t, {
                Q2: function() {
                    return l
                },
                lD: function() {
                    return d
                },
                BD: function() {
                    return u
                },
                dt: function() {
                    return c
                }
            });
            var n = JSON.parse('{"RUB":{"locale":"ru","sign":"₽","code":"643"},"BYN":{"locale":"by","sign":"р.","code":"933"},"KZT":{"locale":"kz","sign":"₸","code":"398"},"AMD":{"locale":"am","sign":"драм","code":"051"},"KGS":{"locale":"kg","sign":"сом","code":"417"},"UZS":{"locale":"uz","signRu":"сум","sign":"soʻm","code":"860"},"TJS":{"locale":"tj","sign":"с.","code":"972"},"GEL":{"locale":"ge","sign":"₾","code":"981"},"USD":{"locale":"us","sign":"$","code":"840"}}')
              , s = JSON.parse('{"ru":["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],"by":["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],"kz":["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],"kg":["RUB","BYN","KZT","AMD","KGS","UZS"],"am":["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],"uz":["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],"tj":["RUB","BYN","KZT","AMD","UZS","TJS"],"ge":["GEL"],"global":["RUB","BYN","KZT","AMD","KGS","UZS","TJS","USD"]}');
            const i = n;
            "ru" === wb.currentLanguage && Object.keys(i).forEach((e => {
                i[e].signRu && (i[e].sign = i[e].signRu)
            }
            ));
            const a = Object.entries(i).reduce(( (e, [t,r]) => (e[r.sign] = t,
            e)), {})
              , o = Object.entries(i).reduce(( (e, [t,r]) => (e[r.code] = t,
            e)), {})
              , l = {
                info: i,
                getIsoBySign: e => a[e] || wb.settings.currencyCodeByLetters,
                getDefaultForLocale: e => {
                    let t;
                    for (const r in i)
                        i[r].locale === e && (t = r);
                    return null != t ? t : "RUB"
                }
                ,
                getCurrencyByCode: e => o[e],
                localeWithCoins: ["BYN", "TJS", "GEL", "USD", "byn", "tjs", "gel", "usd"],
                isCryptoReplenishForCurrency: e => ["BYN"].includes(e)
            }
              , c = s[wb.settings.currentLocale].reduce(( (e, t) => (e[t] = l.info[t],
            e)), {})
              , u = e => {
                var t;
                const r = e.toUpperCase();
                return null == (t = l.info[r] || l.info[wb.settings.currencyCodeByLetters]) ? void 0 : t.code
            }
              , d = e => {
                var t;
                return null == (t = l.info[e] || l.info[wb.settings.currencyCodeByLetters]) ? void 0 : t.sign
            }
        },
        77762: function(e, t, r) {
            "use strict";
            r.d(t, {
                m: function() {
                    return n
                }
            });
            const n = () => r.e(95338).then(r.bind(r, 25415)).then((e => e.FavoriteGoodsModel))
        },
        13808: function(e, t, r) {
            "use strict";
            r.d(t, {
                _: function() {
                    return c
                },
                m: function() {
                    return u
                }
            });
            var n = r(51799)
              , s = r(76904)
              , i = r(28288)
              , a = r(89687)
              , o = r(47363)
              , l = r(2358);
            const c = {
                suppliersOrgForms: ["ООО", "ПАО", "ОАО", "ЗАО", "ИП", "Фонд", "Ассоциации", "Союзы", "НАО", "ТОО", "АО"],
                isDefaultSupplier: function(e, t) {
                    return 32477 === e || 12399 === e || 17887 === e || 23316 === e || 28906 === e || "Brands Seller" === t || "Best Brands" === t || "First Choice" === t || "WILDBERRIES" === t
                },
                getLangForServices: function() {
                    const e = (0,
                    a.u)().getLocale()
                      , t = wb.settings.currentLocale;
                    return e === t || "global" === t && "kz" === e ? wb.currentLanguage : "ru"
                },
                supplierFineName: function(e, t) {
                    return 20624 === t ? "" : 1876 === t && "Wildberries" === e ? "Brands Seller" : 20253 === t && "Wildberries" === e ? "Best Brands" : 154 === t && "Wildberries" === e ? "First Choice" : "Wildberries" === e ? "WILDBERRIES" : u.trimSupplierName(e, c.suppliersOrgForms)
                },
                ImageUrl: wb.helpers.url.imageUrl,
                ImageUrlPb: function(e, t, r, n, s) {
                    return wb.helpers.url.imageUrl(e, t, r, n, s, !0)
                },
                urlFeedbackPhoto: wb.helpers.url.urlFeedbackPhoto,
                urlProductVideo: wb.helpers.url.urlVideoProduct,
                urlFeedbackVideo: wb.helpers.url.urlFeedbackVideo,
                urlSiteStaticPb: function(...e) {
                    return (0,
                    i.urlSiteStatic)(e[0])
                },
                productCardUrl: function(e, t, r) {
                    return u.urlForGood(e, null, r, null, null, t)
                },
                forBrandLogoFromId: function(e, t=!1) {
                    return e ? wb.global.settings.switches.brandLogoV3 ? (0,
                    i.urlStaticBasket)(`brand-flow-logos/by-id/${e}.webp`, 0) : (0,
                    i.urlStaticBasket)(`sellers/brands/${e}.webp`, 1) : (0,
                    i.urlSiteStatic)("i/nologo.gif")
                },
                forSellerLogo: function(e, t=!1) {
                    return c.forSellerLogoPb(e, t, !1)
                },
                forSellerLogoPb: function(e, t=!1, r=!0) {
                    return (0,
                    i.urlStaticBasket)(`crm-bnrs/shops/${e}_${t ? "main_banner" : "logo"}.webp`, 1)
                },
                isEmptyObject: function(e) {
                    return $.isEmptyObject(e)
                },
                Declension: function(e, t, r, n, s) {
                    let i;
                    const a = e % 10
                      , o = e % 100;
                    return i = 1 == a && 11 != o ? t : 2 == a && 12 != o || 3 == a && 13 != o || 4 == a && 14 != o ? r : n || r,
                    void 0 === s ? i : s.format(e, i.format(e))
                },
                pluralize: function(e, ...t) {
                    return $.pluralize(null != e ? e : 0, ...t)
                },
                debug: function(e) {
                    console.log(e)
                },
                toDateFormat: function(e, t) {
                    return new Date(parseInt(e.replace("/Date(", "").replace(")\\/", ""), 10)).format(t)
                },
                toJson: function(e) {
                    return JSON.stringify(e)
                },
                fromJson: function(e) {
                    return JSON.parse(e)
                },
                encode: function(...e) {
                    let t = "";
                    for (let r = 0; r < e.length; r++)
                        t = t.concat(e[r]);
                    return encodeURIComponent(t)
                },
                isLazyImgInCarousel: function(e, t, r, n, s) {
                    return !!e && (r ? t >= 2 * n && t < s - n : t >= 2 * n)
                },
                timeLeft: function(e) {
                    const t = c.parseFromDotNet(e);
                    return wb.helpers.date.leftBefore(t)
                },
                parseFromDotNet: function(e) {
                    return new Date(parseInt(e.replace("/Date(", "").replace(")\\/", ""), 10))
                },
                timeLeftSpa: function(e) {
                    const t = new Date(e);
                    return wb.helpers.date.leftBefore(t)
                },
                isPriceEqual: function(e, t) {
                    return e === t
                },
                isNullOrWhiteSpace: function(e) {
                    return !e || 0 === e.length || /^\s*$/.test(e)
                },
                HasFlag: function(e, t) {
                    return (e & t) == t
                },
                blurAdult: function(e) {
                    return e && !wb.adult.isConfirmed
                },
                nonBreakingSpaceFormatted: function(e) {
                    return String(e).replace(/\B(?=(\d{3})+(?!\d))/g, " ")
                },
                pickupType: function(e, t) {
                    if (86 == e.dtype || 113 == e.smId || e.shouldShowName)
                        return e.name;
                    if (31 == (null == e ? void 0 : e.typePoint))
                        return wb.i18n.t("delivery.points.kiosk");
                    if ("courier" == e.deliveryType)
                        return wb.i18n.t("delivery.points.courierAddress");
                    if (63 == e.dtype || e.isSortCenter)
                        return t ? wb.i18n.t("delivery.points.scWarehouse") : wb.i18n.t("delivery.points.scWarehouseWb");
                    if (29 == e.dtype || 31 == e.dtype || 32 == e.dtype)
                        return t ? wb.i18n.t("delivery.points.post") : wb.i18n.t("delivery.points.postOffice");
                    if (23 == e.dtype)
                        return 2 == e.pickupType ? wb.i18n.t("delivery.points.partnerRussianPost") : t ? wb.i18n.t("delivery.points.russianPost") : wb.i18n.t("delivery.points.russianPostOffice");
                    if (14 == e.dtype)
                        return wb.i18n.t("delivery.points.halvaPostamat");
                    if (15 == e.dtype && e.pickupType >= 0) {
                        if (1 == e.pickupType)
                            return wb.i18n.t("delivery.points.sberbankBranch");
                        if (0 == e.pickupType)
                            return wb.i18n.t("delivery.points.sberbankPostamat")
                    }
                    return 16 == e.dtype ? wb.i18n.t("delivery.points.pyaterochkaPostamat") : 111 == e.smId ? wb.i18n.t("delivery.points.pickup") : e.isExternalPostamat ? wb.i18n.t("delivery.points.partnerPostamate") : e.isWb ? wb.i18n.t("delivery.points.pickupPoint") : wb.i18n.t("delivery.points.partnerPickupPoint")
                },
                pickupPhotos: e => {
                    const t = (0,
                    o.C)();
                    if (!e.photos)
                        return [];
                    if (86 == e.dtype)
                        return e.photos;
                    const r = new Set
                      , n = new Set;
                    for (let t of e.photos) {
                        const e = t.split(".").pop();
                        t = t.replace("preview", ""),
                        "webp" == (null == e ? void 0 : e.toLowerCase()) ? r.add(t) : n.add(t)
                    }
                    return [...r.size > 0 && (null == t ? void 0 : t.webpImage) ? r : n]
                }
                ,
                priceFromRub: (e, t, r) => {
                    var n, s;
                    const i = (0,
                    a.u)();
                    if (!(null == (s = null == (n = wb.global) ? void 0 : n.settings) ? void 0 : s.currencies))
                        return e;
                    const o = r || i.getCurrency();
                    if ("RUB" === o)
                        return e;
                    if (!wb.global.settings.currencies[o])
                        return e;
                    const l = e / wb.global.settings.currencies[o].rubRate;
                    return t ? "AMD" === o || "KZT" === o ? 10 * Math.floor(l / 10) : "BYN" === o || "GEL" === o || "USD" === o ? Math.floor(100 * l) / 100 : "UZS" === o ? 100 * Math.floor(l / 100) : Math.floor(l) : l
                }
                ,
                priceToRub: (e, t) => {
                    var r, n;
                    return (null == (n = null == (r = wb.global) ? void 0 : r.settings) ? void 0 : n.currencies) && wb.global.settings.currencies[t] ? e * wb.global.settings.currencies[t].rubRate : e
                }
                ,
                toLocalPrice: (e, t) => "AMD" === t || "KZT" === t ? 10 * Math.floor(e / 10) : "BYN" === t || "GEL" === t || "USD" === t ? Math.floor(100 * e) / 100 : "UZS" === t ? 100 * Math.floor(e / 100) : Math.floor(e),
                max: e => Math.max(e, 0),
                abs: e => Math.abs(e),
                trimWord: function(e, t) {
                    if (!(null == t ? void 0 : t.length) || !e)
                        return e;
                    if ((null == (t = [].concat(t)) ? void 0 : t.length) > 0) {
                        const r = (e = e.trim()).toLowerCase();
                        for (let n = 0; n < t.length; n++) {
                            const s = t[n].toLowerCase()
                              , i = r.indexOf(s + " ", 0);
                            0 == i && (e = e.substring(s.length).trim());
                            const a = e.toLowerCase().indexOf(s, e.length - s.length);
                            if (a > 0 && (e = e.substring(0, a)),
                            0 == i || a > 0)
                                return e.trim()
                        }
                    }
                    return e
                },
                trimSupplierName: function(e, t) {
                    if (!(null == t ? void 0 : t.length) || !e)
                        return e;
                    const r = e.trim().split(" ")
                      , n = new Set(t);
                    return e = r.map((e => {
                        const t = e.toUpperCase();
                        return n.has(t) && (e = ""),
                        e
                    }
                    )).join(" ").trim()
                },
                brandUrl: function(e) {
                    return `/brands/${encodeURIComponent(e)}`
                },
                brandUrlById: async function(e) {
                    if (!e)
                        return null;
                    const t = (0,
                    s.getHttpClient)()
                      , r = await t.fetchStatic(`brands-by-id/${e}.json`, {}, wb.helpers.url.urlStaticData);
                    return r ? c.brandUrl(r.url) : null
                },
                isDateToday: e => new Date(e).dateEqual(new Date),
                isClosedByUser: e => {
                    var t;
                    return (null == (t = wb.global.userSettings.closed) ? void 0 : t.includes(e)) || !1
                }
                ,
                getCurrentCurrency: function() {
                    const e = (0,
                    a.u)();
                    return $.views.converters.currencySign(e.getCurrency())
                },
                fillFeedbackPhotosAndVideo: e => e ? e.map((e => {
                    const t = e.isVideo ? c.fillFeedbackVideos([e]) : c.fillFeedbackPhotos([e]);
                    return null == t ? void 0 : t[0]
                }
                )) : [],
                fillFeedbackPhotos: function(e) {
                    return e ? e.map((e => {
                        const t = "number" != typeof e ? e.id : e;
                        return {
                            id: t,
                            preview: wb.helpers.url.urlFeedbackPhoto(t, "ms"),
                            previewFallback: wb.helpers.url.urlFeedbackPhoto(t, "ms", !0),
                            fullPath: wb.helpers.url.urlFeedbackPhoto(t, "fs"),
                            fullPathFallback: wb.helpers.url.urlFeedbackPhoto(t, "fs", !0)
                        }
                    }
                    )) : []
                },
                fillFeedbackVideos: function(e) {
                    if (!e)
                        return [];
                    return (Array.isArray(e) ? e : [e]).map((e => {
                        const t = e.id
                          , r = e.durationSec ? wb.helpers.formatVideoDuration(e.durationSec) : "-";
                        return {
                            id: t,
                            preview: wb.helpers.url.urlFeedbackVideo(e),
                            video: wb.helpers.url.urlFeedbackVideo(e, "index.m3u8"),
                            mp4: wb.helpers.url.urlFeedbackVideo(e, "preview.mp4"),
                            isVideo: !0,
                            duration: r
                        }
                    }
                    ))
                },
                stripHtml: (e, t) => {
                    if (!e)
                        return "";
                    if (t)
                        return e;
                    return (new DOMParser).parseFromString(e, "text/html").body.textContent || ""
                }
                ,
                isIosDevice: wb.helpers.iOS,
                isHuaweiDevice: wb.helpers.huawei,
                sumBy: (e, t) => t && e && 0 != e.length ? e.reduce(( (e, r) => (isNaN(r[t]) || (e += +r[t]),
                e)), 0) : 0,
                stopPropagation: e => e.stopPropagation(),
                subtract: function(e, t=0) {
                    return (Math.round(100 * e) - Math.round(100 * t)) / 100
                },
                addLogisticsCost: function(e, t=0) {
                    return t ? (Math.round(100 * e) + Math.round(t)) / 100 : e
                },
                isExpressDeliveryToday: function(e, t, r) {
                    if (!t || !e || !r)
                        return !1;
                    const n = new Date
                      , s = 60 * n.getHours() + n.getMinutes()
                      , i = r[0]
                      , a = r[1]
                      , o = s + 60 * e;
                    if (s >= i && s <= a) {
                        if (t.some((e => o < e.start)) && e < 5)
                            return !0
                    }
                    return !1
                },
                formatNumberWithDot: function(e) {
                    return e ? String(e).replace(".", ",") : ""
                },
                getVatAmount: (e, t, r) => {
                    let n = Number(-1 * (e / (1 + t / 100) - e)).toFixed(2);
                    return r && (n = String($.views.converters.divideNumberBySeparator(n)),
                    n += `&nbsp;${r}`),
                    n
                }
                ,
                onPreventDefault: e => {
                    e.preventDefault()
                }
                ,
                checkProductOpenSameWindowAb: () => {
                    const e = (0,
                    n.a)();
                    return "m" === wb.settings.displayMode || !(wb.global.settings.switches.enableOpenNewTab || e.checkDataInSplitterServiceV2("common", "ab_enableOpenNewTab", "yes"))
                }
                ,
                applyConverter: function(e, ...t) {
                    return $.views.converters[e].apply(this, t)
                },
                getMenuItems: e => ({
                    AboutCompany: [{
                        name: wb.i18n.t("servicePages.menuItems.aboutCompany.aboutUs"),
                        pageUrl: "/services/o-nas"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.aboutCompany.requisites"),
                        pageUrl: "/services/rekvizity"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.aboutCompany.pressCenterMain"),
                        pageUrl: "/presservice"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.aboutCompany.contacts"),
                        pageUrl: "/services/kontakty"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.aboutCompany.bugBounty"),
                        pageUrl: "/services/bug-bounty"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.aboutCompany.socialMedia"),
                        pageUrl: "/services/sotsialnye-seti"
                    }],
                    ToClient: [{
                        name: wb.i18n.t("servicePages.menuItems.toClient.faq"),
                        pageUrl: "/services/voprosy-i-otvety"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.toClient.howToOrder"),
                        pageUrl: "/services/kak-sdelat-zakaz"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.toClient.howToPay"),
                        pageUrl: "/services/sposoby-oplaty"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.toClient.freeDelivery"),
                        pageUrl: "/services/besplatnaya-dostavka"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.toClient.return"),
                        pageUrl: "/services/vozvrat-tovara"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.toClient.howToRefund"),
                        pageUrl: "/services/vozvrat-denezhnyh-sredstv"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.toClient.salesRules"),
                        pageUrl: "/services/pravila-prodazhi"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.toClient.termsOfUse"),
                        pageUrl: "/services/pravila-polzovaniya-torgovoy-ploshchadkoy"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.toClient.howToReturnMoneyAndGood"),
                        pageUrl: "/services/kak-vernut-tovar-i-dengi"
                    }, {
                        name: wb.i18n.t("servicePages.menuItems.toClient.b2bFaq"),
                        pageUrl: "/services/b2b-voprosy-i-otvety"
                    }]
                }[{
                    "/services/o-nas": "AboutCompany",
                    "/services/rekvizity": "AboutCompany",
                    "/presservice": "AboutCompany",
                    "/services/kontakty": "AboutCompany",
                    "/services/bug-bounty": "AboutCompany",
                    "/services/sotsialnye-seti": "AboutCompany",
                    "/services/kak-sdelat-zakaz": "ToClient",
                    "/services/voprosy-i-otvety": "ToClient",
                    "/services/sposoby-oplaty": "ToClient",
                    "/services/besplatnaya-dostavka": "ToClient",
                    "/services/vozvrat-tovara": "ToClient",
                    "/services/vozvrat-denezhnyh-sredstv": "ToClient",
                    "/services/pravila-prodazhi": "ToClient",
                    "/services/pravila-polzovaniya-torgovoy-ploshchadkoy": "ToClient",
                    "/services/kak-vernut-tovar-i-dengi": "ToClient",
                    "/services/b2b-voprosy-i-otvety": "ToClient"
                }[e]]),
                getFilteredAllowedServicePages: e => {
                    if (!Array.isArray(e))
                        return;
                    const t = {
                        "/services/kak-sdelat-zakaz": {
                            hideToTlds: ["ge", "tj", "tm", "ru", "by", "am", "kg", "uz", "kz", "global"]
                        },
                        "/services/kak-vernut-tovar-i-dengi": {
                            hideToTlds: ["ge", "tj", "tm"]
                        },
                        "/services/sposoby-oplaty": {
                            hideToTlds: ["ge", "tj", "tm", "ru", "by", "am", "kg", "uz", "kz", "global"]
                        },
                        "/services/besplatnaya-dostavka": {
                            hideToTlds: ["ge", "tj", "tm"]
                        },
                        "/services/vozvrat-tovara": {
                            hideToTlds: ["ge", "tj", "tm", "ru", "by", "am", "kg", "uz", "kz", "global"]
                        },
                        "/services/vozvrat-denezhnyh-sredstv": {
                            hideToTlds: ["ge", "tj", "tm", "ru", "by", "am", "kg", "uz", "kz", "global"]
                        },
                        "/services/pravila-prodazhi": {
                            hideToTlds: ["ge", "ru", "by", "am", "kg", "uz", "kz", "tj", "tm", "global"]
                        },
                        "/services/pravila-polzovaniya-torgovoy-ploshchadkoy": {
                            hideToTlds: ["ge", "ru", "by", "am", "kg", "uz", "kz", "tj", "tm", "global"]
                        },
                        "/services/voprosy-i-otvety": {
                            hideToTlds: ["ge", "tj", "tm"]
                        },
                        "/services/o-nas": {
                            hideToTlds: ["ge", "tm"]
                        },
                        "/services/sotsialnye-seti": {
                            hideToTlds: ["ge", "tm"]
                        },
                        "/services/rekvizity": {
                            hideToTlds: ["ge", "tm"]
                        },
                        "/presservice": {
                            hideToTlds: ["ge", "tm"]
                        },
                        "/services/kontakty": {
                            hideToTlds: ["ge", "tm"]
                        },
                        "/services/bug-bounty": {
                            hideToTlds: ["ge", "tj", "tm"]
                        },
                        "/services/b2b-voprosy-i-otvety": {
                            hideToTlds: ["ge", "tj", "tm", "by", "am", "kg", "uz", "kz", "global"]
                        }
                    };
                    return e.filter((e => {
                        var r;
                        const n = t[e.pageUrl] || {}
                          , s = wb.settings.currentDomain;
                        if (0 === Object.keys(n).length)
                            return !0;
                        return !(null == (r = n.hideToTlds) ? void 0 : r.includes(s))
                    }
                    ))
                }
                ,
                debounce: function(e, t) {
                    let r = null;
                    return (...n) => {
                        r && clearTimeout(r),
                        r = setTimeout(( () => {
                            e.apply(this, n),
                            r = null
                        }
                        ), t)
                    }
                },
                date: {
                    paymentFeedbackTimerStr: function(e, t) {
                        const r = Number(e) - Number(t)
                          , n = Math.floor(r / 1e3 % 60)
                          , s = Math.floor(r / 6e4 % 60)
                          , i = Math.floor(r / 36e5)
                          , a = Math.floor(r / 864e5);
                        if (r < 0)
                            return "";
                        if (i >= 24) {
                            const e = i % 24 >= 12 ? a + 1 : a;
                            return `${wb.i18n.plural("common.time.days", {
                                count: e
                            })}`
                        }
                        return "{0}:{1}:{2}".format($.views.converters.leadZero(i, 2), $.views.converters.leadZero(s, 2), $.views.converters.leadZero(n, 2))
                    }
                },
                getAvailableLangs() {
                    const e = (0,
                    a.u)()
                      , t = wb.settings.currentLocale
                      , r = e.getLocale()
                      , n = {
                        ge: ["ru", "ka"],
                        uz: ["ru", "uz"]
                    };
                    return "global" === wb.settings.currentLocale && (n.global = "kz" === r ? ["ru", "kk"] : void 0),
                    n[t]
                },
                handleModalVisible: ({isVisible: e}) => {
                    const t = Math.abs(window.innerWidth - document.documentElement.clientWidth)
                      , r = document.querySelector(".j-fixed-block")
                      , n = document.querySelector(".j-header")
                      , s = document.querySelector(".j-wrapper")
                      , i = document.querySelector(".j-timer");
                    e ? (document.body.classList.contains("body--overflow") || document.body.classList.add("body--overflow"),
                    s instanceof HTMLElement && (s.style.paddingRight = `${t}px`),
                    r instanceof HTMLElement && (r.style.paddingRight = `${t}px`),
                    n instanceof HTMLElement && (n.style.paddingRight = `${t}px`,
                    n.classList.contains("header--fixed") || (n.style.marginRight = `-${t}px`)),
                    i instanceof HTMLElement && (i.style.transform = "translateX(-51.5%)")) : (document.body.classList.remove("body--overflow"),
                    s instanceof HTMLElement && (s.style.paddingRight = ""),
                    r instanceof HTMLElement && (r.style.paddingRight = ""),
                    n instanceof HTMLElement && (n.style.paddingRight = "",
                    n.style.marginRight = ""),
                    i instanceof HTMLElement && (i.style.transform = "translateX(-50%)"))
                }
                ,
                isExcludedNotAboutProduct: e => {
                    var t, r;
                    if (!wb.global.settings.switches.enableExcludedFromRating)
                        return !1;
                    const n = null == (t = null == e ? void 0 : e.reasons) ? void 0 : t.includes("orderStatus")
                      , s = null == (r = null == e ? void 0 : e.reasons) ? void 0 : r.includes("notProduct");
                    return (null == e ? void 0 : e.isExcluded) && (s || n) || !1
                }
                ,
                escapeHtmlSpecialChars: e => e ? e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/\(/g, "&lpar;").replace(/\)/g, "&rpar;").replace(/\\/g, "&bsol;").replace(/`/g, "&DiacriticalGrave;") : e
            }
              , u = {
                not: function(e) {
                    return !e
                },
                formatPhone: function(e, t) {
                    return e.toString().formatPhone(t)
                },
                toOrdinalDigitByFemaleGender: function(e) {
                    return [wb.i18n.t("common.femaleOrdinalDigit.first"), wb.i18n.t("common.femaleOrdinalDigit.second"), wb.i18n.t("common.femaleOrdinalDigit.third"), wb.i18n.t("common.femaleOrdinalDigit.fourth"), wb.i18n.t("common.femaleOrdinalDigit.fifth"), wb.i18n.t("common.femaleOrdinalDigit.sixth"), wb.i18n.t("common.femaleOrdinalDigit.seventh"), wb.i18n.t("common.femaleOrdinalDigit.eighth"), wb.i18n.t("common.femaleOrdinalDigit.ninth"), wb.i18n.t("common.femaleOrdinalDigit.tenth")][e] || e + 1
                },
                spaceFormatted: e => String(e).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1 "),
                convertQuantity: e => wb.i18n.t("common.quantity", {
                    quantity: e
                }),
                plusMinus: e => {
                    let t = "";
                    return e > 0 ? t = "+" : e < 0 && (t = "-"),
                    `${t} ${u.spaceFormatted(Math.abs(e))}`
                }
                ,
                toInt: function(e) {
                    return parseInt(e, 10)
                },
                toFixed: function(e, t) {
                    const r = parseFloat(e);
                    return isNaN(r) ? "" : r.toFixed(t)
                },
                leadZero: function(e, t) {
                    if (isNaN(e) || null == e)
                        return null;
                    let r = Math.floor(e);
                    for (; r.toString().length < t; )
                        r = "0" + r;
                    return r
                },
                basketDeliveryDate: function(e, t, r, n, s=!1, a=!1, o=!1, l=!1, c=!1, d=!1, h=!1) {
                    if (!e)
                        return "";
                    const p = !(8 & ~r);
                    o && a && h && Number(a) > 540 && (s = "9:00–23:00");
                    if (p) {
                        const t = (new Date).daysBetween(e);
                        if (s) {
                            const t = (0,
                            i.dayNameFromDate)(e, c);
                            return l ? t : `${t}, ${s}`
                        }
                        if (n < 5 && 0 == t)
                            return u.deliveryDateTxt(n, !0, p)
                    }
                    if (!t) {
                        if (s) {
                            const t = (0,
                            i.dayNameFromDate)(e, c);
                            return l ? t : `${t}, ${s}`
                        }
                        return d ? `${(m = e).format("ddd")}, ${(0,
                        i.dayNameFromDate)(m, c, void 0, void 0, !0)}` : (0,
                        i.dayNameFromDate)(e, c)
                    }
                    var m;
                    const b = t instanceof Date ? t : new Date;
                    return "number" == typeof t && (b.setTime(e.getTime()),
                    b.setDate(b.getDate() + t)),
                    b.is1stJan() && !p && b.setDate(b.getDate() + 1),
                    e.getMonth() !== b.getMonth() ? `${e.format("d MMMM")}-${b.format("d MMMM")}` : `${e.format("d")}-${b.format("d MMMM")}`
                },
                priceWithPrecision: function(e, t, r=2, n=!1) {
                    var s, i, a, o, l, c;
                    r = Math.min(r, 12);
                    const u = Math.abs(e)
                      , [d,h=""] = u.toString().split(".")
                      , p = Math.max(2, r - d.length)
                      , m = (null == (a = null == (i = null == (s = this.tagCtx) ? void 0 : s.props) ? void 0 : i.iso) ? void 0 : a.toUpperCase()) || this.ctxPrm && (null == (o = this.ctxPrm("iso")) ? void 0 : o.toUpperCase());
                    m && (t = null == (c = null == (l = wb.currencies) ? void 0 : l.info[m]) ? void 0 : c.sign);
                    let b = h.slice(0, p);
                    if (n && b.length < h.length) {
                        const e = parseInt(b[b.length - 1], 10) + 1;
                        b = b.slice(0, -1) + e.toString()
                    }
                    let g = b.length - 1;
                    for (; g >= 0 && "0" === b[g]; )
                        g--;
                    return b = b.slice(0, g + 1),
                    "" === b && (b = null),
                    $.views.helpers.formatPrice(parseInt(d, 10), b, t)
                },
                priceWithCoins: function(e, t, r=!1) {
                    var n, s, a, o, l, c;
                    let u = Math.abs(Math.round(100 * Number((e % 1).toFixed(2))));
                    e = e > 0 ? Math.floor(e) : Math.ceil(e);
                    const d = (null == (a = null == (s = null == (n = this.tagCtx) ? void 0 : n.props) ? void 0 : s.iso) ? void 0 : a.toUpperCase()) || this.ctxPrm && (null == (o = this.ctxPrm("iso")) ? void 0 : o.toUpperCase());
                    return d && (t = null == (c = null == (l = wb.currencies) ? void 0 : l.info[d]) ? void 0 : c.sign),
                    0 == u && r ? u = null : u < 10 && (u = "0" + u),
                    (0,
                    i.formatPrice)(e, u, t)
                },
                priceWithCurrencyOld: function(e, t, r, n=!1) {
                    var s, a;
                    if (!t && (isNaN(e) || !e))
                        return "";
                    if (("BYN" === r || "GEL" === r || "USD" === r || !r && "" !== r) && ("by" === wb.settings.currentLocale || "ge" === wb.settings.currentLocale || n)) {
                        let t = Math.round(100 * Number((e % 1).toFixed(2)));
                        e = Math.floor(e),
                        t < 10 && (t = "0" + t),
                        r && "BYN" !== r && "GEL" !== r && "USD" !== r && (t = null);
                        const n = "BYN" === r ? "р." : "GEL" === r ? "₾" : "USD" === r ? "$" : "₽";
                        return (0,
                        i.formatPrice)(e, t, n)
                    }
                    const o = (null == (a = null == (s = wb.currencies) ? void 0 : s.info[r]) ? void 0 : a.sign) || wb.settings.currencyShortName;
                    return e = Math.floor(100 * e) / 100,
                    (0,
                    i.formatPrice)(e, null, o)
                },
                urlForGood: function(e, t, r, n, s, i, a, o) {
                    const l = new URL(`/catalog/${e}/detail.aspx`,window.location.origin);
                    return r && l.searchParams.set("targetUrl", r),
                    i && l.searchParams.set("size", String(i)),
                    o && l.searchParams.set("erid", o),
                    a && l.searchParams.set("isTrend", "true"),
                    n && (l.hash = n),
                    l.toString()
                },
                urlSiteStaticPb: function(e) {
                    return (0,
                    i.urlSiteStatic)(e)
                },
                urlStaticBasket: function(e, t, r) {
                    return (0,
                    i.urlStaticBasket)(e, t)
                },
                toLower: function(e) {
                    return null == e ? void 0 : e.toLowerCase()
                },
                dateFromTimestamp: function(e, t) {
                    return new Date(e).format(t || "dd.MM.yyyy HH:mm")
                },
                getFeedbacksPaymentTimerString: function(e) {
                    if (!e)
                        return "";
                    const t = new Date(Date.now())
                      , r = new Date(e);
                    return c.date.paymentFeedbackTimerStr(r, t)
                },
                formatDate: function(e, t) {
                    var r;
                    if (!e)
                        return "";
                    const n = new Date(e);
                    return (null == (r = this.tagCtx) ? void 0 : r.props.yearFormat) && (new Date).getFullYear() != n.getFullYear() && (t += this.tagCtx.props.yearFormat),
                    n.format(t)
                },
                humanDate: function(e, t) {
                    var r, n;
                    if (!e)
                        return "";
                    "string" == typeof e && (e = new Date(e));
                    const s = e => wb.i18n.plural("common.time.month_short", {
                        count: e
                    })
                      , i = e => wb.i18n.plural("common.time.year", {
                        count: e
                    })
                      , {years: a, months: o, days: l} = wb.helpers.date.diff(e);
                    let c = (a > 0 || o > 0) && l > 15 ? o + 1 : o;
                    if (a > 0)
                        return 0 == c ? i(a) : 12 == c ? i(a + 1) : `${i(a)} ${s(c)}`;
                    if (o > 0)
                        return 12 == c ? i(a + 1) : s(c);
                    const u = null == (n = null == (r = this.tagCtx) ? void 0 : r.props) ? void 0 : n.genitive;
                    return null != t ? t : u ? wb.i18n.plural("common.time.daysGenitive", {
                        count: l
                    }) : wb.i18n.plural("common.time.days", {
                        count: l
                    })
                },
                humanTime: function(e, t, r=!1, n=!1) {
                    if (e <= 0 || isNaN(e))
                        return "";
                    const s = []
                      , i = Math.round(e / 86400);
                    if (r && i)
                        return t ? wb.i18n.plural("common.time.daysGenitive", {
                            count: i
                        }) : wb.i18n.plural("common.time.days", {
                            count: i
                        });
                    const a = Math.floor(e % 86400 / 3600);
                    a && s.push(t ? wb.i18n.plural("common.time.hourGenitive", {
                        count: a
                    }) : wb.i18n.plural("common.time.hour", {
                        count: a
                    }));
                    const o = Math.floor(e % 3600 / 60) + (n ? 0 : 1);
                    if (o && s.push(t ? wb.i18n.plural("common.time.minuteGenitive", {
                        count: o
                    }) : wb.i18n.plural("common.time.minute", {
                        count: o
                    })),
                    n) {
                        const r = e % 60;
                        r && s.push(t ? wb.i18n.plural("common.time.secondGenitive", {
                            count: r
                        }) : wb.i18n.plural("common.time.second", {
                            count: r
                        }))
                    }
                    return s.reduce(( (e, t, r, n) => {
                        if (0 == r)
                            return t;
                        return `${e}${n.length - 1 == r ? ` ${wb.i18n.t("common.and")} ` : ", "}${t}`
                    }
                    ), "")
                },
                differenceDatesInSeconds: function(e=new Date, t=0) {
                    const r = new Date(e).addDays(t)
                      , n = new Date
                      , s = Math.floor((Number(r) - Number(n)) / 1e3);
                    return Math.max(0, s)
                },
                humanTimerFormat: function(e=0, t=!1, r=!1) {
                    if (e <= 0 || isNaN(e))
                        return wb.i18n.t("common.humanTimer.timeIsUp");
                    const n = e => e.toString().padStart(2, "0")
                      , s = Math.floor(e / 3600)
                      , i = n(s)
                      , a = n(Math.floor(e % 3600 / 60))
                      , o = n(e % 60);
                    if (e < 86400) {
                        if (t)
                            return wb.i18n.t("common.humanTimer.timeInWords", {
                                hours: i,
                                minutes: a,
                                seconds: o
                            });
                        {
                            const e = `${i}:${a}:${o}`;
                            return wb.i18n.plural("common.humanTimer.remainingTime", {
                                count: s,
                                displayCount: e
                            })
                        }
                    }
                    {
                        let t = Math.floor(e / 86400);
                        if (r) {
                            const r = Math.floor(e / 3600)
                              , n = Math.floor(r / 24);
                            t = r % 24 >= 12 ? n + 1 : n
                        }
                        return wb.i18n.plural("common.humanTimer.remainingDays", {
                            count: t
                        })
                    }
                },
                getDaysFromOrder: function(e=null, t=null) {
                    if (!e || !t)
                        return;
                    const r = "Purchased" == e.status ? e.lastDate : null;
                    if (r) {
                        const e = u.differenceDatesInSeconds(r, t)
                          , n = (new Date).daysBetween(new Date(r).addDays(t));
                        return e <= 86400 ? wb.i18n.t("common.today").toLowerCase() : wb.i18n.plural("common.time.afterDays", {
                            count: n
                        })
                    }
                    return wb.i18n.plural("common.time.days", {
                        count: 0
                    })
                },
                humanTimerFormatSimple: function(e=0, t=!1) {
                    if (null == e)
                        return;
                    const r = Math.floor(e / 3600)
                      , n = Math.floor(e % 3600 / 60)
                      , s = e % 60;
                    return `${r > 0 || t ? `${r < 10 ? "0" : ""}${r}:` : ""}${n < 10 ? "0" : ""}${n}:${s < 10 ? "0" : ""}${s}`
                },
                humanTimerFormatSaleTimer: function(e=0, t=!1) {
                    if (null == e)
                        return;
                    if (e > 86400) {
                        const t = Math.ceil(e / 86400);
                        return wb.i18n.plural("common.time.days", {
                            count: t
                        })
                    }
                    const r = Math.floor(e / 3600)
                      , n = Math.floor(e % 3600 / 60)
                      , s = e % 60;
                    return `${r > 0 || t ? `${r < 10 ? "0" : ""}${r}:` : ""}${n < 10 ? "0" : ""}${n}:${s < 10 ? "0" : ""}${s}`
                },
                dateStringToFormat: function(e, t) {
                    if (!e || "string" != typeof e)
                        return "";
                    const [r,n,s] = e.split(".").map((e => parseInt(e)));
                    try {
                        return new Date(s,n - 1,r).format(t || "dd MMMM yyyy")
                    } catch (e) {
                        return ""
                    }
                },
                localize: (e, ...t) => $.localize(e, ...t),
                pluralize: (e, ...t) => $.pluralize(e, ...t),
                customDateTimeFormat: function(e, t, r, n, s, i) {
                    s || (s = "HH:mm");
                    const a = new Date(e)
                      , o = new Date;
                    if (a.toDateString() === o.toDateString())
                        return i ? `${r}` : `${r}, ${a.format(s)}`;
                    const l = function() {
                        return this.setDate(this.getDate() - 1),
                        this
                    }
                    .call(o);
                    if (a.toDateString() === l.toDateString())
                        return i ? `${n}` : `${n}, ${a.format(s)}`;
                    const c = a.format(t);
                    return a.getFullYear() < o.getFullYear() ? i ? `${c} ${a.getFullYear()}` : `${c} ${a.getFullYear()}, ${a.format(s)}` : i ? `${c}` : `${c}, ${a.format(s)}`
                },
                trimWord: c.trimWord,
                trimSupplierName: c.trimSupplierName,
                join: function(e) {
                    if (!e || 0 == e.length)
                        return "";
                    const {upper: t, prefix: r, separator: n} = this.tagCtx.props;
                    return e.map((e => (t && (e = e.toUpperCase()),
                    Boolean(r) && (e = `${r}${e}`),
                    e))).join(n)
                },
                humanBytes: e => {
                    const t = wb.i18n.t
                      , r = [t("common.bytes.byte"), t("common.bytes.kilobyte"), t("common.bytes.megabyte"), t("common.bytes.gigabyte")];
                    let n = 0;
                    for (; n < r.length - 1 && e >= 1024; )
                        e /= 1024,
                        n++;
                    return `${Number(e.toFixed(2))} ${r[n]}`
                }
                ,
                deliveryDateTxt: function(e, t=!1, r=!1) {
                    if (!e || "number" != typeof e)
                        return "";
                    let n;
                    const s = new Date(Date.now())
                      , i = new Date(s.getTime() + 60 * e * 60 * 1e3);
                    i.is1stJan() && !r && (i.setDate(i.getDate() + 1),
                    e += 24);
                    const a = 24 - s.getHours()
                      , o = i.getHours();
                    return s.getDate() === i.getDate() && e < 24 ? n = o < 9 ? wb.i18n.t("common.todayMorning") : o < 23 ? t ? e < 5 ? wb.i18n.plural("common.time.todayTimePeriodHour", {
                        count: 4,
                        displayCount: "1–4"
                    }) : wb.i18n.plural("common.time.todayTimePeriodHour", {
                        count: e
                    }) : wb.i18n.plural("common.time.timePeriodHour", {
                        count: e
                    }) : wb.i18n.t("common.tomorrowMorning") : e < a + 9 ? n = e < 5 ? wb.i18n.t("common.tomorrowMorning") : wb.i18n.t("common.tomorrow") : e < 24 + a ? n = o < 23 ? wb.i18n.t("common.tomorrow") : wb.i18n.t("common.dayAfterTomorrow") : e < 48 + a && o < 23 ? n = wb.i18n.t("common.dayAfterTomorrow") : (o >= 23 && (e += a),
                    n = u.dateFromTimestamp(Date.now() + 60 * e * 60 * 1e3, "d MMMM")),
                    n
                },
                minutesToTime: function(e) {
                    return `${Math.floor(e / 60)}:${(e % 60).toString().padStart(2, "0")}`
                },
                fastDeliveryText: function(e, t, r) {
                    if (!t || !e || !r)
                        return;
                    const n = new Date
                      , s = 60 * n.getHours() + n.getMinutes()
                      , i = r[0]
                      , a = r[1]
                      , o = s + 60 * e
                      , l = t[0].start
                      , c = u.minutesToTime(l);
                    if (s <= i)
                        return wb.i18n.t("common.todayFrom", {
                            slot: c
                        });
                    if (s >= i && s <= a) {
                        return t.some((e => o < e.start)) ? e < 5 ? wb.i18n.plural("common.time.timePeriodHour", {
                            count: 4,
                            displayCount: "1–4"
                        }) : wb.i18n.plural("common.time.timePeriodHour", {
                            count: e
                        }) : wb.i18n.t("common.tomorrowFrom", {
                            slot: c
                        })
                    }
                    return wb.i18n.t("common.tomorrowFrom", {
                        slot: c
                    })
                },
                formatTimeStr: function(e) {
                    return e.replace(/^0(\d):/, "$1:")
                },
                getWorkSchedule: function(e, t, r) {
                    const n = wb.i18n.t
                      , s = ["mon", "tue", "wed", "thu", "fri", "sat", "sun"].map((e => n(`common.dates.dayNamesShortUppercase.${e}`)));
                    let i, a = null;
                    if (r) {
                        let n = []
                          , o = [];
                        s.forEach(( (e, t) => {
                            0 === r[t] ? n.push(e) : o.push(e)
                        }
                        ));
                        let l = []
                          , c = [n[0]];
                        for (let e = 1; e < n.length; e++) {
                            const t = s.indexOf(n[e - 1]);
                            s.indexOf(n[e]) - t === 1 ? c.push(n[e]) : (l.push(c),
                            c = [n[e]])
                        }
                        l.push(c),
                        i = l.map((e => e.length > 1 ? `${e[0]}-${e[e.length - 1]}` : e[0])).join(", ") + ` ${$.views.converters.leadZero(e, 2)}:00-${$.views.converters.leadZero(t, 2)}:00`,
                        a = o.join(", ")
                    } else
                        i = `${wb.i18n.t("common.daily")} ${$.views.converters.leadZero(e, 2)}:00-${$.views.converters.leadZero(t, 2)}:00`;
                    return {
                        workTime: i,
                        weekend: a
                    }
                },
                deliveryType: function() {
                    const {storeType: e} = this.tagCtx.props;
                    return 4 & ~e ? 8 & ~e ? wb.i18n.t("delivery.type.wildberriesDelivery") : wb.i18n.t("delivery.type.sellerDelivery") : 8 & ~e ? wb.i18n.t("delivery.type.wildberriesCargoDelivery") : wb.i18n.t("delivery.type.sellerCargoDelivery")
                },
                formatString: function(e, t, r, n) {
                    return r && (e = e.replace(/\[(\d+)\]/gm, "{$1}")),
                    n && (t = c.encode(t)),
                    e.format(t)
                },
                trim: function(e) {
                    return null == e ? void 0 : e.trim()
                },
                imgForPromoCategory: function(e=0, t=!1, r, n) {
                    const s = t ? "small/" : ""
                      , a = r ? r + "/" : "promo_v2/"
                      , o = e < 1e6 ? e : parseInt((e + "").slice(-6));
                    return (0,
                    i.urlStaticBasket)(`wbx-catalog/${a}${s}${o}.webp`, 1)
                },
                fileName: function(e) {
                    var t, r;
                    const n = e.substring(e.lastIndexOf("/") + 1)
                      , s = null == (r = null == (t = this.tagCtx) ? void 0 : t.props) ? void 0 : r.mode;
                    return "name" == s ? n.substring(0, n.lastIndexOf(".")) || n : "extension" == s ? n.slice(1 + (Math.max(n.lastIndexOf("."), 0) || n.length)) || "" : n
                },
                convertToText: function(e) {
                    if (!Array.isArray(e) || 0 === e.length)
                        return "";
                    const t = {
                        text: wb.i18n.t("common.text"),
                        photo: wb.i18n.t("common.photo"),
                        video: wb.i18n.t("common.video")
                    }
                      , r = e.map((e => t[e.toLowerCase()].toLowerCase())).filter(Boolean);
                    if (0 === r.length)
                        return "";
                    if (1 === r.length)
                        return r[0];
                    const n = r.pop()
                      , s = r.join(", ")
                      , i = wb.i18n.t("common.and");
                    return "en" === wb.currentLanguage && e.length > 2 ? `${s}, ${i} ${n}` : `${s} ${i} ${n}`
                },
                onlyDigits: e => null == e ? void 0 : e.replace(/[^\d\.]/g, ""),
                toWebp: function(e) {
                    const t = (0,
                    o.C)();
                    return (null == t ? void 0 : t.webpImage) ? "webp" : e
                },
                useWebp: function(e) {
                    const t = (0,
                    o.C)();
                    return (null == t ? void 0 : t.webpImage) ? null == e ? void 0 : e.replace(/^(.*\.)(jpg|jpeg)$/i, "$1webp") : e
                },
                toNumber: e => Number(e),
                fixHtml: e => e ? (new DOMParser).parseFromString(e, "text/html").body.innerHTML : "",
                formatNumberWithDot: e => e ? String(e).replace(".", ",") : "",
                checkProductOpenSameWindowAb() {
                    const e = (0,
                    n.a)();
                    return "m" === wb.settings.displayMode || !(wb.global.settings.switches.enableOpenNewTab || e.checkDataInSplitterServiceV2("common", "ab_enableOpenNewTab", "yes"))
                },
                legalRedirectUrl: l.Nj,
                escapeHtml: e => e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;")
            }
        },
        94286: function(e, t, r) {
            "use strict";
            r.d(t, {
                getWbLanguages: function() {
                    return i
                }
            });
            var n = r(13808);
            const s = JSON.parse('{"ru":{"languageCode":"RU","name":"Русский"},"en":{"languageCode":"EN","name":"English"},"ka":{"languageCode":"KA","name":"ქართული"},"kk":{"languageCode":"KK","name":"Қазақ"},"uz":{"languageCode":"UZ","name":"Oʻzbek"}}');
            function i() {
                const e = n._.getAvailableLangs()
                  , t = {};
                return null == e || e.forEach((e => {
                    t[e] = s[e]
                }
                )),
                t
            }
        },
        4668: function(e, t, r) {
            "use strict";
            r.d(t, {
                AM: function() {
                    return k
                },
                CH: function() {
                    return h
                },
                Fn: function() {
                    return w
                },
                Ig: function() {
                    return y
                },
                LO: function() {
                    return C
                },
                NG: function() {
                    return I
                },
                QQ: function() {
                    return u
                },
                Yo: function() {
                    return l
                },
                _S: function() {
                    return b
                },
                f6: function() {
                    return c
                },
                fR: function() {
                    return m
                },
                lY: function() {
                    return P
                },
                m9: function() {
                    return S
                },
                qn: function() {
                    return p
                },
                r8: function() {
                    return g
                },
                ue: function() {
                    return _
                },
                vh: function() {
                    return d
                },
                wG: function() {
                    return f
                }
            });
            var n, s, i, a, o = r(27157);
            const l = {
                Accepted: 0,
                Assembling: 1,
                Rejected: 2,
                Processing: 3,
                Completed: 5,
                ValidateFail: 6,
                Validated: 7,
                Error: 8
            }
              , c = {
                Unknown: -1,
                NotPaid: 1,
                PaySent: 2,
                PayFail: 3,
                Paid: 4,
                Refunded: 5
            }
              , u = (Object.freeze({
                Accepted: 0,
                New: 1,
                Failed: 2,
                Processing: 4,
                Completed: 5
            }),
            c.NotPaid,
            c.PaySent,
            c.PayFail,
            l.Accepted,
            l.Assembling,
            l.Processing,
            l.Validated,
            l.Rejected,
            l.Completed,
            new Set(["SRC", "SRD", "SRF", "SRG", "SRK", "SRM", "SRN", "SRO", "SRP", "SRR", "SRT", "SRV"]))
              , d = new Set(["CIF", "CRE", "WIF", "WIS", "XYZ", "PDL", "CWB", "BPL", "ACC"])
              , h = {
                Card: 1,
                DefaultCard: 4,
                SbpQrc: 7,
                Sbp: 8,
                WalletQrc: 9,
                WalletSbp: 10,
                WalletMe2Me: 11,
                Wallet: 12,
                SberPay: 13,
                PDL: 14,
                Dram: 15,
                C2CCard: 17
            }
              , p = {
                Courier: 5,
                PickupOffice: 6,
                Cargo: 17,
                SellerReturn: 30,
                Kiosk: 31,
                IzraelPost: 33,
                SelfTechPostamat: 86,
                ExpressCourier: 100,
                Booking: 111,
                DBSP: 113,
                DBS: 125,
                EDBS: 135,
                DBSCargo: 127,
                EDBSCargo: 137,
                CourierWbGo: 333,
                CargoWgGo: 555
            }
              , m = [p.Courier, p.ExpressCourier, p.DBS, p.EDBS, p.CourierWbGo]
              , b = [p.Cargo, p.DBSCargo, p.EDBSCargo, p.CargoWgGo]
              , g = 12
              , y = 3
              , f = 5
              , v = {
                RUB: 100,
                BYN: 3.5,
                AMD: 430,
                KZT: 540,
                KGS: 93,
                UZS: 13800,
                GEL: 3,
                TJS: 12,
                TMT: 3.8,
                AZN: 1.9,
                USD: 1
            }
              , w = e => {
                var t, r, n;
                const s = null == (n = null == (r = null == (t = wb.global.settings.mobileAppVariables) ? void 0 : t.objects) ? void 0 : r.UnclaimedPrice) ? void 0 : n[e];
                return (0,
                o.Sw)(s) && s > 0 ? s : v[e]
            }
              , _ = 3
              , S = (null == (a = null == (i = null == (s = null == (n = wb.global) ? void 0 : n.settings) ? void 0 : s.mobileAppVariables) ? void 0 : i.numbers) || a.expirationPvzDays,
            e => {
                var t, r, n;
                return null == (n = null == (r = null == (t = wb.global.settings.mobileAppVariables) ? void 0 : t.objects) ? void 0 : r.subjIdForWbCard) ? void 0 : n.includes(e)
            }
            )
              , C = 21
              , I = 10
              , k = (e, t) => {
                var r, n, s, i;
                const a = t ? 7200 : null != (i = null == (s = null == (n = null == (r = wb.global) ? void 0 : r.settings) ? void 0 : n.variables) ? void 0 : s.failedPaymentsDisplayMinutes) ? i : 0;
                return Math.floor(Math.max(0, new Date(e).addMinutes(a).getTime() - (new Date).getTime()) / 1e3)
            }
              , P = {
                CANCEL_ITEM: "cancelItem",
                IS_PREPAID: "isPrepaid",
                IS_ON_SHELF: "isOnShelf",
                NEEDS_DELIVERY_UPDATE: "needsDeliveryUpdate",
                LOCATION: "location",
                ALL: "all"
            }
        },
        23565: function(e, t, r) {
            "use strict";
            r.d(t, {
                Hl: function() {
                    return a
                },
                bD: function() {
                    return n
                },
                if: function() {
                    return i
                },
                s8: function() {
                    return s
                }
            });
            const n = {
                Unknown: "unknown",
                Anonymous: "anonymous",
                Verified: "verified",
                Account: "account"
            }
              , s = {
                Unknown: "unknown",
                Active: "active",
                Blocked: "blocked",
                BlockedSystem: "blocked_system",
                BlockedSystemClose: "blocked_system_close",
                BlockedUser: "blocked_user",
                Closed: "closed",
                Rejected: "rejected",
                Pending: "pending"
            }
              , i = "_wallet-opened"
              , a = {
                walletLimit: "walletLimit",
                walletOrderLimit: "walletOrderLimit",
                walletVolumeLimit: "walletVolumeLimit"
            }
        },
        56284: function(e, t, r) {
            "use strict";
            r.d(t, {
                x: function() {
                    return n
                }
            });
            Object.defineProperty;
            const n = {
                NONE: 0,
                VISUALLY_SIMILAR: 1,
                SIMILAR: 2,
                ALSO_BUY: 3,
                TODAY_IS_TOP: 4,
                MAYBE_YOU_INTEREST: 5,
                BESTSELLERS: 6,
                PERSONAL: 7,
                RECOMMENDED_BY_NM: 8,
                PROMO: 9,
                SAME_BUY: 10,
                RECENT: 11
            }
        },
        27157: function(e, t, r) {
            "use strict";
            r.d(t, {
                Sw: function() {
                    return i
                },
                cA: function() {
                    return n
                },
                sg: function() {
                    return s
                }
            });
            const n = () => String(performance.now()) + (1e9 * Math.random()).toFixed() + String(Date.now())
              , s = (e, t) => {
                let r = null
                  , n = Date.now();
                return t <= 0 ? e : (...s) => {
                    const i = Date.now();
                    r && i - n <= t ? clearTimeout(r) : n = Date.now(),
                    r = setTimeout(( () => e(...s)), t)
                }
            }
              , i = e => !isNaN(parseFloat(String(e))) && isFinite(Number(e))
        },
        80053: function(e, t) {
            "use strict";
            function r(e) {
                return e < 26 ? e + 65 : e < 52 ? e + 71 : e < 62 ? e - 4 : 62 === e ? 43 : 63 === e ? 47 : 65
            }
            function n(e) {
                for (var t = 2, n = "", s = e.length, i = 0, a = 0; a < s; a++)
                    t = a % 3,
                    i |= e[a] << (16 >>> t & 24),
                    2 !== t && e.length - a !== 1 || (n += String.fromCodePoint(r(i >>> 18 & 63), r(i >>> 12 & 63), r(i >>> 6 & 63), r(63 & i)),
                    i = 0);
                return n.substr(0, n.length - 2 + t) + (2 === t ? "" : 1 === t ? "=" : "==")
            }
            t.A = class {
                static decode(e) {
                    return e ? function(e) {
                        for (var t, r = "", n = e.length, s = 0; s < n; s++)
                            t = e[s],
                            r += String.fromCodePoint(t > 251 && t < 254 && s + 5 < n ? 1073741824 * (t - 252) + (e[++s] - 128 << 24) + (e[++s] - 128 << 18) + (e[++s] - 128 << 12) + (e[++s] - 128 << 6) + e[++s] - 128 : t > 247 && t < 252 && s + 4 < n ? (t - 248 << 24) + (e[++s] - 128 << 18) + (e[++s] - 128 << 12) + (e[++s] - 128 << 6) + e[++s] - 128 : t > 239 && t < 248 && s + 3 < n ? (t - 240 << 18) + (e[++s] - 128 << 12) + (e[++s] - 128 << 6) + e[++s] - 128 : t > 223 && t < 240 && s + 2 < n ? (t - 224 << 12) + (e[++s] - 128 << 6) + e[++s] - 128 : t > 191 && t < 224 && s + 1 < n ? (t - 192 << 6) + e[++s] - 128 : t);
                        return r
                    }(function(e, t) {
                        for (var r, n, s, i = e.replace(/[^A-Za-z0-9\+\/]/g, ""), a = i.length, o = t ? Math.ceil((3 * a + 1 >> 2) / t) * t : 3 * a + 1 >> 2, l = new Uint8Array(o), c = 0, u = 0, d = 0; d < a; d++)
                            if (n = 3 & d,
                            c |= ((s = i.charCodeAt(d)) > 64 && s < 91 ? s - 65 : s > 96 && s < 123 ? s - 71 : s > 47 && s < 58 ? s + 4 : 43 === s ? 62 : 47 === s ? 63 : 0) << 6 * (3 - n),
                            3 === n || a - d === 1) {
                                for (r = 0; r < 3 && u < o; r++,
                                u++)
                                    l[u] = c >>> (16 >>> r & 24) & 255;
                                c = 0
                            }
                        return l
                    }(e)) : null
                }
                static encode(e) {
                    return e ? n(function(e) {
                        for (var t, r, n = e.length, s = 0, i = 0; i < n && null != (r = e.codePointAt(i)); i++)
                            r > 65536 && i++,
                            s += r < 128 ? 1 : r < 2048 ? 2 : r < 65536 ? 3 : r < 2097152 ? 4 : r < 67108864 ? 5 : 6;
                        t = new Uint8Array(s);
                        for (var a = 0, o = 0; a < s && null != (r = e.codePointAt(o)); o++)
                            r < 128 ? t[a++] = r : r < 2048 ? (t[a++] = 192 + (r >>> 6),
                            t[a++] = 128 + (63 & r)) : r < 65536 ? (t[a++] = 224 + (r >>> 12),
                            t[a++] = 128 + (r >>> 6 & 63),
                            t[a++] = 128 + (63 & r)) : r < 2097152 ? (t[a++] = 240 + (r >>> 18),
                            t[a++] = 128 + (r >>> 12 & 63),
                            t[a++] = 128 + (r >>> 6 & 63),
                            t[a++] = 128 + (63 & r),
                            o++) : r < 67108864 ? (t[a++] = 248 + (r >>> 24),
                            t[a++] = 128 + (r >>> 18 & 63),
                            t[a++] = 128 + (r >>> 12 & 63),
                            t[a++] = 128 + (r >>> 6 & 63),
                            t[a++] = 128 + (63 & r),
                            o++) : (t[a++] = 252 + (r >>> 30),
                            t[a++] = 128 + (r >>> 24 & 63),
                            t[a++] = 128 + (r >>> 18 & 63),
                            t[a++] = 128 + (r >>> 12 & 63),
                            t[a++] = 128 + (r >>> 6 & 63),
                            t[a++] = 128 + (63 & r),
                            o++);
                        return t
                    }(e)) : ""
                }
                static encodeBytesArr(e) {
                    return n(e)
                }
            }
        },
        5977: function(e, t, r) {
            "use strict";
            r.r(t),
            r.d(t, {
                Deferred: function() {
                    return N
                },
                animationFrameWithMinDelay: function() {
                    return q
                },
                base64: function() {
                    return V
                },
                debounce: function() {
                    return M
                },
                debounceLead: function() {
                    return T
                },
                debounceTrail: function() {
                    return E
                },
                deepMerge: function() {
                    return k
                },
                deepMerge_v2: function() {
                    return P
                },
                delay: function() {
                    return F
                },
                delegator: function() {
                    return L
                },
                getClientDt: function() {
                    return U
                },
                isElementInViewport: function() {
                    return j
                },
                isMobileBrowser: function() {
                    return W
                },
                isNumber: function() {
                    return H
                },
                loadCssAsync: function() {
                    return G
                },
                loadJsAsync: function() {
                    return z
                },
                lockPromise: function() {
                    return B
                },
                moveToAnchor: function() {
                    return K
                },
                nextTick: function() {
                    return x
                },
                objectSerializer: function() {
                    return C
                },
                once: function() {
                    return O
                },
                repeat: function() {
                    return A
                },
                scriptLoader: function() {
                    return w
                },
                serializeToFormData: function() {
                    return I
                },
                sleep: function() {
                    return R
                },
                styleLoader: function() {
                    return _
                },
                switchableLoadAsync: function() {
                    return S
                },
                throttle: function() {
                    return D
                }
            });
            var n = Object.defineProperty
              , s = Object.getOwnPropertySymbols
              , i = Object.prototype.hasOwnProperty
              , a = Object.prototype.propertyIsEnumerable
              , o = (e, t, r) => t in e ? n(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r
              , l = (e, t) => {
                for (var r in t || (t = {}))
                    i.call(t, r) && o(e, r, t[r]);
                if (s)
                    for (var r of s(t))
                        a.call(t, r) && o(e, r, t[r]);
                return e
            }
            ;
            class c {
                static getCookie(e) {
                    const t = document.cookie.split(";").find((t => {
                        const [r] = t.trim().split("=");
                        return r == e
                    }
                    ));
                    return t ? decodeURIComponent(t.trim().split("=")[1]) : null
                }
                static setCookie(e, t, r={}) {
                    r = l({
                        path: "/",
                        "max-age": 31536e3
                    }, r);
                    let n = encodeURIComponent(e) + "=" + encodeURIComponent(t);
                    Object.keys(r).forEach((e => {
                        n += `; ${e}`,
                        1 != r[e] && (n += `=${r[e]}`)
                    }
                    )),
                    document.cookie = n
                }
                static deleteCookie(e, t={}) {
                    c.setCookie(e, "", l({
                        "max-age": -1
                    }, t))
                }
            }
            wb.cookieHelper = c;
            var u = r(74929)
              , d = Object.defineProperty;
            const h = class e {
                static isEnableWalletDiscountRounder() {
                    return !!(0,
                    u.c)().isAuth && (null === this.isEnableWalletDiscountRounderCache && (this.isEnableWalletDiscountRounderCache = Boolean(wb.global.settings.switches.enableWalletDiscountRounder || wb.analitics.checkDataInSplitterServiceV2("common", "ab_discount_rounder", "enable"))),
                    this.isEnableWalletDiscountRounderCache)
                }
                static canShowWalletDiscount(e=0, t=0, r="", n=0, s=0, i=0) {
                    if (1048576 & n || 0 === s || 536870912 & n)
                        return !1;
                    if (wb.settings.walletRidLimit) {
                        if (-1 === wb.settings.walletRidLimit)
                            return "RUB" === r && "ge" !== wb.settings.currentLocale;
                        if (wb.settings.walletRidLimit < t)
                            return !1
                    }
                    return (i || (wb.settings.walletTypeCode > 1 ? wb.global.settings.variables.wlt2DiscountDisplayMaxPrice : wb.global.settings.variables.wlt1DiscountDisplayMaxPrice)) >= e && "RUB" === r && !["ge", "tj"].includes(wb.settings.currentLocale)
                }
                static calcWalletDiscount(t=0, r=0, n="", s=0, i=0, a=0) {
                    const o = i || (wb.settings.walletTypeCode > 1 ? wb.settings.wlt2DiscountPercent : wb.settings.wlt1DiscountPercent)
                      , l = wb.global.settings.variables.discountRounding
                      , c = (null == l ? void 0 : l.multiplicity) || 0
                      , u = (null == l ? void 0 : l.lowerRoundingThreshold) ? l.lowerRoundingThreshold / 100 : null;
                    if (o > 0) {
                        let i = 0;
                        if (this.isEnableWalletDiscountRounder() && null !== u && t > u && c > 0 && (i = e.calculateDiscountWithRounding({
                            price: t,
                            walletDiscountPercent: o,
                            multiplicity: c,
                            currency: n
                        })),
                        i <= 0 && (i = e.calculateDiscount(t, o, n)),
                        e.canShowWalletDiscount(t - i, r, n, s, o, a))
                            return i
                    }
                    return 0
                }
                static calcPaymentSaleAmount(e, t) {
                    return e * (t / 100)
                }
                static hasRemainder(e, t) {
                    return e % t > 0
                }
                static calculateDiscountWithRounding({price: e=0, walletDiscountPercent: t=0, multiplicity: r=0, currency: n="", floor: s=!0}) {
                    if (!e || !t || !r)
                        return 0;
                    const i = e - this.calcPaymentSaleAmount(e, t);
                    if (!this.hasRemainder(i, r))
                        return 0;
                    const a = e - Math.ceil(i / r) * r;
                    return a <= 0 ? 0 : this.toLocalPrice(a, n, s)
                }
                static calculateDiscount(e=0, t=0, r="", n=!1) {
                    if (!e || !t)
                        return 0;
                    const s = this.calcPaymentSaleAmount(e, t);
                    return this.toLocalPrice(s, r, n)
                }
                static calculateCommission(e, t, r="") {
                    return this.calculateDiscount(e, t, r, !0)
                }
                static calculateAdjustedDiscount(e=0, t=0, r=0, n="") {
                    if (!t || !r)
                        return 0;
                    let s = e / t * r;
                    return this.toLocalPrice(s, n)
                }
                static toLocalPrice(e=0, t="", r=!1) {
                    if (0 !== e) {
                        const n = $.views.helpers.minFiscalPriceInCurrency(t);
                        e = e < n ? n : Math[r ? "floor" : "ceil"](e / n) * n
                    }
                    return e
                }
                static calculateCustomCharges(e, t, r) {
                    var n, s;
                    const i = 100 * e;
                    if (!r)
                        return 0;
                    if (i < r.dutyFreelimit)
                        return 0;
                    const a = ((null == (s = null == (n = wb.global.settings) ? void 0 : n.switches) ? void 0 : s.enableNewDutyCalculation) ? i : i - r.dutyFreelimit) * (r.duty / 100) + r.fixedAmount;
                    return $.views.helpers.toLocalPrice(a / 100, t)
                }
                static getReturnableVatPercent(e) {
                    return !!e && (!!wb.xnm.isVatRefundable(e) && wb.xnm.getVatPercent(e))
                }
                static verificationRequired({userInfo: e, signedBalance: t, storesMap: r, storeId: n, addressLocale: s}) {
                    return (null == e ? void 0 : e.isAuthenticated) && r.needVerification(s, n) && !(!(1 & ~e.verificationLevel) || "active" == (null == t ? void 0 : t.walletStatus) && "verified" == (null == t ? void 0 : t.walletType))
                }
            }
            ;
            var p;
            ( (e, t, r) => {
                t in e ? d(e, t, {
                    enumerable: !0,
                    configurable: !0,
                    writable: !0,
                    value: r
                }) : e[t] = r
            }
            )(h, "symbol" != typeof (p = "isEnableWalletDiscountRounderCache") ? p + "" : p, null);
            let m = h;
            wb.priceHelper = m;
            var b = r(80053)
              , g = r(28288)
              , y = r(81499)
              , f = Object.defineProperty
              , v = (e, t, r) => ( (e, t, r) => t in e ? f(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const w = {
                cache: {},
                onFirstExecution() {
                    0 === Object.keys(this.cache).length && document.querySelectorAll("script[type='text/javascript']").forEach((e => {
                        if ("" !== e.src) {
                            const t = e.src.replace(/https?:/, "");
                            this.cache[t] = Promise.resolve()
                        }
                    }
                    ))
                },
                require(e) {
                    let t = this.cache[e];
                    return null == t && (this.onFirstExecution(),
                    t = this.cache[e],
                    null == t && (t = this.cache[e] = S(e, this.loadScriptAsync))),
                    t.catch((t => (this.cache[e] = null,
                    Promise.reject(t))))
                },
                loadScriptAsync(e) {
                    return new Promise(( (t, r) => {
                        try {
                            const n = document.createElement("script");
                            n.type = "text/javascript",
                            n.src = e,
                            n.onload = t,
                            n.onerror = r,
                            document.body.appendChild(n)
                        } catch (e) {
                            r(e)
                        }
                    }
                    ))
                }
            }
              , _ = {
                cashe: {},
                orinalStylesIncluded: !1,
                require(e) {
                    return new Promise(( (t, r) => {
                        this.orinalStylesIncluded || this.addOrinalStyles(),
                        null == this.cashe[e] && (this.cashe[e] = S(e, this.loadCssAsync)),
                        this.cashe[e].then(t).catch((t => {
                            this.cashe[e] = null,
                            r(t)
                        }
                        ))
                    }
                    ))
                },
                addOrinalStyles() {
                    this.orinalStylesIncluded = !0,
                    document.querySelectorAll("link[type='text/css']").forEach((e => this.cashe[e.href.replace(/https?:/, "")] = Promise.resolve()))
                },
                loadCssAsync(e) {
                    return new Promise(( (t, r) => {
                        var n;
                        let s;
                        if (navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0) {
                            const n = document.createElement("link");
                            n.href = e,
                            n.type = "text/css",
                            n.rel = "stylesheet",
                            n.onload = t,
                            n.onerror = r,
                            s = n
                        } else {
                            const n = document.createElement("style");
                            n.onload = t,
                            n.textContent = `@import "${e}"`,
                            n.onload = t,
                            n.onerror = r,
                            s = n
                        }
                        null == (n = document.querySelector("head")) || n.appendChild(s)
                    }
                    ))
                }
            };
            async function S(e, t) {
                return new Promise(( (r, n) => {
                    "/" === e[0] && "/" !== e[1] && (e = e.slice(1));
                    const s = (0,
                    g.urlSiteStatic)(e)
                      , i = (0,
                    g.urlSiteStatic)(e, !0);
                    t(s).then((e => r())).catch((e => t(i).then((e => r())).catch((e => n()))))
                }
                ))
            }
            function C(e, t=new URLSearchParams, r=!1, n=!1) {
                const s = (e, i) => {
                    n && "boolean" == typeof i ? null == t || t.append(e, i.toString()) : "object" == typeof i && null != i ? Object.entries(i).forEach(( ([t,r]) => {
                        s(`${e}[${t}]`, r)
                    }
                    )) : r && null == i || null == t || t.append(e, i)
                }
                ;
                return Object.entries(e).forEach(( ([e,t]) => s(e, t))),
                t
            }
            function I(e, t=new FormData) {
                const r = (e, n="") => {
                    for (let s in e) {
                        const i = e[s];
                        let a = s;
                        n && (a = Array.isArray(e) ? `${n}[${s}]` : `${n}.${s}`),
                        "boolean" == typeof i || "string" == typeof i || "number" == typeof i ? t.append(a, i.toString()) : "object" == typeof i && r(i, a)
                    }
                }
                ;
                return r(e),
                t
            }
            function k(...e) {
                let t = e[0]
                  , r = e => {
                    for (let r in e)
                        e.hasOwnProperty(r) && ("[object Object]" === Object.prototype.toString.call(e[r]) && null != t[r] ? t[r] = k(t[r], e[r]) : t[r] = e[r])
                }
                ;
                for (let t = 1; t < e.length; t++)
                    r(e[t]);
                return t
            }
            function P(...e) {
                let t = e[0]
                  , r = e => {
                    for (let r in e)
                        e.hasOwnProperty(r) && ("[object Object]" === Object.prototype.toString.call(e[r]) && null != t[r] ? t[r] = P(t[r], e[r]) : void 0 !== e[r] && (t[r] = e[r]))
                }
                ;
                for (let t = 1; t < e.length; t++)
                    r(e[t]);
                return t
            }
            const M = (e, t) => {
                let r = null;
                return function(...n) {
                    r && clearTimeout(r),
                    r = setTimeout(( () => {
                        e.apply(this, n),
                        r = null
                    }
                    ), t)
                }
            }
              , T = (e, t=300) => {
                let r;
                return function(...n) {
                    r || e.apply(this, n),
                    r && clearTimeout(r),
                    r = setTimeout(( () => r = null), t)
                }
            }
              , E = (e, t=300) => {
                let r;
                return function(...n) {
                    clearTimeout(r),
                    r = setTimeout(( () => {
                        e.apply(this, n)
                    }
                    ), t)
                }
            }
              , D = (e, t) => {
                let r, n, s = !1;
                return function i(...a) {
                    if (s)
                        return r = a,
                        void (n = this);
                    e.apply(this, a),
                    s = !0,
                    setTimeout((function() {
                        s = !1,
                        r && (i.apply(n, r),
                        r = n = null)
                    }
                    ), t)
                }
            }
              , A = (e, t, r, n) => {
                let s = 0
                  , i = setInterval((function() {
                    if (s > t)
                        return clearInterval(i),
                        void (n && n());
                    e(i) && clearInterval(i),
                    s++
                }
                ), r);
                return i
            }
              , O = e => {
                let t = !1;
                return function(...r) {
                    return t ? void 0 : (t = !0,
                    e.apply(this, r))
                }
            }
              , B = e => {
                let t = null;
                return function(...r) {
                    return t || (t = e.apply(this, r).then((e => e)).finally(( () => t = null))),
                    t
                }
            }
              , L = (e, t) => function(r) {
                let n = null;
                r.target instanceof HTMLElement && (n = r.target.closest(e)),
                null != n && t(r, n)
            }
              , x = () => Promise.resolve().then(( () => Promise.resolve()))
              , R = e => new Promise((t => setTimeout(t, e)))
              , F = (e, t) => new Promise(( (r, n) => setTimeout(( () => {
                try {
                    t() && r()
                } catch (e) {
                    n(e)
                }
            }
            ), e)));
            function j(e, t, r) {
                var n;
                const s = e.getBoundingClientRect();
                return r && (r.threshold = null != (n = r.threshold) ? n : 10,
                H(r.top)) ? s.top >= r.top - r.threshold && s.top <= r.top + r.threshold : s.top >= 0 && (t || s.left >= 0) && s.bottom <= (window.innerHeight || document.documentElement.clientHeight) && (t || s.right <= (window.innerWidth || document.documentElement.clientWidth))
            }
            class N {
                constructor() {
                    v(this, "_resolve", ( () => {}
                    )),
                    v(this, "_reject", ( () => {}
                    )),
                    v(this, "_promise", new Promise(( (e, t) => {
                        this._reject = t,
                        this._resolve = e
                    }
                    )))
                }
                get promise() {
                    return this._promise
                }
                get then() {
                    return this._promise.then.bind(this._promise)
                }
                resolve(e) {
                    this._resolve(e)
                }
                reject(e) {
                    this._reject(e)
                }
            }
            function U() {
                const e = new Date
                  , t = new Date(e.getTime() - 6e4 * e.getTimezoneOffset()).toISOString();
                return t.slice(0, t.length - 1)
            }
            function W() {
                if (void 0 !== window._isMobileBrowser)
                    return window._isMobileBrowser;
                let e = !1;
                var t;
                return t = navigator.userAgent || navigator.vendor || window.opera,
                (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0, 4))) && (e = !0),
                window._isMobileBrowser = e,
                window._isMobileBrowser
            }
            function H(e) {
                return !isNaN(parseFloat(String(e))) && isFinite(Number(e))
            }
            function q(e, t) {
                const r = performance.now()
                  , n = () => performance.now() - r > e ? t() : window.requestAnimationFrame(n);
                window.requestAnimationFrame(n)
            }
            const V = b.A
              , z = w.require.bind(w)
              , G = _.require.bind(_)
              , K = function(...e) {
                const t = (0,
                y.d)()
                  , r = arguments[0]
                  , n = e.find((e => e instanceof Event || e instanceof jQuery.Event))
                  , s = arguments[1]instanceof Event || arguments[1]instanceof jQuery.Event || arguments[1]
                  , i = !(arguments[2]instanceof Event || arguments[2]instanceof jQuery.Event) && arguments[2]
                  , a = arguments[3]instanceof Event || arguments[3]instanceof jQuery.Event || !arguments[3] ? 0 : arguments[3];
                null == n || n.preventDefault(),
                null == n || n.stopPropagation(),
                null == n || n.stopImmediatePropagation();
                const o = document.getElementById(r);
                if (null == o)
                    return void console.warn("anchor element doesnt exist");
                const l = {
                    top: 0 + a
                };
                let c = t.isElementInViewport(o, !0, l);
                function u() {
                    "scrollBehavior"in document.documentElement.style ? window.scrollTo({
                        top: window.pageYOffset + o.getBoundingClientRect().top - a,
                        left: 0,
                        behavior: s ? "smooth" : "auto"
                    }) : window.scrollTo(0, window.pageYOffset + o.getBoundingClientRect().top - a)
                }
                if (u(),
                i) {
                    const e = setInterval(( () => {
                        c = t.isElementInViewport(o, !0, l),
                        c ? clearInterval(e) : u()
                    }
                    ), 500)
                }
            }
        },
        2358: function(e, t, r) {
            "use strict";
            r.d(t, {
                Nj: function() {
                    return o
                },
                Xd: function() {
                    return i
                }
            });
            var n = r(89687);
            const s = Object.freeze({
                SALES_RULES: "/services/pravila-prodazhi",
                SALES_POLICY: "/services/pravila-polzovaniya-torgovoy-ploshchadkoy",
                LINKING_TERMS: "/services/account-linking-terms",
                PERSONAL_POLICY: "/services/politika-obrabotki-personalnyh-dannyh",
                TECH_RULES: "/services/pravila-primeneniya-rekomendatelnyh-tehnologiy",
                VIDEO_POLICY: "/services/politika-videonablyudeniya",
                PRIVACY_POLICY: "/services/politika-konfidentsialnosti",
                GIFT_CERT_RULES: "/services/pravila-podarochnyh-sertifikatov"
            })
              , i = Object.freeze({
                [s.SALES_RULES]: "/rules-for-selling-goods",
                [s.SALES_POLICY]: "/consumers-offer",
                [s.LINKING_TERMS]: "/account-linking-terms",
                [s.PERSONAL_POLICY]: "/privacypolicy",
                [s.TECH_RULES]: "/rules-for-the-use-of-recommendation-technologies",
                [s.VIDEO_POLICY]: "/video-surveillance-policy",
                [s.PRIVACY_POLICY]: "/privacypolicy",
                [s.GIFT_CERT_RULES]: "/rules-for-the-purchase-and-use-of-gift-certificates"
            })
              , a = "https://legal.wildberries."
              , o = e => {
                const t = (0,
                n.u)();
                if (!i[e])
                    return e;
                const r = wb.i18n.language
                  , o = wb.settings.currentLocale
                  , l = t.getLocale();
                if (e === s.TECH_RULES)
                    return `${a}ru${i[e]}/country/ru/lang/ru/`;
                if (e === s.VIDEO_POLICY)
                    return `${a}by${i[e]}/country/by/lang/ru/`;
                if ("il" === l)
                    return e === s.PRIVACY_POLICY || e === s.PERSONAL_POLICY ? `${a}ru/global-confidentiality-policy/country/ru/lang/ru/` : `${a}ru${i[e]}/country/ru/lang/ru/`;
                const c = window.location.hash
                  , u = `${i[e]}/country/${l}/lang/ru/` + c
                  , d = `${i[e]}/country/${l}/lang/${r}/` + c;
                switch (o) {
                case "ru":
                case "am":
                case "kg":
                case "by":
                case "tj":
                    return `${a}${o}${u}`;
                case "uz":
                    return o === l && "uz" === r ? `${a}${o}${d}` : `${a}${o}/ru${u}`;
                case "global":
                    return "kz" === l ? "kk" === r ? `${a}ru/${r}${d}` : `${a}ru${u}` : `${a}${l}${u}`;
                default:
                    return e
                }
            }
        },
        19109: function(e, t, r) {
            "use strict";
            function n(e, t, r, n) {
                if (null == e)
                    return !1;
                const s = e.resultState
                  , i = e.value;
                if (-1 === s) {
                    const t = e.value || wb.i18n.t("common.errors.serverError");
                    return "boolean" == typeof r ? (r && wb.popup.renderModalError(t),
                    !0) : (null != r && null != i ? r(i) : null != i && window.alert(String(i)),
                    !0)
                }
                if (0 === s)
                    return null != t && (t(i),
                    !0);
                if (1 === s)
                    return window.location.href = String(i),
                    !0;
                if (2 === s || 4 === s) {
                    if (4 === s && wb.spa)
                        return wb.spa.refresh(),
                        !0;
                    let e = window.location.href;
                    const t = e.indexOf("#");
                    return -1 !== t && (e = e.substr(0, t)),
                    null != i ? (window.location.href = e + i,
                    window.location.reload()) : window.location.href = e,
                    !0
                }
                if (3 === s) {
                    const e = i;
                    if (null == e ? void 0 : e.url) {
                        if (wb.spa) {
                            const t = new URL(decodeURIComponent(e.url),window.location.origin);
                            return e.redirect = !0,
                            null == n || n(e),
                            wb.spa.redirect(t.href, e.replaceState, e.forceUpdate),
                            !0
                        }
                        return window.location.href = e.url,
                        !0
                    }
                }
                return !0
            }
            r.d(t, {
                p: function() {
                    return n
                }
            })
        },
        42044: function(e) {
            var t = {
                utf8: {
                    stringToBytes: function(e) {
                        return t.bin.stringToBytes(unescape(encodeURIComponent(e)))
                    },
                    bytesToString: function(e) {
                        return decodeURIComponent(escape(t.bin.bytesToString(e)))
                    }
                },
                bin: {
                    stringToBytes: function(e) {
                        for (var t = [], r = 0; r < e.length; r++)
                            t.push(255 & e.charCodeAt(r));
                        return t
                    },
                    bytesToString: function(e) {
                        for (var t = [], r = 0; r < e.length; r++)
                            t.push(String.fromCharCode(e[r]));
                        return t.join("")
                    }
                }
            };
            e.exports = t
        },
        15864: function(e) {
            var t, r;
            t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
            r = {
                rotl: function(e, t) {
                    return e << t | e >>> 32 - t
                },
                rotr: function(e, t) {
                    return e << 32 - t | e >>> t
                },
                endian: function(e) {
                    if (e.constructor == Number)
                        return 16711935 & r.rotl(e, 8) | 4278255360 & r.rotl(e, 24);
                    for (var t = 0; t < e.length; t++)
                        e[t] = r.endian(e[t]);
                    return e
                },
                randomBytes: function(e) {
                    for (var t = []; e > 0; e--)
                        t.push(Math.floor(256 * Math.random()));
                    return t
                },
                bytesToWords: function(e) {
                    for (var t = [], r = 0, n = 0; r < e.length; r++,
                    n += 8)
                        t[n >>> 5] |= e[r] << 24 - n % 32;
                    return t
                },
                wordsToBytes: function(e) {
                    for (var t = [], r = 0; r < 32 * e.length; r += 8)
                        t.push(e[r >>> 5] >>> 24 - r % 32 & 255);
                    return t
                },
                bytesToHex: function(e) {
                    for (var t = [], r = 0; r < e.length; r++)
                        t.push((e[r] >>> 4).toString(16)),
                        t.push((15 & e[r]).toString(16));
                    return t.join("")
                },
                hexToBytes: function(e) {
                    for (var t = [], r = 0; r < e.length; r += 2)
                        t.push(parseInt(e.substr(r, 2), 16));
                    return t
                },
                bytesToBase64: function(e) {
                    for (var r = [], n = 0; n < e.length; n += 3)
                        for (var s = e[n] << 16 | e[n + 1] << 8 | e[n + 2], i = 0; i < 4; i++)
                            8 * n + 6 * i <= 8 * e.length ? r.push(t.charAt(s >>> 6 * (3 - i) & 63)) : r.push("=");
                    return r.join("")
                },
                base64ToBytes: function(e) {
                    e = e.replace(/[^A-Z0-9+\/]/gi, "");
                    for (var r = [], n = 0, s = 0; n < e.length; s = ++n % 4)
                        0 != s && r.push((t.indexOf(e.charAt(n - 1)) & Math.pow(2, -2 * s + 8) - 1) << 2 * s | t.indexOf(e.charAt(n)) >>> 6 - 2 * s);
                    return r
                }
            },
            e.exports = r
        },
        60669: function(e) {
            function t(e) {
                return !!e.constructor && "function" == typeof e.constructor.isBuffer && e.constructor.isBuffer(e)
            }
            e.exports = function(e) {
                return null != e && (t(e) || function(e) {
                    return "function" == typeof e.readFloatLE && "function" == typeof e.slice && t(e.slice(0, 0))
                }(e) || !!e._isBuffer)
            }
        },
        90532: function(e, t, r) {
            var n, s, i, a, o;
            n = r(15864),
            s = r(42044).utf8,
            i = r(60669),
            a = r(42044).bin,
            (o = function(e, t) {
                e.constructor == String ? e = t && "binary" === t.encoding ? a.stringToBytes(e) : s.stringToBytes(e) : i(e) ? e = Array.prototype.slice.call(e, 0) : Array.isArray(e) || e.constructor === Uint8Array || (e = e.toString());
                for (var r = n.bytesToWords(e), l = 8 * e.length, c = 1732584193, u = -271733879, d = -1732584194, h = 271733878, p = 0; p < r.length; p++)
                    r[p] = 16711935 & (r[p] << 8 | r[p] >>> 24) | 4278255360 & (r[p] << 24 | r[p] >>> 8);
                r[l >>> 5] |= 128 << l % 32,
                r[14 + (l + 64 >>> 9 << 4)] = l;
                var m = o._ff
                  , b = o._gg
                  , g = o._hh
                  , y = o._ii;
                for (p = 0; p < r.length; p += 16) {
                    var f = c
                      , v = u
                      , w = d
                      , _ = h;
                    c = m(c, u, d, h, r[p + 0], 7, -680876936),
                    h = m(h, c, u, d, r[p + 1], 12, -389564586),
                    d = m(d, h, c, u, r[p + 2], 17, 606105819),
                    u = m(u, d, h, c, r[p + 3], 22, -1044525330),
                    c = m(c, u, d, h, r[p + 4], 7, -176418897),
                    h = m(h, c, u, d, r[p + 5], 12, 1200080426),
                    d = m(d, h, c, u, r[p + 6], 17, -1473231341),
                    u = m(u, d, h, c, r[p + 7], 22, -45705983),
                    c = m(c, u, d, h, r[p + 8], 7, 1770035416),
                    h = m(h, c, u, d, r[p + 9], 12, -1958414417),
                    d = m(d, h, c, u, r[p + 10], 17, -42063),
                    u = m(u, d, h, c, r[p + 11], 22, -1990404162),
                    c = m(c, u, d, h, r[p + 12], 7, 1804603682),
                    h = m(h, c, u, d, r[p + 13], 12, -40341101),
                    d = m(d, h, c, u, r[p + 14], 17, -1502002290),
                    c = b(c, u = m(u, d, h, c, r[p + 15], 22, 1236535329), d, h, r[p + 1], 5, -165796510),
                    h = b(h, c, u, d, r[p + 6], 9, -1069501632),
                    d = b(d, h, c, u, r[p + 11], 14, 643717713),
                    u = b(u, d, h, c, r[p + 0], 20, -373897302),
                    c = b(c, u, d, h, r[p + 5], 5, -701558691),
                    h = b(h, c, u, d, r[p + 10], 9, 38016083),
                    d = b(d, h, c, u, r[p + 15], 14, -660478335),
                    u = b(u, d, h, c, r[p + 4], 20, -405537848),
                    c = b(c, u, d, h, r[p + 9], 5, 568446438),
                    h = b(h, c, u, d, r[p + 14], 9, -1019803690),
                    d = b(d, h, c, u, r[p + 3], 14, -187363961),
                    u = b(u, d, h, c, r[p + 8], 20, 1163531501),
                    c = b(c, u, d, h, r[p + 13], 5, -1444681467),
                    h = b(h, c, u, d, r[p + 2], 9, -51403784),
                    d = b(d, h, c, u, r[p + 7], 14, 1735328473),
                    c = g(c, u = b(u, d, h, c, r[p + 12], 20, -1926607734), d, h, r[p + 5], 4, -378558),
                    h = g(h, c, u, d, r[p + 8], 11, -2022574463),
                    d = g(d, h, c, u, r[p + 11], 16, 1839030562),
                    u = g(u, d, h, c, r[p + 14], 23, -35309556),
                    c = g(c, u, d, h, r[p + 1], 4, -1530992060),
                    h = g(h, c, u, d, r[p + 4], 11, 1272893353),
                    d = g(d, h, c, u, r[p + 7], 16, -155497632),
                    u = g(u, d, h, c, r[p + 10], 23, -1094730640),
                    c = g(c, u, d, h, r[p + 13], 4, 681279174),
                    h = g(h, c, u, d, r[p + 0], 11, -358537222),
                    d = g(d, h, c, u, r[p + 3], 16, -722521979),
                    u = g(u, d, h, c, r[p + 6], 23, 76029189),
                    c = g(c, u, d, h, r[p + 9], 4, -640364487),
                    h = g(h, c, u, d, r[p + 12], 11, -421815835),
                    d = g(d, h, c, u, r[p + 15], 16, 530742520),
                    c = y(c, u = g(u, d, h, c, r[p + 2], 23, -995338651), d, h, r[p + 0], 6, -198630844),
                    h = y(h, c, u, d, r[p + 7], 10, 1126891415),
                    d = y(d, h, c, u, r[p + 14], 15, -1416354905),
                    u = y(u, d, h, c, r[p + 5], 21, -57434055),
                    c = y(c, u, d, h, r[p + 12], 6, 1700485571),
                    h = y(h, c, u, d, r[p + 3], 10, -1894986606),
                    d = y(d, h, c, u, r[p + 10], 15, -1051523),
                    u = y(u, d, h, c, r[p + 1], 21, -2054922799),
                    c = y(c, u, d, h, r[p + 8], 6, 1873313359),
                    h = y(h, c, u, d, r[p + 15], 10, -30611744),
                    d = y(d, h, c, u, r[p + 6], 15, -1560198380),
                    u = y(u, d, h, c, r[p + 13], 21, 1309151649),
                    c = y(c, u, d, h, r[p + 4], 6, -145523070),
                    h = y(h, c, u, d, r[p + 11], 10, -1120210379),
                    d = y(d, h, c, u, r[p + 2], 15, 718787259),
                    u = y(u, d, h, c, r[p + 9], 21, -343485551),
                    c = c + f >>> 0,
                    u = u + v >>> 0,
                    d = d + w >>> 0,
                    h = h + _ >>> 0
                }
                return n.endian([c, u, d, h])
            }
            )._ff = function(e, t, r, n, s, i, a) {
                var o = e + (t & r | ~t & n) + (s >>> 0) + a;
                return (o << i | o >>> 32 - i) + t
            }
            ,
            o._gg = function(e, t, r, n, s, i, a) {
                var o = e + (t & n | r & ~n) + (s >>> 0) + a;
                return (o << i | o >>> 32 - i) + t
            }
            ,
            o._hh = function(e, t, r, n, s, i, a) {
                var o = e + (t ^ r ^ n) + (s >>> 0) + a;
                return (o << i | o >>> 32 - i) + t
            }
            ,
            o._ii = function(e, t, r, n, s, i, a) {
                var o = e + (r ^ (t | ~n)) + (s >>> 0) + a;
                return (o << i | o >>> 32 - i) + t
            }
            ,
            o._blocksize = 16,
            o._digestsize = 16,
            e.exports = function(e, t) {
                if (null == e)
                    throw new Error("Illegal argument " + e);
                var r = n.wordsToBytes(o(e, t));
                return t && t.asBytes ? r : t && t.asString ? a.bytesToString(r) : n.bytesToHex(r)
            }
        },
        28651: function(e) {
            "use strict";
            e.exports = new Promise(( (e, t) => {
                if (window.__MF_INITED__personalCabinet)
                    return t(new Error("MF already inited"));
                fetch("https://static-basket-01.wbbasket.ru/vol0/data/prodversion-front.json", {
                    cache: "no-cache"
                }).then((e => e.json())).then((t => {
                    const r = t["personal-cabinet"];
                    let n = r?.prod;
                    const s = "v1.0.6"
                      , i = t => {
                        const r = document.createElement("script")
                          , n = "https://static-basket-01.wbbasket.ru/vol2/personal-cabinet/dist/" + t + "-personalCabinet-remoteEntry.js";
                        r.src = n,
                        r.onload = () => {
                            console.group("personal-cabinet"),
                            console.info("Version:", t),
                            console.groupEnd();
                            e({
                                get: e => window.personalCabinet.get(e),
                                init: (...e) => {
                                    try {
                                        return window.personalCabinet.init(...e)
                                    } catch {
                                        console.log("remote container already initialized")
                                    }
                                }
                            })
                        }
                        ,
                        r.onerror = () => {
                            t !== s && s ? (console.warn("Falling back to", s),
                            i(s)) : console.error("Failed to load remote for personal-cabinet")
                        }
                        ,
                        document.head.appendChild(r),
                        window.__MF_INITED__personalCabinet = !0
                    }
                    ;
                    i(n)
                }
                ))
            }
            ))
        },
        51799: function(e, t, r) {
            "use strict";
            r.d(t, {
                C: function() {
                    return l
                },
                a: function() {
                    return o
                }
            });
            const n = () => window || globalThis || {}
              , s = e => {
                const t = `instancer_${e}`;
                return Symbol.for(t)
            }
              , i = e => {
                const t = (e => {
                    const t = s(e);
                    return n()[t] || null
                }
                )(e);
                if (!t)
                    throw new Error(`Can't get ${e} instance`);
                return t
            }
              , a = "analitic"
              , o = () => i(a)
              , l = e => {
                ( (e, t) => {
                    const r = s(e);
                    n()[r] = t
                }
                )(a, e)
            }
        },
        74929: function(e, t, r) {
            "use strict";
            r.d(t, {
                B: function() {
                    return l
                },
                c: function() {
                    return o
                }
            });
            const n = () => window || globalThis || {}
              , s = e => {
                const t = `instancer_${e}`;
                return Symbol.for(t)
            }
              , i = e => {
                const t = (e => {
                    const t = s(e);
                    return n()[t] || null
                }
                )(e);
                if (!t)
                    throw new Error(`Can't get ${e} instance`);
                return t
            }
              , a = "authService"
              , o = () => i(a)
              , l = e => {
                ( (e, t) => {
                    const r = s(e);
                    n()[r] = t
                }
                )(a, e)
            }
        },
        86291: function(e, t, r) {
            "use strict";
            r.d(t, {
                V: function() {
                    return c
                }
            });
            var n = Object.defineProperty
              , s = (e, t, r) => ( (e, t, r) => t in e ? n(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            const i = () => window || globalThis || {}
              , a = e => {
                const t = `instancer_${e}`;
                return Symbol.for(t)
            }
            ;
            class o {
                constructor() {
                    s(this, "volStaticHostCdn")
                }
                setImgFunc(e, t) {
                    "function" != typeof t || "staticbasket_route_map" !== e || (this.volStaticHostCdn = t)
                }
                volStaticHost(e, t=!1) {
                    if (this.volStaticHostCdn) {
                        const r = this.volStaticHostCdn(e, t);
                        if (r)
                            return r
                    }
                    let r;
                    const n = e;
                    switch (!0) {
                    case n >= 0 && n <= 4:
                        r = "01";
                        break;
                    case n >= 20 && n <= 35:
                        r = "02";
                        break;
                    case n >= 40 && n <= 54:
                        r = "03";
                        break;
                    case n >= 70 && n <= 113:
                        r = "04";
                        break;
                    case n >= 114 && n <= 125:
                        r = "05";
                        break;
                    case n >= 126 && n <= 137:
                        r = "06";
                        break;
                    case n >= 138 && n <= 149:
                        r = "07";
                        break;
                    default:
                        r = "08"
                    }
                    return window.wb.settings.secondHost ? `${window.wb.settings.secondHost}/static-basket-${r}.wbbasket/vol${n}` : `static-basket-${r}.wbbasket.ru/vol${n}`
                }
            }
            const l = "ImgServer"
              , c = () => {
                let e = (e => {
                    const t = a(e);
                    return i()[t] || null
                }
                )(l);
                return e || (e = new o,
                u(e)),
                e
            }
              , u = e => {
                ( (e, t) => {
                    const r = a(e);
                    i()[r] = t
                }
                )(l, e)
            }
        },
        78590: function(e, t, r) {
            "use strict";
            r.r(t),
            r.d(t, {
                dayNameFromDate: function() {
                    return c
                },
                divideNumberBySeparator: function() {
                    return d
                },
                formatDate: function() {
                    return a
                },
                formatPrice: function() {
                    return l
                },
                minFiscalPriceInCurrency: function() {
                    return o
                },
                priceWithCurrencyV2: function() {
                    return u
                },
                urlSiteStatic: function() {
                    return i
                },
                urlStaticBasket: function() {
                    return s
                }
            });
            var n = r(86291);
            const s = (e, t, r=!1) => e.startsWith("//") || e.startsWith("http") ? e : `https://${(0,
            n.V)().volStaticHost(t, r)}/${e}`
              , i = (e, t=!1) => (e = e.startsWith("//") || e.startsWith("http") ? e : `${window.wb.settings.siteStaticPath}${e}`,
            "/" === window.wb.settings.siteStaticPath ? e : s(e, 2, t));
            function a(e, t) {
                return new Date(e).format(t)
            }
            function o(e) {
                switch (e.toUpperCase()) {
                case "UZS":
                    return 100;
                case "AMD":
                case "KZT":
                    return 10;
                case "BYN":
                case "TJS":
                case "GEL":
                case "USD":
                    return .01;
                default:
                    return 1
                }
            }
            function l(e, t, r) {
                let n = d(e) + (t ? `,${t}` : "");
                return "" !== r && (n += " " + (r || window.wb.settings.currencyShortName)),
                n
            }
            function c(e, t=!1, r=!1, n=!1, s=!1, i=!1) {
                if (!e)
                    return;
                const a = new Date
                  , o = e instanceof Date ? e : new Date(e)
                  , l = a.daysBetween(o)
                  , c = window.wb.i18n.t;
                return 0 === l ? s ? c("common.today").toLowerCase() : c("common.today") : 1 === l ? s ? c("common.tomorrow").toLowerCase() : c("common.tomorrow") : 2 === l && t ? s ? c("common.dayAfterTomorrow").toLowerCase() : c("common.dayAfterTomorrow") : l >= 3 && l <= 7 && n ? window.wb.i18n.plural("common.time.afterDays", {
                    count: l
                }) : r ? o.getFullYear() !== a.getFullYear() ? o.format("d MMMM yyyy") : o.format("d MMMM") : i ? o.format("d MMM") : o.format("d MMMM")
            }
            function u(e, t) {
                var r, n, s, i;
                let {showEmpty: a=!1, withCoins: c=!1, iso: u=null, sale: d=0, currency: h=null, omitZeroCents: p=!1} = t;
                if (!a && (!e || isNaN(Number(e))))
                    return "";
                const m = Number(e).toString().split(".");
                c = c && Number(e) % 1 != 0;
                const b = h ? null == (n = null == (r = window.wb.currencies) ? void 0 : r.getIsoBySign) ? void 0 : n.call(r, h) : "string" == typeof u ? u.toUpperCase() : WbSpaModel.prototype.$user.getCurrency();
                h || (h = null == (i = null == (s = window.wb.currencies) ? void 0 : s.info[b]) ? void 0 : i.sign);
                const g = null != d ? d : 0;
                if (g > 0) {
                    e = Number(e);
                    let t = Math.ceil(e * (g / 100));
                    const r = o(h);
                    t = t < r ? -r : -Math.ceil(t / r) * r,
                    e += t,
                    m[0] = `${e}`
                }
                if ("RUB" === b && !c)
                    return l(m[0], null, h || "₽");
                let y, f = Number(e);
                if ("BYN" === b || "GEL" === b || "USD" === b || "RUB" === b && c) {
                    f = Math.floor(Number(e)),
                    y = "00";
                    const t = Number(e).toString().replace(",", ".").split(".")[1];
                    (null == t ? void 0 : t.length) > 0 && (y = t.substring(0, 2),
                    1 == y.length && (y += "0")),
                    p && ["BYN", "USD"].includes(b) && "00" === y && (y = ""),
                    h = "BYN" === b ? "р." : "USD" === b ? "$" : "GEL" === b ? "₾" : "₽"
                } else
                    "AMD" !== b && "KZT" !== b || "string" == typeof e ? "UZS" === b ? f = 100 * parseInt(String(Number(e) / 100)) : "KGS" === b ? f = Math.floor(Number(e)) : "TJS" === b && (f = Math.round(100 * Number(e)) / 100) : f = 10 * parseInt(String(Number(e) / 10));
                return l(f, y, h)
            }
            function d(e, t) {
                return Object.is(e, -0) ? "-0" : null == e ? void 0 : e.toString().replace(/\B(?=(\d{3})+(?!\d))/g, t || " ")
            }
        },
        48263: function(e, t, r) {
            "use strict";
            r.r(t),
            r.d(t, {
                HTTP_CODES: function() {
                    return a
                },
                getHttpClient: function() {
                    return l
                },
                setHttpClient: function() {
                    return c
                }
            });
            const n = () => window || globalThis || {}
              , s = e => {
                const t = `instancer_${e}`;
                return Symbol.for(t)
            }
              , i = e => {
                const t = (e => {
                    const t = s(e);
                    return n()[t] || null
                }
                )(e);
                if (!t)
                    throw new Error(`Can't get ${e} instance`);
                return t
            }
              , a = {
                SUCCESS: 200,
                CREATED: 201,
                ACCEPTED: 202,
                NO_CONTENT: 204,
                BAD_REQUEST: 400,
                UNAUTHORIZED: 401,
                FORBIDDEN: 403,
                NOT_FOUND: 404,
                METHOD_NOT_ALLOWED: 405,
                CONFLICT: 409,
                INTERNAL_SERVER_ERROR: 500,
                NOT_IMPLEMENTED: 501,
                SERVICE_UNAVAILABLE: 503,
                ALREADY_REPORTED: 208,
                INVALID_TOKEN: 498
            }
              , o = "httpClient"
              , l = () => i(o)
              , c = e => {
                ( (e, t) => {
                    const r = s(e);
                    n()[r] = t
                }
                )(o, e)
            }
        },
        68076: function(e, t, r) {
            "use strict";
            r.r(t),
            r.d(t, {
                getInstance: function() {
                    return i
                },
                getSaveInstance: function() {
                    return a
                },
                setInstance: function() {
                    return o
                }
            });
            const n = () => window || globalThis || {}
              , s = e => {
                const t = `instancer_${e}`;
                return Symbol.for(t)
            }
              , i = e => {
                const t = s(e);
                return n()[t] || null
            }
              , a = e => {
                const t = i(e);
                if (!t)
                    throw new Error(`Can't get ${e} instance`);
                return t
            }
              , o = (e, t) => {
                const r = s(e);
                n()[r] = t
            }
        },
        83804: function(e, t, r) {
            "use strict";
            r.d(t, {
                e: function() {
                    return s
                },
                o: function() {
                    return i
                },
                r: function() {
                    return n
                }
            });
            const n = e => "string" == typeof e
              , s = e => void 0 === e
              , i = e => 0 === Object.keys(e).length
        },
        98534: function(e, t, r) {
            "use strict";
            r.r(t),
            r.d(t, {
                Observable: function() {
                    return a
                },
                observify: function() {
                    return o
                }
            });
            var n = r(83804)
              , s = Object.defineProperty
              , i = (e, t, r) => ( (e, t, r) => t in e ? s(e, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: r
            }) : e[t] = r)(e, "symbol" != typeof t ? t + "" : t, r);
            class a {
                constructor(e={}) {
                    return i(this, "observers", new Map),
                    i(this, "updateInProgress", !1),
                    i(this, "pendingNotifications", new Set),
                    this.checkForConflicts(e),
                    (0,
                    n.o)(e) || Object.entries(e).forEach(( ([e,t]) => {
                        this.defineObservableProperty(e, t)
                    }
                    )),
                    new Proxy(this,{
                        set: (e, t, r) => {
                            if (!(0,
                            n.r)(t))
                                throw new TypeError("Property must be a string, got " + typeof t);
                            return e[t] !== r && (e[t] = r,
                            this.updateInProgress ? this.pendingNotifications.add(t) : this.notifyObservers(t)),
                            !0
                        }
                        ,
                        get: (e, t) => {
                            if (t)
                                return e[t]
                        }
                    })
                }
                subscribe(e, t) {
                    const r = String(e);
                    this.observers.has(r) || this.observers.set(r, new Set),
                    t(),
                    this.observers.get(r).add(t)
                }
                unsubscribe(e, t) {
                    var r;
                    const n = String(e);
                    null == (r = this.observers.get(n)) || r.delete(t)
                }
                update(e) {
                    this.updateInProgress = !0,
                    Object.entries(e).forEach(( ([e,t]) => {
                        this[e] = t
                    }
                    )),
                    this.updateInProgress = !1,
                    this.pendingNotifications.forEach((e => this.notifyObservers(e))),
                    this.pendingNotifications.clear()
                }
                notifyObservers(e) {
                    var t;
                    const r = String(e);
                    null == (t = this.observers.get(r)) || t.forEach((e => e()))
                }
                checkForConflicts(e) {
                    const t = Object.getOwnPropertyNames(Object.getPrototypeOf(this))
                      , r = Object.keys(e).filter((e => t.includes(e)));
                    r.length > 0 && console.warn(`Observable initialization warning: The following keys in the initial state conflict with properties in the prototype: ${r.join(", ")}.`)
                }
                defineObservableProperty(e, t) {
                    Object.defineProperty(this, e, {
                        configurable: !0,
                        enumerable: !0,
                        writable: !0,
                        value: t
                    })
                }
            }
            const o = (e={}) => new a(e)
        },
        8379: function(e, t, r) {
            "use strict";
            r.d(t, {
                O9: function() {
                    return i
                },
                rI: function() {
                    return n
                },
                tH: function() {
                    return s
                }
            });
            const n = e => "function" == typeof e && "prototype"in e && e.prototype.constructor === e;
            const s = (e, t) => e instanceof t;
            function i(e) {
                return null != e
            }
        }
    }, __webpack_module_cache__ = {}, leafPrototypes, getProto, inProgress, dataWebpackPrefix, chunkMapping, idToExternalAndNameMapping;
    function __webpack_require__(e) {
        var t = __webpack_module_cache__[e];
        if (void 0 !== t)
            return t.exports;
        var r = __webpack_module_cache__[e] = {
            id: e,
            exports: {}
        };
        return __webpack_modules__[e].call(r.exports, r, r.exports, __webpack_require__),
        r.exports
    }
    __webpack_require__.m = __webpack_modules__,
    __webpack_require__.c = __webpack_module_cache__,
    __webpack_require__.amdO = {},
    __webpack_require__.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        }
        : function() {
            return e
        }
        ;
        return __webpack_require__.d(t, {
            a: t
        }),
        t
    }
    ,
    getProto = Object.getPrototypeOf ? function(e) {
        return Object.getPrototypeOf(e)
    }
    : function(e) {
        return e.__proto__
    }
    ,
    __webpack_require__.t = function(e, t) {
        if (1 & t && (e = this(e)),
        8 & t)
            return e;
        if ("object" == typeof e && e) {
            if (4 & t && e.__esModule)
                return e;
            if (16 & t && "function" == typeof e.then)
                return e
        }
        var r = Object.create(null);
        __webpack_require__.r(r);
        var n = {};
        leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
        for (var s = 2 & t && e; "object" == typeof s && !~leafPrototypes.indexOf(s); s = getProto(s))
            Object.getOwnPropertyNames(s).forEach((function(t) {
                n[t] = function() {
                    return e[t]
                }
            }
            ));
        return n.default = function() {
            return e
        }
        ,
        __webpack_require__.d(r, n),
        r
    }
    ,
    __webpack_require__.d = function(e, t) {
        for (var r in t)
            __webpack_require__.o(t, r) && !__webpack_require__.o(e, r) && Object.defineProperty(e, r, {
                enumerable: !0,
                get: t[r]
            })
    }
    ,
    __webpack_require__.f = {},
    __webpack_require__.e = function(e) {
        return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t, r) {
            return __webpack_require__.f[r](e, t),
            t
        }
        ), []))
    }
    ,
    __webpack_require__.u = function(e) {
        return "site/app/" + ({
            316: "orderThankYou-page",
            977: "subscription-viewModel",
            1031: "yourCertificates-viewModel",
            2495: "giftCertificates-page",
            2945: "myCommunications-components-CommunicationTable-viewModel",
            3423: "recommendationsCatalog-viewModel",
            4681: "b2bLanding-viewModel",
            5172: "giftCertificates-viewModel",
            6427: "activeOrders-viewModel",
            7392: "Popover-component",
            11025: "polyfill-formdata",
            11271: "brandlist-viewModel",
            11599: "customerReceipt-page",
            13492: "favoriteBrands-viewModel",
            17034: "myFeedbacks-components-QuestionsContent-viewModel",
            17877: "favoriteGoods-page",
            19689: "btnAdvertising",
            19824: "purchasesCertificates-viewModel",
            20387: "myFeedbacks-components-CommentsContent-viewModel",
            22131: "purchasesCertificates-page",
            22591: "emergencyAidLanding-page",
            23597: "personalCabinet-components-sessions-viewModel",
            24176: "notificationPopup",
            25151: "lazy-component",
            25201: "confirmEmail-page",
            25803: "c2cQuestions-viewModel",
            25961: "TooltipNext-component",
            28540: "brandlistByLetter-viewModel",
            29107: "feedbacks-page",
            31168: "tooltip",
            31835: "archivePositions-page",
            31887: "generalPreloader-component",
            33307: "b2bLanding-page",
            33681: "sellerCatalog-page",
            35196: "myFeedbacks-components-WaitingFeedbacksContent-viewModel",
            35349: "c2cProduct-viewModel",
            35417: "swiper-component",
            36480: "InfoCurrencyPopup",
            36572: "otpuskaemCenyLanding-page",
            36662: "activeOrders-page",
            37005: "myFeedbacks-page",
            38200: "personalCabinet-viewModel",
            38709: "c2cOrders-viewModel",
            41812: "emergencyAidLanding-viewModel",
            42369: "requisitesListPopup",
            42520: "categoryCatalog-page",
            42857: "myFeedbacks-components-AnswerComponent-viewModel",
            44914: "sessionsPopup",
            44917: "orderThankYou-viewModel",
            45050: "brandlist-page",
            46141: "myCommunications-components-Table-viewModel",
            46859: "WbWalletPopup",
            48829: "generalPreloader",
            48898: "infiniteScroll-component",
            49758: "Popover",
            49916: "polyfill-string-replaceall",
            50463: "myCommunications-viewModel",
            51249: "fixedPanel-component",
            52059: "btnAdvertising-component",
            52933: "WbWallet-page",
            52949: "giftCertificatesThankYou-viewModel",
            53626: "questions-page",
            54130: "polyfill-array-findlast",
            54352: "feedbacks-viewModel",
            55122: "confirmEmail-viewModel",
            55868: "c2cProduct-page",
            56467: "ActionNotificationsFactory",
            56543: "favoriteBrands-page",
            57751: "wlArrived-page",
            57778: "sellerCatalog-viewModel",
            59822: "favoriteGoods-viewModel",
            59995: "promotions-page",
            60757: "otpuskaemCenyLanding-viewModel",
            62045: "polyfill-svgclasslist",
            62201: "services-page",
            62242: "recommendationsCatalog-page",
            62858: "services-viewModel",
            63043: "polyfill-abortcontroller",
            63946: "mo-icons",
            64210: "react-app",
            64278: "tooltip-component",
            64849: "tracking-popup",
            64900: "chanceOnLanding-viewModel",
            64903: "AccountEditSettingsPopup",
            65097: "searchByImage-page",
            65273: "categoryCatalog-viewModel",
            66814: "wbWallet-viewModel",
            67691: "personalCabinet-page",
            68984: "personalCabinet-components-notifications-viewModel",
            70198: "myFeedbacks-viewModel",
            71927: "ua-parser",
            74212: "polyfill-array-flatmap",
            74466: "myCommunications-page",
            74736: "searchCatalog-page",
            75440: "c2cAd-page",
            76279: "brandlistByLetter-page",
            76392: "archivePositions-viewModel",
            76924: "giftCertificatesThankYou-page",
            76979: "swiper",
            77208: "error404-viewModel",
            77842: "premiumSubscriptionService",
            78300: "wlArrived-viewModel",
            78397: "offersOtherSellers-viewModel",
            78842: "searchByImage-viewModel",
            79207: "offersOtherSellers-page",
            81504: "subscription-page",
            81774: "mo-ui",
            82071: "RuProfilePopup",
            86127: "chanceOnLanding-page",
            89016: "customCharges-popup",
            89362: "react-vendors",
            89671: "myFeedbacks-components-FeedbacksMini-viewModel",
            90050: "courierRoute-popup",
            90258: "Floater",
            90561: "c2cAd-viewModel",
            92641: "searchCatalog-viewModel",
            93148: "modal-component",
            94243: "TooltipNext",
            95211: "error404-page",
            95338: "favoriteGoodsModel",
            95892: "personalCabinet-components-requisites-viewModel",
            96042: "modal",
            96977: "polyfill-weblocks",
            97498: "yourCertificates-page",
            97544: "promotions-viewModel",
            98084: "Floater-component",
            98542: "bigBanners-component",
            99015: "questions-viewModel",
            99058: "banners-component",
            99452: "c2cOrders-page"
        }[e] || e) + "." + {
            316: "9057158c0963b82c39b7",
            977: "535d637bf2620d326b26",
            1031: "24041b270f55f8a39b29",
            2495: "9c2df6f83d631656789b",
            2945: "c6b2259b7fc8b60e741b",
            3423: "5baf05665bc7a14e263e",
            4681: "6d65f9ae774729f579f9",
            5172: "331a059fe544cd167434",
            5977: "5527f36b37a4e1455a6a",
            6427: "4d7bca7a9af1051c751c",
            7392: "edd60e3da421df53076b",
            7573: "ae9cc4ed9ea15576af06",
            11025: "408a8110ebf175421753",
            11271: "69054a48bee68d993ad3",
            11599: "478e28e15f478176cc9d",
            13492: "eadff30f1ed7260a94d3",
            13808: "4e61f2bcb05e2b609809",
            14935: "3dfe98461d699efcb10c",
            17034: "03215f75698308eb608b",
            17728: "378b66e15a5ae5906b20",
            17877: "d724044ce62d7e384bb6",
            19689: "167471167aca49389dfc",
            19824: "1005892af256368274a9",
            20387: "9a796f07a2d740101bab",
            20395: "16d0064138be99cd726c",
            20939: "545f855d907519717af8",
            21132: "e8018cd1b4199e131b5c",
            22131: "a3176a93cc01e841617b",
            22342: "d6637f2870347d26b371",
            22591: "593b3252540843ff701c",
            23071: "01e7a34a69c36ccc12d9",
            23468: "4e814dbe5b4b861c9572",
            23597: "8e2c5826f20af11cfa16",
            24176: "c9b7ba656971f8b12d10",
            25020: "475123b7c99dd7eeffff",
            25151: "c61a65814d44348bdffe",
            25201: "50c0e025ce176eafd03a",
            25253: "d81958eddbea8f711ca5",
            25803: "58c8adbe5a70346e21b4",
            25961: "0b615f27c00ef22d0af9",
            27186: "6b969ab9ee73e9863ec1",
            28288: "909b4e290bc9eb37ac9e",
            28540: "1930c64fd03a0c8be865",
            28862: "d02b063e235277408638",
            29107: "4337938810a47e4e7b49",
            29954: "ba78d936d2b658461bb1",
            30946: "7b74b475accd6a585b96",
            31168: "d3c40ca219762702f771",
            31573: "dbe28344755ab15cbb61",
            31835: "d402dd2c250c7aed5bc5",
            31887: "f1f9533e167a4dfca1b9",
            32889: "09da4f0fab335d0e364d",
            33307: "fa5f746999811b22425b",
            33681: "d0f73f6f7a391a377d9e",
            35196: "d86e0ce6504d5dfdd4ff",
            35349: "3c1bc4375444d77c62a4",
            35417: "e63b98a8aac9047a4212",
            35746: "2570f37e5c64ffa262cf",
            36480: "c9200e2866990b30c8ac",
            36572: "b6eab7b29370cd11a31d",
            36662: "ac5b2084bae84f96a9b6",
            37005: "3b59e8487650242fbfc3",
            38200: "f5cafaa40df4f8f87bb5",
            38709: "fc89611e3055b547bcac",
            41812: "ac3688503eeb9a0575c1",
            42044: "ca158f774eba89b8da25",
            42162: "e98affebaa0c6635c1d8",
            42369: "e06e4db05b00d100425b",
            42520: "204f59a0e25b12111d93",
            42857: "d5ce1be2f5914643c714",
            43685: "00e54d25973f599f82de",
            43938: "b51244f6646c4e9622e9",
            44914: "730eecbab0f2e788f205",
            44917: "c8f9dfca1f494a29d6d1",
            45050: "947c462369a006dd1624",
            46141: "a0b2f2f64c6e87a8fc22",
            46859: "39407611ec213111f22b",
            47066: "4c5c605ba3833f81f055",
            48829: "a5602de778664cd0f08c",
            48867: "171a1fad4296086bd25a",
            48898: "323fac95da1de1e2c444",
            49758: "a26d8505d15479600a31",
            49916: "1869dc48385befb7a2e2",
            50463: "d4d12b3da6b3ce17c08d",
            51249: "28f783001cd6db498409",
            52059: "de50f561cdb6a701378c",
            52933: "b1d050dd9b944afc8ebb",
            52949: "18cd668ddcedf278764e",
            53626: "32d05a295c38b26a05a2",
            54130: "47bd5721078b4c1a4f4a",
            54352: "18616d3bfe080b8281d4",
            55122: "7c0817f1e37f406ae765",
            55270: "5fb456f88323cca29e7a",
            55868: "16169afd41ef7ad9cde1",
            55971: "1ba960ea5c38b1b6d3e0",
            56033: "f4312a5d90084cc7f9e5",
            56467: "51c2e2b4a4b25ee6d2f3",
            56543: "d7e5efa5077742d99ca3",
            57751: "9d31d93dfdad94104019",
            57778: "c412bb6834a494d2b326",
            58602: "00cea0f7dc7d4a56fbc3",
            59822: "36d209fa2163a8734201",
            59995: "d8fc534231bfc54e7168",
            60486: "cc798a34c40d76cabfc1",
            60757: "6167afb0f55f2f83369c",
            62045: "2db7f648f00f4988f303",
            62201: "696b95969cb29913493f",
            62242: "24e229687c42c9447797",
            62858: "0b7a0f27309dfecfdc0a",
            62906: "20af7489e9984da41fe3",
            63043: "714d00f5b3b6c1eb7c5c",
            63946: "bc851cf3ad5be42ed010",
            64073: "1c5376e2decfbfae8120",
            64210: "f037b130b611967a1ae9",
            64278: "39c7a2f6bb0f060f9500",
            64849: "4ad9711041e7410c9a13",
            64900: "dcc3bdb1950bf8123167",
            64903: "ea6a5a5cef22e2c24bad",
            65097: "65fea2c75de56a58e7bb",
            65273: "0c18bd70a0ea090cd682",
            65379: "159c7a0ccdba0f88e774",
            65386: "f72883bfc0ba8f949851",
            66814: "2f06307ac2379800f4ee",
            67691: "fca917f6036111c111f3",
            67774: "152a72296a5683072b5f",
            68107: "45ebacededc2e8d7add9",
            68890: "68fffce34c4beef30c5b",
            68984: "82d5a9ff0c52c303a2bd",
            69203: "29ce58855e833a034bd1",
            70198: "5e6f460381fef879f38a",
            71487: "e81a4dc0b2e6b693a92e",
            71834: "5614ed2df8fdb6601c87",
            71927: "31ebd44ce8cc23e941da",
            73526: "b86fa9ba95b47a094e43",
            74212: "1a7a27ada997d18eca25",
            74466: "f1a8b66ae6addd28c860",
            74736: "70e6c473704b3e3c5ac5",
            75440: "07a39501b84feb3abbc8",
            75669: "7218c5bfa76637b89073",
            76279: "5cc42c98465a0762e53b",
            76392: "8e720cec7ee394159d1c",
            76904: "d2b8983cb71c2e4a66fd",
            76924: "90094a1e2eb4efd82380",
            76979: "70f7b7b9c56b899ca881",
            77208: "d6adc33476aa761ef2fc",
            77842: "f913714acdc3fb605f70",
            78300: "60c01892181ecec0944f",
            78397: "eaddd4d5169e887f5537",
            78842: "deab785af4fcbc585fca",
            79207: "6fe6d916729b331081eb",
            80824: "0f1b626f4dfc4fcc82db",
            81504: "57cbc4f25b65a9de27d8",
            81774: "b3416d7f286bdc29ece3",
            82071: "62f15eec2f9615fbe773",
            85794: "5c36a98aaa0d6e23b1c9",
            86127: "9974e499015d7e8bbc4d",
            87445: "3a40028a17e975dea863",
            87760: "3adeced24399258ad19d",
            89016: "90b7543a533f182f91c7",
            89362: "b7458fa5917b787a966d",
            89671: "16b272c5d5751f2a5874",
            90050: "b2b9ad4437802d136a58",
            90258: "43247e33b8845157e3c9",
            90473: "6df10776595287f1ac90",
            90561: "218b06bb05c4f7008998",
            90568: "12e716e17b22f4cfc3cf",
            90861: "cca0ac6a5ad2a73823fd",
            92641: "c02ed22cb969b6b48029",
            93148: "d9b646fa3441fceb94cf",
            93771: "ba691c4c07c4d755552d",
            94243: "e3d5f19bd047cba9aee0",
            94749: "1bf8d959672db5470f42",
            95211: "ba0bd47dc2596702a36a",
            95338: "1ed5450f9d803121e6ad",
            95892: "bbae7e629fc1ee42cad6",
            96042: "406ef759c8452758b0a6",
            96977: "7f5788eabc3350eed0c7",
            97195: "1c469643e1f00769bbe6",
            97498: "d8e369b1b6b7eb9127b2",
            97544: "6ee5ce305fcac88a980a",
            98084: "2fc85702453e05db282e",
            98415: "2b96ab070190055f9f5e",
            98542: "6e40db17b2c5cc150194",
            99015: "d7b3bbf8c30c7b8ff4d9",
            99058: "20727f9a78c45a1cb2a4",
            99452: "ce02384ba4d24c50146d"
        }[e] + ".js"
    }
    ,
    __webpack_require__.miniCssF = function(e) {
        return "site/app/" + ({
            316: "orderThankYou-page",
            6427: "activeOrders-viewModel",
            17877: "favoriteGoods-page",
            19689: "btnAdvertising",
            22131: "purchasesCertificates-page",
            22591: "emergencyAidLanding-page",
            24176: "notificationPopup",
            29107: "feedbacks-page",
            31168: "tooltip",
            31835: "archivePositions-page",
            33681: "sellerCatalog-page",
            36480: "InfoCurrencyPopup",
            36572: "otpuskaemCenyLanding-page",
            36662: "activeOrders-page",
            37005: "myFeedbacks-page",
            42520: "categoryCatalog-page",
            44914: "sessionsPopup",
            46859: "WbWalletPopup",
            48829: "generalPreloader",
            49758: "Popover",
            52933: "WbWallet-page",
            54352: "feedbacks-viewModel",
            55868: "c2cProduct-page",
            56543: "favoriteBrands-page",
            57751: "wlArrived-page",
            59995: "promotions-page",
            62242: "recommendationsCatalog-page",
            64849: "tracking-popup",
            64903: "AccountEditSettingsPopup",
            65097: "searchByImage-page",
            67691: "personalCabinet-page",
            74736: "searchCatalog-page",
            75440: "c2cAd-page",
            76924: "giftCertificatesThankYou-page",
            76979: "swiper",
            79207: "offersOtherSellers-page",
            81504: "subscription-page",
            82071: "RuProfilePopup",
            86127: "chanceOnLanding-page",
            89016: "customCharges-popup",
            90050: "courierRoute-popup",
            90258: "Floater",
            94243: "TooltipNext",
            95211: "error404-page",
            96042: "modal",
            99452: "c2cOrders-page"
        }[e] || e) + "." + {
            316: "3a4ece462ae8a00d0aec",
            6427: "94c7d3f1b6d38134634e",
            17877: "586ca63a097562abb208",
            19689: "6de2a1b035b915990361",
            22131: "9ff2783eeeaf359d85eb",
            22591: "7e6a950e6abe15668f5a",
            24176: "e56c4583d407b6076d54",
            25253: "cb0f73ddada76a960426",
            29107: "fef6313e7d3061e7cfc8",
            30946: "4ad55bcf43d6ccb911ec",
            31168: "cbdc5c95a5d832ac24de",
            31835: "9ff2783eeeaf359d85eb",
            33681: "30078206bacf653317c5",
            36480: "802f2e669980f88935d4",
            36572: "7e06cf2994064685367b",
            36662: "0fa7c958885d2d84e5a1",
            37005: "cd51e3f540564522d655",
            42044: "d6b3da0519ed2305fadd",
            42520: "1d51eda4b369a2babacf",
            44914: "830950e235007740f1ac",
            46859: "56e7cac469456bd13ff0",
            48829: "afe2ccfd4a81a33f9c85",
            49758: "da8d288482eabfe77f45",
            52933: "0f1524f12d67b003e867",
            54352: "fef6313e7d3061e7cfc8",
            55868: "d8bb62b291c6431e4abc",
            56543: "9ff2783eeeaf359d85eb",
            57751: "48875a4b2c456ddf7ea5",
            59995: "fa2d53468f1dcaa33af7",
            62242: "48875a4b2c456ddf7ea5",
            62906: "f6bbb8c56a9712e99e4b",
            64849: "43845882c987813e2ac9",
            64903: "b33c7d865fca1224963e",
            65097: "19b0cbd1d26b7d17e4cd",
            67691: "2c8eb6cd58f2ef9c924a",
            67774: "00fbd615c4da6507cee4",
            71834: "e90b74852b1237121102",
            74736: "1b985c12cec88f740715",
            75440: "f6caacdfc97c59bca62f",
            75669: "dcc620e549988735de5e",
            76924: "9ff2783eeeaf359d85eb",
            76979: "70fd592ce64877a6f357",
            79207: "52c85387fc4ba0b2a383",
            81504: "7a11674165c77a4bd696",
            82071: "07dcba911439d345b414",
            86127: "8a93be85dc9d451b37b5",
            87760: "33004bae73a177937293",
            89016: "4e0bdd44e09f07b28313",
            90050: "286b4a5d9a6d14f05134",
            90258: "b8be4b617b54126c20b6",
            94243: "524636511a8d97acc837",
            95211: "aa63f2262c1e0475d09e",
            96042: "fc7ba38625439b48a976",
            99452: "698f5783a5773fb3df27"
        }[e] + ".css"
    }
    ,
    __webpack_require__.g = function() {
        if ("object" == typeof globalThis)
            return globalThis;
        try {
            return this || new Function("return this")()
        } catch (e) {
            if ("object" == typeof window)
                return window
        }
    }(),
    __webpack_require__.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }
    ,
    inProgress = {},
    dataWebpackPrefix = "website:",
    __webpack_require__.l = function(e, t, r, n) {
        if (inProgress[e])
            inProgress[e].push(t);
        else {
            var s, i;
            if (void 0 !== r)
                for (var a = document.getElementsByTagName("script"), o = 0; o < a.length; o++) {
                    var l = a[o];
                    if (l.getAttribute("src") == e || l.getAttribute("data-webpack") == dataWebpackPrefix + r) {
                        s = l;
                        break
                    }
                }
            s || (i = !0,
            (s = document.createElement("script")).charset = "utf-8",
            s.timeout = 120,
            __webpack_require__.nc && s.setAttribute("nonce", __webpack_require__.nc),
            s.setAttribute("data-webpack", dataWebpackPrefix + r),
            s.src = e),
            inProgress[e] = [t];
            var c = function(t, r) {
                s.onerror = s.onload = null,
                clearTimeout(u);
                var n = inProgress[e];
                if (delete inProgress[e],
                s.parentNode && s.parentNode.removeChild(s),
                n && n.forEach((function(e) {
                    return e(r)
                }
                )),
                t)
                    return t(r)
            }
              , u = setTimeout(c.bind(null, void 0, {
                type: "timeout",
                target: s
            }), 12e4);
            s.onerror = c.bind(null, s.onerror),
            s.onload = c.bind(null, s.onload),
            i && document.head.appendChild(s)
        }
    }
    ,
    __webpack_require__.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }),
        Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }
    ,
    chunkMapping = {
        11599: [15717, 94686]
    },
    idToExternalAndNameMapping = {
        15717: ["default", "./CustomerReceiptPage", 28651],
        94686: ["default", "./CustomerReceiptViewModel", 28651]
    },
    __webpack_require__.f.remotes = function(e, t) {
        __webpack_require__.o(chunkMapping, e) && chunkMapping[e].forEach((function(e) {
            var r = __webpack_require__.R;
            r || (r = []);
            var n = idToExternalAndNameMapping[e];
            if (!(r.indexOf(n) >= 0)) {
                if (r.push(n),
                n.p)
                    return t.push(n.p);
                var s = function(t) {
                    t || (t = new Error("Container missing")),
                    "string" == typeof t.message && (t.message += '\nwhile loading "' + n[1] + '" from ' + n[2]),
                    __webpack_require__.m[e] = function() {
                        throw t
                    }
                    ,
                    n.p = 0
                }
                  , i = function(e, r, i, a, o, l) {
                    try {
                        var c = e(r, i);
                        if (!c || !c.then)
                            return o(c, a, l);
                        var u = c.then((function(e) {
                            return o(e, a)
                        }
                        ), s);
                        if (!l)
                            return u;
                        t.push(n.p = u)
                    } catch (e) {
                        s(e)
                    }
                }
                  , a = function(e, t, s) {
                    return i(t.get, n[1], r, 0, o, s)
                }
                  , o = function(t) {
                    n.p = 1,
                    __webpack_require__.m[e] = function(e) {
                        e.exports = t()
                    }
                };
                i(__webpack_require__, n[2], 0, 0, (function(e, t, r) {
                    return e ? i(__webpack_require__.I, n[0], 0, e, a, r) : s()
                }
                ), 1)
            }
        }
        ))
    }
    ,
    __webpack_require__.j = 10122,
    function() {
        __webpack_require__.S = {};
        var e = {}
          , t = {};
        __webpack_require__.I = function(r, n) {
            n || (n = []);
            var s = t[r];
            if (s || (s = t[r] = {}),
            !(n.indexOf(s) >= 0)) {
                if (n.push(s),
                e[r])
                    return e[r];
                __webpack_require__.o(__webpack_require__.S, r) || (__webpack_require__.S[r] = {});
                var i = __webpack_require__.S[r]
                  , a = "website"
                  , o = function(e, t, r, n) {
                    var s = i[e] = i[e] || {}
                      , o = s[t];
                    (!o || !o.loaded && (!n != !o.eager ? n : a > o.from)) && (s[t] = {
                        get: r,
                        from: a,
                        eager: !!n
                    })
                }
                  , l = [];
                if ("default" === r)
                    o("@wildberries/components", "1.0.0", (function() {
                        return Promise.all([__webpack_require__.e(25020), __webpack_require__.e(43685), __webpack_require__.e(55971)]).then((function() {
                            return function() {
                                return __webpack_require__(55971)
                            }
                        }
                        ))
                    }
                    )),
                    o("@wildberries/helpers", "1.0.0", (function() {
                        return function() {
                            return __webpack_require__(78590)
                        }
                    }
                    ), 1),
                    o("@wildberries/http-client", "1.0.0", (function() {
                        return function() {
                            return __webpack_require__(48263)
                        }
                    }
                    ), 1),
                    o("@wildberries/instancer", "1.0.0", (function() {
                        return function() {
                            return __webpack_require__(68076)
                        }
                    }
                    ), 1),
                    o("@wildberries/observable", "1.0.0", (function() {
                        return function() {
                            return __webpack_require__(98534)
                        }
                    }
                    ), 1),
                    o("classnames", "2.5.1", (function() {
                        return __webpack_require__.e(93771).then((function() {
                            return function() {
                                return __webpack_require__(93771)
                            }
                        }
                        ))
                    }
                    )),
                    o("react-dom", "18.3.1", (function() {
                        return Promise.all([__webpack_require__.e(89362), __webpack_require__.e(25020), __webpack_require__.e(7573)]).then((function() {
                            return function() {
                                return __webpack_require__(54254)
                            }
                        }
                        ))
                    }
                    )),
                    o("react-i18next", "15.1.3", (function() {
                        return Promise.all([__webpack_require__.e(71487), __webpack_require__.e(25020)]).then((function() {
                            return function() {
                                return __webpack_require__(71487)
                            }
                        }
                        ))
                    }
                    )),
                    o("react-intersection-observer", "9.13.1", (function() {
                        return Promise.all([__webpack_require__.e(25020), __webpack_require__.e(32889)]).then((function() {
                            return function() {
                                return __webpack_require__(32889)
                            }
                        }
                        ))
                    }
                    )),
                    o("react/jsx-runtime", "18.3.1", (function() {
                        return Promise.all([__webpack_require__.e(89362), __webpack_require__.e(25020)]).then((function() {
                            return function() {
                                return __webpack_require__(73859)
                            }
                        }
                        ))
                    }
                    )),
                    o("react", "18.3.1", (function() {
                        return __webpack_require__.e(89362).then((function() {
                            return function() {
                                return __webpack_require__(59811)
                            }
                        }
                        ))
                    }
                    )),
                    function(e) {
                        var t = function(e) {
                            var t;
                            t = "Initialization of sharing external failed: " + e,
                            "undefined" != typeof console && console.warn && console.warn(t)
                        };
                        try {
                            var s = __webpack_require__(e);
                            if (!s)
                                return;
                            var i = function(e) {
                                return e && e.init && e.init(__webpack_require__.S[r], n)
                            };
                            if (s.then)
                                return l.push(s.then(i, t));
                            var a = i(s);
                            if (a && a.then)
                                return l.push(a.catch(t))
                        } catch (e) {
                            t(e)
                        }
                    }(28651);
                return l.length ? e[r] = Promise.all(l).then((function() {
                    return e[r] = 1
                }
                )) : e[r] = 1
            }
        }
    }(),
    function() {
        var e;
        __webpack_require__.g.importScripts && (e = __webpack_require__.g.location + "");
        var t = __webpack_require__.g.document;
        if (!e && t && (t.currentScript && "SCRIPT" === t.currentScript.tagName.toUpperCase() && (e = t.currentScript.src),
        !e)) {
            var r = t.getElementsByTagName("script");
            if (r.length)
                for (var n = r.length - 1; n > -1 && (!e || !/^http(s?):/.test(e)); )
                    e = r[n--].src
        }
        if (!e)
            throw new Error("Automatic publicPath is not supported in this browser");
        e = e.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/"),
        __webpack_require__.p = e + "../../../"
    }(),
    function() {
        var e = function(e) {
            var t = function(e) {
                return e.split(".").map((function(e) {
                    return +e == e ? +e : e
                }
                ))
            }
              , r = /^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(e)
              , n = r[1] ? t(r[1]) : [];
            return r[2] && (n.length++,
            n.push.apply(n, t(r[2]))),
            r[3] && (n.push([]),
            n.push.apply(n, t(r[3]))),
            n
        }
          , t = function(t, r) {
            t = e(t),
            r = e(r);
            for (var n = 0; ; ) {
                if (n >= t.length)
                    return n < r.length && "u" != (typeof r[n])[0];
                var s = t[n]
                  , i = (typeof s)[0];
                if (n >= r.length)
                    return "u" == i;
                var a = r[n]
                  , o = (typeof a)[0];
                if (i != o)
                    return "o" == i && "n" == o || "s" == o || "u" == i;
                if ("o" != i && "u" != i && s != a)
                    return s < a;
                n++
            }
        }
          , r = function(e) {
            var t = e[0]
              , n = "";
            if (1 === e.length)
                return "*";
            if (t + .5) {
                n += 0 == t ? ">=" : -1 == t ? "<" : 1 == t ? "^" : 2 == t ? "~" : t > 0 ? "=" : "!=";
                for (var s = 1, i = 1; i < e.length; i++)
                    s--,
                    n += "u" == (typeof (o = e[i]))[0] ? "-" : (s > 0 ? "." : "") + (s = 2,
                    o);
                return n
            }
            var a = [];
            for (i = 1; i < e.length; i++) {
                var o = e[i];
                a.push(0 === o ? "not(" + l() + ")" : 1 === o ? "(" + l() + " || " + l() + ")" : 2 === o ? a.pop() + " " + a.pop() : r(o))
            }
            return l();
            function l() {
                return a.pop().replace(/^\((.+)\)$/, "$1")
            }
        }
          , n = function(t, r) {
            if (0 in t) {
                r = e(r);
                var s = t[0]
                  , i = s < 0;
                i && (s = -s - 1);
                for (var a = 0, o = 1, l = !0; ; o++,
                a++) {
                    var c, u, d = o < t.length ? (typeof t[o])[0] : "";
                    if (a >= r.length || "o" == (u = (typeof (c = r[a]))[0]))
                        return !l || ("u" == d ? o > s && !i : "" == d != i);
                    if ("u" == u) {
                        if (!l || "u" != d)
                            return !1
                    } else if (l)
                        if (d == u)
                            if (o <= s) {
                                if (c != t[o])
                                    return !1
                            } else {
                                if (i ? c > t[o] : c < t[o])
                                    return !1;
                                c != t[o] && (l = !1)
                            }
                        else if ("s" != d && "n" != d) {
                            if (i || o <= s)
                                return !1;
                            l = !1,
                            o--
                        } else {
                            if (o <= s || u < d != i)
                                return !1;
                            l = !1
                        }
                    else
                        "s" != d && "n" != d && (l = !1,
                        o--)
                }
            }
            var h = []
              , p = h.pop.bind(h);
            for (a = 1; a < t.length; a++) {
                var m = t[a];
                h.push(1 == m ? p() | p() : 2 == m ? p() & p() : m ? n(m, r) : !p())
            }
            return !!p()
        }
          , s = function(e, t) {
            return e && __webpack_require__.o(e, t)
        }
          , i = function(e) {
            return e.loaded = 1,
            e.get()
        }
          , a = function(e) {
            return Object.keys(e).reduce((function(t, r) {
                return e[r].eager && (t[r] = e[r]),
                t
            }
            ), {})
        }
          , o = function(e, r, s, i) {
            var o = i ? a(e[r]) : e[r];
            return (r = Object.keys(o).reduce((function(e, r) {
                return n(s, r) && (!e || t(e, r)) ? r : e
            }
            ), 0)) && o[r]
        }
          , l = function(e, r, n) {
            var s = n ? a(e[r]) : e[r];
            return Object.keys(s).reduce((function(e, r) {
                return !e || !s[e].loaded && t(e, r) ? r : e
            }
            ), 0)
        }
          , c = function(e, t, n, s) {
            return "Unsatisfied version " + n + " from " + (n && e[t][n].from) + " of shared singleton module " + t + " (required " + r(s) + ")"
        }
          , u = function(e, t, n, s, i) {
            var a = e[n];
            return "No satisfying version (" + r(s) + ")" + (i ? " for eager consumption" : "") + " of shared module " + n + " found in shared scope " + t + ".\nAvailable versions: " + Object.keys(a).map((function(e) {
                return e + " from " + a[e].from
            }
            )).join(", ")
        }
          , d = function(e) {
            throw new Error(e)
        }
          , h = function(e) {
            "undefined" != typeof console && console.warn && console.warn(e)
        }
          , p = function(e) {
            return function(t, r, n, s, i) {
                var a = __webpack_require__.I(t);
                return a && a.then && !n ? a.then(e.bind(e, t, __webpack_require__.S[t], r, !1, s, i)) : e(t, __webpack_require__.S[t], r, n, s, i)
            }
        }
          , m = function(e, t, r) {
            return r ? r() : function(e, t) {
                return d("Shared module " + t + " doesn't exist in shared scope " + e)
            }(e, t)
        }
          , b = p((function(e, t, r, n, a, l) {
            if (!s(t, r))
                return m(e, r, l);
            var c = o(t, r, a, n);
            return c ? i(c) : l ? l() : void d(u(t, e, r, a, n))
        }
        ))
          , g = p((function(e, t, r, a, o, u) {
            if (!s(t, r))
                return m(e, r, u);
            var d = l(t, r, a);
            return n(o, d) || h(c(t, r, d, o)),
            i(t[r][d])
        }
        ))
          , y = {}
          , f = {
            25020: function() {
                return g("default", "react", !1, [4, 18, 3, 1], (function() {
                    return __webpack_require__.e(89362).then((function() {
                        return function() {
                            return __webpack_require__(59811)
                        }
                    }
                    ))
                }
                ))
            },
            43685: function() {
                return g("default", "react-i18next", !1, [4, 15, 1, 3], (function() {
                    return Promise.all([__webpack_require__.e(71487), __webpack_require__.e(25020)]).then((function() {
                        return function() {
                            return __webpack_require__(71487)
                        }
                    }
                    ))
                }
                ))
            },
            5521: function() {
                return g("default", "react/jsx-runtime", !1, [0], (function() {
                    return Promise.all([__webpack_require__.e(89362), __webpack_require__.e(25020)]).then((function() {
                        return function() {
                            return __webpack_require__(73859)
                        }
                    }
                    ))
                }
                ))
            },
            47891: function() {
                return b("default", "classnames", !1, [4, 2, 5, 1], (function() {
                    return __webpack_require__.e(93771).then((function() {
                        return function() {
                            return __webpack_require__(93771)
                        }
                    }
                    ))
                }
                ))
            },
            35746: function() {
                return g("default", "react-dom", !1, [4, 18, 3, 1], (function() {
                    return Promise.all([__webpack_require__.e(89362), __webpack_require__.e(29954)]).then((function() {
                        return function() {
                            return __webpack_require__(54254)
                        }
                    }
                    ))
                }
                ))
            },
            28288: function() {
                return b("default", "@wildberries/helpers", !0, [0], (function() {
                    return function() {
                        return __webpack_require__(78590)
                    }
                }
                ))
            },
            50187: function() {
                return g("default", "react/jsx-runtime", !1, [0, 16, 8, 0], (function() {
                    return __webpack_require__.e(89362).then((function() {
                        return function() {
                            return __webpack_require__(73859)
                        }
                    }
                    ))
                }
                ))
            },
            69924: function() {
                return g("default", "react/jsx-runtime", !1, [0, 17, 0, 0], (function() {
                    return __webpack_require__.e(89362).then((function() {
                        return function() {
                            return __webpack_require__(73859)
                        }
                    }
                    ))
                }
                ))
            },
            76904: function() {
                return b("default", "@wildberries/http-client", !0, [0], (function() {
                    return function() {
                        return __webpack_require__(48263)
                    }
                }
                ))
            },
            90568: function() {
                return b("default", "@wildberries/instancer", !0, [0], (function() {
                    return function() {
                        return __webpack_require__(68076)
                    }
                }
                ))
            },
            58602: function() {
                return b("default", "@wildberries/observable", !0, [0], (function() {
                    return function() {
                        return __webpack_require__(98534)
                    }
                }
                ))
            },
            48867: function() {
                return b("default", "react-intersection-observer", !1, [4, 9, 13, 1], (function() {
                    return __webpack_require__.e(55270).then((function() {
                        return function() {
                            return __webpack_require__(32889)
                        }
                    }
                    ))
                }
                ))
            },
            31573: function() {
                return b("default", "@wildberries/components", !1, [0], (function() {
                    return __webpack_require__.e(55971).then((function() {
                        return function() {
                            return __webpack_require__(55971)
                        }
                    }
                    ))
                }
                ))
            }
        };
        [90568, 28288, 76904, 58602].forEach((function(e) {
            __webpack_require__.m[e] = function(t) {
                y[e] = 0,
                delete __webpack_require__.c[e];
                var r = f[e]();
                if ("function" != typeof r)
                    throw new Error("Shared module is not available for eager consumption: " + e);
                t.exports = r()
            }
        }
        ));
        var v = {
            20395: [5521, 47891],
            25020: [25020],
            28288: [28288],
            31573: [31573],
            35746: [35746],
            43685: [43685],
            48867: [48867],
            58602: [58602],
            60486: [50187, 69924],
            76904: [76904],
            90568: [90568]
        }
          , w = {};
        __webpack_require__.f.consumes = function(e, t) {
            __webpack_require__.o(v, e) && v[e].forEach((function(e) {
                if (__webpack_require__.o(y, e))
                    return t.push(y[e]);
                if (!w[e]) {
                    var r = function(t) {
                        y[e] = 0,
                        __webpack_require__.m[e] = function(r) {
                            delete __webpack_require__.c[e],
                            r.exports = t()
                        }
                    };
                    w[e] = !0;
                    var n = function(t) {
                        delete y[e],
                        __webpack_require__.m[e] = function(r) {
                            throw delete __webpack_require__.c[e],
                            t
                        }
                    };
                    try {
                        var s = f[e]();
                        s.then ? t.push(y[e] = s.then(r).catch(n)) : r(s)
                    } catch (e) {
                        n(e)
                    }
                }
            }
            ))
        }
    }(),
    function() {
        if ("undefined" != typeof document) {
            var e = function(e) {
                return new Promise((function(t, r) {
                    var n = __webpack_require__.miniCssF(e)
                      , s = __webpack_require__.p + n;
                    if (function(e, t) {
                        for (var r = document.getElementsByTagName("link"), n = 0; n < r.length; n++) {
                            var s = (a = r[n]).getAttribute("data-href") || a.getAttribute("href");
                            if ("stylesheet" === a.rel && (s === e || s === t))
                                return a
                        }
                        var i = document.getElementsByTagName("style");
                        for (n = 0; n < i.length; n++) {
                            var a;
                            if ((s = (a = i[n]).getAttribute("data-href")) === e || s === t)
                                return a
                        }
                    }(n, s))
                        return t();
                    !function(e, t, r, n, s) {
                        var i = document.createElement("link");
                        i.rel = "stylesheet",
                        i.type = "text/css",
                        __webpack_require__.nc && (i.nonce = __webpack_require__.nc),
                        i.onerror = i.onload = function(r) {
                            if (i.onerror = i.onload = null,
                            "load" === r.type)
                                n();
                            else {
                                var a = r && r.type
                                  , o = r && r.target && r.target.href || t
                                  , l = new Error("Loading CSS chunk " + e + " failed.\n(" + a + ": " + o + ")");
                                l.name = "ChunkLoadError",
                                l.code = "CSS_CHUNK_LOAD_FAILED",
                                l.type = a,
                                l.request = o,
                                i.parentNode && i.parentNode.removeChild(i),
                                s(l)
                            }
                        }
                        ,
                        i.href = t,
                        r ? r.parentNode.insertBefore(i, r.nextSibling) : document.head.appendChild(i)
                    }(e, s, null, t, r)
                }
                ))
            }
              , t = {
                10122: 0,
                49864: 0,
                69869: 0,
                9848: 0,
                43400: 0,
                25307: 0,
                39202: 0,
                93487: 0,
                55278: 0,
                58602: 0,
                13808: 0,
                28288: 0,
                76904: 0,
                90568: 0,
                5977: 0
            };
            __webpack_require__.f.miniCss = function(r, n) {
                t[r] ? n.push(t[r]) : 0 !== t[r] && {
                    316: 1,
                    6427: 1,
                    17877: 1,
                    19689: 1,
                    22131: 1,
                    22591: 1,
                    24176: 1,
                    25253: 1,
                    29107: 1,
                    30946: 1,
                    31168: 1,
                    31835: 1,
                    33681: 1,
                    36480: 1,
                    36572: 1,
                    36662: 1,
                    37005: 1,
                    42044: 1,
                    42520: 1,
                    44914: 1,
                    46859: 1,
                    48829: 1,
                    49758: 1,
                    52933: 1,
                    54352: 1,
                    55868: 1,
                    56543: 1,
                    57751: 1,
                    59995: 1,
                    62242: 1,
                    62906: 1,
                    64849: 1,
                    64903: 1,
                    65097: 1,
                    67691: 1,
                    67774: 1,
                    71834: 1,
                    74736: 1,
                    75440: 1,
                    75669: 1,
                    76924: 1,
                    76979: 1,
                    79207: 1,
                    81504: 1,
                    82071: 1,
                    86127: 1,
                    87760: 1,
                    89016: 1,
                    90050: 1,
                    90258: 1,
                    94243: 1,
                    95211: 1,
                    96042: 1,
                    99452: 1
                }[r] && n.push(t[r] = e(r).then((function() {
                    t[r] = 0
                }
                ), (function(e) {
                    throw delete t[r],
                    e
                }
                )))
            }
        }
    }(),
    function() {
        __webpack_require__.b = document.baseURI || self.location.href;
        var e = {
            10122: 0,
            49864: 0,
            69869: 0,
            9848: 0,
            43400: 0,
            25307: 0,
            39202: 0,
            93487: 0,
            55278: 0,
            58602: 0,
            13808: 0,
            28288: 0,
            76904: 0,
            90568: 0,
            5977: 0
        };
        __webpack_require__.f.j = function(t, r) {
            var n = __webpack_require__.o(e, t) ? e[t] : void 0;
            if (0 !== n)
                if (n)
                    r.push(n[2]);
                else if (/^(2(0395|5020|8288)|3(1168|1573|5746)|4(88(29|67)|2044|3685|9758)|7(69(04|79)|5669)|9(0258|0568|4243|6042)|11599|19689|58602|60486)$/.test(t))
                    e[t] = 0;
                else {
                    var s = new Promise((function(r, s) {
                        n = e[t] = [r, s]
                    }
                    ));
                    r.push(n[2] = s);
                    var i = __webpack_require__.p + __webpack_require__.u(t)
                      , a = new Error;
                    __webpack_require__.l(i, (function(r) {
                        if (__webpack_require__.o(e, t) && (0 !== (n = e[t]) && (e[t] = void 0),
                        n)) {
                            var s = r && ("load" === r.type ? "missing" : r.type)
                              , i = r && r.target && r.target.src;
                            a.message = "Loading chunk " + t + " failed.\n(" + s + ": " + i + ")",
                            a.name = "ChunkLoadError",
                            a.type = s,
                            a.request = i,
                            n[1](a)
                        }
                    }
                    ), "chunk-" + t, t)
                }
        }
        ;
        var t = function(t, r) {
            var n, s, i = r[0], a = r[1], o = r[2], l = 0;
            if (i.some((function(t) {
                return 0 !== e[t]
            }
            ))) {
                for (n in a)
                    __webpack_require__.o(a, n) && (__webpack_require__.m[n] = a[n]);
                if (o)
                    o(__webpack_require__)
            }
            for (t && t(r); l < i.length; l++)
                s = i[l],
                __webpack_require__.o(e, s) && e[s] && e[s][0](),
                e[s] = 0
        }
          , r = self.webpackChunkwebsite = self.webpackChunkwebsite || [];
        r.forEach(t.bind(null, 0)),
        r.push = t.bind(null, r.push.bind(r))
    }(),
    __webpack_require__.nc = void 0,
    __webpack_require__(31226),
    __webpack_require__(68387);
    var __webpack_exports__ = __webpack_require__(76737)
}
)();
